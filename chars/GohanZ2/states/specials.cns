;==============================================
; CNS File for Gohan Z2 by Team Z2
; Special and EX moves
;==============================================

;===========================================================================
; <<<<< KI BLAST SHOOTING >>>>>
; LP	= state 1000  >>>>>  state 1001
; MP	= state 1003  >>>>>  state 1004
; HP	= state 1006  >>>>>  state 1007
; EX	= state 1050
;===========================================================================

;Light ki blast 1
[Statedef 1000]
type    = S
movetype= A
physics = N
juggle  = 7
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2
poweradd = 35

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
id = 90010006

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = (ifElse(P2DisT x < -12, Facing = 1, Facing = -1))
id = 90010104

[State 220, gethit gut ?]
type = VarSet
trigger1 = AnimElemtime(4)=0
var(14) = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=3
value = 3,5+random%3
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=3
value = 1001,0
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=3
value = 3,220+random%9
channel = 0

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(3)=0
anim = 1206+(var(2)=0)
id = 1206
pos = -25,3
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .7,.7

[State 800, VarSet]
type = VarSet
trigger1 = !time
var(3) = 0
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000200) || NumExplod(90000205)
var(3) = 1
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000210) || NumExplod(90000215)
var(3) = 2
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000220) || NumExplod(90000225)
var(3) = 3
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90030104) || NumExplod(90030101))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90030006) || NumExplod(90030003))))
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225) 
var(3) = 4
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 5
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90030104) || NumExplod(90030101))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90030006) || NumExplod(90030003))))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 6

[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy && ceil(random<100+(AILevel**2/64.0))
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = IfElse(random<700,3,IfElse(random<200,2,1))
[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy
trigger1 = power>1200+(AILevel**2/64.0) && random<40+(AILevel**2/64.0)
var(3) = 4+random%3

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemtime(4)=0
value = 10,0

[state 1215, Flash FX]
type = null;explod
trigger1 = AnimElemtime(4)=0
anim = 1005
id = 1005
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = 5
persistent = 0
ignorehitpause = 1
removeongethit = 1

[State 1000, lkb]
type = Helper
helpertype = normal
trigger1 = AnimElemtime(4)=0
name = "kiblastL1"
postype = P1
pos = 60,-67
ownpal = 1
stateno = 1010
id = 1010

[State 1000, Lvl 2 Chou Masenko];Lvl 1/2 Chou Masenko
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 6 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;Destiny mode
trigger1 = var(18)=0 ;power>=1000 && var(18)=0
value = 2300;IfElse(Power>=2000,2300,2330)
ctrl = 0
[State 1000, Lvl 1/2 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 6 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = IfElse(Power>=2000,2030,2000)
ctrl = 0


[State 1000, Lvl 1 Chou Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 4 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;Destiny mode
trigger1 = var(18)=0;power>=1000 && var(18)=0
value = 2330
ctrl = 0
[State 1000, Lvl 1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 4 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = 2000
ctrl = 0










[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 5
value = IfElse(power >=500,1050,1007)
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 1
value = 1001
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 2
value = 1004
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 3
value = 1007
ctrl = 0

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
;Light ki blast 2
[Statedef 1001]
type    = S
movetype= A
physics = N
juggle  = 7
velset = 0,0
anim = 1001
ctrl = 0
sprpriority = 2
poweradd = 10

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
id = 90010006

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = (ifElse(P2DisT x < -12, Facing = 1, Facing = -1))
id = 90010104

[State 220, gethit gut ?]
type = VarSet
trigger1 = AnimElemtime(3)=0
var(14) = 1

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=3
value = 3,5+random%3
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=3
value = 1001,1
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=3
value = 3,220+random%9
channel = 0

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(3)=0
anim = 1206+(var(2)=0)
id = 1206
pos = -25,3
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .7,.7

[State 800, VarSet]
type = VarSet
trigger1 = !time
var(3) = 0
[State 800, VarSet]
type = VarSet
trigger1 = time > 14 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90030104) || NumExplod(90030101))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90030006) || NumExplod(90030003))))
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225)
var(3) = 1
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 2
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90030104) || NumExplod(90030101))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90030006) || NumExplod(90030003))))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 3

[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 14 && numenemy && ceil(random<100+(AILevel**2/64.0))
triggerall = power>=1000
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = 1
[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy && ceil(random<50+(AILevel**2/64.0))
triggerall = power>=500
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = IfElse(power>=1000,3,2)

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemtime(3)=0
value = 10,0

[state 1215, Flash FX]
type = null ;explod
trigger1 = AnimElemtime(3)=0
anim = 1006
id = 1006
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = 5
persistent = 0
ignorehitpause = 1
removeongethit = 1

[State 1000, lkb]
type = Helper
helpertype = normal
trigger1 = AnimElemtime(3)=0
name = "kiblastL2"
postype = P1
pos = 60,-67  ;-62
ownpal = 1
stateno = 1010
id = 1011

[State 1000, Lvl 2 Chou Masenko];Lvl 2/1 Chou Masenko
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 3 ;2qcb2p
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 1 ;Destiny mode
trigger1 = var(18)=0 ;power>=1000 && var(18)=0
value = 2300;IfElse(Power>=2000,2300,2330)
ctrl = 0
[State 1000, Lvl 2/1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 3 ;2qcb2p
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 0 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = IfElse(Power>=2000,2030,2000)
ctrl = 0

[State 1000, Lvl 1 Chou Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbp
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 1 ;Destiny mode
trigger1 = var(18)=0 ;power>=1000 && var(18)=0
value = 2330
ctrl = 0
[State 1000, Lvl 1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbp
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 0 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = 2000
ctrl = 0

[State 1000, EX Ki Blast]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 2
triggerall = AnimElem = 4, >= 6
trigger1 = power>=500
value = 1050
ctrl = 0

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=======================================
;Medium ki blast 1
[Statedef 1003]
type    = S
movetype= A
physics = N
juggle  = 7
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2
poweradd = 35

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
id = 90010006

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = (ifElse(P2DisT x < -12, Facing = 1, Facing = -1))
id = 90010104

[State 220, gethit gut ?]
type = VarSet
trigger1 = AnimElemtime(4)=0
var(14) = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=3
value = 3,5+random%3
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=3
value = 1001,0
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=3
value = 3,220+random%9
channel = 0

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(4)=0
anim = 1206+(var(2)=0)
id = 1206
pos = -25,3
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[State 800, VarSet]
type = VarSet
trigger1 = !time
var(3) = 0
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000200) || NumExplod(90000205)
var(3) = 1
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000210) || NumExplod(90000215)
var(3) = 2
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000220) || NumExplod(90000225)
var(3) = 3
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90030104) || NumExplod(90030101))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90030006) || NumExplod(90030003))))
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225)
var(3) = 4
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 5
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90030104) || NumExplod(90030101))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90030006) || NumExplod(90030003))))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 6

[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy && ceil(random<100+(AILevel**2/64.0))
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = IfElse(random<700,3,IfElse(random<200,2,1))
[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy
trigger1 = power>1200+(AILevel**2/64.0) && random<40+(AILevel**2/64.0)
var(3) = 4+random%3

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemtime(4)=0
value = 10,0

[state 1215, Flash FX]
type = null ;explod
trigger1 = AnimElemtime(4)=0
anim = 1005
id = 1005
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = 5
persistent = 0
ignorehitpause = 1
removeongethit = 1

[State 1000, mkb]
type = Helper
helpertype = normal
trigger1 = AnimElemtime(4)=0
name = "kiblastM1"
postype = P1
pos = 60,-67
ownpal = 1
stateno = 1011
id = 1013

[State 1000, Lvl 2 Chou Masenko];Lvl 1/2 Chou Masenko
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 6 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;Destiny mode
trigger1 = var(18)=0 ;power>=1000 && var(18)=0
value = 2300;IfElse(Power>=2000,2300,2330)
ctrl = 0
[State 1000, Lvl 1/2 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 6 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = IfElse(Power>=2000,2030,2000)
ctrl = 0


[State 1000, Lvl 1 Chou Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 4 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;Destiny mode
trigger1 = var(18)=0;power>=1000 && var(18)=0
value = 2330
ctrl = 0
[State 1000, Lvl 1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 4 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = 2000
ctrl = 0




[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 5
value = IfElse(power >=500,1050,1007)
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 1
value = 1001
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 2
value = 1004
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 3
value = 1007
ctrl = 0

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
;Medium ki blast 2
[Statedef 1004]
type    = S
movetype= A
physics = N
juggle  = 7
velset = 0,0
anim = 1001
ctrl = 0
sprpriority = 2
poweradd = 10

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
id = 90010006

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = (ifElse(P2DisT x < -12, Facing = 1, Facing = -1))
id = 90010104

[State 220, gethit gut ?]
type = VarSet
trigger1 = AnimElemtime(3)=0
var(14) = 1

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=3
value = 3,5+random%3
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=3
value = 1001,1
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=3
value = 3,220+random%9
channel = 0

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(3)=0
anim = 1206+(var(2)=0)
id = 1206
pos = -25,3
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[State 800, VarSet]
type = VarSet
trigger1 = !time
var(3) = 0
[State 800, VarSet]
type = VarSet
trigger1 = time > 14 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90030104) || NumExplod(90030101))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90030006) || NumExplod(90030003))))
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225) 
var(3) = 1
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 2
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90030104) || NumExplod(90030101))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90030006) || NumExplod(90030003))))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 3

[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 14 && numenemy && ceil(random<100+(AILevel**2/64.0))
triggerall = power>=1000
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = 1
[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy && ceil(random<50+(AILevel**2/64.0))
triggerall = power>=500
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = IfElse(power>=1000,3,2)

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemtime(3)=0
value = 10,0

[state 1215, Flash FX]
type = null ;explod
trigger1 = AnimElemtime(3)=0
anim = 1006
id = 1006
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = 5
persistent = 0
ignorehitpause = 1
removeongethit = 1

[State 1000, mkb]
type = Helper
helpertype = normal
trigger1 = AnimElemtime(3)=0
name = "kiblastM2"
postype = P1
pos = 60,-67  ;-62
ownpal = 1
stateno = 1011
id = 1014

[State 1000, Lvl 2 Chou Masenko];Lvl 2/1 Chou Masenko
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 3 ;2qcb2p
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 1 ;Destiny mode
trigger1 = var(18)=0 ;power>=1000 && var(18)=0
value = 2300;IfElse(Power>=2000,2300,2330)
ctrl = 0
[State 1000, Lvl 2/1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 3 ;2qcb2p
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 0 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = IfElse(Power>=2000,2030,2000)
ctrl = 0

[State 1000, Lvl 1 Chou Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbp
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 1 ;Destiny mode
trigger1 = var(18)=0 ;power>=1000 && var(18)=0
value = 2330
ctrl = 0
[State 1000, Lvl 1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbp
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 0 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = 2000
ctrl = 0

[State 1000, EX Ki Blast]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 2
triggerall = AnimElem = 4, >= 6
trigger1 = power>=500
value = 1050
ctrl = 0

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=======================================
;Strong ki blast 1
[Statedef 1006]
type    = S
movetype= A
physics = N
juggle  = 7
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2
poweradd = 35

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
id = 90010006

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = (ifElse(P2DisT x < -12, Facing = 1, Facing = -1))
id = 90010104

[State 220, gethit gut ?]
type = VarSet
trigger1 = AnimElemtime(4)=0
var(14) = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=3
value = 3,5+random%3
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=3
value = 1001,0
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=3
value = 3,220+random%9
channel = 0

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(4)=0
anim = 1206+(var(2)=0)
id = 1206
pos = -25,3
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .9,.9

[State 800, VarSet]
type = VarSet
trigger1 = !time
var(3) = 0
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000200) || NumExplod(90000205)
var(3) = 1
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000210) || NumExplod(90000215)
var(3) = 2
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000220) || NumExplod(90000225)
var(3) = 3
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90030104) || NumExplod(90030101))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90030006) || NumExplod(90030003))))
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225) 
var(3) = 4
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 5
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90030104) || NumExplod(90030101))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90030006) || NumExplod(90030003))))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 6

[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy && ceil(random<100+(AILevel**2/64.0))
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = IfElse(random<700,3,IfElse(random<200,2,1))
[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy
trigger1 = power>1200+(AILevel**2/64.0) && random<40+(AILevel**2/64.0)
var(3) = 4+random%3

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemtime(4)=0
value = 10,0

[state 1215, Flash FX]
type = null ;explod
trigger1 = AnimElemtime(4)=0
anim = 1005
id = 1005
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = 5
persistent = 0
ignorehitpause = 1
removeongethit = 1

[State 1000, skb]
type = Helper
helpertype = normal
trigger1 = AnimElemtime(4)=0
name = "kiblastS1"
postype = P1
pos = 60,-67
ownpal = 1
stateno = 1012
ID = 1016

[State 1000, Lvl 2 Chou Masenko];Lvl 1/2 Chou Masenko
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 6 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;Destiny mode
trigger1 = var(18)=0 ;power>=1000 && var(18)=0
value = 2300;IfElse(Power>=2000,2300,2330)
ctrl = 0
[State 1000, Lvl 1/2 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 6 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = IfElse(Power>=2000,2030,2000)
ctrl = 0


[State 1000, Lvl 1 Chou Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 4 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;Destiny mode
trigger1 = var(18)=0;power>=1000 && var(18)=0
value = 2330
ctrl = 0
[State 1000, Lvl 1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 4 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = 2000
ctrl = 0



[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 5
value = IfElse(power >=500,1050,1007)
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 1
value = 1001
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 2
value = 1004
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 3
value = 1007
ctrl = 0

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;------------------------------------
;Strong ki blast 2
[Statedef 1007]
type    = S
movetype= A
physics = N
juggle  = 7
velset = 0,0
anim = 1001
ctrl = 0
sprpriority = 2
poweradd = 10

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
id = 90010006

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = (ifElse(P2DisT x < -12, Facing = 1, Facing = -1))
id = 90010104

[State 220, gethit gut ?]
type = VarSet
trigger1 = AnimElemtime(3)=0
var(14) = 1

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=3
value = 3,5+random%3
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=3
value = 1001,1
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=3
value = 3,220+random%9
channel = 0

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(3)=0
anim = 1206+(var(2)=0)
id = 1206
pos = -25,3
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .9,.9

[State 800, VarSet]
type = VarSet
trigger1 = !time
var(3) = 0
[State 800, VarSet]
type = VarSet
trigger1 = time > 14 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90030104) || NumExplod(90030101))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90030006) || NumExplod(90030003))))
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225)
var(3) = 1
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 2
[State 800, VarSet]
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90030104) || NumExplod(90030101))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90030006) || NumExplod(90030003))))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 3

[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 14 && numenemy && ceil(random<100+(AILevel**2/64.0))
triggerall = power>=1000
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = 1
[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy && ceil(random<50+(AILevel**2/64.0))
triggerall = power>=500
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = IfElse(power>=1000,3,2)

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemtime(3)=0
value = 10,0

[state 1215, Flash FX]
type = null ;explod
trigger1 = AnimElemtime(3)=0
anim = 1006
id = 1006
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = 5
persistent = 0
ignorehitpause = 1
removeongethit = 1

[State 1000, skb]
type = Helper
helpertype = normal
trigger1 = AnimElemtime(3)=0
name = "kiblastS2"
postype = P1
pos = 60,-67  ;-62
ownpal = 1
stateno = 1012
id = 1017

[State 1000, Lvl 2 Chou Masenko];Lvl 2/1 Chou Masenko
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 3 ;2qcb2p
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 1 ;Destiny mode
trigger1 = var(18)=0 ;power>=1000 && var(18)=0
value = 2300;IfElse(Power>=2000,2300,2330)
ctrl = 0
[State 1000, Lvl 2/1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 3 ;2qcb2p
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 0 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = IfElse(Power>=2000,2030,2000)
ctrl = 0

[State 1000, Lvl 1 Chou Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbp
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 1 ;Destiny mode
trigger1 = var(18)=0 ;power>=1000 && var(18)=0
value = 2330
ctrl = 0
[State 1000, Lvl 1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbp
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 0 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = 2000
ctrl = 0

[State 1000, EX Ki Blast]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 2
triggerall = AnimElem = 4, >= 6
trigger1 = power>=500
value = 1050
ctrl = 0



[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;===========================================================================
; <<<<< SOARING DRAGON KICK >>>>>
; LK	= state 1100, anim 1100
; MK	= state 1100, anim 1101
; HK	= state 1100, anim 1102
; EX	= state 1150, anim 1102
; Land	= state 1105
;===========================================================================

;Soaring Dragon Kick
[Statedef 1100]
type		= S
movetype		= A
physics		= N
ctrl		= 0
velset		= 0,0
poweradd		= 20
sprpriority	= 3
juggle		= 5
anim                = 1100

[State 0, VarSet]
type = VarSet
trigger1 = !Time
var(5) = 0

[State 1100, VoiceJPN]
type		= PlaySnd
triggerall	= var(55)=0		;Voice=Japan
trigger1		= AnimElem=3
value		= 1100,0
channel		= 0

[State 1100, VoiceENG]
type		= PlaySnd
triggerall	= var(55)=1		;Voice=English
trigger1		= AnimElem=3
value		= 1100,100+(random%5)
channel		= 0

[State 1100, VoiceCUSTOM]
type		= PlaySnd
triggerall	= var(55)=2		;Voice=Custom Corey Holland
trigger1		= AnimElem=3
value		= 1500,random%3   ;1100,200
channel		= 0

[State 1100, Aerial state type]
type		= StateTypeSet
trigger1		= AnimElem=4 
statetype		= A
ignorehitpause	= 1

[State 1100, Velocity set]
type		= VelSet
trigger1		= AnimElem = 4
x		= 3
y		= -4.7
ignorehitpause	= 1

[State 1100, Velocity set]
type		= VelSet
trigger1		= AnimElem = 6 && anim = 1100
trigger2		= AnimElem = 12 && anim = 1101
trigger3		= AnimElem = 20 && anim = 1102
x		= 1
ignorehitpause	= 1

[State 1100, Velocity add]
type		= VelAdd
trigger1		= AnimElemtime(6) > 0 && anim = 1100
trigger2		= AnimElemtime(12) > 0 && anim = 1101
trigger3		= AnimElemtime(20) > 0 && anim = 1102
y		= 0.75

[State 1100, 1];Dragon Roar
type		= PlaySnd
trigger1		= AnimElem = 3
trigger2		= AnimElem = 10 && (anim = [1101,1102])
trigger3		= AnimElem = 18 && anim = 1102
value		= 1200,0
volume		= 10
;[State 1100, 1];Kick
;type		= PlaySnd
;trigger1		= AnimElem = 3
;trigger2		= AnimElem = 10 && (anim = [1101,1102])
;trigger3		= AnimElem = 18 && anim = 1102
;value		= 0, 5


[State 1100, Hit]	;first kick
type		= HitDef
trigger1		= AnimElem = 4
attr		= A, SA
hitflag		= MAF
guardflag		= MA
animtype		= Back
priority		= 7, Hit
damage		= Ceil(IfElse(fvar(11) * (65-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (65-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;75-30*(var(5)=1)-37*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
;pausetime	= 11,14
pausetime		= IfElse(var(5)>=1,5,11),IfElse(var(5)>=1,8,14)
;guard.pausetime	= 10,15
guard.pausetime	= IfElse(var(5)>=1,6,10),IfElse(var(5)>=1,9,15)
;sparkno		= s7030
sparkno		= s IfElse(var(5)>=1,7020,7030)
guard.sparkno	= s7000
sparkxy		= -10, -75
;hitsound		= s5,5
hitsound		= s5,IfElse(var(5)>=1,4,5)
guardsound	= S6,0
p2facing		= 1
ground.type	= High
ground.slidetime	= 12
ground.hittime	= 12
ground.velocity	= -2,-10
air.velocity	= -2,-8
fall		= 1
fall.recover	= 0
getpower		= IfElse(P2MoveType = H,40,140), 35
givepower		= 35,35
envshake.time	= 16
envshake.freq	= 60
envshake.ampl	= 4
yaccel		= 0.5
[State 1100, Hit]	;second kick
type		= HitDef
trigger1		= AnimElem = 11
attr		= A, SA
hitflag		= MAF
guardflag		= MA
animtype		= Back
priority		= 7, Hit
damage		= Ceil(IfElse(fvar(11) * (45-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (45-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;75-30*(var(5)=1)-37*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
;pausetime	= 11,14
pausetime		= IfElse(var(5)=2,5,11),IfElse(var(5)=2,8,14)
;guard.pausetime	= 10,15
guard.pausetime	= IfElse(var(5)=2,6,10),IfElse(var(5)=2,9,15)
;sparkno		= s7030
sparkno		= s IfElse(var(5)=2,7020,7030)
guard.sparkno	= s7000
sparkxy		= -10, -75
;hitsound		= s5,5
hitsound		= s5,IfElse(var(5)=2,4,5)
guardsound	= S6,0
p2facing		= 1
ground.type	= High
ground.slidetime	= 12
ground.hittime	= 12
ground.velocity	= -2,-10
air.velocity	= -2, IfElse(var(5) = 1,floor(-11.5),-8) ;if it's the medium version, it throws the enemy higher
fall		= 1
fall.recover	= 0
getpower		= IfElse(P2MoveType = H,40,140), 35
givepower		= 35,35
envshake.time	= 16
envshake.freq	= 60
envshake.ampl	= 4
yaccel		= 0.5
id		= 1099
[State 1100, Hit]	;third kick
type		= HitDef
trigger1		= AnimElem = 19
attr		= A, SA
hitflag		= MAF
guardflag		= MA
animtype		= Back
priority		= 7, Hit
damage		= Ceil(IfElse(fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;75-30*(var(5)=1)-37*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
pausetime		= 11,14
sparkno		= s7030
guard.sparkno	= s7000
sparkxy		= -10, -75
hitsound		= s5,5
guardsound	= S6,0
p2facing		= 1
ground.type	= High
ground.slidetime	= 12
ground.hittime	= 12
ground.velocity	= -2,-10
air.velocity	= -2,-8
fall		= 1
fall.recover	= 0
getpower		= IfElse(P2MoveType = H,40,140), 35
givepower		= 35,35
envshake.time	= 16
envshake.freq	= 60
envshake.ampl	= 4
yaccel		= 0.5

[State 1100, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)>0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 0, AttackDist]
type = AttackDist
trigger1 = Anim = 1100
trigger1 = AnimElemTime(6) >= 0
trigger2 = Anim = 1101
trigger2 = AnimElemTime(13) >= 0
trigger3 = Anim = 1102
trigger3 = AnimElemTime(20) >= 0
value = 0

[State 1100, 7]
type		= ChangeState
Triggerall	= AnimElemtime(5) > 0 
trigger1		= Vel Y + Pos Y >= 0
value		= 1105
ctrl		= 0

;Soaring Dragon Kick
[Statedef 1101]
type		= S
movetype		= A
physics		= N
ctrl		= 0
velset		= 0,0
poweradd		= 20
sprpriority	= 3
juggle		= 5
anim                = 1101

[State 0, VarSet]
type = VarSet
trigger1 = !Time
var(5) = 1

[State 1100, VoiceJPN]
type		= PlaySnd
triggerall	= var(55)=0		;Voice=Japan
trigger1		= AnimElem=3
value		= 1100,0
channel		= 0

[State 1100, VoiceENG]
type		= PlaySnd
triggerall	= var(55)=1		;Voice=English
trigger1		= AnimElem=3
value		= 1100,100+(random%5)
channel		= 0

[State 1100, VoiceCUSTOM]
type		= PlaySnd
triggerall	= var(55)=2		;Voice=Custom Corey Holland
trigger1		= AnimElem=3
value		= 1500,random%3   ;1100,200
channel		= 0

[State 1100, Aerial state type]
type		= StateTypeSet
trigger1		= AnimElem=4 
statetype		= A
ignorehitpause	= 1

[State 1100, Velocity set]
type		= VelSet
trigger1		= AnimElem = 4
x		= 3
y		= -4.7
ignorehitpause	= 1

[State 1100, Velocity set]
type		= VelSet
trigger1		= AnimElem = 6 && anim = 1100
trigger2		= AnimElem = 12 && anim = 1101
trigger3		= AnimElem = 20 && anim = 1102
x		= 1
ignorehitpause	= 1

[State 1100, Velocity add]
type		= VelAdd
trigger1		= AnimElemtime(6) > 0 && anim = 1100
trigger2		= AnimElemtime(12) > 0 && anim = 1101
trigger3		= AnimElemtime(20) > 0 && anim = 1102
y		= 0.75

[State 1100, 1];Dragon Roar
type		= PlaySnd
trigger1		= AnimElem = 3
trigger2		= AnimElem = 10 && (anim = [1101,1102])
trigger3		= AnimElem = 18 && anim = 1102
value		= 1200,0
volume		= 10
;[State 1100, 1];Kick
;type		= PlaySnd
;trigger1		= AnimElem = 3
;trigger2		= AnimElem = 10 && (anim = [1101,1102])
;trigger3		= AnimElem = 18 && anim = 1102
;value		= 0, 5


[State 1100, Hit]	;first kick
type		= HitDef
trigger1		= AnimElem = 4
attr		= A, SA
hitflag		= MAF
guardflag		= MA
animtype		= Back
priority		= 7, Hit
damage		= Ceil(IfElse(fvar(11) * (65-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (65-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;75-30*(var(5)=1)-37*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
;pausetime	= 11,14
pausetime		= IfElse(var(5)>=1,5,11),IfElse(var(5)>=1,8,14)
;guard.pausetime	= 10,15
guard.pausetime	= IfElse(var(5)>=1,6,10),IfElse(var(5)>=1,9,15)
;sparkno		= s7030
sparkno		= s IfElse(var(5)>=1,7020,7030)
guard.sparkno	= s7000
sparkxy		= -10, -75
;hitsound		= s5,5
hitsound		= s5,IfElse(var(5)>=1,4,5)
guardsound	= S6,0
p2facing		= 1
ground.type	= High
ground.slidetime	= 12
ground.hittime	= 12
ground.velocity	= -2,-10
air.velocity	= -2,-8
fall		= 1
fall.recover	= 0
getpower		= IfElse(P2MoveType = H,40,140), 35
givepower		= 35,35
envshake.time	= 16
envshake.freq	= 60
envshake.ampl	= 4
yaccel		= 0.5
[State 1100, Hit]	;second kick
type		= HitDef
trigger1		= AnimElem = 11
attr		= A, SA
hitflag		= MAF
guardflag		= MA
animtype		= Back
priority		= 7, Hit
damage		= Ceil(IfElse(fvar(11) * (45-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (45-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;75-30*(var(5)=1)-37*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
;pausetime	= 11,14
pausetime		= IfElse(var(5)=2,5,11),IfElse(var(5)=2,8,14)
;guard.pausetime	= 10,15
guard.pausetime	= IfElse(var(5)=2,6,10),IfElse(var(5)=2,9,15)
;sparkno		= s7030
sparkno		= s IfElse(var(5)=2,7020,7030)
guard.sparkno	= s7000
sparkxy		= -10, -75
;hitsound		= s5,5
hitsound		= s5,IfElse(var(5)=2,4,5)
guardsound	= S6,0
p2facing		= 1
ground.type	= High
ground.slidetime	= 12
ground.hittime	= 12
ground.velocity	= -2,-10
air.velocity	= -2, IfElse(var(5) = 1,floor(-11.5),-8) ;if it's the medium version, it throws the enemy higher
fall		= 1
fall.recover	= 0
getpower		= IfElse(P2MoveType = H,40,140), 35
givepower		= 35,35
envshake.time	= 16
envshake.freq	= 60
envshake.ampl	= 4
yaccel		= 0.5
id		= 1099
[State 1100, Hit]	;third kick
type		= HitDef
trigger1		= AnimElem = 19
attr		= A, SA
hitflag		= MAF
guardflag		= MA
animtype		= Back
priority		= 7, Hit
damage		= Ceil(IfElse(fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;75-30*(var(5)=1)-37*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
pausetime		= 11,14
sparkno		= s7030
guard.sparkno	= s7000
sparkxy		= -10, -75
hitsound		= s5,5
guardsound	= S6,0
p2facing		= 1
ground.type	= High
ground.slidetime	= 12
ground.hittime	= 12
ground.velocity	= -2,-10
air.velocity	= -2,-8
fall		= 1
fall.recover	= 0
getpower		= IfElse(P2MoveType = H,40,140), 35
givepower		= 35,35
envshake.time	= 16
envshake.freq	= 60
envshake.ampl	= 4
yaccel		= 0.5

[State 1100, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)>0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

;cannot ground recover
[State 0, Explod]
type = Explod
trigger1 = !NumExplod(95052000)
trigger1 = MoveHit = 1
anim = 1
ID = 95052000
removetime = -1

[State 0, AttackDist]
type = AttackDist
trigger1 = Anim = 1100
trigger1 = AnimElemTime(6) >= 0
trigger2 = Anim = 1101
trigger2 = AnimElemTime(13) >= 0
trigger3 = Anim = 1102
trigger3 = AnimElemTime(20) >= 0
value = 0

[State 1100, 7]
type		= ChangeState
Triggerall	= AnimElemtime(5) > 0 
trigger1		= Vel Y + Pos Y >= 0
value		= 1105
ctrl		= 0

;Soaring Dragon Kick
[Statedef 1102]
type		= S
movetype		= A
physics		= N
ctrl		= 0
velset		= 0,0
poweradd		= 20
sprpriority	= 3
juggle		= 5
anim                = 1102

[State 0, VarSet]
type = VarSet
trigger1 = !Time
var(5) = 2

[State 1100, VoiceJPN]
type		= PlaySnd
triggerall	= var(55)=0		;Voice=Japan
trigger1		= AnimElem=3
value		= 1100,0
channel		= 0

[State 1100, VoiceENG]
type		= PlaySnd
triggerall	= var(55)=1		;Voice=English
trigger1		= AnimElem=3
value		= 1100,100+(random%5)
channel		= 0

[State 1100, VoiceCUSTOM]
type		= PlaySnd
triggerall	= var(55)=2		;Voice=Custom Corey Holland
trigger1		= AnimElem=3
value		= 1500,random%3   ;1100,200
channel		= 0

[State 1100, Aerial state type]
type		= StateTypeSet
trigger1		= AnimElem=4 
statetype		= A
ignorehitpause	= 1

[State 1100, Velocity set]
type		= VelSet
trigger1		= AnimElem = 4
x		= 3
y		= -4.7
ignorehitpause	= 1

[State 1100, Velocity set]
type		= VelSet
trigger1		= AnimElem = 6 && anim = 1100
trigger2		= AnimElem = 12 && anim = 1101
trigger3		= AnimElem = 20 && anim = 1102
x		= 1
ignorehitpause	= 1

[State 1100, Velocity add]
type		= VelAdd
trigger1		= AnimElemtime(6) > 0 && anim = 1100
trigger2		= AnimElemtime(12) > 0 && anim = 1101
trigger3		= AnimElemtime(20) > 0 && anim = 1102
y		= 0.75

[State 1100, 1];Dragon Roar
type		= PlaySnd
trigger1		= AnimElem = 3
trigger2		= AnimElem = 10 && (anim = [1101,1102])
trigger3		= AnimElem = 18 && anim = 1102
value		= 1200,0
volume		= 10
;[State 1100, 1];Kick
;type		= PlaySnd
;trigger1		= AnimElem = 3
;trigger2		= AnimElem = 10 && (anim = [1101,1102])
;trigger3		= AnimElem = 18 && anim = 1102
;value		= 0, 5


[State 1100, Hit]	;first kick
type		= HitDef
trigger1		= AnimElem = 4
attr		= A, SA
hitflag		= MAF
guardflag		= MA
animtype		= Back
priority		= 7, Hit
damage		= Ceil(IfElse(fvar(11) * (65-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (65-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;75-30*(var(5)=1)-37*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
;pausetime	= 11,14
pausetime		= IfElse(var(5)>=1,5,11),IfElse(var(5)>=1,8,14)
;guard.pausetime	= 10,15
guard.pausetime	= IfElse(var(5)>=1,6,10),IfElse(var(5)>=1,9,15)
;sparkno		= s7030
sparkno		= s IfElse(var(5)>=1,7020,7030)
guard.sparkno	= s7000
sparkxy		= -10, -75
;hitsound		= s5,5
hitsound		= s5,IfElse(var(5)>=1,4,5)
guardsound	= S6,0
p2facing		= 1
ground.type	= High
ground.slidetime	= 12
ground.hittime	= 12
ground.velocity	= -2,-10
air.velocity	= -2,-8
fall		= 1
fall.recover	= 0
getpower		= IfElse(P2MoveType = H,40,140), 35
givepower		= 35,35
envshake.time	= 16
envshake.freq	= 60
envshake.ampl	= 4
yaccel		= 0.5
[State 1100, Hit]	;second kick
type		= HitDef
trigger1		= AnimElem = 11
attr		= A, SA
hitflag		= MAF
guardflag		= MA
animtype		= Back
priority		= 7, Hit
damage		= Ceil(IfElse(fvar(11) * (45-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (45-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;75-30*(var(5)=1)-37*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
;pausetime	= 11,14
pausetime		= IfElse(var(5)=2,5,11),IfElse(var(5)=2,8,14)
;guard.pausetime	= 10,15
guard.pausetime	= IfElse(var(5)=2,6,10),IfElse(var(5)=2,9,15)
;sparkno		= s7030
sparkno		= s IfElse(var(5)=2,7020,7030)
guard.sparkno	= s7000
sparkxy		= -10, -75
;hitsound		= s5,5
hitsound		= s5,IfElse(var(5)=2,4,5)
guardsound	= S6,0
p2facing		= 1
ground.type	= High
ground.slidetime	= 12
ground.hittime	= 12
ground.velocity	= -2,-10
air.velocity	= -2, IfElse(var(5) = 1,floor(-11.5),-8) ;if it's the medium version, it throws the enemy higher
fall		= 1
fall.recover	= 0
getpower		= IfElse(P2MoveType = H,40,140), 35
givepower		= 35,35
envshake.time	= 16
envshake.freq	= 60
envshake.ampl	= 4
yaccel		= 0.5
id		= 1099
[State 1100, Hit]	;third kick
type		= HitDef
trigger1		= AnimElem = 19
attr		= A, SA
hitflag		= MAF
guardflag		= MA
animtype		= Back
priority		= 7, Hit
damage		= Ceil(IfElse(fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)) < 7, 7, fvar(11) * (75-30*(var(5)=1)-37*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;75-30*(var(5)=1)-37*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
pausetime		= 11,14
sparkno		= s7030
guard.sparkno	= s7000
sparkxy		= -10, -75
hitsound		= s5,5
guardsound	= S6,0
p2facing		= 1
ground.type	= High
ground.slidetime	= 12
ground.hittime	= 12
ground.velocity	= -2,-10
air.velocity	= -2,-8
fall		= 1
fall.recover	= 0
getpower		= IfElse(P2MoveType = H,40,140), 35
givepower		= 35,35
envshake.time	= 16
envshake.freq	= 60
envshake.ampl	= 4
yaccel		= 0.5

[State 1100, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)>0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

;cannot ground recover
[State 0, Explod]
type = Explod
trigger1 = !NumExplod(95052000)
trigger1 = MoveHit = 1
anim = 1
ID = 95052000
removetime = -1

[State 0, AttackDist]
type = AttackDist
trigger1 = Anim = 1100
trigger1 = AnimElemTime(6) >= 0
trigger2 = Anim = 1101
trigger2 = AnimElemTime(13) >= 0
trigger3 = Anim = 1102
trigger3 = AnimElemTime(20) >= 0
value = 0

[State 1100, 7]
type		= ChangeState
Triggerall	= AnimElemtime(5) > 0 
trigger1		= Vel Y + Pos Y >= 0
value		= 1105
ctrl		= 0


;------------------------------
; Landing
[StateDef 1105]
type = S
MoveType = I
VelSet = 0, 0
Anim = 1105
SprPriority = 2 
ctrl = 0

[state 17100, Landing Effect]
type = explod
trigger1 = !time
anim = 17100
id = 17100
pos = 0,0
postype = P1
sprpriority = -3
ownpal = 1
supermovetime = -1

[State 17100, Landing Sound]
type = PlaySnd
trigger1 = !time
value = 40, 0
persistent = 0

[State 1011, 0]
type = PosSet
trigger1 = !time
y = 0

[State 1011, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 



;===========================================================================
; <<<<< DIVING KICK FLURRY >>>>>
; State : 1200
; Landing : 1201
; Hitting : 1202
;===========================================================================

;Diving Kick Flurry
[StateDef 1200]
type		= A
MoveType		= A
Physics		= N
VelSet		= 0, 0
Anim		= 1200
SprPriority	= 2 
ctrl		= 0
poweradd		= 65

[State 1200, VarSet]; light = 0; medium = 1; heavy = 2
type		= VarSet
trigger1		= Time = 0 && !AILevel
var(5)		= IfElse((ifElse(Facing = 1, NumExplod(90001006),NumExplod(90001104)) && (NumExplod(90000230) || NumExplod(90000235))), 0, IfElse((ifElse(Facing = 1, NumExplod(90001006),NumExplod(90001104)) && (NumExplod(90000240) || NumExplod(90000245))), 1, 2))
[State 1200, VarSet]; for the AI (this may have to be removed)
type		= VarSet
trigger1		= Time = 0 && AILevel
var(5)		= IfElse(P2BodyDist x<70, 0, IfElse((P2BodyDist x=[70,130]), 1, 2))

[State 1200, 2]
type		= VelSet
trigger1		= AnimElem = 4
x		= IfElse(!var(5), 6, IfElse(var(5) = 1, 8.4, 10))
y		= IfElse(!var(5), 11, IfElse(var(5) = 1, 9.6, 8))
ignorehitpause	= 1


[State 1200, VoiceJPN]
type		= PlaySnd
triggerall	= var(55) = 0		;Voice=Japan
trigger1		= AnimElem = 2
value		= 1100,0
channel		= 0
[State 1200, VoiceENG]
type		= PlaySnd
triggerall	= var(55) = 1		;Voice=English
trigger1		= AnimElem = 2
value		= 1100,100+(random%5)
channel		= 0
[State 1200, VoiceCUSTOM]
type		= PlaySnd
triggerall	= var(55) = 2		;Voice=Custom Corey Holland
trigger1		= AnimElem = 2
value		= 1200,1
channel		= 0

[State 1200, Sound effect 1];Dragon Roar
type		= PlaySnd
trigger1		= AnimElem = 2
value		= 1200,0
[State 1200, Sound effect 2]
type		= PlaySnd
trigger1		= AnimElem = 4
value		= 21,1

[State 1200, Hitdef]
type		= HitDef
trigger1		= AnimElemno(0) = [5,6]
attr		= A, SA
hitflag		= MAF
guardflag		= MA
;animtype = hard
priority		= 7, Hit
damage		= Ceil(IfElse(fvar(11) * (20+3*(var(5)=1)+6*(var(5)=2)) < 7, 7, fvar(11) * (20+3*(var(5)=1)+6*(var(5)=2)))), 2+(var(5)=1)+2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (20+3*(var(5)=1)+6*(var(5)=2)) < 7, 7, fvar(11) * (20+3*(var(5)=1)+6*(var(5)=2)))), 2+(var(5)=1)+2*(var(5)=2)
;20+3*(var(5)=1)+6*(var(5)=2),2+(var(5)=1)+2*(var(5)=2)
pausetime		= 11,20
sparkno		= s7030
guard.sparkno	= s7000
sparkxy		= -10, -9
hitsound		= s5,6
guardsound	= S6,0
p2facing		= 1
ground.type	= low
ground.slidetime	= 12
ground.hittime	= 12
ground.velocity	= -2,-9
air.velocity	= -2,-8
;fall = 1
fall.recover	= 0
getpower		= IfElse(P2MoveType = H,40,140), 35
givepower		= 35,35
envshake.time	= 16
envshake.freq	= 60
envshake.ampl	= 4
yaccel		= 0.5
;p1stateno = 1202
persistent	= 0
;snap		= 20,50


[State 1200, TargetBind]
type = TargetBind
trigger1 = MoveHit = 1
time = 1
pos = 5+p2bodydist x, p2bodydist y;60
ignorehitpause = 1
persistent = 0




[State 1200, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)>0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 1200, go]
type = VelAdd
trigger1 = AnimElemtime(3) > 0 
Y = 0.5

[State 1200, ChangeState]
type = ChangeState
trigger1 = MoveHit = 1 && Enemy,Movetype = H ;if you write "Target, MoveType = H" you'll get debug flood. :(
value = 1202
ctrl = 0
ignorehitpause = 1
persistent = 0


[State 1200, 7]
type = ChangeState
Triggerall = AnimElemtime(3) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1201
ctrl = 1  

;------------------------------------
;Landing
[StateDef 1201]
type = S
MoveType = I
VelSet = 0, 0
Anim = 1201
SprPriority = 2 
ctrl = 0

[state 17100, Landing Effect]
type = explod
trigger1 = !time
anim = 17100
id = 17100
pos = 0,0
postype = P1
sprpriority = -3
ownpal = 1
supermovetime = -1

[State 17100, Landing Sound]
type = PlaySnd
trigger1 = !time
value = 40, 0
persistent = 0

[State 1011, 0]
type = PosSet
trigger1 = !time
y = 0

[State 1011, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 

;------------------------------------
;Hitting
[StateDef 1202]
type = A
MoveType = A
Physics = N
VelSet = 0, 0
Anim = 1202
SprPriority = 2 
ctrl=0


[State 17100, flurry voice]
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = !time
value = 1202, 2
channel = 0

[State 17100, flurry Sound]
type = PlaySnd
trigger1 = !time
value = 1202, 0

[State 1100, Hit]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 8
trigger3 = AnimElem = 11
trigger4 = AnimElem = 14
trigger5 = AnimElem = 17
trigger6 = AnimElem = 20
trigger7 = AnimElem = 23
trigger8 = AnimElem = 26
attr = A, SA
hitflag = MAF
guardflag = MA
;animtype = hard
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (8+2*(var(5)=1)+4*(var(5)=2)) < 2, 2, fvar(11) * (8+2*(var(5)=1)+4*(var(5)=2)))), 2+(var(5)=1)+2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (8+2*(var(5)=1)+4*(var(5)=2)) < 7, 7, fvar(11) * (8+2*(var(5)=1)+4*(var(5)=2)))), 2+(var(5)=1)+2*(var(5)=2)
;8+2*(var(5)=1)+4*(var(5)=2),2+(var(5)=1)+2*(var(5)=2)
pausetime = 3,9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20+5*(random%5), -20+(5*random%5)
hitsound = s5,4
guardsound = S6,0
p2facing = 1
ground.type = low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = 0,-9
air.velocity = 0,-8
;fall = 1
fall.recover = 0
getpower = 0,0  ;IfElse(P2MoveType = H,40,140), 35
givepower = 0,0 ;35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit]
type = HitDef
trigger1 = AnimElem = 29
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = diagup
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (20+3*(var(5)=1)+6*(var(5)=2)) < 7, 7, fvar(11) * (20+3*(var(5)=1)+6*(var(5)=2)))), 2+(var(5)=1)+2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (20+3*(var(5)=1)+6*(var(5)=2)) < 7, 7, fvar(11) * (20+3*(var(5)=1)+6*(var(5)=2)))), 2+(var(5)=1)+2*(var(5)=2)
; 20+3*(var(5)=1)+6*(var(5)=2),2+(var(5)=1)+2*(var(5)=2)
pausetime = 11,20
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -48
hitsound = s5,5;s2604,0
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6,-6
air.velocity = -6,-6
fall = 1
fall.recover = 0
getpower = 60,35
givepower = 50,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
persistent = 0

[State 280, go]
type = VelSet
trigger1 = AnimElem = 30
x = -6.75
Y = -7

[State 280, go]
type = VelSet
trigger1 = AnimElem = 36
x = -1

[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(30) > 0 
Y = 0.5

[State -2, Explod];State 5052 Twist FX
type = null ;PlaySnd
trigger1 = (AnimElemtime(30) > 0 && AnimElemtime(44) <0)  && !(gametime%10)
value = 5052,0
volume = -100

[State 17100, Dismount Sound]
type = PlaySnd
trigger1 = AnimElemtime(30) = 0
value = 1202, 1

[State 1000, 7]
type = ChangeState
Triggerall = AnimElemtime(32) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1201
ctrl = 0

;------------------------------------
; Hitting, strong
[StateDef 1205]
type = A
MoveType = A
Physics = N
VelSet = 0, 0
Anim = 1205
SprPriority = 2 
ctrl=0

[State 1100, Hit]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 8
trigger3 = AnimElem = 11
trigger4 = AnimElem = 14
trigger5 = AnimElem = 17
trigger6 = AnimElem = 20
trigger7 = AnimElem = 23
trigger8 = AnimElem = 26
attr = A, SA
hitflag = MAF
guardflag = MA
;animtype = hard
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (8+2*(var(5)=1)+4*(var(5)=2)) < 2, 2, fvar(11) * (8+2*(var(5)=1)+4*(var(5)=2)))), 2+(var(5)=1)+2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (8+2*(var(5)=1)+4*(var(5)=2)) < 7, 7, fvar(11) * (8+2*(var(5)=1)+4*(var(5)=2)))), 2+(var(5)=1)+2*(var(5)=2)
; 8+2*(var(5)=1)+4*(var(5)=2),2+(var(5)=1)+2*(var(5)=2)
pausetime = 3,9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20+5*(random%5), -20+(5*random%5)
hitsound = s5,6
guardsound = S6,0
p2facing = 1
ground.type = low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = 0,-9
air.velocity = 0,-8
;fall = 1
fall.recover = 0
getpower = 0,0  ;IfElse(P2MoveType = H,40,140), 35
givepower = 0,0 ;35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit]
type = HitDef
trigger1 = AnimElemno(0) = [31,32]
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = diagup
priority = 7, Hit
damage =  Ceil(IfElse(fvar(11) * (20+3*(var(5)=1)+6*(var(5)=2)) < 7, 7, fvar(11) * (20+3*(var(5)=1)+6*(var(5)=2)))), 2+(var(5)=1)+2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (20+3*(var(5)=1)+6*(var(5)=2)) < 7, 7, fvar(11) * (20+3*(var(5)=1)+6*(var(5)=2)))), 2+(var(5)=1)+2*(var(5)=2)
; 20+3*(var(5)=1)+6*(var(5)=2),2+(var(5)=1)+2*(var(5)=2)
pausetime = 11,20
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -48
hitsound = s2604,0
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6,-6
air.velocity = -6,-6
fall = 1
fall.recover = 0
getpower = 60,35
givepower = 50,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
persistent = 0

[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(34) > 0 
Y = 0.5

[State 1000, 7]
type = ChangeState
Triggerall = AnimElemtime(34) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1201
ctrl = 0



;===========================================================================
; <<<<< SLASHING CHOP >>>>>
; Charge state 1 = 1300
; Charge state 2 (when hit) = 1301
; Actual attack = 1302
; Helper for repel = 1305
; Destroyed helper = 1306
; Reflect with random projectile = 1308
; Reflected projectile = 1315
; Reflected projectile explods = 1316
; Custom state when hit by slashing chop max charge = 1320
;===========================================================================

;Focus Strike - charge state 1
;This state covers the charging aspect of the Focus Strike attack at the start.
[Statedef 1300]
type = S
movetype = I
physics = S
juggle = 10
anim = 1300
ctrl = 0
poweradd = 0
velset = 0,0
 
; These next two sctrls cover initial charge value and building it up
[State 900, starting value]
type = VarSet
trigger1 = time = 1 && var(20)
fvar(9) = 0
 
[State 900, adding to value]
type = VarAdd
trigger1 = time >= 1
fv = 9
value = 1
persistent = 1

[State 8000, flash]
type = PalFX
trigger1 = time =10 
add = 40, 30, -40
sinadd = 50,50,50,16
time = 40
 
; These change states control dash cancels and moving into the attack portion
[State 900, dash cancel back]
type = ChangeState
trigger1 = time >= 8 && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001064)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001016)) && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,vel x>=1)
value = Cond(P2Dist X < -12, 100, 105)
 
[State 900, dash cancel forward]
type = ChangeState
trigger1 = time >= 8 && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001016)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001064)) && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,vel x<=1) 
value = Cond(P2Dist X < -12, 105, 100)
 
[State 900, stopping early]
type = ChangeState
trigger1 = time >= 8 && command != "holdc" && command !="holdz" && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,inguarddist) || (enemynear, hitdefattr = SCA, NP, SP)
value = 1302
 
[State 900, fully charged]
type = ChangeState
trigger1 = fvar(9)>=60
value = 1302
 
;---------------------------------------------
;Focus Strike - charge state 2
;This state covers the charging aspect of the Focus Strike attack if hit
[Statedef 1301]
type = S
movetype = I
physics = S
juggle = 10
ctrl = 0
poweradd = 0
velset = 0,0
 
; This part covers the after effects of getting hit from earlier.
[state 901, no more saving hit]
type = varset
trigger1 = time = 1
var(20) = 0

[State 8000, flash]
type = PalFX
trigger1 = time =1
add = 40, 30, -40
sinadd = 50,50,50,16
time = 10
 
[State 901, life removal]
type = LifeAdd
trigger1 = time = 1 && !var(20)
value = -(gethitvar(damage))
kill = 1

[State 901, Killed]
type = ChangeState
trigger1 = life <= 0
value = 5950
 
; This ctrl changes the animframe back to the last active one
[State 901, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 1300
elem = var(23)
 
; This varset is the continuation of charging
[State 901, adding to charge]
type = VarAdd
trigger1 = time >= 1
fv = 9
value = 1
persistent = 1
 
; These change states control dash cancels and moving into the attack portion
[State 900, dash cancel back]
type = ChangeState
trigger1 = time >= 8 && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001064)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001016)) && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,vel x>=1)
value = Cond(P2Dist X < -12, 100, 105)
 
[State 900, dash cancel forward]
type = ChangeState
trigger1 = time >= 8 && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001016)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001064)) && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,vel x<=1) 
value = Cond(P2Dist X < -12, 105, 100)
 
[State 900, stopping early]
type = ChangeState
trigger1 = time >= 8 && command != "holdc" && command !="holdz" && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,inguarddist) || (enemynear, hitdefattr = SCA, NP, SP)
value = 1302
 
[State 901, fully charged]
type = ChangeState
trigger1 = fvar(9)>=60
value = 1302
 
;----------------------------------------
;Focus Attack - actual attack
[Statedef 1302]
type = S
movetype = A
physics = S
juggle = 10
anim = 1301
ctrl = 0
velset = 0,0
 
;PalFX sctrls; the first removes any earlier stuff, and the second the white flash that appears if you have maxed out focus
[state 901, cancel earlier fx flash]
type = PalFx
trigger1 = time = 0
add = 0,0,0
time = 0
 
[state 901, bright flash if maxed out]
type = PalFx
triggerall = FVar(9) = 60
trigger1 = time = 1
add = 128,128,128
sinadd = -128,-128,-128,32
time = 8

[State 1302, voice]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem = 2
value = 3,10
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 1100,104
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 1050,0
channel = 0

[State 1302, 2]
type = PlaySnd
trigger1 = AnimElem = 2 && (FVar(9) < 60)
value = 0,2

[State 1302, 2]
type = PlaySnd
trigger1 = AnimElem = 2 && (FVar(9) = 60)
value = 0,2

[State 4000, Invincible]
type = NotHitBy
trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(8) < 0
value = ,NP, SP

[State 1300, repel helper]
type = helper
trigger1 = AnimElemtime(2) = 0
helpertype = normal
stateno = 1305
ID = 1305
name = "repel"
postype = p1
pos = 50, -40

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(2)=1
anim = 1206+(var(2)=0)
id = 1206
pos = 30,0
postype = P1
sprpriority = -3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1

 
; The hitdef used depends on the how long you've been charging. In case you are wondering why there are 2 versions of each lvl's
; hitdef, the second one has been refined to compensate for hitting air opponents.
; LV 1
[State 902, 0-30]
type = HitDef
triggerall = P2stateno != [5020,5040]
triggerall = p2stateno != [154,155]
trigger1 = AnimElem = 2 && (FVar(9) < 60)
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 32 < 7, 7, fvar(11) * 32)), 0
;Ceil(IfElse(fvar(11) * 32 < 7, 7, fvar(11) * 32)), 0
; 32,0
animtype = Hard
guardflag = M
hitflag = M
priority = 4, Hit
pausetime = 8, 9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-65
hitsound   = s5, 2
guardsound = S6,0
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -8.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
air.fall = 1
air.juggle = 15
fall = (P2MoveType = H)
id = 1318
 
[State 902, 0-30]
type = HitDef
triggerall = P2stateno != [5020,5040]
triggerall = p2stateno != [154,155]
triggerall = p2statetype = A
trigger1 = AnimElem = 2 && (FVar(9) < 60)
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 32 < 7, 7, fvar(11) * 32)), 0
;Ceil(IfElse(fvar(11) * 32 < 7, 7, fvar(11) * 32)), 0
;32,0
animtype = Hard
guardflag = A
hitflag = A
priority = 4, Hit
pausetime = 8, 9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-65
hitsound   = s5, 2
guardsound = S6,0
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -6.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
air.fall = 1
air.juggle = 15
fall = (P2MoveType = H)
id = 1319
 
; LV 2 MAX
[State 902, max-charge]
type = HitDef
triggerall = P2stateno != [5020,5040]
triggerall = p2stateno != [154,155]
trigger1 = AnimElem = 2 && FVar(9) = 60
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 59 < 7, 7, fvar(11) * 59)), 0 
;Ceil(IfElse(fvar(11) * 59 < 7, 7, fvar(11) * 59)), 0 
;59,0
animtype = Hard
;guardflag = MA ;<-- Commented out as you will not be blocking this. This will hurt, and you will fall!
hitflag = MAF
priority = 4, Hit
pausetime = 13, 14
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-65
hitsound   = s5, 6
guardsound = S6,0
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -4.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
air.fall = 1
air.juggle = 15
ID = 1302   ;add this line
;p2stateno = 1320 ; <- Opponent sent to flying state

[State 0, TargetState]  ;New state
type = TargetState
trigger1 = Numtarget(1302)
trigger1 = movehit = 1
value = 1320
ID = 1302
ignorehitpause = 1
persistent = 0
 
[State 902, max-charge]
type = HitDef
triggerall = P2stateno != [5020,5040]
triggerall = p2stateno != [154,155]
triggerall = p2statetype = A
trigger1 = AnimElem = 2 && FVar(9) = 60
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 59 < 7, 7, fvar(11) * 59)), 0 
;Ceil(IfElse(fvar(11) * 59 < 7, 7, fvar(11) * 59)), 0
;59,0
animtype = Hard
hitflag = A
priority = 6, Hit
pausetime = 13, 14
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-65
hitsound   = s5, 6
guardsound = S6,0
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -4.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
air.fall = 1
air.juggle = 15
id = 1321
 
[State 902, fvar reset]
type = VarSet
trigger1 = !AnimTime
fvar(9) = 0

[State 0, AttackDist]
type = AttackDist
;trigger1 = Anim = 1100
trigger1 = AnimElemTime(3) >= 0
value = 0
 
;Dash Cancels upon movecontact
[State 902, dash cancel]
type = ChangeState
trigger1 = Movecontact && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001016)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001064)) && !AILevel
trigger2 = AILevel>=1 && movecontact && random<150
value = Cond(P2Dist X < -12, 105, 100)
ignorehitpause = 1

[State 902, dash cancel]
type = ChangeState
trigger1 = Movecontact && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001064)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001016)) && !AILevel
trigger2 = AILevel>=1 && movecontact && random<250
value = Cond(P2Dist X < -12, 100, 105)
ignorehitpause = 1
 
[State 902, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------
;Opponent custom state
[Statedef 1320]
type = A
movetype = H
physics = N
anim = IfElse(selfanimexist(5052),5052,5030)
ctrl = 0
velset = -7, -5
facep2 = 1
 
[State 9011, VelAdd]
type = VelAdd
trigger1 = (Pos Y < 0)
y = 0.35
 
[State 9011, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
 
[State 9011, ChangeState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100


;===========================================================================
; <<<<< OMNI KICK >>>>>
; Up		= 1400
; Up diagonal	= 1410
; Forward/backward	= 1420
; Down diagonal	= 1430
; Down		= 1430
;===========================================================================

; UP KICK
[Statedef 1400]
type = A
movetype = A
physics = A
anim = 1400
ctrl = 0
;poweradd = 40
sprpriority = 2
juggle = IfElse(p2statetype=A ,0,15)

[State 1010, VarAdd - for 'dmg dampening']
type = VarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 2
ignorehitpause = 1

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=2
value = 3,4+random%4
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 3,104+random%4
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 3,220+random%9
channel = 0

[State 650, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 5

[State 640, 2]
type = HitDef
triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
trigger1 = AnimElem = 4
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;ceil((60.0+20.0*(fvar(27)>0))/fvar(15)),6
guardflag = HA
hitflag = MAF
animtype  = Hard
priority = 4,Hit
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-70
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -5,-8
air.velocity = -5,-8
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
pausetime = 10,13
guard.pausetime = 11,12
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
;p2stateno = 1401 ; <- Opponent sent to flying state
id = 1401

[State 0, Explod]
type = Explod
trigger1 = NumExplod(1400)<3
trigger1 = MoveHit = 1
anim = 1
ID = 1400
removetime = -1

[State 802, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1401
ID = 1401
ignorehitpause = 1
persistent = 0

[State 1211, AllPalFX Destiny mode]
type = AllPalFX
triggerall = fvar(27)>0
trigger1 = Movehit
time = 5
color = 0
invertall = 1
ignorehitpause = 1
persistent = 0

[State 650, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)> 0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 0, AttackDist]
type = AttackDist
;trigger1 = Anim = 1100
trigger1 = AnimElemTime(5) >= 0
value = 0

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 1405 ;IfElse(vel X >= 0,50,116)
ctrl = 0

;-------------------------------------
;P2 custom state, sent away (Up Omni Kick)
[Statedef 1401]
type = A
movetype = H
physics = N
anim = IfElse(selfanimexist(5937),5937,IfElse(selfanimexist(5052),5052,5030))
ctrl = 0
facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = enemy,NumExplod(1400)>1
value = SCA
time = 1

[State 4005, vel]
type = velset
trigger1 = AnimElemtime(2)=0
x = -2
y = -10
persistent = 0

[State 6100, turning snd]
type = PlaySnd
triggerall = anim=5937
trigger1 = !time
trigger2 = time = 10
trigger3 = time = 20
trigger4 = time = 30
trigger5 = time = 40
trigger6 = time = 50
trigger7 = time = 60
trigger8 = time = 70
trigger9 = time = 80
value = 21,1
persistent = 1

[state 17100, Flip KO FX]
type=explod
triggerall = !IsHelper
trigger1 = Anim=5937 && !numexplod(59370) && AnimElemtime(3)=0
anim = 5938
id = 5938
pos = 0,-50
postype = P1
sprpriority = 3
ownpal = 1
;supermovetime = -1
removetime = -1
persistent = 0
bindtime = -1
ignorehitpause = 1
 
[State 9011, VelAdd]
type = VelAdd
trigger1 = Pos Y < 0
y = 0.35
 
[State 9011, ChangeState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100

;-----------------------------------------
; Falling from Omni Kick
[Statedef 1405]
type    = A
physics = A

[State 0, NotHitBy]
type = NotHitBy
trigger1 = enemy,NumExplod(1400)>1
value = SCA
time = 1

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 1405

;------------------------------------------
; UP FWD KICK
[Statedef 1410]
type = A
movetype = A
physics = A
anim = 1410
ctrl = 0
;poweradd = 40
sprpriority = 2
juggle = IfElse(p2statetype=A ,0,15)

[State 1010, VarAdd - for 'dmg dampening']
type = VarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=2
value = 3,4+random%4
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 3,104+random%4
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 3,220+random%9
channel = 0

[State 650, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 5

[State 640, 2]
type = HitDef
triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
trigger1 = AnimElem = 4
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;ceil((60.0+20.0*(fvar(27)>0))/fvar(15)),6
guardflag = HA
hitflag = MAF
animtype  = Hard
priority = 4,Hit
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-70
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7,-6
air.velocity = -7,-6
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
pausetime = 10,13
guard.pausetime = 11,12
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
;p2stateno = 1411 ; <- Opponent sent to flying state
id = 1411

[State 0, Explod]
type = Explod
trigger1 = NumExplod(1400)<3
trigger1 = MoveHit = 1
anim = 1
ID = 1400
removetime = -1

[State 802, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1411
ID = 1411
ignorehitpause = 1
persistent = 0

[State 1211, AllPalFX Destiny mode]
type = AllPalFX
triggerall = fvar(27)>0
trigger1 = Movehit
time = 5
color = 0
invertall = 1
ignorehitpause = 1
persistent = 0

[State 650, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)> 0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 0, AttackDist]
type = AttackDist
;trigger1 = Anim = 1100
trigger1 = AnimElemTime(5) >= 0
value = 0

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 1405
ctrl = 0

;-------------------------------------
;P2 custom state, sent away (Up Forward Omni Kick)
[Statedef 1411]
type = A
movetype = H
physics = N
anim = IfElse(selfanimexist(5052),5052,5030)
ctrl = 0
facep2 = 1

[State 4005, vel]
type = velset
trigger1 = AnimElemtime(2)=0
x = -7
y = -7
persistent = 0
 
[State 9011, VelAdd]
type = VelAdd
trigger1 = Pos Y < 0
y = 0.35
 
[State 0, NotHitBy]
type = NotHitBy
trigger1 = enemy,NumExplod(1400)>1
value = SCA
time = 1
 
[State 9011, ChangeState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100

;------------------------------------------
; FWD KICK
[Statedef 1420]
type = A
movetype = A
physics = A
anim = 1420
ctrl = 0
;poweradd = 40
sprpriority = 2
juggle = IfElse(p2statetype=A ,0,15)

[State 1010, VarAdd - for 'dmg dampening']
type = VarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=2
value = 3,4+random%4
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 3,104+random%4
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 3,220+random%9
channel = 0

[State 650, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 5

[State 640, 2]
type = HitDef
triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
trigger1 = AnimElem = 4
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;ceil((60.0+20.0*(fvar(27)>0))/fvar(15)),6
guardflag = HA
hitflag = MAF
animtype  = Hard
priority = 4,Hit
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-70
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7,-6
air.velocity = -7,-6
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
pausetime = 10,13
guard.pausetime = 11,12
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
;p2stateno = 1421 ; <- Opponent sent to flying state
id = 1421

[State 0, Explod]
type = Explod
trigger1 = NumExplod(1400)<3
trigger1 = MoveHit = 1
anim = 1
ID = 1400
removetime = -1

[State 802, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1421
ID = 1421
ignorehitpause = 1
persistent = 0

[State 1211, AllPalFX Destiny mode]
type = AllPalFX
triggerall = fvar(27)>0
trigger1 = Movehit
time = 5
color = 0
invertall = 1
ignorehitpause = 1
persistent = 0

[State 650, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)> 0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 0, AttackDist]
type = AttackDist
;trigger1 = Anim = 1100
trigger1 = AnimElemTime(5) >= 0
value = 0

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 1405
ctrl = 0

;-------------------------------------
;P2 custom state, sent away (Forward Omni Kick)
[Statedef 1421]
type = A
movetype = H
physics = N
anim = IfElse(selfanimexist(5052),5052,5030)
ctrl = 0
facep2 = 1

[State 4005, vel]
type = velset
trigger1 = AnimElemtime(2)=0
x = -10
y = -4
persistent = 0
 
[State 9011, VelAdd]
type = VelAdd
trigger1 = Pos Y < 0
y = 0.35
 
[State 0, NotHitBy]
type = NotHitBy
trigger1 = enemy,NumExplod(1400)>1
value = SCA
time = 1
 
[State 9011, ChangeState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100

;------------------------------------------
; DOWN FWD KICK
[Statedef 1430]
type = A
movetype = A
physics = A
anim = 1430
ctrl = 0
;poweradd = 40
sprpriority = 2
juggle = IfElse(p2statetype=A ,0,15)

[State 1010, VarAdd - for 'dmg dampening']
type = VarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 620, Only once - explod] ;only once
type = Explod
triggerall = NumTarget
triggerall = !NumExplod(620)
trigger1 = MoveHit && Target,StateNo = 651
anim = 9741	;blank anim
ID = 620
removeongethit = 1
ignorehitpause = 1
removetime = -1
persistent = 0


[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=2
value = 3,4+random%4
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 3,104+random%4
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 3,220+random%9
channel = 0

[State 650, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 5

[State 650, 3];opponent on ground
type = HitDef
triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
triggerall = p2statetype != A
trigger1 = AnimElem = 4
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;ceil((60.0+20.0*(fvar(27)>0))/fvar(15)),6
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 15,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2,10
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
fall = 1
fall.recover = 0
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.5

[State 0, Explod]
type = Explod
trigger1 = NumExplod(1400)<3
trigger1 = MoveHit = 1
anim = 1
ID = 1400
removetime = -1

[State 650, 3];Opponent in air sent to custom bounce state
type = HitDef

triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
triggerall = p2statetype = A && NumExplod(620) = 0; && var(42)!=1 ;&& var(7)!=2
trigger1 = AnimElem = 4
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (40.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (40.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (40.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (40.0+20.0*(fvar(27)>0)))), 6
;ceil((40.0+20.0*(fvar(27)>0))/fvar(15)),6
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 11,12
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2,10
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
fall = 1
fall.recover = 0
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.35
;p2stateno = 651
id = 651

[State 802, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 651
ID = 651
ignorehitpause = 1
persistent = 0


[State 650, 3];Opponent in air with bounce juggling limiter
type = HitDef

triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
triggerall = p2statetype=A && NumExplod(620)>=1; && var(42)>=1
trigger1 = AnimElem = 4
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;ceil((60.0+20.0*(fvar(27)>0))/fvar(15)),6
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 15,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2,10
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
fall = 1
fall.recover = 0
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.5


[State 1211, AllPalFX Destiny mode]
type = AllPalFX
triggerall = fvar(27)>0
trigger1 = Movehit
time = 5
color = 0
invertall = 1
ignorehitpause = 1
persistent = 0

[State varset]
type = VarSet
trigger1 = p2stateno = 651
var(6) = 1

[State 650, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)> 0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 0, AttackDist]
type = AttackDist
;trigger1 = Anim = 1100
trigger1 = AnimElemTime(5) >= 0
value = 0

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 1405
ctrl = 0

;------------------------------------------
; DOWN KICK
[Statedef 1440]
type = A
movetype = A
physics = A
anim = 1440
ctrl = 0
;poweradd = 40
sprpriority = 2
juggle = IfElse(p2statetype=A ,0,15)

[State 1010, VarAdd - for 'dmg dampening']
type = VarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 1440, Only once - explod] ;only once
type = Explod
triggerall = !NumExplod(620)
triggerall = NumTarget
trigger1 = MoveHit && Target,StateNo = 1441
anim = 9741	;blank anim
ID = 620
removeongethit = 1
ignorehitpause = 1
removetime = -1
persistent = 0


[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=2
value = 3,4+random%4
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 3,104+random%4
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 3,220+random%9
channel = 0

[State 650, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 5

[State 650, 3];opponent on ground
type = HitDef

triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
triggerall = p2statetype != A
trigger1 = AnimElem = 5
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;ceil((60.0+20.0*(fvar(27)>0))/fvar(15)),6
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 15,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2,10
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
fall = 1
fall.recover = 0
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.5
id = 1440

[State 0, Explod]
type = Explod
trigger1 = NumExplod(1400)<3
trigger1 = MoveHit = 1
anim = 1
ID = 1400
removetime = -1

[State 650, 3];Opponent in air sent to custom bounce state
type = HitDef

triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
triggerall = p2statetype = A && NumExplod(620) = 0; && var(42)!=1 ;&& var(7)!=2
trigger1 = AnimElem = 5
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (40.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (40.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (40.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (40.0+20.0*(fvar(27)>0)))), 6
;ceil((40.0+20.0*(fvar(27)>0))/fvar(15)),6
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 11,12
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2,10
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
fall = 1
fall.recover = 0
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.35
;p2stateno = 1441
id = 1441

[State 802, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1441
ID = 1441
ignorehitpause = 1
persistent = 0


[State 650, 3];Opponent in air with bounce juggling limiter
type = HitDef

triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
triggerall = p2statetype=A && NumExplod(620) >= 1; && var(42)>=1
trigger1 = AnimElem = 5
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;ceil((60.0+20.0*(fvar(27)>0))/fvar(15)),6
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 15,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2,10
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
fall = 1
fall.recover = 0
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.5
id = 1442

[State 1211, AllPalFX Destiny mode]
type = AllPalFX
triggerall = fvar(27)>0
trigger1 = Movehit
time = 5
color = 0
invertall = 1
ignorehitpause = 1
persistent = 0

[State varset]
type = VarSet
trigger1 = p2stateno = 1441
var(6) = 1

[State 650, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)> 0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 0, AttackDist]
type = AttackDist
;trigger1 = Anim = 1100
trigger1 = AnimElemTime(6) >= 0
value = 0

[State 1400, Turn]
type = Turn
trigger1 = !animtime

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 1405
ctrl = 0

;------------------------------------------
;P2 going to the ground from Omni Kick Down
[Statedef 1441]
type = S
movetype = H
physics = N
ctrl = 0
sprpriority = -1
velset = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = enemy,NumExplod(1400)>1
value = SCA
time = 1

[State 3020, 2]
type = changeanim2
trigger1 = !time && anim !=651
value = 651

[State 4005, vel Y]
type = velset
trigger1 = AnimElemtime(2)=0
y = 10
x = -1

[State 3052, Land]
type = changestate
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 652

;------------------------------------------
; DOWN BACK KICK
[Statedef 1450]
type = A
movetype = A
physics = A
ctrl = 0

[State 1400, Turn]
type = Turn
trigger1 = !time

[State 3052, Land]
type = changestate
trigger1 = !time
value = 1430

;------------------------------------------
; BACK KICK
[Statedef 1460]
type = A
movetype = A
physics = A
ctrl = 0

[State 1400, Turn]
type = Turn
trigger1 = !time

[State 3052, Land]
type = changestate
trigger1 = !time
value = 1420

;------------------------------------------
; UP BACK KICK
[Statedef 1470]
type = A
movetype = A
physics = A
ctrl = 0

[State 1400, Turn]
type = Turn
trigger1 = !time

[State 3052, Land]
type = changestate
trigger1 = !time
value = 1410



;===========================================================================
; <<<<< HURRICANE KICK >>>>>
; State = 1500
;===========================================================================

; Hurricane Kick
[Statedef 1500]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
poweradd = 20
sprpriority = 3
juggle = 5
anim = 1500

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
trigger1 = enemynear, MoveType = H
value = 1500
elem = 3

[State 1100, VarSet]
type = VarSet
trigger1 = !Time  && !AILevel
var(5) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0 && AILevel
var(5) = IfElse(P2BodyDist x>=40, 2, IfElse(random<800, 1, 0))

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=2
value = 1100,0
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 1100,100+(random%5)
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 1500,random%3
channel = 0

[State 220, jump]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
ignorehitpause = 1

[State 1100, 2]
type = VelSet
trigger1 = AnimElem = 3
x = 4.5
y = -1.7
ignorehitpause = 1

[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(7) > 0 && anim = 1500
trigger2 = AnimElemtime(11) > 2 && anim = 1501
trigger3 = AnimElemtime(16) > 0 && anim = 1502
Y = 0.32;0.45

[State 1500, NotHitBy]
type = NotHitBy
triggerall = Anim = [1500,1501]
trigger1 = Time = [0,8]
value = SCA,AA,AP,AT
time = 1
ignorehitpause = 1


[State 250, 1];Dragon Roar
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14 && (anim = [1501,1502])
trigger3 = AnimElem = 21 && anim = 1502
value = 1200,0
volume = 10
[State 250, 1];Kick
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14 && (anim = [1501,1502])
trigger3 = AnimElem = 21 && anim = 1502
value = 0, 5

[State 1100, Hit HK 1]
type = HitDef
trigger1 = AnimElem = 10
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;60-20*(var(5)=1)-27*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
;pausetime = 11,14
pausetime = IfElse(var(5)>=1,5,11),IfElse(var(5)>=1,8,14)
;guard.pausetime = 10,15
guard.pausetime = IfElse(var(5)>=1,6,10),IfElse(var(5)>=1,9,15)
;sparkno = s7030
sparkno = s IfElse(var(5)>=1,7020,7030)
guard.sparkno = s7000
sparkxy = -10, -75
;hitsound = s5,5
hitsound = s5,IfElse(var(5)>=1,4,5)
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -3-2*(anim!=1500),-4
air.velocity = -3-2*(anim!=1500),-4
fall = 1
fall.recover = 0
getpower = IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit HK 2]
type = HitDef
trigger1 = AnimElem = 15
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;60-20*(var(5)=1)-27*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
;pausetime = 11,14
pausetime = IfElse(var(5)=2,5,11),IfElse(var(5)=2,8,14)
;guard.pausetime = 10,15
guard.pausetime = IfElse(var(5)=2,6,10),IfElse(var(5)=2,9,15)
;sparkno = s7030
sparkno = s IfElse(var(5)=2,7020,7030)
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,IfElse(var(5)=2,4,5)
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -7+2*(anim!=1501),-5.5;-4
air.velocity = -7+2*(anim!=1501),-5.5;-4
fall = 1
fall.recover = 0
getpower = IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit HK 3]
type = HitDef
trigger1 = AnimElem = 23
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;60-20*(var(5)=1)-27*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
pausetime = 11,14
guard.pausetime = 18,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,5
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -9,-3
air.velocity = -9,-2.7
fall = 1
fall.recover = 0
getpower = IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 650, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)> 0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 0, AttackDist]
type = AttackDist
trigger1 = Anim = 1500
trigger1 = AnimElemTime(11) >= 0
trigger2 = Anim = 1501
trigger2 = AnimElemTime(16) >= 0
trigger3 = Anim = 1502
trigger3 = AnimElemTime(24) >= 0
value = 0

[State 1000, 7]
type = ChangeState
Triggerall = AnimElemtime(5) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1501
ctrl = 0

; Hurricane Kick
[Statedef 1505]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
poweradd = 20
sprpriority = 3
juggle = 5
anim = 1501

[State 1100, VarSet]
type = VarSet
trigger1 = !Time  && !AILevel
var(5) = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
trigger1 = enemynear, MoveType = H
value = 1501
elem = 3

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=2
value = 1100,0
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 1100,100+(random%5)
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 1500,random%3
channel = 0

[State 220, jump]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
ignorehitpause = 1

[State 1100, 2]
type = VelSet
trigger1 = AnimElem = 3
x = 4.5
y = -1.7
ignorehitpause = 1

[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(7) > 0 && anim = 1500
trigger2 = AnimElemtime(11) > 2 && anim = 1501
trigger3 = AnimElemtime(16) > 0 && anim = 1502
Y = 0.32;0.45

[State 1500, NotHitBy]
type = NotHitBy
triggerall = Anim = [1500,1501]
trigger1 = Time = [0,8]
value = SCA,AA,AP,AT
time = 1
ignorehitpause = 1


[State 250, 1];Dragon Roar
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14 && (anim = [1501,1502])
trigger3 = AnimElem = 21 && anim = 1502
value = 1200,0
volume = 10
[State 250, 1];Kick
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14 && (anim = [1501,1502])
trigger3 = AnimElem = 21 && anim = 1502
value = 0, 5

[State 1100, Hit HK 1]
type = HitDef
trigger1 = AnimElem = 10
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;60-20*(var(5)=1)-27*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
;pausetime = 11,14
pausetime = IfElse(var(5)>=1,5,11),IfElse(var(5)>=1,8,14)
;guard.pausetime = 10,15
guard.pausetime = IfElse(var(5)>=1,6,10),IfElse(var(5)>=1,9,15)
;sparkno = s7030
sparkno = s IfElse(var(5)>=1,7020,7030)
guard.sparkno = s7000
sparkxy = -10, -75
;hitsound = s5,5
hitsound = s5,IfElse(var(5)>=1,4,5)
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -3-2*(anim!=1500),-4
air.velocity = -3-2*(anim!=1500),-4
fall = 1
fall.recover = 0
getpower = IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit HK 2]
type = HitDef
trigger1 = AnimElem = 15
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;60-20*(var(5)=1)-27*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
;pausetime = 11,14
pausetime = IfElse(var(5)=2,5,11),IfElse(var(5)=2,8,14)
;guard.pausetime = 10,15
guard.pausetime = IfElse(var(5)=2,6,10),IfElse(var(5)=2,9,15)
;sparkno = s7030
sparkno = s IfElse(var(5)=2,7020,7030)
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,IfElse(var(5)=2,4,5)
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -7+2*(anim!=1501),-5.5;-4
air.velocity = -7+2*(anim!=1501),-5.5;-4
fall = 1
fall.recover = 0
getpower = IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit HK 3]
type = HitDef
trigger1 = AnimElem = 23
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;60-20*(var(5)=1)-27*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
pausetime = 11,14
guard.pausetime = 18,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,5
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -9,-3
air.velocity = -9,-2.7
fall = 1
fall.recover = 0
getpower = IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 650, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)> 0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 0, AttackDist]
type = AttackDist
trigger1 = Anim = 1500
trigger1 = AnimElemTime(11) >= 0
trigger2 = Anim = 1501
trigger2 = AnimElemTime(16) >= 0
trigger3 = Anim = 1502
trigger3 = AnimElemTime(24) >= 0
value = 0

[State 1000, 7]
type = ChangeState
Triggerall = AnimElemtime(5) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1501
ctrl = 0

; Hurricane Kick
[Statedef 1506]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
poweradd = 20
sprpriority = 3
juggle = 5
anim = 1502

[State 1100, VarSet]
type = VarSet
trigger1 = !Time  && !AILevel
var(5) = 2

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
trigger1 = enemynear, MoveType = H
value = 1502
elem = 3

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=2
value = 1100,0
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 1100,100+(random%5)
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 1500,random%3
channel = 0

[State 220, jump]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
ignorehitpause = 1

[State 1100, 2]
type = VelSet
trigger1 = AnimElem = 3
x = 4.5
y = -1.7
ignorehitpause = 1

[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(7) > 0 && anim = 1500
trigger2 = AnimElemtime(11) > 2 && anim = 1501
trigger3 = AnimElemtime(16) > 0 && anim = 1502
Y = 0.32;0.45

[State 1500, NotHitBy]
type = NotHitBy
triggerall = Anim = [1500,1501]
trigger1 = Time = [0,8]
value = SCA,AA,AP,AT
time = 1
ignorehitpause = 1


[State 250, 1];Dragon Roar
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14 && (anim = [1501,1502])
trigger3 = AnimElem = 21 && anim = 1502
value = 1200,0
volume = 10
[State 250, 1];Kick
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14 && (anim = [1501,1502])
trigger3 = AnimElem = 21 && anim = 1502
value = 0, 5

[State 1100, Hit HK 1]
type = HitDef
trigger1 = AnimElem = 10
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;60-20*(var(5)=1)-27*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
;pausetime = 11,14
pausetime = IfElse(var(5)>=1,5,11),IfElse(var(5)>=1,8,14)
;guard.pausetime = 10,15
guard.pausetime = IfElse(var(5)>=1,6,10),IfElse(var(5)>=1,9,15)
;sparkno = s7030
sparkno = s IfElse(var(5)>=1,7020,7030)
guard.sparkno = s7000
sparkxy = -10, -75
;hitsound = s5,5
hitsound = s5,IfElse(var(5)>=1,4,5)
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -3-2*(anim!=1500),-4
air.velocity = -3-2*(anim!=1500),-4
fall = 1
fall.recover = 0
getpower = IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit HK 2]
type = HitDef
trigger1 = AnimElem = 15
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;60-20*(var(5)=1)-27*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
;pausetime = 11,14
pausetime = IfElse(var(5)=2,5,11),IfElse(var(5)=2,8,14)
;guard.pausetime = 10,15
guard.pausetime = IfElse(var(5)=2,6,10),IfElse(var(5)=2,9,15)
;sparkno = s7030
sparkno = s IfElse(var(5)=2,7020,7030)
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,IfElse(var(5)=2,4,5)
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -7+2*(anim!=1501),-5.5;-4
air.velocity = -7+2*(anim!=1501),-5.5;-4
fall = 1
fall.recover = 0
getpower = IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit HK 3]
type = HitDef
trigger1 = AnimElem = 23
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (50-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;Ceil(IfElse(fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)) < 7, 7, fvar(11) * (60-20*(var(5)=1)-27*(var(5)=2)))), 6-(var(5)=1)-2*(var(5)=2)
;60-20*(var(5)=1)-27*(var(5)=2),6-(var(5)=1)-2*(var(5)=2)
pausetime = 11,14
guard.pausetime = 18,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,5
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -9,-3
air.velocity = -9,-2.7
fall = 1
fall.recover = 0
getpower = IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 650, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)> 0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 0, AttackDist]
type = AttackDist
trigger1 = Anim = 1500
trigger1 = AnimElemTime(11) >= 0
trigger2 = Anim = 1501
trigger2 = AnimElemTime(16) >= 0
trigger3 = Anim = 1502
trigger3 = AnimElemTime(24) >= 0
value = 0

[State 1000, 7]
type = ChangeState
Triggerall = AnimElemtime(5) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1501
ctrl = 0




;------------------------------
; Landing
[StateDef 1501]
type = S
MoveType = I
VelSet = 0, 0
Anim = 1105
SprPriority = 2 
ctrl = 0

[state 1501, Landing Effect]
type = explod
trigger1 = !time
anim = 17100
id = 17100
pos = 0,0
postype = P1
sprpriority = -3
ownpal = 1
supermovetime = -1

[State 1501, Landing Sound]
type = PlaySnd
trigger1 = !time
value = 40, 0
persistent = 0

[State 1501, 0]
type = PosSet
trigger1 = !time
y = 0

[State 1501, Start] ;for light tatsumaki only
type = ChangeState
trigger1 = PrevStateNo = 1500 && var(5) = 0
value = 1502
ctrl = 1 

[State 1501, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 


;------------------------------
; Landing - light tatsumaki
[StateDef 1502]
type = S
MoveType = I
VelSet = 0, 0
Anim = 1105
SprPriority = 2 
ctrl = 0

[state 1501, Landing Effect]
type = explod
trigger1 = !time
anim = 17100
id = 17100
pos = 0,0
postype = P1
sprpriority = -3
ownpal = 1
supermovetime = -1

[State 1501, Landing Sound]
type = PlaySnd
trigger1 = !time
value = 40, 0
persistent = 0

[State 1501, 0]
type = PosSet
trigger1 = !time
y = 0

[State 1501, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 


;===========| EX MOVES |===========;===========| EX MOVES |===========;===========| EX MOVES |===========
;===========| EX MOVES |===========;===========| EX MOVES |===========;===========| EX MOVES |===========
;===========| EX MOVES |===========;===========| EX MOVES |===========;===========| EX MOVES |===========
;===========| EX MOVES |===========;===========| EX MOVES |===========;===========| EX MOVES |===========
;===========| EX MOVES |===========;===========| EX MOVES |===========;===========| EX MOVES |===========
;===========| EX MOVES |===========;===========| EX MOVES |===========;===========| EX MOVES |===========
;===========| EX MOVES |===========;===========| EX MOVES |===========;===========| EX MOVES |===========

;===========================================================================
; <<<<< EX KI BLAST >>>>>
;===========================================================================

;Ex Ki Blasts
[Statedef 1050]
type    = S
movetype= A
physics = N
juggle  = 7
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2
poweradd = IfElse(fvar(27)>0,-250,-500);IfElse(fvar(27)>0,0,-500)

[State 6100, snd]
type = PlaySnd
trigger1 = !time
value = 7,0
channel = 1

[State 8000, flash]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 8000, Train]
type = AfterImage
trigger1 = Time = 0
time = 30
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1


[State 800, VarSet]
type = VarSet
trigger1 = !time
var(3) = 0
[State 800, VarSet]
type = VarSet
trigger1 = time > 10
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90030104) || NumExplod(90030101))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90030006) || NumExplod(90030003))))
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225)
var(3) = 1
[State 800, VarSet]
type = VarSet
trigger1 = time > 10
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90030104) || NumExplod(90030101))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90030006) || NumExplod(90030003))))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 2
[State 800, VarSet]
type = VarSet
trigger1 = time > 10
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90032506))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90032404))))
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225)
var(3) = 3
[State 800, VarSet]
type = VarSet
trigger1 = time > 10
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90032506))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90032404))))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 4
[State 800, VarSet]
type = VarSet
trigger1 = time > 10
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90030006) || NumExplod(90030003))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90030104) || NumExplod(90030101))))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 5

[State 220, gethit gut ?]
type = VarSet
trigger1 = anim = 1000
trigger1 = AnimElemtime(4)=0
var(14) = 0

[State 220, gethit gut ?]
type = VarSet
trigger1 = anim = 1001
trigger1 = AnimElemtime(3)=0
var(14) = 1

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=3
value = 3,5+random%3
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=3
value = 1001,0
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = anim = 1000
trigger1 = AnimElem=3
value = 1050,0
channel = 0

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(3)=0
anim = 1206+(var(2)=0)
id = 1206
pos = -25,3
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .7,.7

[State 200, 1]
type = PlaySnd
trigger1 = anim = 1000
trigger1 = AnimElemtime(4)=0
trigger2 = anim = 1001
trigger2 = AnimElemtime(3)=0
value = 10,0

[State 1000, lkb]
type = Helper
helpertype = normal
trigger1 = anim = 1000
trigger1 = AnimElemtime(4)=0
name = "kiblastEX"
postype = P1
pos = 60,-67
ownpal = 1
stateno = 1060
id = 1060

[State 1000, lkb]
type = Helper
helpertype = normal
trigger1 = anim = 1001
trigger1 = AnimElemtime(3)=0
name = "kiblastEX"
postype = P1
pos = 60,-67
ownpal = 1
stateno = 1061
id = 1061

[State 1000, 6]
type = ChangeAnim
trigger1 = anim = 1000
triggerall = AnimElem = 5, >= 5
value = 1001

[State 1000, Relax]
type = StateTypeSet
trigger1 = anim = 1001
trigger1 = AnimElem = 4
movetype = I

[State 1000, Chou Kmh]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 5
triggerall = AnimElem = 4, >= 6
trigger1 = anim = 1001
trigger1 = power>=2000
value = 2400
ctrl = 0

[State 1000, SDU]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 4
triggerall = AnimElem = 4, >= 6
trigger1 = anim = 1001
trigger1 = power>=1000
value = IfElse(power>=2000, 2200, 2100)
ctrl = 0
[State 1000, SDS]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 3
triggerall = AnimElem = 4, >= 6
trigger1 = anim = 1001
trigger1 = power>=1000
value = 2100
ctrl = 0




[State 1000, Lvl 1/2 Chou Masenko]  ;this must be fixed
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 2 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;Destiny mode
trigger1 = var(18)=0;power>=1000 && var(18)=0
value = 2300;IfElse(Power>=2000,2300,2330)
ctrl = 0
[State 1000, Lvl 1/2 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 2 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = IfElse(Power>=2000,2030,2000)
ctrl = 0


[State 1000, Lvl 1 Chou Masenko] ;this must be fixed
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;Destiny mode
trigger1 = var(18)=0 ;power>=1000 && var(18)=0
value = 2330
ctrl = 0
[State 1000, Lvl 1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = 2000
ctrl = 0

[State 650, Fill Destiny Gauge - Hit - EX]
type		= VarAdd
trigger1		= fvar(27)>0
fvar(28)		= IfElse(fvar(28)+30 > 300, 300-fvar(28), 30);-50;IfElse(fvar(28)+30 > 300, 300-fvar(28), 30)
persistent	= 0
ignorehitpause	= 1

[State 3000, if Destiny bar = 0]
type = VarSet
trigger1 = fvar(28) <= 0
fvar(27)=0


[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1





;===========================================================================
; <<<<< EX SOARING DRAGON KICK >>>>>
; State = 1150
; Anim = 1102
; Land = 1105
;===========================================================================

;EX Soaring Dragon Kick
[Statedef 1150]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3
;juggle = 7
anim = 1102
poweradd = IfElse(fvar(27)>0,-250,-500);IfElse(fvar(27)>0,0,-500)

[State 6100, snd]
type = PlaySnd
trigger1 = !time
value = 7,0
channel = 1

[State 8000, flash]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 8000, Train]
type = AfterImage
trigger1 = Time = 0
time = 30
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=3
value = 1100,0
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=3
value = 1100,100+(random%5)
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=3
value = 1500,random%3
channel = 0

[State 220, jump]
type = StateTypeSet
trigger1 = AnimElem=4 
statetype = A
ignorehitpause = 1

[State 1100, 2]
type = VelSet
trigger1 = AnimElem = 4
x = 3
y = -4.7
ignorehitpause = 1

[State 1100, 2]
type = VelSet
trigger1 = AnimElem = 20
x = 1
ignorehitpause = 1

[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(20) > 0
Y = 0.75

[State 250, 1];Aura SFX
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10 && (anim = [1101,1102])
trigger3 = AnimElem = 18 && anim = 1102
value = 1150,0
[State 250, 1];Burst Aura SFX
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10 && (anim = [1101,1102])
trigger3 = AnimElem = 18 && anim = 1102
value = 1150,1

[State 250, 1];Dragon Roar
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10 && (anim = [1101,1102])
trigger3 = AnimElem = 18 && anim = 1102
value = 1200,0
volume = 10
[State 250, 1];Kick
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10 && (anim = [1101,1102])
trigger3 = AnimElem = 18 && anim = 1102
value = 0, 5

[State 1100, Hit]
type = HitDef
trigger1 = NumExplod(1150)<2
trigger1 = AnimElem = 4
trigger2 = AnimElem = 11
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 43 < 7, 7, fvar(11) * 43)), 4
;Ceil(IfElse(fvar(11) * 43 < 7, 7, fvar(11) * 43)), 4
;43,4
;pausetime = 11,14
pausetime = 6,10
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,6
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2,-9
air.velocity = -2,-8
fall = 1
fall.recover = 0
getpower = 0,0
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, 3rd Hit, more vels]
type = HitDef
trigger1 = NumExplod(1150)<2
trigger1 = AnimElem = 19
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 43 < 7, 7, fvar(11) * 43)), 4
;Ceil(IfElse(fvar(11) * 43 < 7, 7, fvar(11) * 43)), 4
;43,4
pausetime = 19,22
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,6
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2,-12
air.velocity = -2,-16
fall = 1
fall.recover = 0
getpower = 0,0
givepower = 35,35
envshake.time = 20
envshake.freq = 80
envshake.ampl = 6
yaccel = 0.5

;limiter
[State 0, Explod]
type = Explod
trigger1 = NumExplod(1150)<2
trigger1 = AnimElemTime(19) >= 0
trigger1 = MoveHit = 1
anim = 1
ID = 1150
removetime = -1

[State 6100, slowmo woosh snd]
type = PlaySnd
trigger1 = AnimElem = 20 && movehit
value = 2907,0
volume = -200

[State 650, Fill Destiny Gauge - Hit - EX]
type		= VarAdd
trigger1		= fvar(27)>0
fvar(28)		= IfElse(fvar(28)+30 > 300, 300-fvar(28), 30);-50;IfElse(fvar(28)+30 > 300, 300-fvar(28), 30)
persistent	= 0
ignorehitpause	= 1

[State 3000, if Destiny bar = 0]
type = VarSet
trigger1 = fvar(28) <= 0
fvar(27)=0

[State 0, AttackDist]
type = AttackDist
;trigger1 = Anim = 1500
trigger1 = AnimElemTime(24) >= 0
value = 0

[State 1000, 7]
type = ChangeState
Triggerall = AnimElemtime(5) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1105
ctrl = 0


;===========================================================================
; <<<<< EX DIVING KICK FLURRY >>>>>
; State : 1250
; Landing : 1201
; Hitting : 1251
;===========================================================================

;EX Diving Kick Flurry
[StateDef 1250]
type = A
MoveType = A
Physics = N
VelSet = 0, 0
Anim = 1200
SprPriority = 2 
ctrl=0
poweradd = IfElse(fvar(27)>0,-250,-500)

;Limiter
[State 0, Explod]
type = Explod
trigger1 = NumExplod(2102)<3
trigger1 = !Time
anim = 15999
ID = 2102
bindtime = -1
removeongethit = 1
removetime = -1

[State 6100, snd]
type = PlaySnd
trigger1 = !time
value = 7,0
channel = 1

[State 8000, flash]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 8000, Train]
type = AfterImage
trigger1 = Time = 0
time = 30
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1

[State 1100, 2]
type = VelSet
trigger1 = AnimElem = 4
x = 11
y = 9
ignorehitpause = 1

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=2
value = 1100,0
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 1100,100+(random%5)
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 1200,1
channel = 0

[State 250, 1];Dragon Roar
type = PlaySnd
trigger1 = AnimElem = 2
value = 1200,0

[State 250, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 21,1

[State 1100, Hit]
type = HitDef
trigger1 = NumExplod(2102)<2
trigger1 = AnimElemno(0) = [5,6]
attr = A, SA
hitflag = MAF
guardflag = MA
;animtype = hard
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 26 < 7, 7, fvar(11) * 26)), 5 
;Ceil(IfElse(fvar(11) * 26 < 7, 7, fvar(11) * 26)), 5 
;26,5
pausetime = 11,20
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -9
hitsound = s5,6
guardsound = S6,0
p2facing = 1
ground.type = low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2,-9
air.velocity = -2,-8
;fall = 1
fall.recover = 0
getpower = 0,0
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
;p1stateno = 1251
persistent = 0

[State 1200, TargetBind]
type = TargetBind
trigger1 = MoveHit = 1
time = 1
pos = 5+p2bodydist x, p2bodydist y;60
ignorehitpause = 1
persistent = 0

[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(3) > 0 
Y = 0.5

[State 650, Fill Destiny Gauge - Hit - EX]
type		= VarAdd
trigger1		= fvar(27)>0 ;&& MoveHit
fvar(28)		= IfElse(fvar(28)+30 > 300, 300-fvar(28), 30);-50;IfElse(fvar(28)+30 > 300, 300-fvar(28), 30)
persistent	= 0
ignorehitpause	= 1

[State 3000, if Destiny bar = 0]
type = VarSet
trigger1 = fvar(28) <= 0
fvar(27)=0

[State 1200, ChangeState]
type = ChangeState
trigger1 = MoveHit = 1 && Enemy,Movetype = H
value = 1251
ctrl = 0
ignorehitpause = 1
persistent = 0

[State 1000, 7]	;-Landing- normal landing
type = ChangeState
Triggerall = AnimElemtime(3) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1201
ctrl = 0

;------------------------------------
; Hitting, EX Version1
[StateDef 1251]
type = A
MoveType = A
Physics = N
VelSet = 0, 0
Anim = 1251
SprPriority = 2 
ctrl=0

[State 8000, flash]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 8000, Train]
type = AfterImage
trigger1 = Time = 0
time = 60
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1

[State 17100, flurry voice]
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = !time
value = 1202, 2
channel = 0

[State 17100, flurry Sound]
type = PlaySnd
trigger1 = !time
value = 1202, 0

[State 1100, Hit]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 7
trigger3 = AnimElem = 9
trigger4 = AnimElem = 11
trigger5 = AnimElem = 13
trigger6 = AnimElem = 15
trigger7 = AnimElem = 17
trigger8 = AnimElem = 19
trigger9 = AnimElem = 21
trigger10 = AnimElem = 23
trigger11 = AnimElem = 25
trigger12 = AnimElem = 27
trigger13 = AnimElem = 29
trigger14 = AnimElem = 31
attr = A, SA
hitflag = MAF
guardflag = MA
;animtype = hard
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 12 < 4, 4, fvar(11) * 12)), 1
;Ceil(IfElse(fvar(11) * 12 < 7, 7, fvar(11) * 12)), 1
;12,1
pausetime = 3,9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20+5*(random%5), -20+(5*random%5)
hitsound = s5,4
guardsound = S6,0
p2facing = 1
ground.type = low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = 0,-9
air.velocity = 0,-8
;fall = 1
fall.recover = 0
getpower = 0,0
givepower = 0,0
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit]
type = HitDef
trigger1 = AnimElemno(0) = [35,36]
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Hard;diagup
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 0 < 7, 7, fvar(11) * 20)), 2
;Ceil(IfElse(fvar(11) * 0 < 7, 7, fvar(11) * 20)), 2
;20,2
pausetime = 11,20
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -48
hitsound = s5,6;s2604,0
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6,-6
air.velocity = -6,-6
fall = 1
fall.recover = 0
getpower = 0,0 ;getpower = 100,35
givepower = 50,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
persistent = 0
id = 1251

;[State 802, TargetState]
;type = TargetState
;trigger1 = movehit
;trigger1 = numtarget
;trigger1 = !(target, ishelper)
;value = 1441;1252
;ID = 1251
;ignorehitpause = 1
;persistent = 0



[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(38) > 0 
Y = 0.5

[State 1000, 7]
type = ChangeState
Trigger1 = AnimElem = 32;triggerall = AnimElemtime(38) > 0 
;trigger1 = Vel Y + Pos Y >= 0
value = 1252;1201
ctrl = 0









;------------------------------------
; Hitting, EX Version2
[StateDef 1252]
type = A
MoveType = A
Physics = N
;VelSet = 0, 0
;Anim = 1251
SprPriority = 2 
ctrl=0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 1251
elem = 33
;ignorehitpause = 
persistent = 0


[State 1100, Hit]
type = HitDef
trigger1 = NumExplod(1254)<2
trigger1 = AnimElemno(0) = [35,36]
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Hard;diagup
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 0 < 7, 7, fvar(11) * 20)), 2
;Ceil(IfElse(fvar(11) * 0 < 7, 7, fvar(11) * 20)), 2
;20,2
pausetime = 11,20
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -48
hitsound = s5,6;s2604,0
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6,-6
air.velocity = -6,-6
fall = 1
fall.recover = 0
getpower = 0,0 ;getpower = 100,35
givepower = 50,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
persistent = 0
id = 1251

[State 802, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1253
ID = 1251
ignorehitpause = 1
persistent = 0



[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(38) > 0 
Y = 0.5

[State 1000, 7]	;-Landing- only for EX
type = ChangeState
Triggerall = AnimElemtime(38) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1255
ctrl = 0


;------------------------------------------
;P2 going to the ground from Omni Kick Down
[Statedef 1253]
type = S
movetype = H
physics = N
ctrl = 0
sprpriority = -1
velset = 0,0

[State 3020, 2]
type = changeanim2
trigger1 = !time && anim !=651
value = 651

[State 4005, vel Y]
type = velset
trigger1 = AnimElemtime(2)=0
y = 10
x = -5

[State 3052, Land]
type = changestate
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1254




;---------------------------------------------------------------------------
;Ground bounce- EX
[Statedef 1254]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,HA,HP,HT
time = 1

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.5


[State 5100, 5]
type = VelSet
trigger1 = AnimTime = 0
y = -8
x = -2

[State 111, 1]
type = StateTypeSet
trigger1 = AnimTime = 0
physics = A

[State 5100, 12]
type = SelfState
trigger1 = AnimTime = 0
value = 5050











;------------------------------------
;Landing - EX version
[StateDef 1255]
type = S
MoveType = I
VelSet = 0, 0
Anim = 1201
SprPriority = 2 
ctrl = 0

[state 17100, Landing Effect]
type = explod
trigger1 = !time
anim = 17100
id = 17100
pos = 0,0
postype = P1
sprpriority = -3
ownpal = 1
supermovetime = -1

[State 17100, Landing Sound]
type = PlaySnd
trigger1 = !time
value = 40, 0
persistent = 0

[State 1011, 0]
type = PosSet
trigger1 = !time
y = 0

[State 1011, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 
























;===========================================================================
; <<<<< EX HURRICANE KICK >>>>>
; State = 1550
;===========================================================================

; EX Hurricane Kick
[Statedef 1550]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
poweradd = IfElse(fvar(27)>0,-250,-500)
sprpriority = 3
anim = 1502

[State 6100, snd]
type = PlaySnd
trigger1 = !time
value = 7,0
channel = 1

[State 8000, flash]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 8000, Train]
type = AfterImage
trigger1 = Time = 0
time = 50
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
trigger1 = enemynear, MoveType = H
value = 1502
elem = 3

[State 3000, nhb]
type = nothitby
triggerall = anim = 1502
trigger1 = AnimElemtime(7) < 0
time = 1
value = SCA

[State 220, snd]
type = PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=2
value = 1100,0
channel = 0

[State 220, snd]
type = PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 1100,100+(random%5)
channel = 0

[State 200, 1];voice
type = PlaySnd
triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 1550,0
channel = 0

[State 220, jump]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
ignorehitpause = 1

[State 1100, 2]
type = VelSet
trigger1 = AnimElem = 3
x = 7
y = -2
ignorehitpause = 1

[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(16) > 0
Y = 0.30

[State 1100, 2]
type = VelMul
trigger1 = AnimElemtime(10) > 0
x = 0.98
;ignorehitpause = 1

[State 250, 1];Aura SFX
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14
trigger3 = AnimElem = 21
value = 1150,0
[State 250, 1];Burst Aura SFX
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14
trigger3 = AnimElem = 21
value = 1150,1

[State 250, 1];Dragon Roar
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14
trigger3 = AnimElem = 21
value = 1200,0
volume = 10
[State 250, 1];Kick
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14
trigger3 = AnimElem = 21
value = 0, 5

[State 1100, Hit HK 1]
type = HitDef
trigger1 = AnimElem = 10
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4
;Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4
;35,4
;pausetime = 11,14
pausetime = 6,10
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,5
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -5,-5
air.velocity = -5,-4
fall = 1
fall.recover = 0
getpower = 0,0
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit HK 2]
type = HitDef
trigger1 = AnimElem = 15
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4
;Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4
;35,4
;pausetime = 11,14
pausetime = 6,10
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,5
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -5,-5
air.velocity = -5,-4
fall = 1
fall.recover = 0
getpower = 0,0
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit HK 3];wall bounce
type = HitDef
triggerall = var(12)=0
trigger1 = AnimElem = 23
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage =  Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4 
;Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4 
;35,4
pausetime = 11,14
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,6
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -9,-4
air.velocity = -9,-4
fall = 1
fall.recover = 0
getpower = 0,0
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
;p2stateno = 1555    ;Make p2 go to bounce state on hit
p2facing = 1        ;Force to face p1
id = 1555

[State 0, TargetState]  
type = TargetState
trigger1 = Numtarget(1555)
trigger1 = movehit = 1
value = 1555
ID = 1555
ignorehitpause = 1
persistent = 0

[State 1100, Hit HK 3];no bounce
type = HitDef
triggerall = var(12)!=0
trigger1 = AnimElem = 23
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4 
;Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4 
;35,4
pausetime = 11,14
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,6
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -9,-4
air.velocity = -9,-4
fall = 1
fall.recover = 0
getpower = 0,0
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
;p2stateno = 1421    ;no bounce
p2facing = 1        ;Force to face p1

[State 0, TargetState]  
type = TargetState
trigger1 = Numtarget(1421)
trigger1 = movehit = 1
value = 1421
ID = 1421
ignorehitpause = 1
persistent = 0

[State 1061, No Multi-hit]
type = varset
trigger1 = AnimElem = 23 && movehit
var(12) = 1

[State 650, Fill Destiny Gauge - Hit - EX]
type		= VarAdd
trigger1		= fvar(27)>0
fvar(28)		= IfElse(fvar(28)+30 > 300, 300-fvar(28), 30);-50;IfElse(fvar(28)+30 > 300, 300-fvar(28), 30)
persistent	= 0
ignorehitpause	= 1

[State 3000, if Destiny bar = 0]
type = VarSet
trigger1 = fvar(28) <= 0
fvar(27)=0

[State 0, AttackDist]
type = AttackDist
;trigger1 = Anim = 1500
trigger1 = AnimElemTime(24) >= 0
value = 0

[State 1000, 7]
type = ChangeState
Triggerall = AnimElemtime(5) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1105
ctrl = 0







;------------------
; Hit by EX Hurricane Kick - shaking from the hit
[Statedef 1555]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1555, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = 1
value = 1555

[State 1555, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 1556

;------------------
; Hit by EX Hurricane Kick - flying through the air
[Statedef 1556]
type = A
movetype = H
physics = N

[State 1556, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1556, Gravity]
type = VelAdd
trigger1 = 1
y = .45

[State 1556, No scroll]
type = ScreenBound
triggerall = time > 10		;to send further
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 35
trigger2 = FrontEdgeBodyDist < 35
value = 1
movecamera = 0,1

[State 1556, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1557

[State 1556, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; Hit by EX Hurricane Kick - hit wall
[Statedef 1557]
type    = A
movetype= H
physics = N

[State 1557, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1557, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1557, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1557, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1557, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 1557

;[State 1557, Sound]
;type = PlaySnd
;trigger1 = Time = 0
;value = F7,0

[State 1557, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 1558

;------------------
; Hit by EX Hurricane Kick - bounce off wall
[Statedef 1558]
type    = A
movetype= H
physics = N

[State 1558, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1558, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1558, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1558, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100
