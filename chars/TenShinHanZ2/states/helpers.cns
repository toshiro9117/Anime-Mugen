;==============================================================
; CNS File for TenShinHan by Team Z2
; Helpers states
;==============================================================



;======================================================================
; Power charge - aura
[Statedef 905]
type = A
movetype = I
physics = N
ctrl = 0
Anim = 905
VelSet = 0,0
sprpriority = -1



[State 905, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 905, Trans]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1



[State 905, BindToParent]
type = BindToParent
trigger1 = Anim = 905
pos = -10,-2



[State 905, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 905
trigger1 = root,stateno = 901
value = 906



[State 905, DestroySelf]
type = DestroySelf
trigger1 = Anim = 905 && (Root,StateNo != 900)
trigger2 = Anim = 906 && AnimTime = 0
trigger3 = Root,stateno = [5000,5090]



;======================================================================
; DUST Helper (normal aura charge)
[Statedef 908]
type = A
MoveType = I
physics = N
ctrl = 0
Anim = 909
VelSet = 0,0
sprpriority = 4



[State 908, BindToRoot]
type = BindToRoot
trigger1 = 1
Time = 1
pos = -17,5



[State 908, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 908, DestroySelf]
type	= DestroySelf
trigger1	= (Root,StateNo != 900)
trigger2	= Root,stateno = [5000,5090]



;======================================================================
; Talons 7 Helper - effect
[Statedef 1311]
type = A
movetype = A;I
physics = N
VelSet = 0,0
ctrl = 0
Anim = 1311
poweradd = 0
sprpriority = -3



[State 1311, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1



[State 1311, SprPriority]	;Fixed sprite priority
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

 

[State 1311, BindToParent]
type = BindToParent
trigger1 = !Time
Time = 1
pos = 100,-115
ignorehitpause = 1



[State 1311, AngleDraw]
type = AngleDraw
trigger1 = Time < 3
value = 35
ignorehitpause = 1



[State 1311, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
Time = 1
ignorehitpause = 1



[State 1311, ChangeState]
type = DestroySelf
trigger1 = AnimTime = 0
ignorehitpause = 1



;======================================================================
; Repel Helper : 1505
; Destroyed : 1506
; Reflect with random projectile : 1508
; Reflected projectile : 1515
; Reflected projectile Explods : 1516
;======================================================================

; REPEL Helper FOR SLASH CHOP
[Statedef 1505]
type = S
physics = N
movetype = A
ctrl = 0
sprpriority = 4



[State 1505, NotHitBy]
type = NotHitBy
trigger1 = 1
Time = -1
value = SCA
ignorehitpause = 1



[State 1505, HitBy]
type = HitBy
trigger1 = 1
Time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1



[State 1505, HitOverride]
type = HitOverride
trigger1 = 1
Time = -1
attr = SCA, AA, AP, AT
stateno = 1506
ignorehitpause = 1

[State 1505, HitOverride]
type = HitOverride
trigger1 = 1
Time = -1
attr = SCA, NP, SP,HP
stateno = 1508
ignorehitpause = 1



[State 1505, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1506;1505
value = 1506;1505



[State 1505, VarAdd]	;Time var
type = VarAdd
trigger1 = 1
var(4) = 1



[State 1505, AfterImage]	;Shadows
type = AfterImage
trigger1 = !Time && !PrevStateno
Time = 999
Timegap = 1
framegap = 4
length = 12
palcontrast = 30, 60, 120
trans = add



[State 1505, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
movetype = I



[State 1505, ChangeState]
type = ChangeState
trigger1 = var(4) >= 13
value = 1506


;=========================================
;-----------------------------------------
; Destroyed
[Statedef 1506]
type = A
physics = N
movetype = I
VelSet = 0, 0
ctrl = 0
sprpriority = 1
Anim = 15999



[State 1506, NotHitBy]
type = NotHitBy
trigger1 = 1
Time = 1
value = SCA
ignorehitpause = 1



[State 1506, DestroySelf]
type = DestroySelf
trigger1 = 1;!AnimTime


;=========================================
;-----------------------------------------
; Reflect with Goku Kameha projectile
[Statedef 1508]
type = A
physics = N
movetype = I
ctrl = 0
Anim = 15999



[State 1508, NotHitBy]
type = NotHitBy
trigger1 = 1
Time = 1
value = SCA
ignorehitpause = 1



[State 1508, Helper]	;reflected
type = Helper
trigger1 = !Time
Helpertype = normal
stateno = 1515
ID = 1515
name = "Reflected"
postype = p1
pos = 25, -20
ownpal = 1
size.xscale = 1
size.yscale = 1



[State 1508, ChangeState]
type = ChangeState
trigger1 = 1
value = 1506



;=========================================
;-----------------------------------------
; Reflected projectile Kamehameha
[Statedef 1515]
type = S
physics = N
movetype = A
ctrl = 0
VelSet = 0,0
sprpriority = 4
poweradd = 150



[State 1515, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1



[State 1515, PlaySND]	;Ki sound
type = PlaySND
trigger1 = !Time
value = 10,0
channel = 1



[State 1515, Explod]	;"Projectile Counter!" notification (P1 Side)
type = Explod
trigger1 = !Time && NumExplod(13300)=0 && teamside = 1
Anim = 13300
pos = 10,80
postype = left 
removeTime = -2
supermove = 1
sprpriority = 0
id = 13300
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = -1
persistent = 0

[State 1515, Explod]	;"Projectile Counter!" notification (P2 Side)
type = Explod
trigger1 = !Time && NumExplod(13300)=0 && teamside = 2
Anim = 13301
pos = -169,80
postype = right
removeTime = -2
supermove = 1
sprpriority = 0
id = 13300
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = -1
persistent = 0



[State 1515, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1



[State 1515, Trans]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1



[State 1515, HitOverride]
type = HitOverride
trigger1 = 1
Time = -1
attr = SCA, AA, AP, AT
stateno = 1516
ignorehitpause = 1



[State 1515, HitBy]
type = HitBy
trigger1 = 1
Time = -1
value = SCA, NP, SP, HP
ignorehitpause = 1



[state 1515, VarSet]
type = VarSet
triggerall = numenemy
triggerall = enemy,authorname = "Balthazar & Cybaster"
trigger1 = enemy,name = "Goku Z2"
trigger2 = enemy,name = "SSJ Goku Z2"
trigger3 = enemy,name = "Vegeta Z2"
trigger4 = enemy,name = "Gohan Z2"
var(11) = 1

[State 1515, ChangeAnim]	;normal kamehameha FX (yellow/blue)
type = ChangeAnim
trigger1 = !Time && !PrevStateno; && var(11)=0 && root,var(44)=0
value = 1511

;[State 1515, Anim]		;normal kamehameha FX (old purple)
;type=null;ChangeAnim
;trigger1= !Time && !PrevStateno; && var(11)=0 && root,var(44)>=1
;value=1510

;;[State 1315, Anim]	;Goku kamehameha FX
;;type=ChangeAnim
;;trigger1= !Time && !PrevStateno && var(11)=1
;;value=1010



[State 1515, VelSet]
type = VelSet
trigger1 = 1
x = 8



[State 1515, AfterImage]
type = AfterImage
trigger1 = !Time && !PrevStateno
Time = 999
Timegap = 1
framegap = 2
length = 5
palcontrast = 50, 50, 200
trans = add
 


[State 1515, HitDef]
type = HitDef
trigger1 = 1
priority = 4,Hit
attr = S,SP
;ceil(61*root,fvar(15)), ceil(6*root,fvar(15))
damage = ceil(IfElse(root,fvar(11) * 61 < 7, 7, root,fvar(11) * 61)), ceil(6*root,fvar(11))
Animtype = Hard
hitflag = MAF
guardflag = MA
pauseTime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = -10,0
hitsound = S1000,0
guardsound = S6,0
ground.type = High
ground.slideTime = 16
ground.hitTime = 16
ground.velocity = -10,0
ground.cornerpush.veloff = 0
air.velocity = -4,-2
getpower = IfElse(p2movetype=H,40,140), 35
givepower = 35,35
envshake.Time = 14
envshake.freq = 120
envshake.ampl = 4
air.fall = 1
fall.recover = 1
fall.recoverTime = 16
yaccel = .5
airguard.ctrlTime = 16
airguard.velocity = -8, -1.5
forcestand = 1
p1sprpriority = 5



[State 1515, Explod]	;Sparks
type = Explod
trigger1 = movehit && numtarget
trigger1 = (target, movetype = H) && !(target, Time)
Anim = 7020
sprpriority = 3
postype = p2
pos = (target,const(size.ground.front)-10),-floor(p2dist y)
removeTime = -2
ownpal = 1
facing = -1
ignorehitpause = 1
persistent = 0
pausemoveTime = 100
supermoveTime = 100



[State 1515, ChangeState]
type = ChangeState
trigger1 = MoveContact
value = 1516
ignorehitpause = 1

[State 1515, DestroySelf]
type = DestroySelf
trigger1 = pos x !=[-200,200]



;=========================================
;-----------------------------------------
; Kamehameha Explod/vanish
[Statedef 1516]
type = A
physics = N
movetype = I
VelSet = 0,0
ctrl = 0
sprpriority = 4

[State 1516, NotHitBy]
type = NotHitBy
trigger1 = 1
Time = 1
value = SCA
ignorehitpause = 1

;[State 1516, Anim]		;VS Goku
;type = ChangeAnim
;trigger1 = !Time && var(11)=1
;value = 1013

;[State 1516, Anim]		;Repel (purple)
;type = ChangeAnim
;trigger1 = !Time && var(11)=0 && PrevStateno=1315 && root,var(44)>=1
;value = 1516

[State 1516, ChangeAnim]	;Repel (yellow/blue)
type = ChangeAnim
;trigger1 = !Time && var(11)=0 && PrevStateno=1315 && root,var(44)=0
trigger1 = !Time && PrevStateno=1315; && var(11)=0  && root,var(44)=0
value = 1511

[State 1516, ChangeAnim]	;Chou Kmh
type = ChangeAnim
trigger1 = !Time && PrevStateno=2402
trigger2 = !Time && PrevStateno=2462
trigger3 = !Time && PrevStateno=3006
value = 15999

[State 1516, ChangeAnim]		;Genkidama
type = ChangeAnim
trigger1 = !Time && (PrevStateno=2511 || PrevStateno=2521 || PrevStateno=2523 || PrevStateno=2531 || PrevStateno=2533)
value = 2511

[State 1516, ChangeAnim]		;Genkidama
type = ChangeAnim
trigger1 = PrevStateno=2533
trigger1 = Anim=2511 && !AnimTime
value = 2532

[State 1516, scale Genkidama]
type = AngleDraw
trigger1 = Anim=2511
scale = 0.5-0.005*Time,0.5-0.005*Time
ignorehitpause = 1

[State 1516, Anim];Movie 7 hitter
type = ChangeAnim
trigger1 = !Time && PrevStateno=2961
value = 15997



[State 1516, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1



[State 1516, Trans]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1



[State 1516, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime

;[State 1516, DestroySelf]	;End with Zzyzzyxx fix
;type = DestroySelf
;triggerall = !AnimTime
;trigger1 = !numtarget
;trigger2 = numtarget
;trigger2 = target, Time <= 1 && !(target, hitshakeover)



;===========================================================================
;---------------------------------------------------------------------------
; Taiyoken - 1
[Statedef 1701]
type = A
movetype = A;I
physics = N
juggle = 0
VelSet = 0,0
ctrl = 0
Anim = 1701
poweradd = 0
sprpriority = -3



[State 1701, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 0		;no hit, it's not a "physical" hit, it only blinds the enemy.
ignorehitpause = 1



[State 1701, OM variable]
type = ParentVarAdd
triggerall = NumHelper(2550)=1||NumHelper(2560)=1
triggerall = root,fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 1701, OM variable]
type = parentVarSet
triggerall = NumHelper(2550)=1||NumHelper(2560)=1
triggerall = root,fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0



[State 1701, PlaySND]	;Solar flare sound 1
type = PlaySND
trigger1 = !Time
value = 1700,0
volumescale = 75
[State 1701, PlaySND]	;Solar flare sound 2
type = PlaySND
trigger1 = !Time
value = 1700,1
volumescale = 100



[State 1701, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1



[State 1701, SprPriority];Fixed sprite priority
type = SprPriority
trigger1 = 1
value = -3
ignorehitpause = 1



[State 1701, BindToParent]
type = BindToParent
trigger1 = 1
Time = 1
pos = 0,-55	;-7,-55
ignorehitpause = 1




[State 1701, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
Time = 1
ignorehitpause = 1



[State 1701, HitDef]
type = HitDef
triggerall = Root, Var(18) <= 15 ;juggle points
triggerall = Enemy, MoveType != H
trigger1 = AnimElem = 2
attr = S, SA
damage = Ceil(IfElse(root, fvar(11) * 0 < 0, 0, root, fvar(11) * 0)), 0
Animtype = Hard
guardflag = MA
hitflag = MA
priority = 3, Hit
pauseTime = 0, 8
guard.pauseTime = 11,11
sparkno = -1; s7010
guard.sparkno = s7000
sparkxy = 0,0;-12,-34
hitsound = s8,1;s5, 0
guardsound = S6,0
ground.type = High
ground.slideTime = 12;8
ground.hitTime  = 12;8
ground.velocity = -8   ;-3
guard.velocity = -8
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -8,-6
Ground.cornerpush.veloff=0
Air.cornerpush.veloff=0
air.hitTime = 12
air.Animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
kill = 0
p1sprpriority = -3	;not p1 sprite priority, but the Helper's...
id = 1700

[State 1701, HitDef]
type = HitDef
triggerall = Root, Var(18) <= 15 ;juggle points
triggerall = Enemy, MoveType = H
trigger1 = AnimElem = 2
attr = S, SA
damage = Ceil(IfElse(root, fvar(11) * 0 < 0, 0, root, fvar(11) * 0)), 0
Animtype = Hard
guardflag = MA
hitflag = MA
priority = 3, Hit
pauseTime = 0, 8
guard.pauseTime = 11,11
sparkno = -1; s7010
guard.sparkno = s7000
sparkxy = 0,0;-12,-34
hitsound = s8,1;s5, 0
guardsound = S6,0
ground.type = High
ground.slideTime = 12;8
ground.hitTime  = 12;8
ground.velocity = -8   ;-3
guard.velocity = -8
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -8,-6
Ground.cornerpush.veloff=0
Air.cornerpush.veloff=0
air.hitTime = 12
air.Animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
kill = 0
p1sprpriority = -3	;not p1 sprite priority, but the Helper's...
id = 1701
fall = 1
fall.recover = 0



[State 1701, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = numtarget
trigger1 = !(target, isHelper)
;triggerall = Target, MoveType != H
value = IfElse(Enemy, StateType = A,1707,1705)
ignorehitpause = 1
persistent = 0
id = 1700



[State 1701, ChangeState]
type = ChangeState
trigger1 = Time >= 230;100  ;this keeps the count of the hit
value = 1702
ctrl = 0
ignorehitpause = 1



;===========================================================================
;---------------------------------------------------------------------------
; Taiyoken - 2
[Statedef 1702]
type = A
movetype = I
physics = N
VelSet = 0,0
ctrl = 0
poweradd = 0
sprpriority = -3



[State 1702, SprPriority]	;Fixed sprite priority
type = SprPriority
trigger1 = 1
value = -3
ignorehitpause = 1

 

[State 1702, BindToParent]
type = BindToParent
trigger1 = 1
Time = 1
pos = -7,-28	;-7,-55



[State 1702, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1



[State 1702, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
Time = 1
ignorehitpause = 1



[State 1702, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime
trigger2 = NumTarget
trigger2 = Target, MoveType != H



;===========================================================================
;---------------------------------------------------------------------------
; Taiyoken - effect
[Statedef 1703]
type = A
movetype = A;I
physics = N
VelSet = 0,0
ctrl = 0
Anim = 1703
poweradd = 0
sprpriority = -3



[State 1703, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1

[State 1703, SprPriority]	;Fixed sprite priority
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1 



[State 1703, BindToParent]
type = BindToParent
trigger1 = !Time
Time = 1
pos = 0,-55	;-7,-55		
ignorehitpause = 1



[State 1703, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
Time = 1
ignorehitpause = 1



[State 1703, ChangeState]
type = DestroySelf
trigger1 = AnimTime = 0;NumHelper(1701)
;trigger1 = Helper(1701), StateNo != 1701
ignorehitpause = 1

;===========================================================================
;---------------------------------------------------------------------------
; Toriyama
[Statedef 1704, Toriyama]
type = A
movetype = I
physics = N
VelSet = 0,0
ctrl = 0
Anim = 1704	;Toriyama
poweradd = 0
sprpriority = -3
;Toriyama

[State 1704, Toriyama]
type = AssertSpecial
trigger1 = 1
flag = NoShadow		;Toriyama
ignorehitpause = 1

[State 1704, Toriyama]	;Toriyama
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1 

[State 1704, Toriyama]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
Time = 1
ignorehitpause = 1

[State 1704, Toriyama]
type = DestroySelf
trigger1 = AnimTime = 0;Toriyama
;trigger1 = ToriyamaToriyamaToriyama
ignorehitpause = 1


;======================================================================
;>>>>KIKOHO<<<<
; Helper
; blast (downwards) : 2102
; column : 2103
; EFFECTS
; blast (downwards) : 2104
; explosion, pillar : 2105
; upwards column : 2106
; ground effect : 2107
;======================================================================

;---------------------------------------------------------------------------
;Kikoho lvl 1 -1
[Statedef 2102]
type = A
MoveType = A
physics = N
Anim = 2102
sprpriority = 5
;hitcountpersist = 1
;MoveHitpersist = 1

[State 2102, Helper]
type = Helper
trigger1 = Time = 0
Helpertype = normal
name = "KiKoHo FX 1"
ID = 2104
stateno = 2104
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1



[State 2102, Successful hit - Explod]
type = Explod
triggerall = NumTarget
triggerall = !NumExplod(2102000)
trigger1 = MoveHit
Anim = 15999	;blank Anim
ID = 2102000
removeongethit = 1
ignorehitpause = 1
persistent = 0



[State 2102, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 0		;no hit, so no points to be added here
ignorehitpause = 1



[State 2102, PlaySND]	;Kikoho sound 1
type = PlaySND
trigger1 = !Time
value = S2000,1
ignorehitpause = 1


;[State 2102, gethit gut ?]
;type = VarSet
;trigger1 = !Time
;var(14) = Root, Var(14)

[State 2102, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= Invisible

;
;[State 1061, NoJuggle]
;type = ParentVarSet
;trigger1 = Time = 0
;v = 18
;value = 1

[State 2102, VelSet]	;Velocity
type = VelSet
trigger1 = Time = 4
x = IfElse(Root, var(6)= 0, 10, IfElse(Root, var(6) = 1,13,16))	;12
y = 12

[State 1061, VelSet]	;The Kikoho remains on screen.
type = VelSet
trigger1 = FrontEdgeDist < 0
x = 0



[State 2102, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
ignorehitpause = 1

;[State 2002, HitBy]
;type = HitBy
;trigger1 = Time >= 0
;value = SCA, NP, SP, HP
;Time = 1
;ignorehitpause = 1

;[State 1061, HitOverride]
;type = HitOverride
;trigger1 = Time >= 0
;slot = 1
;Time = 1
;stateno = 1013
;attr = SCA, AA, AP, AT
;ignorehitpause = 1

[State 2102, HitDef]
type = HitDef
trigger1 = !Time ;var(14)=0
attr = A, HP
Animtype = hard
damage = 0,0;Ceil(IfElse(root,fvar(11) * 80 < 15, 15, root,fvar(11) * 80)), 3
priority  = 7,Hit
guardflag = MA
hitflag = MAF;D
pauseTime = 0,1
sparkno = -1;s7030
guard.sparkno = s7000
sparkxy = 0,0;ceil(enemynear,pos y)
hitsound   = -1;s2000,3
guardsound = S6,0
ground.type = Low
air.type = Low
ground.slideTime = 20
ground.hitTime  = 50;20
air.hitTime  = 50;20
ground.velocity = -5.7,7
guard.velocity = -4.5
air.velocity = -5.7,7
airguard.velocity = -2.9, -3
EnvShake.Time = 5
EnvShake.ampl = 4
EnvShake.freq = 176
;fall.EnvShake.Time = 10
;fall.EnvShake.ampl = 4
;fall.EnvShake.freq = 176
yaccel = 0.5
air.fall = 1
fall.recover = 0
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
numhits = 0
id = 2102



[State 2102, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = NumTarget;()
trigger1 = !(target, isHelper) 
value = 2011	;custom state, go to supers.cns
ID = 2102
ignorehitpause = 1
persistent = 0



[State 2102, TargetBind]
type = TargetBind
trigger1 = MoveHit
trigger1 = P2Bodydist y <= 20
Time = 1
pos = 0,0
ignorehitpause = 1



[State 2102, ChangeState]	;Kikoho - eruption
type = ChangeState
trigger1 = pos y >= -24
value = 2103
ignorehitpause=1



;===========================================================================
;---------------------------------------------------------------------------
;Kikoho lvl 1 -2
[Statedef 2103]
type = A
MoveType = A
physics = N
Anim = 2106
sprpriority = 5
hitcountpersist = 1
;MoveHitpersist = 1
juggle = 15
VelSet = 0,0



;[State 2103, BindToTarget]
;type = BindToTarget
;trigger1 = Time = 0
;Time = 1
;;ID = -1
;pos = 30,0,Foot;"Mid","Head"
;ignorehitpause = 1 
;;persistent =



;[State 2103, RemoveExplod]
;type = RemoveExplod
;trigger1 = Time = 1
;id = 2102000
;;ignorehitpause = 
;;persistent = 

;[State 2102, Successful hit - Explod]
;type = Explod
;triggerall = NumTarget
;triggerall = !NumExplod(2102000)
;trigger1 = MoveHit
;Anim = 15999	;blank Anim
;ID = 2102000
;removeongethit = 1
;ignorehitpause = 1
;persistent = 0



[State 2103, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 7	;1
ignorehitpause = 1
persistent = 0



[State 2103, PlaySND]	;Kokoho sound 2
type = PlaySND
trigger1 = !Time
value = S2000,2
ignorehitpause = 1



[State 2103, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1



[State 2103, PosSet]
type = PosSet
trigger1 = !Time
y = 0
ignorehitpause = 1

[State 2103, PosAdd - correct alingment]
type = PosAdd
trigger1 = !Time
x = -10
ignorehitpause = 1 



[State 2103, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= Invisible


[State 2103, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2103, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
Time = 1
ignorehitpause = 1


[State 2103, HitDef]
type = HitDef
triggerall = Root,var(18)<45
trigger1 = !Time   ;var(14)=0
attr = A, HP
Animtype  = Hard
damage = Ceil(IfElse(root,fvar(11) * 150 < 40, 40, root,fvar(11) * 150)), 8
priority  = 7,Hit
guardflag = MA
hitflag = MAFD
pauseTime = 0,40;40
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,ceil(Floor(enemynear, pos y))-65
hitsound   = s2000,3
guardsound = S6,0
ground.type = High
air.type = High
ground.slideTime = 20
ground.hitTime  = 20
ground.velocity = 0,-12.5	;-1.3,-12.5
guard.velocity = -4.5
air.velocity = 0,-12.5	;-2.1,-12.5
airguard.velocity = -3.7, -6
EnvShake.Time = 5
EnvShake.ampl = 4
EnvShake.freq = 176
;fall.EnvShake.Time = 10
;fall.EnvShake.ampl = 4
;fall.EnvShake.freq = 176
yaccel = 0.5
air.fall = 1
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
id = 2113



[State 2103, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = NumTarget;()
trigger1 = !(target, isHelper)
trigger1 = Target, pos y >= 10 
value = 2012	;custom state, go to supers.cns
ID = 2113
ignorehitpause = 1
persistent = 0



[State 2103, Helper - Explosion]
type = Helper
trigger1 = Time = 0
Helpertype = normal 
name = "KiKoHo FX 2 1"
ID = 2105
stateno = 2105
pos = 0,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1

[State 2103, Helper - Beam]
type = Helper
trigger1 = Time = 0
Helpertype = normal 
name = "KiKoHo FX 2 2"
ID = 2106
stateno = 2106
pos = 0,-167
postype = p1   
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1

[State 2103, Helper - Ground effect]
type = Helper
trigger1 = Time = 0
Helpertype = normal
name = "KiKoHo FX 2 3"
ID = 2107
stateno = 2107
pos = 0,0
postype = p1  
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1



[State 2103, Super BG Proj]
type = Projectile
triggerall = RoundState = 2
trigger1 = MoveHit = 1
ProjID = 3000	;Ki attack
projAnim = 15999
projremoveTime = 1
ignorehitpause = 1



[State 2103, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime
trigger2 = NumTarget
trigger2 = Target, MoveType != H

;[State 2103, End]
;type = DestroySelf
;triggerall = !MoveContact
;trigger1   = !AnimTime



;===========================================================================
;---------------------------------------------------------------------------
;Kikoho lvl 1 -1 FX
[Statedef 2104]
type = A
MoveType = I
physics = N
Anim = 2102
sprpriority = 5



[State 2104, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 2104, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 2104, AngleDraw]
type = AngleDraw
triggerall = AnimElemTime(4) >= 0
trigger1 = FrontEdgeDist < 0
trigger1 = vel x = 0
value = -30
ignorehitpause = 1
persistent = 1



[State 2104, BindToParent]
type = BindToParent
trigger1 = 1
Time = 1
pos = 0,0
ignorehitpause = 1



[State 2104, DestroySelf]
type = DestroySelf
trigger1 = Parent, StateNo != 2102
ignorehitpause = 1



;===========================================================================
;---------------------------------------------------------------------------
;Kikoho lvl 1 -2 FX 1
;Explosion
[Statedef 2105]
type = A
MoveType = I
physics = N
Anim = 2103
sprpriority = 5



[State 2105, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 2105, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 2105, BindToParent]
type = BindToParent
trigger1 = Time = 0
Time = 1
pos = 0,0
ignorehitpause = 1



[State 2105, DestroySelf]
type = DestroySelf
trigger1 = Parent, StateNo != 2103
ignorehitpause = 1

[State 2105, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime
trigger2 = NumTarget
trigger2 = Target, MoveType != H



;===========================================================================
;---------------------------------------------------------------------------
;Kikoho lvl 1 -2 FX 2
;Beam
[Statedef 2106]
type = A
MoveType = I
physics = N
Anim = 2104
sprpriority = 5



[State 2106, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 2106, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 2106, BindToParent]
type = BindToParent
trigger1 = Time = 0
Time = 1
pos = 0,-167
ignorehitpause = 1



[State 2106, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1,1+(18*-Time)
ignorehitpause = 1



[State 2106, DestroySelf]
type = DestroySelf
trigger1 = Parent, StateNo != 2103
ignorehitpause = 1

[State 2106, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime
trigger2 = NumTarget
trigger2 = Target, MoveType != H



;===========================================================================
;---------------------------------------------------------------------------
;Kikoho lvl 1 -2 FX 3
;Ground
[Statedef 2107]
type = A
MoveType = I
physics = N
Anim = 2105
sprpriority = -3



[State 2107, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 2107, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 2107, BindToParent]
type = BindToParent
trigger1 = 1
Time = 1
pos = 0,0
ignorehitpause = 1



[State 2107, DestroySelf]
type = DestroySelf
trigger1 = Parent, StateNo != 2103
ignorehitpause = 1



[State 2107, DestroySelf]
type = DestroySelf
trigger1 = Time >= 24
trigger2 = NumTarget
trigger2 = Target, MoveType != H



;===========================================================================
;==========================================================
; Dizzy FX - kikoho
[Statedef 2150]
physics = N
VelSet = 0, 0
Anim = 15999
sprpriority = 4



[State 2150, BindToParent]
type = BindToParent
trigger1 = 1 
Time = 1
pos = 0,0



[State 2150, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1



;[State 2150, Pos]
;type = PosAdd
;trigger1 = 1
;x = ceil(p2dist x)
;y = ceil(p2dist y)



[State 2150, Explod]	;Dizzy Stars
type = Explod
trigger1 = Root, StateNo = 5300
Anim = 25340
ID = 25340
sprpriority = 7
postype = p1
pos = 0, const(size.head.pos.y)-20
removeTime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemoveTime = 100
supermoveTime = 100
bindTime = -1
scale = .8,.8



[State 2150, PlaySND];Dizzy sound
type = PlaySND
trigger1 = Root, Stateno = 5300
value = 2522, IfElse(random < 500, 0, 1)
persistent = 0



[State 2150, RemoveExplod]
type = RemoveExplod
trigger1 = Root, Ctrl
trigger2 = Root, MoveType != H
trigger3 = Root, StateNo != 5300
ID = 25340



[State 2150, DestroySelf]
type = DestroySelf
trigger1 = Root, Ctrl
trigger2 = Root, MoveType != H
trigger3 = Root, StateNo != 5300



;===========================================================================
;===================================================
; old Dodonpa - Helper
[Statedef 2206]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = -2
Anim = 2206



[State 2206, BindToParent]
type = BindToParent
trigger1 = 1
pos = 26,-56



[State 2206, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1,0.5



[State 2206, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1



[State 2206, HitDef]
type = HitDef
trigger1 = !Time
attr = S,SP		;special (S) or super(H)?
hitflag = MAF
guardflag = MA
priority = 7,Hit
damage = Ceil(IfElse(root,fvar(11) * 70 < 20, 20, root,fvar(11) * 70)), 9
getpower = 0,0
givepower = 35,35
pauseTime = 0,20
Animtype = Low
air.Animtype = Back
fall.Animtype = Back
ground.type = High
air.type = Low
ground.hitTime = 16
ground.slideTime = 16
guard.hitTime = 16
air.hitTime = 13
airguard.ctrlTime = 16
ground.velocity= -12,-4
guard.velocity = -6
air.velocity= -10,-5
airguard.velocity = -6.5, -1.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
sparkno = s7030
guard.sparkno = s7000
hitsound   = s1000,0; s2015,20 ;s1000,0
guardsound = S6,0
envshake.Time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.Time=32
p1sprpriority = -5



[State 2206, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime
trigger2 = parent,movetype = H


;======================================================================
;>>>>DODONPA<<<
; Helper
; blast (downwards) : 2102
; column : 2103
; EFFECTS
; blast (downwards) : 2104
; explosion, pillar : 2105
; upwards column : 2106
; ground effect : 2107
;======================================================================

;===================================================

;Super - Lvl 1 - Dodonpa

;===================================================
; Tien's Dodonpa LVL1
[Statedef 2207]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5
Anim = 2211



[State 2207, PosFreeze]
type = PosFreeze
trigger1 = Time < 2
value = 1



[State 2207, Super BG Proj]
type = Projectile
triggerall = RoundState = 2
trigger1 = MoveHit = 1
ProjID = 3000	;Ki attack
projAnim = 15999
projremoveTime = 1
ignorehitpause = 1



[State 2207, VelSet]
type = VelSet
trigger1 = 1
x = IfElse((Time<2 && var(2)>1),1,20)



;[State 2207, BindToParent]
;type = BindToParent
;trigger1 = Time = 0
;pos = 100,-60



[State 2207, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 8		;for damage dampening purposes it's 4 instead of 1.
ignorehitpause = 1
persistent = 0



[State 2207, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1



[State 2207, HitDef]
type = HitDef
trigger1 = !MoveContact
attr = S,HP
hitflag = MAF
guardflag = MA
priority = 7,Hit
damage = Ceil(IfElse(root,fvar(11) * 175 < 30, 30, root,fvar(11) * 175)), 9
getpower = 0,0
givepower = 35,35
pauseTime = 0,20
Animtype = Low
air.Animtype = Back
fall.Animtype = Back
ground.type = High
air.type = Low
ground.hitTime = 16
ground.slideTime = 16
guard.hitTime = 16
air.hitTime = 13
airguard.ctrlTime = 16
ground.velocity= -12,-4
guard.velocity = -6
air.velocity= -10,-5
airguard.velocity = -6.5, -1.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
sparkno = s7030
guard.sparkno = s7000
hitsound   = s1000,0; s2015,20 ;s1000,0
guardsound = S6,0
envshake.Time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.Time=32
p1sprpriority = -5



[State 2207, Helper - Beam]
type = Helper
trigger1 = Time = 0
Helpertype = normal 
name = "Dodonpa FX 2 - Trail"
ID = 2209
stateno = 2209
;pos = 0,-167
postype = p1   
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1

[State 2207, Helper - Beam]
type = Helper
trigger1 = Time = 0
Helpertype = normal 
name = "Dodonpa FX 2.1 - End Trail"
ID = 2212
stateno = 2212
;pos = 0,-167
postype = p1   
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1

[State 2207, Helper - Head]
type = Helper
trigger1 = Time = 0
Helpertype = normal 
name = "Dodonpa FX 3 - Head"
ID = 2210
stateno = 2210
pos = 0,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1


;[State 2207, DestroySelf]
;type = DestroySelf
;trigger1 = Time = 45
;trigger2 = parent,movetype = H
;ignorehitpause = 1
;
;[State 2207, DestroySelf]
;type = DestroySelf
;trigger1 = Root, StateNo != 2201
;ignorehitpause = 1



[State 2207, ChangeState]
type = ChangeState
trigger1 = Time = 45
trigger2 = parent,movetype = H
ignorehitpause = 1
value = 2215

[State 2207, ChangeState]
type = ChangeState
trigger1 = Root, StateNo != 2201
ignorehitpause = 1
value = 2215



;===========================================================================
;---------------------------------------------------------------------------
;Dodonpa FX 1 - start
[Statedef 2208]
type = A
MoveType = I
physics = N
Anim = 2208
sprpriority = 5



[State 2208, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 2208, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 2208, BindToParent]
type = BindToParent
trigger1 = Time = 0
Time = 1
pos = 118,-62
ignorehitpause = 1

[State 2208, BindToParent]
type = BindToParent
trigger1 = Time >= 4
Time = 1
pos = 111,-63
ignorehitpause = 1



[State 2208, DestroySelf]
type = DestroySelf
trigger1 = Time >= 30
trigger2 = NumTarget
trigger2 = Target, MoveType != H

[State 2208, DestroySelf]
type = DestroySelf
trigger1 = Root, StateNo != 2201
ignorehitpause = 1



;===========================================================================
;---------------------------------------------------------------------------
;Dodonpa FX 2 - trail
[Statedef 2209]
type = A
MoveType = I
physics = N
Anim = 2209
sprpriority = 4



[State 2209, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 2209, AssertSpecial]
type = AssertSpecial
trigger1 = AnimElem = 1
flag = Invisible



[State 2209, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 2209, BindToParent]
type = BindToParent
trigger1 = Time = 0
Time = 1
pos = 14,-3
ignorehitpause = 1



[State 2209, VarAdd]
type = VarAdd
trigger1 = root,stateno = 2201
var(0) = 1
ignorehitpause = 1



[State 2209, Effect scaling 1]
type = AngleDraw
trigger1 = root,stateno = 2201
trigger1 = !MatchOver
trigger1 = Time >= 4
scale = (56.0 + abs(pos X - (Helper(2210),pos X)))/57.0 , 1    ;60+...	/60.0	2208
value = 0
ignorehitpause = 1

[State 2209, Effect scaling 2]
type = AngleDraw
trigger1 = root,stateno = 2201
scale = 10, IfElse(1-0.05*(Time-var(0))<0, 0, 1-0.05*(Time-var(0)))	;10,...
value = 0
ignorehitpause = 1



[State 2209, VelSet]
type = VelSet
trigger1 = Time >= 30
x = 20
ignorehitpause = 1



[State 2209, DestroySelf]
type = DestroySelf
trigger1 = Time >= 45
trigger2 = NumTarget
trigger2 = Target, MoveType != H
ignorehitpause = 1



[State 2209, DestroySelf]
type = DestroySelf
trigger1 = Parent, StateNo != 2207
ignorehitpause = 1

[State 2209, DestroySelf]
type = DestroySelf
trigger1 = Root, Stateno != 2201
ignorehitpause = 1



;===========================================================================
;---------------------------------------------------------------------------
;Dodonpa FX 3 - head
[Statedef 2210]
type = A
MoveType = I
physics = N
Anim = 2210
sprpriority = 5



[State 2210, Velocity]
type = VelSet
trigger1 = 1
x = IfElse((Time<2 && var(2)>1),1,20)
ignorehitpause = 1



[State 2210, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 2210, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 2210, BindToParent]
type = BindToParent
trigger1 = Time = 0
Time = 1
pos = 0,-3
ignorehitpause = 1



[State 2210, DestroySelf]
type = DestroySelf
trigger1 = Time >= 45
trigger2 = NumTarget
trigger2 = Target, MoveType != H

[State 2210, DestroySelf]
type = DestroySelf
trigger1 = Parent, StateNo != 2207
trigger2 = Root, StateNo != 2201
ignorehitpause = 1



;===========================================================================
;---------------------------------------------------------------------------
;Dodonpa FX 2.1 - end trail
[Statedef 2212]
type = A
MoveType = I
physics = N
Anim = 2212
sprpriority = 4



[State 2212, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 2212, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 30
flag = Invisible



[State 2212, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 2212, BindToParent]
type = BindToParent
trigger1 = Time = 0
Time = 1
pos = 0,-3	;14,-3
ignorehitpause = 1



[State 2212, VelSet]
type = VelSet
trigger1 = Time >= 30
x = 20
ignorehitpause = 1



[State 2212, DestroySelf]
type = DestroySelf
trigger1 = Time >= 45
trigger2 = NumTarget
trigger2 = Target, MoveType != H

[State 2212, DestroySelf]
type = DestroySelf
trigger1 = Parent, StateNo != 2207
trigger2 = Root, StateNo != 2201
ignorehitpause = 1



;===========================================================================
;===================================================
; End - Tien's Dodonpa
[Statedef 2215]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 0
Anim = 15999



[State 2215, DestroySelf]
type = DestroySelf
trigger1 = Enemy, MoveType != H
ignorehitpause = 1



;===========================================================================
;---------------------------------------------------------------------------
; Tien - playerpush
[Statedef 2216]
type = S
ctrl = 0
Anim = Root, Anim
movetype = I
physics = S
sprpriority = -5



[State 2216, BindToParent]
type = BindToRoot
trigger1 = 1
Time = 1
pos = 2,0
ignorehitpause = 1
persistent = 1



[State 2216, Width]
type = Width
trigger1 = 1
value = 35,0



[State 2216, PlayerPush]
type = PlayerPush
trigger1 = 1 
value = 1
ignorehitpause = 1



[State 2216, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
Time = 1



[State 2216, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2 = NoShadow
ignorehitpause = 1



[State 2216, DestroySelf]
type = DestroySelf
trigger1 = Root, StateNo != 2201 && Root, StateNo != 2231
ignorehitpause = 1
persistent = 1


;
;;===========================================================================
;;===================================================
;; --Chiaotzu's Dodonpa
;[Statedef 2220]
;type = A
;physics = N
;movetype = A
;ctrl = 0
;sprpriority = 0
;Anim = 2211
;
;[State 2220, Velocity]
;type = VelSet
;trigger1 = 1
;x = IfElse((Time<2 && var(2)>1),1,18)	;20
;
;
;
;;[State 2220, BindToParent]
;;type = BindToParent
;;trigger1 = Time = 0
;;pos = 40,-57		;30,-57
;
;
;
;[State 2220, AssertSpecial]
;type = AssertSpecial
;trigger1 = 1
;flag = NoShadow
;ignorehitpause = 1
;
;
;
;[State 2220, hit]
;type = HitDef
;trigger1 = Time < 35
;attr = S,SP
;hitflag = MAF
;guardflag = MA
;priority = 7,Hit
;damage = Ceil(IfElse(root,fvar(11) * 70 < 35, 35, root,fvar(11) * 70)), 9
;getpower = 0,0
;givepower = 35,35
;pauseTime = 0,20
;Animtype = Low
;air.Animtype = Back
;fall.Animtype = Back
;ground.type = High
;air.type = Low
;ground.hitTime = 16
;ground.slideTime = 16
;guard.hitTime = 16
;air.hitTime = 13
;airguard.ctrlTime = 16
;ground.velocity= -12,-4
;guard.velocity = -6
;air.velocity= -10,-5
;airguard.velocity = -6.5, -1.5 
;ground.cornerpush.veloff = 0
;guard.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
;airguard.cornerpush.veloff = 0
;yaccel = .5
;fall=1
;air.fall = 1
;fall.recover = 0
;sparkno = s7030
;guard.sparkno = s7000
;hitsound   = s1000,0; s2015,20 ;s1000,0
;guardsound = S6,0
;envshake.Time = 16
;envshake.ampl = 6
;envshake.freq = 100
;forcestand = 1
;palfx.sinadd=64,64,64,4
;palfx.mul=128,128,128
;palfx.Time=32
;p1sprpriority = -5
;persistent = 0
;
;
;
;[State 2220, Helper - Beam]
;type = Helper
;trigger1 = Time = 0
;Helpertype = normal 
;name = "Dodonpa FX 2 - Trail"
;ID = 2222
;stateno = 2222
;;pos = 0,-167
;postype = p1   
;facing = 1
;keyctrl = 0
;ownpal = 1
;supermoveTime = 0
;pausemoveTime = 0
;ignorehitpause = 1
;
;[State 2220, Helper - Beam]
;type = Helper
;trigger1 = Time = 0
;Helpertype = normal 
;name = "Dodonpa FX 2.1 - End Trail"
;ID = 2223
;stateno = 2223
;;pos = 0,-167
;postype = p1    
;facing = 1
;keyctrl = 0
;ownpal = 1
;supermoveTime = 0
;pausemoveTime = 0
;ignorehitpause = 1
;
;[State 2220, Helper - Head]
;type = Helper
;trigger1 = Time = 0
;Helpertype = normal 
;name = "Dodonpa FX 3 - Head"
;ID = 2224
;stateno = 2224
;pos = 0,0
;postype = p1    
;facing = 1
;keyctrl = 0
;ownpal = 1
;supermoveTime = 0
;pausemoveTime = 0
;ignorehitpause = 1
;
;
;
;;[State 2220, End]
;;type = DestroySelf
;;trigger1 = Time = 45
;;trigger2 = Helper(30000), StateNo != 31001
;;ignorehitpause = 1
;
;[State 2220, ChangeState]
;type = ChangeState
;trigger1 = Time = 45
;trigger2 = Helper(30000), StateNo != 31001
;value = 2225
;ignorehitpause = 1
;
;
;
;
;;===========================================================================
;;---------------------------------------------------------------------------
;;Dodonpa FX 1 - start
;[Statedef 2221]
;type = A
;MoveType = I
;physics = N
;Anim = 2208
;sprpriority = 0
;
;[State 2222, VarAdd]	;End
;type = VarAdd
;trigger1 = Helper(30000),stateno = 31002
;var(0) = 1
;ignorehitpause = 1
;
;
;
;;[State 2222, Effect scaling 1]
;;type = AngleDraw
;;trigger1 = Helper(30000),stateno = 31001
;;trigger1 = !MatchOver
;;trigger1 = Time >= 4
;;scale = (56.0 + abs(pos X - (Helper(2224),pos X)))/57.0 , 1    ;60+...	/60.0, 1
;;value = 0
;;ignorehitpause = 1
;
;[State 2222, Effect scaling 2]
;type = AngleDraw
;trigger1 = Helper(30000),stateno = [31000,31002]
;scale =  1, IfElse(1-0.02*(Time-var(0))<0, 0, 1-0.02*(Time-var(0)))	;10,...
;value = 0
;ignorehitpause = 1
;
;[State 2221, AssertSpecial]
;type = AssertSpecial
;trigger1 = 1
;flag = NoShadow
;
;
;
;[State 2221, NotHitBy]
;type = NotHitBy
;trigger1 = Time >= 0
;Time = 1
;value = SCA, AA, AT,AP
;ignorehitpause = 1
;
;
;
;[State 2221, BindToParent]
;type = BindToParent
;trigger1 = Time = 0
;Time = 1
;pos = 30,-30
;ignorehitpause = 1
;
;[State 2221, BindToParent]
;type = BindToParent
;trigger1 = Time >= 4
;Time = 1
;pos = 28,-31	;x+2 y-1
;ignorehitpause = 1
;
;
;
;[State 2221, DestroySelf]
;type = DestroySelf
;trigger1 = Helper(30000), StateNo != 31001
;ignorehitpause = 1
;
;[State 2221, DestroySelf]
;type = DestroySelf
;trigger1 = Time >= 30
;trigger2 = NumTarget
;trigger2 = Target, MoveType != H
;
;
;
;;===========================================================================
;;---------------------------------------------------------------------------
;;Dodonpa FX 2 - trail
;[Statedef 2222]
;type = A
;MoveType = I
;physics = N
;Anim = 2209
;sprpriority = -1
;
;
;[State 2222, AssertSpecial]
;type = AssertSpecial
;trigger1 = 1
;flag = NoShadow
;
;[State 2222, AssertSpecial]
;type = AssertSpecial
;trigger1 = AnimElem = 1
;flag = Invisible
;
;
;
;[State 2222, NotHitBy]
;type = NotHitBy
;trigger1 = Time >= 0
;Time = 1
;value = SCA, AA, AT,AP
;ignorehitpause = 1
;
;
;
;[State 2222, BindToParent]
;type = BindToParent
;trigger1 = Time = 0
;Time = 1
;pos = 13,-1
;ignorehitpause = 1
;
;
;
;[State 2222, VarAdd]	;End
;type = VarAdd
;trigger1 = Helper(30000),stateno = 31002
;var(0) = 1
;ignorehitpause = 1
;
;
;
;[State 2222, Effect scaling 1]
;type = AngleDraw
;trigger1 = Helper(30000),stateno = 31001
;trigger1 = !MatchOver
;trigger1 = Time >= 4
;scale = (56.0 + abs(pos X - (Helper(2224),pos X)))/57.0 , 1    ;60+...	/60.0, 1
;value = 0
;ignorehitpause = 1
;
;[State 2222, Effect scaling 2]
;type = AngleDraw
;trigger1 = Helper(30000),stateno = [31000,31002]
;scale =  10, IfElse(1-0.02*(Time-var(0))<0, 0, 1-0.02*(Time-var(0)))	;10,...
;value = 0
;ignorehitpause = 1
;
;
;
;
;
;[State 2222, VelSet]
;type = VelSet
;trigger1 = Time >= 30
;x = 20
;ignorehitpause = 1
;
;
;
;[State 2222, DestroySelf]
;type = DestroySelf
;;trigger1 = Time >= 45
;trigger1 = NumTarget
;trigger1 = Target, MoveType != H
;ignorehitpause = 1
;
;[State 2222, DestroySelf]
;type = DestroySelf
;trigger1 = Parent, StateNo != 2220
;ignorehitpause = 1
;
;[State 2222, DestroySelf]
;type = DestroySelf
;trigger1 = Helper(30000), Stateno != 31001
;ignorehitpause = 1
;
;
;
;;===========================================================================
;;---------------------------------------------------------------------------
;;Dodonpa FX 2.1 - end trail
;[Statedef 2223]
;type = A
;MoveType = I
;physics = N
;Anim = 2212
;sprpriority = -1
;
;[State 2222, VarAdd]	;End
;type = VarAdd
;trigger1 = Helper(30000),stateno = 31002
;var(0) = 1
;ignorehitpause = 1
;
;
;
;[State 2222, Effect scaling 1]
;type = AngleDraw
;trigger1 = Helper(30000),stateno = 31001
;trigger1 = !MatchOver
;trigger1 = Time >= 4
;scale = (56.0 + abs(pos X - (Helper(2224),pos X)))/57.0 , 1    ;60+...	/60.0, 1
;value = 0
;ignorehitpause = 1
;
;[State 2222, Effect scaling 2]
;type = AngleDraw
;trigger1 = Helper(30000),stateno = [31000,31002]
;scale =  1, IfElse(1-0.02*(Time-var(0))<0, 0, 1-0.02*(Time-var(0)))	;10,...
;value = 0
;ignorehitpause = 1
;
;[State 2223, AssertSpecial]
;type = AssertSpecial
;trigger1 = 1
;flag = NoShadow
;
;[State 2223, AssertSpecial]
;type = AssertSpecial
;trigger1 = Time < 30
;flag = Invisible
;
;
;
;[State 2223, NotHitBy]
;type = NotHitBy
;trigger1 = Time >= 0
;Time = 1
;value = SCA, AA, AT,AP
;ignorehitpause = 1
;
;
;
;[State 2223, BindToParent]
;type = BindToParent
;trigger1 = Time = 0
;Time = 1
;pos = 0,-1	;14,-3
;ignorehitpause = 1
;
;
;
;[State 2223, VelSet]
;type = VelSet
;trigger1 = Time >= 30
;x = 20
;ignorehitpause = 1
;
;
;
;[State 2223, DestroySelf]
;type = DestroySelf
;trigger1 = Time >= 60;45
;trigger2 = NumTarget
;trigger2 = Target, MoveType != H
;
;[State 2223, DestroySelf]
;type = DestroySelf
;trigger1 = Parent, StateNo != 2220
;trigger2 = Helper(30000), StateNo != 31001
;ignorehitpause = 1
;
;
;
;;===========================================================================
;;---------------------------------------------------------------------------
;;Dodonpa FX 3 - head
;[Statedef 2224]
;type = A
;MoveType = I
;physics = N
;Anim = 2210
;sprpriority = 0
;
;[State 2222, VarAdd]	;End
;type = VarAdd
;trigger1 = Helper(30000),stateno = 31002
;var(0) = 1
;ignorehitpause = 1
;
;
;
;[State 2222, Effect scaling 1]
;type = AngleDraw
;trigger1 = Helper(30000),stateno = 31001
;trigger1 = !MatchOver
;trigger1 = Time >= 4
;scale = (56.0 + abs(pos X - (Helper(2224),pos X)))/57.0 , 1    ;60+...	/60.0, 1
;value = 0
;ignorehitpause = 1
;
;[State 2222, Effect scaling 2]
;type = AngleDraw
;trigger1 = Helper(30000),stateno = [31000,31002]
;scale =  1, IfElse(1-0.02*(Time-var(0))<0, 0, 1-0.02*(Time-var(0)))	;10,...
;value = 0
;ignorehitpause = 1
;
;[State 2224, Velocity]
;type = VelSet
;trigger1 = Time <15;1
;x = IfElse((Time<2 && var(2)>1),1,20)
;ignorehitpause = 1
;[State 2224, Velocity]	;added
;type = VelSet
;trigger1 = Time >=15
;x = 2;7.5
;ignorehitpause = 1
;
;
;
;[State 2224, AssertSpecial]
;type = AssertSpecial
;trigger1 = 1
;flag = NoShadow
;
;
;
;[State 2224, NotHitBy]
;type = NotHitBy
;trigger1 = Time >= 0
;Time = 1
;value = SCA, AA, AT,AP
;ignorehitpause = 1
;
;
;
;[State 2224, BindToParent]
;type = BindToParent
;trigger1 = Time = 0
;Time = 1
;pos = 13,-1
;ignorehitpause = 1
;
;
;
;[State 2224, DestroySelf]
;type = DestroySelf
;trigger1 = Time >= 60;45
;trigger2 = NumTarget
;trigger2 = Target, MoveType != H
;
;[State 2224, DestroySelf]
;type = DestroySelf
;trigger1 = Parent, StateNo != 2220
;trigger2 = Helper(30000), StateNo != 31001
;ignorehitpause = 1
;
;
;
;;===========================================================================
;;===================================================
;; --END Chiaotzu's Dodonpa
;[Statedef 2225]
;type = A
;physics = N
;movetype = A
;ctrl = 0
;sprpriority = 0
;Anim = 15999
;
;
;
;[State 2225, DestroySelf]
;type = DestroySelf
;trigger1 = Enemy, MoveType != H
;ignorehitpause = 1
;


;===========================================================================
;===================================================
; --Chiaotzu's Dodonpa
[Statedef 2220]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 0
Anim = 2281

;[State 2220, Velocity]
;type = VelSet
;trigger1 = 1
;x = IfElse((Time<2 && var(2)>1),1,18)	;20

;[State 2220, BindToParent]
;type = BindToParent
;trigger1 = Time = 0
;pos = 40,-57		;30,-57



[State 2220, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1



[State 2220, hit]
type = HitDef
trigger1 = Time = 0
attr = S,SP
hitflag = MAF
guardflag = MA
priority = 7,Hit
damage = Ceil(IfElse(root,fvar(11) * 70 < 35, 35, root,fvar(11) * 70)), 9
getpower = 0,0
givepower = 35,35
pauseTime = 0,20
Animtype = Low
air.Animtype = Back
fall.Animtype = Back
ground.type = High
air.type = Low
ground.hitTime = 16
ground.slideTime = 16
guard.hitTime = 16
air.hitTime = 13
airguard.ctrlTime = 16
ground.velocity= -12,-4
guard.velocity = -6
air.velocity= -10,-5
airguard.velocity = -6.5, -1.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
sparkno = s7030
guard.sparkno = s7000
hitsound   = s1000,0; s2015,20 ;s1000,0
guardsound = S6,0
envshake.Time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.Time=32
p1sprpriority = -5

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time >= 35
movetype = I
ignorehitpause = 1


[State 2220, Helper - Trail 1]
type = Helper
trigger1 = Time = 0
Helpertype = normal 
name = "Dodonpa FX 2 - Trail 1"
ID = 2222
stateno = 2222
;pos = 0,-167
postype = p1   
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1

[State 2220, Helper - Trail 2]
type = Helper
trigger1 = Time = 0
Helpertype = normal 
name = "Dodonpa FX 2 - Trail 2"
ID = 22227
stateno = 22227
;pos = 0,-167
postype = p1   
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1

;[State 2220, Helper - End Trail]
;type = Helper
;trigger1 = Time = 0
;Helpertype = normal 
;name = "Dodonpa FX 2.1 - End Trail"
;ID = 2223
;stateno = 2223
;;pos = 0,-167
;postype = p1    
;facing = 1
;keyctrl = 0
;ownpal = 1
;supermoveTime = 0
;pausemoveTime = 0
;ignorehitpause = 1

[State 2220, Helper - Head]
type = Helper
trigger1 = Time = 0
Helpertype = normal 
name = "Dodonpa FX 3 - Head"
ID = 2224
stateno = 2224
pos = 0,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1



;[State 2220, End]
;type = DestroySelf
;trigger1 = Time = 45
;trigger2 = Helper(30000), StateNo != 31001
;ignorehitpause = 1

[State 32005, DestroySelf];Cinematic
type = DestroySelf
trigger1 = Helper(30000), StateNo = 35210
;ignorehitpause = 
;persistent = 

[State 2220, ChangeState]
type = ChangeState
trigger1 = Time = 45
trigger2 = Helper(30000), StateNo != 31001
value = 2225
ignorehitpause = 1




;===========================================================================
;---------------------------------------------------------------------------
;Dodonpa FX 1 - start
[Statedef 2221]
type = A
MoveType = I
physics = N
Anim = 2208
sprpriority = 0

[State 2222, VarAdd]	;End
type = VarAdd
trigger1 = Helper(30000),stateno = 31002
var(0) = 1
ignorehitpause = 1



;[State 2222, Effect scaling 1]
;type = AngleDraw
;trigger1 = Helper(30000),stateno = 31001
;trigger1 = !MatchOver
;trigger1 = Time >= 4
;scale = (56.0 + abs(pos X - (Helper(2224),pos X)))/57.0 , 1    ;60+...	/60.0, 1
;value = 0
;ignorehitpause = 1

[State 2222, Effect scaling 2]
type = AngleDraw
trigger1 = Helper(30000),stateno = [31000,31002]
scale =  1, IfElse(1-0.02*(Time-var(0))<0, 0, 1-0.02*(Time-var(0)))	;10,...
value = 0
ignorehitpause = 1

[State 2221, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 2221, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 2221, BindToParent]
type = BindToParent
trigger1 = Time = 0
Time = 1
pos = 30,-30
ignorehitpause = 1

[State 2221, BindToParent]
type = BindToParent
trigger1 = Time >= 4
Time = 1
pos = 28,-31	;x+2 y-1
ignorehitpause = 1

[State 32005, DestroySelf];Cinematic
type = DestroySelf
trigger1 = Helper(30000), StateNo = 35210
;ignorehitpause = 
;persistent = 

[State 2221, DestroySelf]
type = DestroySelf
trigger1 = Time = 45
trigger2 = Helper(30000), StateNo != 31001
;trigger1 = Helper(30000), StateNo != 31001
ignorehitpause = 1

;[State 2221, DestroySelf]
;type = DestroySelf
;trigger1 = Time >= 30
;trigger2 = NumTarget
;trigger2 = Target, MoveType != H

[State 2221, DestroySelf]
type = DestroySelf
trigger1 = NumTarget
trigger1 = Target, MoveType != H





;===========================================================================
;---------------------------------------------------------------------------
;Dodonpa FX 2 - trail 1
[Statedef 2222]
type = A
MoveType = I
physics = N
Anim = 2209
sprpriority = -1


[State 2222, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 2222, AssertSpecial]
type = AssertSpecial
trigger1 = AnimElem = 1
flag = Invisible



[State 2222, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 2222, BindToParent]
type = BindToParent
trigger1 = Time = 0
Time = 1
pos = 11,-1;13,-1
ignorehitpause = 1



[State 2222, VarAdd]	;End
type = VarAdd
trigger1 = Helper(30000),stateno = 31002
var(0) = 1
ignorehitpause = 1



;[State 2222, Effect scaling 1]
;type = AngleDraw
;trigger1 = Helper(30000),stateno = 31001
;trigger1 = !MatchOver
;trigger1 = Time >= 4
;scale = (56.0 + abs(pos X - (Helper(2224),pos X)))/57.0 , 1    ;60+...	/60.0, 1
;value = 0
;ignorehitpause = 1

[State 2222, Effect scaling 1]
type = AngleDraw
trigger1 = Helper(30000),stateno = 31001
trigger1 = NumHelper(2224) = 1 
trigger1 = !MatchOver
trigger1 = Time >= 4
scale = (56.0 + abs(pos X - (Helper(2224),pos X)))/56.0 , 1    ;60+...	/60.0, 1
value = 0
ignorehitpause = 1

[State 2222, Effect scaling 2]
type = AngleDraw
trigger1 = Helper(30000),stateno = [31000,31002]
scale =  10, IfElse(1-0.02*(Time-var(0))<0, 0, 1-0.02*(Time-var(0)))	;10,...
value = 0
ignorehitpause = 1


[State 0, PosAdd]
type = PosAdd
trigger1 = time >= 15
x = 15
;ignorehitpause = 
;;persistent = 



;[State 2222, VelSet]
;type = VelSet
;trigger1 = Time >= 30
;x = 20
;ignorehitpause = 1



[State 2222, DestroySelf]
type = DestroySelf
;trigger1 = Time >= 45
trigger1 = NumTarget
trigger1 = Target, MoveType != H
ignorehitpause = 1

[State 2222, DestroySelf]
type = DestroySelf
trigger1 = Parent, StateNo != 2220
ignorehitpause = 1

[State 2222, DestroySelf]
type = DestroySelf
trigger1 = NumHelper(2224) = 0 
ignorehitpause = 1

[State 2222, DestroySelf]
type = DestroySelf
trigger1 = Helper(30000), Stateno != 31001
ignorehitpause = 1




;===========================================================================
;---------------------------------------------------------------------------
;Dodonpa FX 2 - trail 2
[Statedef 22227]
type = A
MoveType = I
physics = N
Anim = 2209
sprpriority = -1


[State 22227, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 22227, AssertSpecial]
type = AssertSpecial
trigger1 = AnimElem = 1
flag = Invisible



[State 22227, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 22227, BindToParent]
type = BindToParent
trigger1 = Time = 0
Time = 1
pos = 11,-1;13,-1
ignorehitpause = 1



[State 22227, VarAdd]	;End
type = VarAdd
trigger1 = Helper(30000),stateno = 31002
var(0) = 1
ignorehitpause = 1



[State 22227, Effect scaling 1]
type = AngleDraw
trigger1 = Helper(30000),stateno = 31001
trigger1 = !MatchOver
trigger1 = Time >= 4
scale = (56.0 + abs(pos X - (Helper(2224),pos X)))/56.0 , 1    ;60+...	/60.0, 1
value = 0
ignorehitpause = 1

[State 22227, Effect scaling 2]
type = AngleDraw
trigger1 = Helper(30000),stateno = [31000,31002]
scale =  10, IfElse(1-0.02*(Time-var(0))<0, 0, 1-0.02*(Time-var(0)))	;10,...
value = 0
ignorehitpause = 1





;[State 2222, VelSet]
;type = VelSet
;trigger1 = Time >= 30
;x = 20
;ignorehitpause = 1

[State 32005, DestroySelf];Cinematic
type = DestroySelf
trigger1 = Helper(30000), StateNo = 35210
;ignorehitpause = 
;persistent = 

[State 22227, DestroySelf]
type = DestroySelf
;trigger1 = Time >= 45
trigger1 = NumTarget
trigger1 = Target, MoveType != H
ignorehitpause = 1

[State 22227, DestroySelf]
type = DestroySelf
trigger1 = Parent, StateNo != 2220
ignorehitpause = 1

[State 22227, DestroySelf]
type = DestroySelf
trigger1 = Helper(30000), Stateno != 31001
ignorehitpause = 1


;
;;===========================================================================
;;---------------------------------------------------------------------------
;;Dodonpa FX 2.1 - end trail
;[Statedef 2223]
;type = A
;MoveType = I
;physics = N
;Anim = 2212
;sprpriority = -1
;
;[State 2222, VarAdd]	;End
;type = VarAdd
;trigger1 = Helper(30000),stateno = 31002
;var(0) = 1
;ignorehitpause = 1
;
;
;
;[State 2222, Effect scaling 1]
;type = AngleDraw
;trigger1 = Helper(30000),stateno = 31001
;trigger1 = !MatchOver
;trigger1 = Time >= 4
;scale = (56.0 + abs(pos X - (Helper(2224),pos X)))/57.0 , 1    ;60+...	/60.0, 1
;value = 0
;ignorehitpause = 1
;
;[State 2222, Effect scaling 2]
;type = AngleDraw
;trigger1 = Helper(30000),stateno = [31000,31002]
;scale =  1, IfElse(1-0.02*(Time-var(0))<0, 0, 1-0.02*(Time-var(0)))	;10,...
;value = 0
;ignorehitpause = 1
;
;[State 2223, AssertSpecial]
;type = AssertSpecial
;trigger1 = 1
;flag = NoShadow
;
;[State 2223, AssertSpecial]
;type = AssertSpecial
;trigger1 = Time < 30
;flag = Invisible
;
;
;
;[State 2223, NotHitBy]
;type = NotHitBy
;trigger1 = Time >= 0
;Time = 1
;value = SCA, AA, AT,AP
;ignorehitpause = 1
;
;
;
;[State 2223, BindToParent]
;type = BindToParent
;trigger1 = Time = 0
;Time = 1
;pos = 0,-1	;14,-3
;ignorehitpause = 1
;
;
;
;;[State 2223, VelSet]
;;type = VelSet
;;trigger1 = Time >= 15;30
;;x = 15;20
;;ignorehitpause = 1
;
;
;
;[State 2223, DestroySelf]
;type = DestroySelf
;trigger1 = Time >= 60;45
;trigger2 = NumTarget
;trigger2 = Target, MoveType != H
;
;[State 2223, DestroySelf]
;type = DestroySelf
;trigger1 = Parent, StateNo != 2220
;trigger2 = Helper(30000), StateNo != 31001
;ignorehitpause = 1
;


;===========================================================================
;---------------------------------------------------------------------------
;Dodonpa FX 3 - head
[Statedef 2224]
type = A
MoveType = I
physics = N
Anim = 2210
sprpriority = 0




[State 2222, VarAdd]	;End
type = VarAdd
trigger1 = Helper(30000),stateno = 31002
var(0) = 1
ignorehitpause = 1



[State 2222, Effect scaling 1]
type = AngleDraw
trigger1 = Helper(30000),stateno = 31001
trigger1 = !MatchOver
trigger1 = Time >= 4
scale = (56.0 + abs(pos X - (Helper(2224),pos X)))/57.0 , 1    ;60+...	/60.0, 1
value = 0
ignorehitpause = 1

[State 2222, Effect scaling 2]
type = AngleDraw
trigger1 = Helper(30000),stateno = [31000,31002]
scale =  1, IfElse(1-0.02*(Time-var(0))<0, 0, 1-0.02*(Time-var(0)))	;10,...
value = 0
ignorehitpause = 1

[State 2224, Velocity]
type = VelSet
trigger1 = 1;Time <15;1
x = IfElse((Time<2 && var(2)>1),1,20)
ignorehitpause = 1
;[State 2224, Velocity]	;added
;type = VelSet
;trigger1 = Time >=15
;x = 2;7.5
;ignorehitpause = 1



[State 2224, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 2224, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 2224, BindToParent]
type = BindToParent
trigger1 = Time = 0
Time = 1
pos = 13,-1
ignorehitpause = 1



[State 2224, DestroySelf]
type = DestroySelf
trigger1 = Time >= 60;45
trigger2 = NumTarget
trigger2 = Target, MoveType != H

[State 2224, DestroySelf]
type = DestroySelf
trigger1 = Parent, StateNo != 2220
trigger2 = Helper(30000), StateNo != 31001
ignorehitpause = 1



;===========================================================================
;===================================================
; --END Chiaotzu's Dodonpa
[Statedef 2225]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 0
Anim = 15999

[State 32005, DestroySelf];Cinematic
type = DestroySelf
trigger1 = Helper(30000), StateNo = 35210
;ignorehitpause = 
;persistent = 

[State 2225, DestroySelf]
type = DestroySelf
trigger1 = Enemy, MoveType != H
ignorehitpause = 1


;===========================================================================

;===================================================

;Super - Lvl 2 - Dodonpa

;===================================================
; Tien's Dodonpa LVL2
[Statedef 2237]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 5
Anim = 2241



[State 2237, Super BG Proj]
type = Projectile
triggerall = RoundState = 2
trigger1 = MoveHit = 1
ProjID = 3000	;Ki attack
projAnim = 15999
projremoveTime = 1
ignorehitpause = 1



[State 2237, PosFreeze]
type = PosFreeze
trigger1 = Time < 2
value = 1



[State 2237, Velocity]
type = VelSet
trigger1 = 1
x = IfElse((Time<2 && var(2)>1),1,32)



;[State 2237, BindToParent]
;type = BindToParent
;trigger1 = Time = 0
;pos = 100,-60



[State 2237, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 4
ignorehitpause = 1
persistent = 0		;when coding the Helpers's dampener, remember to put persistent = 0.



[State 2237, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1



[State 2237, HitDef]
type = HitDef
triggerall = Time < 45
trigger1 = !MoveContact
attr = S,HP
hitflag = MAF
guardflag = MA
priority = 7,Hit
damage = Ceil(IfElse(root,fvar(11) * 300 < 50, 50, root,fvar(11) * 300)), 25
getpower = 0,0
givepower = 35,35
pauseTime = 10,20
Animtype = Low
air.Animtype = Back
fall.Animtype = Back
ground.type = High
air.type = Low
ground.hitTime = 16
ground.slideTime = 16
guard.hitTime = 16
air.hitTime = 13
airguard.ctrlTime = 16
ground.velocity= -12,-4
guard.velocity = -6
air.velocity= -10,-5
airguard.velocity = -6.5, -1.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
sparkxy = -30,-3
sparkno = s2270;7030
guard.sparkno = s7000
hitsound   = s2200,21;13; s2015,20 ;s1000,0
guardsound = S6,0
envshake.Time = 26
envshake.ampl = 10
envshake.freq = 120
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.Time=32
p1sprpriority = -5



[State 2237, Helper - Beam]
type = Helper
trigger1 = Time = 0
Helpertype = normal 
name = "Dodonpa FX 2 - Trail"
ID = 2239
stateno = 2239
;pos = 0,-167
postype = p1   
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1

[State 2237, Helper - Beam]
type = Helper
trigger1 = Time = 0
Helpertype = normal
name = "Dodonpa FX 2.1 - End Trail"
ID = 2242
stateno = 2242
;pos = 0,-167
postype = p1   
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1

[State 2237, Helper - Head]
type = Helper
trigger1 = Time = 0
Helpertype = normal 
name = "Dodonpa FX 3 - Head"
ID = 2240
stateno = 2240
pos = 0,0
postype = p1   
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1



;[State 2237, hitvar]
;type = VarAdd
;trigger1 = MoveHit = 1
;var(2) = 1



;[State 2237, StateTypeSet]
;type = StateTypeSet
;trigger1 = var(2) >= 4
;movetype = I        ;I,A,H
;ignorehitpause = 1
;persistent = 1



;[State 2237, DestroySelf]
;type = DestroySelf
;trigger1 = Time = 45
;trigger2 = parent,movetype = H
;ignorehitpause = 1

;[State 2237, DestroySelf]
;type = DestroySelf
;trigger1 = Root, StateNo != 2231
;ignorehitpause = 1



[State 2237, ChangeState]
type = ChangeState
trigger1 = Time = 45
trigger2 = parent,movetype = H
ignorehitpause = 1
value = 2245

[State 2237, ChangeState]
type = ChangeState
trigger1 = Root, StateNo != 2231
ignorehitpause = 1
value = 2245



;===========================================================================
;---------------------------------------------------------------------------
;Dodonpa FX 1 - start
[Statedef 2238]
type = A
MoveType = I
physics = N
Anim = 2238
sprpriority = 5



[State 2238, Super BG Proj]
type = Projectile
triggerall = RoundState = 2
trigger1 = MoveHit = 1
ProjID = 3000	;Ki attack
projAnim = 15999
projremoveTime = 1
ignorehitpause = 1



[State 2238, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 2238, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 2238, BindToParent]
type = BindToParent
trigger1 = Time = 0
Time = 1
pos = 118,-62
ignorehitpause = 1

[State 2238, BindToParent]
type = BindToParent
trigger1 = Time >= 4
Time = 1
pos = 111,-63
ignorehitpause = 1



[State 2238, DestroySelf]
type = DestroySelf
trigger1 = Time >= 30
trigger2 = NumTarget
trigger2 = Target, MoveType != H

[State 2238, DestroySelf]
type = DestroySelf
trigger1 = Root, StateNo != 2231
ignorehitpause = 1



;===========================================================================
;---------------------------------------------------------------------------
;Dodonpa FX 2 - trail
[Statedef 2239]
type = A
MoveType = I
physics = N
Anim = 2239
sprpriority = 4



[State 2239, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 2239, AssertSpecial]
type = AssertSpecial
trigger1 = AnimElem = 1
flag = Invisible



[State 2239, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 2239, BindToParent]
type = BindToParent
trigger1 = Time = 0
Time = 1
pos = 14,-4.5
ignorehitpause = 1



[State 2239, VarAdd]	;End
type = VarAdd
trigger1 = root,stateno = 2231
var(0) = 1
ignorehitpause = 1



[State 2239, Effect scaling 1]
type = AngleDraw
trigger1 = root,stateno = 2231
trigger1 = !MatchOver
trigger1 = Time >= 4
scale = (2.0 + abs(pos X - (Helper(2240),pos X)))/57.0 , 1    ;60+...	/60.0	2208
value = 0
ignorehitpause = 1

[State 2239, Effect scaling 2]
type = AngleDraw
trigger1 = root,stateno = 2231
scale =  10, 1;IfElse(1-0.05*(Time-var(0))<0, 0, 1-0.05*(Time-var(0)))	;10,...
value = 0
ignorehitpause = 1



[State 2239, VelSet]
type = VelSet
trigger1 = Time >= 30
x = 20	
ignorehitpause = 1



[State 2239, DestroySelf]
type = DestroySelf
trigger1 = Time >= 45
trigger2 = NumTarget
trigger2 = Target, MoveType != H
ignorehitpause = 1

[State 2239, DestroySelf]
type = DestroySelf
trigger1 = Parent, StateNo != 2237
ignorehitpause = 1

[State 2239, DestroySelf]
type = DestroySelf
trigger1 = Root, Stateno != 2231
ignorehitpause = 1



;===========================================================================
;---------------------------------------------------------------------------
;Dodonpa FX 3 - head
[Statedef 2240]
type = A
MoveType = I
physics = N
Anim = 2240
sprpriority = 5



[State 2240, Velocity]
type = VelSet
trigger1 = 1
x = IfElse((Time<2 && var(2)>1),1,30)
ignorehitpause = 1



[State 2240, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 2240, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 2240, BindToParent]
type = BindToParent
trigger1 = Time = 0
Time = 1
pos = 0,-3
ignorehitpause = 1



[State 2240, DestroySelf]
type = DestroySelf
trigger1 = Time >= 45
trigger2 = NumTarget
trigger2 = Target, MoveType != H

[State 2240, DestroySelf]
type = DestroySelf
trigger1 = Parent, StateNo != 2237
trigger2 = Root, StateNo != 2231
ignorehitpause = 1



;===========================================================================
;---------------------------------------------------------------------------
;Dodonpa FX 2.1 - end trail
[Statedef 2242]
type = A
MoveType = I
physics = N
Anim = 2242
sprpriority = 4


[State 2242, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 2242, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 30
flag = Invisible



[State 2242, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
Time = 1
value = SCA, AA, AT,AP
ignorehitpause = 1



[State 2242, BindToParent]
type = BindToParent
trigger1 = Time = 0
Time = 1
pos = -8,-4	;14,-3
ignorehitpause = 1



[State 2242, VelSet]
type = VelSet
trigger1 = Time >= 30
x = 20
ignorehitpause = 1



[State 2242, DestroySelf]
type = DestroySelf
trigger1 = Time >= 45
trigger2 = NumTarget
trigger2 = Target, MoveType != H

[State 2242, DestroySelf]
type = DestroySelf
trigger1 = Parent, StateNo != 2237
trigger2 = Root, StateNo != 2231
ignorehitpause = 1



;===========================================================================
;===================================================
; End Tien's Dodonpa
[Statedef 2245]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 0
Anim = 15999



[State 2245, DestroySelf]
type = DestroySelf
trigger1 = Enemy, MoveType != H
ignorehitpause = 1



;===========================================================================
;---------------------------------------------------------------------------
; Tien - playerpush
[Statedef 2246]
type = S
ctrl = 0
Anim = Root, Anim
movetype = I
physics = S
sprpriority = -5

[State 2246, BindToParent]
type = BindToRoot
trigger1 = 1
Time = 1
pos = 2,0
ignorehitpause = 1
persistent = 1



[State 2246, Width]
type = Width
trigger1 = 1
value = 35,0



[State 2246, PlayerPush]
type = PlayerPush
trigger1 = 1 
value = 1
ignorehitpause = 1



[State 2246, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
Time = 1



[State 2246, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2 = NoShadow
ignorehitpause = 1



[State 2246, DestroySelf]
type = DestroySelf
trigger1 = Root, StateNo != 2231
ignorehitpause = 1
persistent = 1



;===========================================================================
;==========================================================
; P1 OM MODE indicator
[Statedef 2550]
movetype = I
physics = N
VelSet = 0, 0
sprpriority = 7
Anim = 15999



[State 2550, BindToRoot]
type = BindToRoot
trigger1 = 1
Time = 1
pos = 0,-8
ignorehitpause = 1



[State 2550, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1



[State 2550, Explod]	;NO EYE
type = Explod
trigger1 = !NumExplod(2850) && root,fvar(27)>0
Anim = 2850
pos = 39+(root,var(45)),232-(root,var(46))
postype = left
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2850
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2550, RemoveExplod]	;NO EYE
type = RemoveExplod
trigger1 = root,fvar(28)>=30 || root,fvar(27)=0
id = 2850



[State 2550, Explod]	;1 EYE
type = Explod
trigger1 = !NumExplod(2851) && root,fvar(28)>=30
Anim = 2851
pos = 39+(root,var(45)),232-(root,var(46))
postype = left
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2851
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2550, RemoveExplod]	;1 EYE
type = RemoveExplod
trigger1 = root,fvar(27)=0 || root,fvar(28)>=60
id = 2851



[State 2550, Explod]	;2 EYES
type = Explod
trigger1 = !NumExplod(2852) && root,fvar(28)>=60
Anim = 2852
pos = 39+(root,var(45)),232-(root,var(46))
postype = left
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2852
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2550, RemoveExplod]	;2 EYES
type = RemoveExplod
trigger1 = root,fvar(27)=0 || root,fvar(28)>=90
id = 2852



[State 2550, Explod]	;3 EYES (MAX)
type = Explod
trigger1 = !NumExplod(2853) && root,fvar(28)>=90
Anim = 2853
pos = 39+(root,var(45)),232-(root,var(46))
postype = left
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2853
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2550, RemoveExplod]	;3 EYES (MAX)
type = RemoveExplod
trigger1 = root,fvar(27)=0
id = 2853



[State 2550, Explod]	;OM Gauge fades (invisible)
type = Explod
trigger1 = !NumExplod(2854) && root,fvar(27)=0
Anim = 2854
pos = 0,0
postype = left
removeTime = 14
supermove = 1
scale = 1,1
sprpriority = 7
id = 2854
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999
persistent = 0



;===============
;==========
;LVL MARKER

[State 2550, Explod]	;LVL 0
type = Explod
trigger1 = !NumExplod(2860) && root,fvar(27)>0
Anim = 2860
pos = 96+(root,var(45)),212-(root,var(46))
postype = left
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2860
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2550, RemoveExplod]	;LVL 0
type = RemoveExplod
trigger1 = root,fvar(28)>=30 || root,fvar(27)=0
id = 2860



[State 2550, Explod]	;LVL 1
type = Explod
trigger1 = !NumExplod(2861) && root,fvar(28)>=30
Anim = 2861
pos = 96+(root,var(45)),212-(root,var(46))
postype = left
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2861
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2550, RemoveExplod]	;LVL 1
type = RemoveExplod
trigger1 = root,fvar(27)=0 || root,fvar(28)>=60
id = 2861



[State 2550, Explod]	;LVL 2
type = Explod
trigger1 = !NumExplod(2862) && root,fvar(28)>=60
Anim = 2862
pos = 96+(root,var(45)),212-(root,var(46))
postype = left
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2862
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2550, RemoveExplod]	;LVL 2
type = RemoveExplod
trigger1 = root,fvar(27)=0 || root,fvar(28)>=90
id = 2862



[State 2550, Explod]	;LVL 3 (MAX)
type = Explod
trigger1 = !NumExplod(2863) && root,fvar(28)>=90
Anim = 2863
pos = 96+(root,var(45)),212-(root,var(46))
postype = left
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2863
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2550, RemoveExplod]	;LVL 3 (MAX)
type = RemoveExplod
trigger1 = root,fvar(27)=0
id = 2863

;==========
;===============




;===============
;==========
;BAR

[State 2550, Explod]	;BAR
type = Explod
trigger1 = !NumExplod(2870) && root,fvar(27)>0
Anim = 2870
pos = 77+(root,var(45)),226-(root,var(46))
postype = left
removeTime = -1
supermove = 1
scale = 1,0.5
sprpriority = 7
id = 2870
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2550, RemoveExplod]	;BAR
type = RemoveExplod
trigger1 = root,fvar(27)=0
id = 2870




[State 2550, Explod]	;(BAR) From LVL0 to LVL1
type = Explod
trigger1 = !NumExplod(2875) && root,fvar(27)!=0 && root,fvar(28)<30
anim = 2875
pos = 77+(root,var(45)),226-(root,var(46))
postype = left
removeTime = -1
supermove = 1
scale = 1,0.5
sprpriority = 5;8
id = 2875
bindTime = -1
;ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2550, Explod]	;Scale (BAR) From LVL0 to LVL1
type = ModifyExplod
trigger1 = NumExplod(2875) && root,fvar(27)!=0
scale = (root,fvar(28))/90.0, 0.5
id = 2875

[State 2550, RemoveExplod]	;(BAR) From LVL0 to LVL1
type = RemoveExplod
trigger1 = root,fvar(28)>=30
id = 2875
[State 2550, RemoveExplod]	;(BAR) From LVL0 to LVL1
type = RemoveExplod
trigger1 = root,fvar(27)=0
id = 2875




[State 2550, Explod]	;(BAR) From LVL1 to LVL2
type = Explod
trigger1 = !NumExplod(2876) && root,fvar(27)!=0 && root,fvar(28)>=30 && root,fvar(28)<60
anim = 2876
pos = 77+(root,var(45)),226-(root,var(46))
postype = left
removeTime = -1
supermove = 1
scale = 1,0.5
sprpriority = 5;8
id = 2876
bindTime = -1
;ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2550, Explod]	;Scale (BAR) From LVL1 to LVL2
type = ModifyExplod
trigger1 = NumExplod(2876) && root,fvar(27)!=0
scale = (root,fvar(28))/90.0, 0.5
id = 2876

[State 2550, RemoveExplod]	;(BAR) From LVL1 to LVL2
type = RemoveExplod
trigger1 = root,fvar(28)>=60
id = 2876
[State 2550, RemoveExplod]	;(BAR) From LVL1 to LVL2
type = RemoveExplod
trigger1 = root,fvar(27)=0
id = 2876




[State 2550, Explod]	;(BAR) From LVL2 to LVL3
type = Explod
trigger1 = !NumExplod(2877) && root,fvar(27)!=0 && root,fvar(28)>=60 && root,fvar(28)<90
anim = 2877
pos = 77+(root,var(45)),226-(root,var(46))
postype = left
removeTime = -1
supermove = 1
scale = 1,0.5
sprpriority = 5;8
id = 2877
bindTime = -1
;ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2550, Explod]	;Scale (BAR) From LVL2 to LVL3
type = ModifyExplod
trigger1 = NumExplod(2877) && root,fvar(27)!=0
scale = (root,fvar(28))/90.0, 0.5
id = 2877

[State 2550, RemoveExplod]	;(BAR) From LVL2 to LVL3
type = RemoveExplod
trigger1 = root,fvar(28)>=90
id = 2877
[State 2550, RemoveExplod]	;(BAR) From LVL2 to LVL3
type = RemoveExplod
trigger1 = root,fvar(27)=0
id = 2877




[State 2550, Explod]	;(BAR) MAX
type = Explod
trigger1 = !NumExplod(2878) && root,fvar(27)!=0 && root,fvar(28)>=90
anim = 2878
pos = 77+(root,var(45)),226-(root,var(46))
postype = left
removeTime = -1
supermove = 1
scale = 1,0.5
sprpriority = 5;8
id = 2878
bindTime = -1
;ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2550, Explod]	;Scale (BAR) MAX
type = ModifyExplod
trigger1 = NumExplod(2878) && root,fvar(27)!=0
scale = (root,fvar(28))/90.0, 0.5
id = 2878

[State 2550, RemoveExplod]	;(BAR) MAX
type = RemoveExplod
trigger1 = root,fvar(27)=0
id = 2878


;==========
;===============


[State 2550, OM Mode MAX]
type = PlaySND
trigger1 = root,fvar(28)>=90
value = 192, 1
persistent = 0
volumescale = 255

[State 2550, OM Mode MAX - Voice]
type = PlaySND
trigger1 = root,fvar(28)>=90
value = 85, 2800
persistent = 0
volumescale = 100
channel = 25



[State 2550, DestroySelf]
type = DestroySelf
trigger1 = root,fvar(27) != 1 && !NumExplod(2854)



;===========================================================================
;==========================================================
; P2 OM MODE indicator
[Statedef 2560]
movetype = I
physics = N
VelSet = 0, 0
sprpriority = 7
Anim = 15999



[State 2560, BindToRoot]
type = BindToRoot
trigger1 = 1
Time = 1
pos = 0,-8
ignorehitpause = 1



[State 2560, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1



[State 2560, Explod]	;NO EYE
type = Explod
trigger1 = !NumExplod(2850) && root,fvar(27)>0
Anim = 2850
pos = -39-(root,var(45)),232-(root,var(46))
postype = right
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2850
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2560, RemoveExplod]	;NO EYE
type = RemoveExplod
trigger1 = root,fvar(28)>=30 || root,fvar(27)=0
id = 2850



[State 2560, Explod]	;1 EYE
type = Explod
trigger1 = !NumExplod(2851) && root,fvar(28)>=30
Anim = 2851
pos = -39-(root,var(45)),232-(root,var(46))
postype = right
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2851
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2560, RemoveExplod]	;1 EYE
type = RemoveExplod
trigger1 = root,fvar(27)=0 || root,fvar(28)>=60
id = 2851



[State 2560, Explod]	;2 EYES
type = Explod
trigger1 = !NumExplod(2852) && root,fvar(28)>=60
Anim = 2852
pos = -39-(root,var(45)),232-(root,var(46))
postype = right
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2852
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2560, RemoveExplod]	;2 EYES
type = RemoveExplod
trigger1 = root,fvar(27)=0 || root,fvar(28)>=90
id = 2852



[State 2560, Explod]	;3 EYES (MAX)
type = Explod
trigger1 = !NumExplod(2853) && root,fvar(28)>=90
Anim = 2853
pos = -39-(root,var(45)),232-(root,var(46))
postype = right
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2853
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2560, RemoveExplod]	;3 EYES (MAX)
type = RemoveExplod
trigger1 = root,fvar(27)=0
id = 2853



[State 2560, Explod]	;OM Gauge fades (invisible)
type = Explod
trigger1 = !NumExplod(2854) && root,fvar(27)=0
Anim = 2854
pos = 0,0
postype = left
removeTime = 14
supermove = 1
scale = 1,1
sprpriority = 7
id = 2854
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999
persistent = 0



;===============
;==========
;LVL MARKER

[State 2560, Explod]	;LVL 0
type = Explod
trigger1 = !NumExplod(2860) && root,fvar(27)>0
Anim = 2860
pos = -99-(root,var(45)),212-(root,var(46))
postype = right
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2860
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2560, RemoveExplod]	;LVL 0
type = RemoveExplod
trigger1 = root,fvar(28)>=30 || root,fvar(27)=0
id = 2860



[State 2560, Explod]	;LVL 1
type = Explod
trigger1 = !NumExplod(2861) && root,fvar(28)>=30
Anim = 2861
pos = -99-(root,var(45)),212-(root,var(46))
postype = right
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2861
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2560, RemoveExplod]	;LVL 1
type = RemoveExplod
trigger1 = root,fvar(27)=0 || root,fvar(28)>=60
id = 2861



[State 2560, Explod]	;LVL 2
type = Explod
trigger1 = !NumExplod(2862) && root,fvar(28)>=60
Anim = 2862
pos = -99-(root,var(45)),212-(root,var(46))
postype = right
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2862
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2560, RemoveExplod]	;LVL 2
type = RemoveExplod
trigger1 = root,fvar(27)=0 || root,fvar(28)>=90
id = 2862



[State 2560, Explod]	;LVL 3 (MAX)
type = Explod
trigger1 = !NumExplod(2863) && root,fvar(28)>=90
Anim = 2863
pos = -99-(root,var(45)),212-(root,var(46))
postype = right
removeTime = -1
supermove = 1
scale = 1,1
sprpriority = 7
id = 2863
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2560, RemoveExplod]	;LVL 3 (MAX)
type = RemoveExplod
trigger1 = root,fvar(27)=0
id = 2863

;==========
;===============


;===============
;==========
;BAR

[State 2560, Explod]	;BAR
type = Explod
trigger1 = !NumExplod(2870) && root,fvar(27)>0
Anim = 2870
pos = -118-(root,var(45)),226-(root,var(46))
postype = right
removeTime = -1
supermove = 1
scale = 1,0.5
sprpriority = 7
id = 2870
bindTime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2560, RemoveExplod]	;BAR
type = RemoveExplod
trigger1 = root,fvar(27)=0
id = 2870




[State 2560, Explod]	;(BAR) From LVL0 to LVL1
type = Explod
trigger1 = !NumExplod(2875) && root,fvar(27)!=0 && root,fvar(28)<30
anim = 2875
pos = -118-(root,var(45)),226-(root,var(46))
postype = right
removeTime = -1
supermove = 1
scale = 1,0.5
sprpriority = 5;8
id = 2875
bindTime = -1
;ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2560, Explod]	;Scale (BAR) From LVL0 to LVL1
type = ModifyExplod
trigger1 = NumExplod(2875) && root,fvar(27)!=0
scale = (root,fvar(28))/90.0, 0.5
id = 2875

[State 2560, RemoveExplod]	;(BAR) From LVL0 to LVL1
type = RemoveExplod
trigger1 = root,fvar(28)>=30
id = 2875
[State 2560, RemoveExplod]	;(BAR) From LVL0 to LVL1
type = RemoveExplod
trigger1 = root,fvar(27)=0
id = 2875




[State 2560, Explod]	;(BAR) From LVL1 to LVL2
type = Explod
trigger1 = !NumExplod(2876) && root,fvar(27)!=0 && root,fvar(28)>=30 && root,fvar(28)<60
anim = 2876
pos = -118-(root,var(45)),226-(root,var(46))
postype = right
removeTime = -1
supermove = 1
scale = 1,0.5
sprpriority = 5;8
id = 2876
bindTime = -1
;ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2560, Explod]	;Scale (BAR) From LVL1 to LVL2
type = ModifyExplod
trigger1 = NumExplod(2876) && root,fvar(27)!=0
scale = (root,fvar(28))/90.0, 0.5
id = 2876

[State 2560, RemoveExplod]	;(BAR) From LVL1 to LVL2
type = RemoveExplod
trigger1 = root,fvar(28)>=60
id = 2876
[State 2560, RemoveExplod]	;(BAR) From LVL1 to LVL2
type = RemoveExplod
trigger1 = root,fvar(27)=0
id = 2876




[State 2560, Explod]	;(BAR) From LVL2 to LVL3
type = Explod
trigger1 = !NumExplod(2877) && root,fvar(27)!=0 && root,fvar(28)>=60 && root,fvar(28)<90
anim = 2877
pos = -118-(root,var(45)),226-(root,var(46))
postype = right
removeTime = -1
supermove = 1
scale = 1,0.5
sprpriority = 5;8
id = 2877
bindTime = -1
;ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2560, Explod]	;Scale (BAR) From LVL2 to LVL3
type = ModifyExplod
trigger1 = NumExplod(2877) && root,fvar(27)!=0
scale = (root,fvar(28))/90.0, 0.5
id = 2877

[State 2560, RemoveExplod]	;(BAR) From LVL2 to LVL3
type = RemoveExplod
trigger1 = root,fvar(28)>=90
id = 2877
[State 2560, RemoveExplod]	;(BAR) From LVL2 to LVL3
type = RemoveExplod
trigger1 = root,fvar(27)=0
id = 2877




[State 2560, Explod]	;(BAR) MAX
type = Explod
trigger1 = !NumExplod(2878) && root,fvar(27)!=0 && root,fvar(28)>=90
anim = 2878
pos = -118-(root,var(45)),226-(root,var(46))
postype = right
removeTime = -1
supermove = 1
scale = 1,0.5
sprpriority = 5;8
id = 2878
bindTime = -1
;ontop = 1
ownpal = 1
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State 2560, Explod]	;Scale (BAR) MAX
type = ModifyExplod
trigger1 = NumExplod(2878) && root,fvar(27)!=0
scale = (root,fvar(28))/90.0, 0.5
id = 2878

[State 2560, RemoveExplod]	;(BAR) MAX
type = RemoveExplod
trigger1 = root,fvar(27)=0
id = 2878


;==========
;===============


[State 2560, OM Mode MAX]
type = PlaySND
trigger1 = root,fvar(28)>=90
value = 192, 1
persistent = 0
volumescale = 255

[State 2560, OM Mode MAX - Voice]
type = PlaySND
trigger1 = root,fvar(28)>=90
value = 85, 2800
persistent = 0
volumescale = 100
channel = 25



[State 2560, End]
type = DestroySelf
trigger1 = root,fvar(27) != 1 && !NumExplod(2854)



;===========================================================================
;------------------------------------------------
; Kaioken Vertical Lines BG Hyper Kick
[Statedef 2773]
type = A
movetype = A
physics = N
Anim = 15999
VelSet = 0,0



[State 2773, PlayerPush]
type = PlayerPush
trigger1 = Time >= 0
value = 0



[State 2773, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA



[State 2773, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NoBG
flag3 = NoBarDisplay
ignorehitpause = 1



[State 2773, PalFX]		;Flash
type = PalFX
trigger1 = TimeMod = 4,0
trigger1 = 1
Time = 1
invertall = 1
ignorehitpause = 0



[State 2773, Explod]	;Speed lines 1
type = Explod
trigger1 = Time = 0
Anim = 2773
postype = back
pos = 10,0
bindTime = -1
supermove = 0
pausemoveTime = 70
sprpriority = 1
ontop = 0
ownpal = 1
facing = 1
ignorehitpause = 1
removeTime = 70

[State 2773, Explod]	;Speed lines 2
type = Explod
trigger1 = Time = 0
Anim = 2773
postype = back
pos = 240,0
bindTime = -1
supermove = 0
pausemoveTime = 70
sprpriority = 1
ontop = 0
ownpal = 1
facing = 1
ignorehitpause = 1
removeTime = 70



[State 2773, DestroySelf]
type = DestroySelf
trigger1 = Enemy, StateNo = 3107;Time = 200;145



;===========================================================================
;==========================================================
; Diagonal Lines BG
[Statedef 2775]
type = A
MoveType = A
physics = N
Anim = 12773
VelSet = -3.75,0
sprpriority = -1



[State 2775, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 10



[State 2775, PlayerPush]
type = PlayerPush
trigger1 = Time >= 0
value = 0



[State 2775, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA



[State 2775, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = noBG
flag3 = NoBarDisplay
ignorehitpause = 1



[State 2775, DestroySelf]
type = DestroySelf
trigger1 = enemy, stateno = 3107



;===========================================================================
;------------------------------------------------
; Kaioken Vertical Lines BG Nappa Finisher
[Statedef 2827]
type = A
movetype = A
physics = N
Anim = 2771
VelSet = 0,0



[State 2827, PlayerPush]
type = PlayerPush
trigger1 = Time >= 0
value = 0



[State 2827, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA



[State 2827, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = noBG
flag3 = NoBarDisplay
ignorehitpause = 1



[State 2827, PalFX]		;Flash
type = PalFX
trigger1 = TimeMod = 4,0
trigger1 = 1
Time = 1
invertall = 1
ignorehitpause = 0



[State 2827, Explod]	;Speed lines 1
type = Explod
trigger1 = Time = 0
Anim = 2773
ID = 2773
postype = back
pos = 10,0
bindTime = -1
supermove = 0
pausemoveTime = 254
sprpriority = 1
ontop = 0
ownpal = 1
facing = 1
ignorehitpause = 1
removeTime = 254

[State 2827, Explod]	;Speed lines 2
type = Explod
trigger1 = Time = 0
Anim = 2773
ID = 2773
postype = back
pos = 240,0
bindTime = -1
supermove = 0
pausemoveTime = 254
sprpriority = 1
ontop = 0
ownpal = 1
facing = 1
ignorehitpause = 1
removeTime = 254

[state 3250, RemoveExplod]
type = RemoveExplod
trigger1 = root,stateno = 2860 && root,AnimelemTime(5)=3
ID = 2773



[State 2827, Explod]	;Speed lines 3
type = Explod
trigger1 = root,stateno = 2860 && root,AnimelemTime(5)=3
Anim = 12773
ID = 12773
postype = back
pos = 10,0
bindTime = -1
supermove = 0
pausemoveTime = 254
sprpriority = 1
ontop = 0
ownpal = 1
facing = 1
ignorehitpause = 1
removeTime = 254
persistent = 0

[State 2827, Explod]	;Speed lines 4
type = Explod
trigger1 = root,stateno = 2860 && root,AnimelemTime(5)=3
Anim = 12773
ID = 12773
postype = back
pos = 240,0
bindTime = -1
supermove = 0
pausemoveTime = 254
sprpriority = 1
ontop = 0
ownpal = 1
facing = 1
ignorehitpause = 1
removeTime = 254
persistent = 0



[State 2827, RemoveExplod]
type = RemoveExplod
trigger1 = root,stateno = 2870 && root,Anim = 1205
ID = 12773

[State 2827, DestroySelf]
type = DestroySelf
trigger1 = root,stateno = 2870 && root,Anim = 1205



;===========================================================================
;------------------------------------------------
; Kaioken Horizontal Lines BG Genkidama follow up (P2 Hit)
[Statedef 2922]
type = A
movetype = A
physics = N
Anim = 15999
VelSet = 0,0



[State 2922, PlayerPush]
type = PlayerPush
trigger1 = Time >= 0
value = 0



[State 2922, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA



[State 2922, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = noBG
flag3 = NoBarDisplay
ignorehitpause = 1



[State 2922, PalFX]		;Flash
type = PalFX
trigger1 = TimeMod = 4,0
trigger1 = 1
Time = 1
invertall = 1
ignorehitpause = 0



[State 2922, Explod]	;Speed Lines 1
type = Explod
trigger1 = Time = 0
Anim = 2923;+(root,facing=1)
postype = back
pos = 0,10
bindTime = -1
supermove = 0
pausemoveTime = 70
sprpriority = 1
ontop = 0
ownpal = 1
;facing = 1
ignorehitpause = 1
removeTime = 70

[State 2922, Explod]	;Speed Lines 2
type = Explod
trigger1 = Time = 0
Anim = 2923;+(root,facing=1)
postype = back
pos = 0,240
bindTime = -1
supermove = 0
pausemoveTime = 70
sprpriority = 1
ontop = 0
ownpal = 1
;facing = 1
ignorehitpause = 1
removeTime = 70



[State 2922, DestroySelf]
type = DestroySelf
trigger1 = Time = 70



;===========================================================================
;------------------------------------------------
; Kaioken Horizontal Lines BG Genkidama follow up (Genkidama Ball)
[Statedef 2937]
type = A
movetype = A
physics = N
Anim = 15999
VelSet = 0,0



[State 2937, PlayerPush]
type = PlayerPush
trigger1 = Time >= 0
value = 0



[State 2937, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA



[State 2937, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = noBG
flag3 = NoBarDisplay
ignorehitpause = 1



[State 2937, PalFX]		;Flash
type = PalFX
trigger1 = TimeMod = 4,0
trigger1 = 1
Time = 1
invertall = 1
ignorehitpause = 0



[State 2937, Explod]	;Speed Lines 1
type = Explod
trigger1 = Time = 0
Anim = 2923;+(root,facing=1)
ID = 2923
postype = back
pos = 0,10
bindTime = -1
supermove = 0
sprpriority = 1
ontop = 0
ownpal = 1
ignorehitpause = 1
removeTime = 200

[State 2937, Explod]	;Speed Lines 2
type = Explod
trigger1 = Time = 0
Anim = 2923;+(root,facing=1)
ID = 2923
postype = back
pos = 0,240
bindTime = -1
supermove = 0
sprpriority = 1
ontop = 0
ownpal = 1
ignorehitpause = 1
removeTime = 200

[State 2937, RemoveExplod]	;destroy movie 7]
type = RemoveExplod
trigger1 = root,stateno=2965
ID = 2923



[State 2937, DestroySelf]
type = DestroySelf
trigger1 = Time = 200


;===========================================================================
;======================================================================
; Lightning for Kikoho charge
[Statedef 2999]
type = A
MoveType = I
physics = N
ctrl = 0
Anim = 2988+(random%12);2805+(random%4)
VelSet = 0,0
sprpriority = 4



[State 2999, ChangeAnim]
type = ChangeAnim
trigger1 = GameTime%(4) = 0
value = 2988+(random%12);2805+(random%4)
;elem = 1
;ignorehitpause = 
persistent = 0



[State 2999, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 2999, DestroySelf]
type = DestroySelf
trigger1 = (Parent,StateNo != 3420)
trigger2 = Root,stateno = [5000,5090]

[State 2999, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0



;===========================================================================
;===========================================================================
;---------------------------------------------------------------------------
;Helper 1
;LVL 3 - Ungrounded - Helpers - start
; 3001 - F  -start
; 3003 - B  -start
; 3005 - UF -start
; 3007 - UB -start
; 3020 - Aerial clones
; 3022 - Ground clones

;---------------------------------------------------------------------------
;===========================================================================
;===========================================================================
;Helper 1
[Statedef 3001]
type    = A
movetype= A
physics = N
juggle  = 2
;poweradd= 30
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
Anim = 3001
sprpriority = 2


[State 3001, VelSet]
type = VelSet
trigger1 = AnimElemTime(2)>0
x = 15	;8.6 -   10
ignorehitpause = 1


[State 2102, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 0;1
ignorehitpause = 1


[State 3001, 3]
type = HitDef
trigger1 = Time = 0
attr = A, HT  ;A, HA
damage = Ceil(IfElse(root,fvar(11) * 0 < 0, 0, root,fvar(11) * 0)), 0	;45, 7
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 0,0
guard.pauseTime = 0,0
sparkno = s7030
guard.sparkno = s7000
sparkxy = -16,-70
hitsound   = s5,2
guardsound = S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = -5.8,-2
down.velocity = -1.5,-10
envshake.Time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
ID = 3001
nochainID = 3005
p2facing = 1
kill = 0

[State 2500, TargetState]
type = TargetState
trigger1 = movehit = 1
trigger1 = numtarget(3001)
trigger1 = !(target, isHelper)
value = 3010
ignorehitpause = 0
persistent = 0
id = 3001

[State 3001, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3001, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 



[State 3001, Land]
type = ChangeState
trigger1 = FrontEdgeDist < -80
value = 3002

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time >= 100
;ignorehitpause = 
;persistent = 


[State 3001, End]
type = ChangeState
trigger1 = P2StateNo = 3010
value = 3011






;---------------------------------------------------------------------------
;Helper 1 - end
[Statedef 3002];needed to keep the hit count
type    = A
movetype= I
physics = N
VelSet = 0,0
ctrl = 0
Anim = 15999
sprpriority = 2

[State 3002, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
Time = 1
ignorehitpause = 1

[State 3002, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1
;persistent = 



[State 3002, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
ignorehitpause = 1


[State 3002, DestroySelf]
type = DestroySelf
trigger1 = Time >= 100
trigger2 = NumTarget
trigger2 = Target, MoveType != H
;ignorehitpause = 
;persistent = 














;---------------------------------------------------------------------------
;Helper 2
[Statedef 3003]
type    = A
movetype= A
physics = N
juggle  = 2
;poweradd= 30
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
Anim = 3001
sprpriority = 2

[State 3003, Turn]
type = Turn
trigger1 = !Time
ignorehitpause = 1
;persistent = 


[State 3003, VelSet]
type = VelSet
trigger1 = AnimElemTime(2)>0
x = 15	;8.6 -   10
ignorehitpause = 1


[State 2102, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 0;1
ignorehitpause = 1


[State 3003, 3]
type = HitDef
trigger1 = Time = 0
attr = A, HT  ;A, HA
damage = Ceil(IfElse(root,fvar(11) * 0 < 0, 0, root,fvar(11) * 0)), 0	;45, 7
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 0,0
guard.pauseTime = 0,0
sparkno = s7030
guard.sparkno = s7000
sparkxy = -16,-70
hitsound   = s5,2
guardsound = S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = -5.8,-2
down.velocity = -1.5,-10
envshake.Time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
ID = 3003
nochainID = 3007
p2facing = 1
kill = 0

[State 2500, TargetState]
type = TargetState
trigger1 = movehit = 1
trigger1 = numtarget(3003)
trigger1 = !(target, isHelper)
value = 3010
ignorehitpause = 0
persistent = 0
id = 3003

[State 3003, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3003, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 

[State 3003, Land]
type = ChangeState
trigger1 = BackEdgeDist < -80
value = 3004

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time >= 100
;ignorehitpause = 
;persistent = 

[State 3001, End]
type = ChangeState
trigger1 = P2StateNo = 3010
value = 3011




;---------------------------------------------------------------------------
;Helper 2 - end
[Statedef 3004];needed to keep the hit count
type    = A
movetype= I
physics = N
VelSet = 0,0
ctrl = 0
Anim = 15999
sprpriority = 2

[State 3004, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
Time = 1
ignorehitpause = 1

[State 3004, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1
;persistent = 



[State 3004, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
ignorehitpause = 1


[State 3004, DestroySelf]
type = DestroySelf
trigger1 = Time >= 100
trigger2 = NumTarget
trigger2 = Target, MoveType != H
;ignorehitpause = 
;persistent = 









;---------------------------------------------------------------------------
;Helper 3
[Statedef 3005]
type    = A
movetype= A
physics = N
juggle  = 2
;poweradd= 30
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
Anim = Cond(Root, StateNo = 3018,3008,3005)
sprpriority = 2

[State 3005, VelSet]
type = VelSet
trigger1 = AnimElemTime(2)>0
x = 9	;8.6 -   10
y = Cond(Anim = 3005,-7,7)
ignorehitpause = 1

[State 2102, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 0;1
ignorehitpause = 1


[State 3005, 3]
type = HitDef
trigger1 = Time = 0
attr = A, HT  ;A, HA
damage = Ceil(IfElse(root,fvar(11) * 0 < 0, 0, root,fvar(11) * 0)), 0	;45, 7
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 0,0
guard.pauseTime = 0,0
sparkno = s7030
guard.sparkno = s7000
sparkxy = -16,-70
hitsound   = s5,2
guardsound = S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = -5.8,-2
down.velocity = -1.5,-10
envshake.Time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
ID = 3005
nochainID = 3001
p2facing = 1
kill = 0

[State 3005, TargetState]
type = TargetState
trigger1 = movehit = 1
trigger1 = numtarget(3005)
trigger1 = !(target, isHelper)
value = 3010
ignorehitpause = 0
persistent = 0
id = 3005

[State 3005, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3005, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 

[State 3005, Land]
type = ChangeState
trigger1 = FrontEdgeDist < -80
value = 3006

[State 3005, End]
type = ChangeState
trigger1 = P2StateNo = 3010
value = 3011

[State 3008, End]
type = ChangeState
trigger1 = Anim = 3008 && pos y >= -25
value = 3011




;---------------------------------------------------------------------------
;Helper 3 - end
[Statedef 3006];needed to keep the hit count
type    = A
movetype= I
physics = N
VelSet = 0,0
ctrl = 0
Anim = 15999
sprpriority = 2

[State 3006, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
Time = 1
ignorehitpause = 1

[State 3006, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1
;persistent = 



[State 3006, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
ignorehitpause = 1


[State 3006, DestroySelf]
type = DestroySelf
trigger1 = Time >= 100
trigger2 = NumTarget
trigger2 = Target, MoveType != H
;ignorehitpause = 
;persistent = 




;---------------------------------------------------------------------------
;Helper 4
[Statedef 3007]
type    = A
movetype= A
physics = N
juggle  = 2
;poweradd= 30
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
Anim = Cond(Root, StateNo = 3018,3008,3005)
sprpriority = 2

[State 3007, VelSet]
type = VelSet
trigger1 = AnimElemTime(2)>0
x = 9	;8.6 -   10
y = Cond(Anim = 3005,-7,7)
ignorehitpause = 1 

[State 3007, Turn]
type = Turn
trigger1 = !Time
ignorehitpause = 1
;persistent =

[State 2102, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 0;1
ignorehitpause = 1





[State 3007, 3]
type = HitDef
trigger1 = Time = 0
attr = A, HT  ;A, HA
damage = Ceil(IfElse(root,fvar(11) * 0 < 0, 0, root,fvar(11) * 0)), 0	;45, 7
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 0,0
guard.pauseTime = 0,0
sparkno = s7030
guard.sparkno = s7000
sparkxy = -16,-70
hitsound   = s5,2
guardsound = S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = -5.8,-2
down.velocity = -1.5,-10
envshake.Time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
ID = 3007
nochainID = 3003
p2facing = 1
kill = 0

[State 3007, TargetState]
type = TargetState
trigger1 = movehit = 1
trigger1 = numtarget(3007)
trigger1 = !(target, isHelper)
value = 3010
ignorehitpause = 0
persistent = 0
id = 3007

[State 3007, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3007, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 

[State 3007, Land]
type = ChangeState
trigger1 = BackEdgeDist < -80
value = 3008

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time >= 100
;ignorehitpause = 
;persistent = 

[State 3007, End]
type = ChangeState
trigger1 = P2StateNo = 3010
value = 3011


[State 3007, End]
type = ChangeState
trigger1 = Anim = 3008 && pos y >= -25
value = 3011



;---------------------------------------------------------------------------
;Helper 4 - end
[Statedef 3008];needed to keep the hit count
type    = A
movetype= I
physics = N
VelSet = 0,0
ctrl = 0
Anim = 15999
sprpriority = 2

[State 3008, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
Time = 1
ignorehitpause = 1

[State 3008, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1
;persistent = 



[State 3008, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
ignorehitpause = 1


[State 3008, DestroySelf]
type = DestroySelf
trigger1 = Time >= 100
trigger2 = NumTarget
trigger2 = Target, MoveType != H
;ignorehitpause = 
;persistent = 




;---------------------------------------------------------------------------
;Helper 1-2-3-4 - end
[Statedef 3011]
type    = A
movetype= I
physics = N
ctrl = 0
sprpriority = 2

[State 3011, VelMul]
type = VelMul
trigger1 = Time <= 15
x = 0.95
y = 0.95
ignorehitpause = 1

[State 3011, VelMul]
type = VelSet
trigger1 = Time > 15
x = 0
y = 0
ignorehitpause = 1

[State 3011, VelMul]
type = VelSet
trigger1 = PrevStateno = 3022
x = 0
y = 0
ignorehitpause = 1

[State 3011, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
Time = 1
ignorehitpause = 1


[State 3011, ChangeAnim]
type = ChangeAnim
trigger1 = Time > 15
value = 3009
ignorehitpause = 1 
persistent = 0

[State 3011, PlaySND]	;teleport
type = PlaySND
trigger1 = Time = 15
value = S2500,0
volumescale = 50 
persistent = 0




[State 3011, DestroySelf]
type = DestroySelf
trigger1 = Time >= 100




;---------------------------------------------------------------------------
;Helper 1 (1)
[Statedef 3020]
type    = A
movetype= A
physics = N
juggle  = 2
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
Anim = 3020
sprpriority = 3


[State -2, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze



[State 3020, PlaySND]	;teleport
type = PlaySND
trigger1 = AnimElem = 1
value = S2500,0
volumescale = 50 
persistent = 0


[State 2004, Voice]	;Tien: "From all sides!"   
type = PlaySND
trigger1 = AnimElemTime (5) = 0
value = 85,3001
volumescale = 255
channel = 0


[State 2004, Voice]
type = PlaySND
trigger1 = AnimElemTime (15) = 0
value = 85, 3
volumescale = 255
channel = 0




[State 3020, PosSet]
type = PosSet
trigger1 = !Time
;x = -P2Dist x
y = P2Dist y
ignorehitpause = 1

[State 3020, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = NumTarget(3020)
trigger1 = !(Target, IsHelper)
trigger1 = Target, Time = 0
fvar(13) = 1
ignorehitpause = 1
persistent = 1

[State 3020, PlaySND]
type = PlaySND
trigger1 = AnimElem = 5
trigger2 = AnimElem = 22
value = 0, 2
ignorehitpause = 1

[State 3020, PlaySND]
type = PlaySND
trigger1 = AnimElem = 9
value = 0, 4
ignorehitpause = 1

[State 3020, PlaySND]
type = PlaySND
trigger1 = AnimElem = 14
value = 0, 5
ignorehitpause = 1

[State 3020, HitDef 1]
type = HitDef
trigger1 = AnimElem = 6
attr = A, HA
damage = Ceil(IfElse(root,fvar(11) * 60 < 15, 15, root,fvar(11) * 60)), 0	;80,7
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 20,11
guard.pauseTime = 0,0
sparkno = s7040
guard.sparkno = s7000
sparkxy = -10,-63
hitsound   = s5,2
guardsound = S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 0
id = 3020
envshake.Time = 10
envshake.freq = 60
envshake.ampl = 6







[State 3020, HitDef 2]
type = HitDef
trigger1 = AnimElem = 10
attr = A, HA
damage = Ceil(IfElse(root,fvar(11) * 60 < 15, 15, root,fvar(11) * 60)), 0	;70,7
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 25,11
guard.pauseTime = 0,0
sparkno = s7040
guard.sparkno = s7000
sparkxy = -10,-45
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 0
id = 3020
envshake.Time = 10
envshake.freq = 60
envshake.ampl = 6


[State 3020, HitDef 3]
type = HitDef
trigger1 = AnimElem = 16
attr = A, HA
damage = Ceil(IfElse(root,fvar(11) * 60 < 15, 15, root,fvar(11) * 60)), 0	;70,7
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 25,11
guard.pauseTime = 0,0
sparkno = s7040
guard.sparkno = s7000
sparkxy = -10,-70
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 0
id = 3020
envshake.Time = 10
envshake.freq = 60
envshake.ampl = 6


[State 3020, HitDef 4]
type = HitDef
trigger1 = AnimElem = 24
attr = A, HA
damage = Ceil(IfElse(root,fvar(11) * 60 < 15, 15, root,fvar(11) * 60)), 0	;70,7
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 25,11
guard.pauseTime = 0,0
sparkno = s7040
guard.sparkno = s7000
sparkxy = -10,-70
hitsound   = s5,13
guardsound = S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 0
id = 3020
envshake.Time = 10
envshake.freq = 60
envshake.ampl = 6








[State 3020, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = NumTarget(3020)
trigger1 = !(Target, IsHelper)
trigger1 = Target, Time = 0
value = 3012
ignorehitpause = 1
id = 3020



[State 3020, Pause]
type = Pause
trigger1 = MoveHit
trigger1 = NumTarget(3020)
trigger1 = !(Target, IsHelper)
trigger1 = Target, Time = 0
Time = 10
moveTime = 5;10
ignorehitpause = 1















[State 3020, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3020, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 





[State 3020, Land]
type = ChangeState
trigger1 = Pos Y >= 0
value = 3032


[State 3020, Gravity]
type = Gravity
trigger1 = AnimElemTime(28) >= 0
ignorehitpause = 1

[State 3020, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(28) = 0
x = -2
ignorehitpause = 1




;---------------------------------------------------------------------------
;Helper 1 fake (2)
[Statedef 3021]
type    = A
movetype= A
physics = N
juggle  = 2
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
Anim = 3020
sprpriority = 3

[State -2, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze

[State 3021, PlaySND]	;teleport
type = PlaySND
trigger1 = AnimElem = 1
value = S2500,0
volumescale = 50 
persistent = 0


[State 3021, PosSet]
type = PosSet
trigger1 = !Time
;x = -P2Dist x
y = P2Dist y
ignorehitpause = 1

;[State 2102, ParentVarAdd - for 'dmg dampening']
;type = ParentVarAdd
;trigger1 = MoveHit
;trigger1 = NumTarget(3020)
;trigger1 = !(Target, IsHelper)
;trigger1 = Target, Time = 0
;fvar(13) = 0	;no hits because it's a fake attacker
;ignorehitpause = 1



[State 3021, HitDef 1]
type = HitDef
trigger1 = AnimElem = 6
attr = A, HA
damage = 0,0;Ceil(IfElse(root,fvar(11) * 45 < 7, 7, root,fvar(11) * 45)), 0
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 20,11
guard.pauseTime = 0,0
sparkno = -1;s7040
guard.sparkno = -1;s7000
sparkxy = -16,-70
hitsound   = -1;s5,2
guardsound = -1;S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 0
id = 3020
p1sprpriority = 3
p2sprpriority = 1
envshake.Time = 10
envshake.freq = 60
envshake.ampl = 6







[State 3021, HitDef 2]
type = HitDef
trigger1 = AnimElem = 10
attr = A, HA
damage = 0,0;Ceil(IfElse(root,fvar(11) * 45 < 7, 7, root,fvar(11) * 45)), 0
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 25,11
guard.pauseTime = 0,0
sparkno = -1;s7040
guard.sparkno = -1;s7000
sparkxy = -16,-70
hitsound   = -1;s5,2
guardsound = -1;S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 0
id = 3020
p1sprpriority = 3
p2sprpriority = 1
envshake.Time = 10
envshake.freq = 60
envshake.ampl = 6


[State 3021, HitDef 3]
type = HitDef
trigger1 = AnimElem = 16
attr = A, HA
damage = 0,0;Ceil(IfElse(root,fvar(11) * 45 < 7, 7, root,fvar(11) * 45)), 0
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 25,11
guard.pauseTime = 0,0
sparkno = -1;s7040
guard.sparkno = -1;s7000
sparkxy = -16,-70
hitsound   = -1;s5,2
guardsound = -1;S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 0
id = 3020
p1sprpriority = 3
p2sprpriority = 1
envshake.Time = 10
envshake.freq = 60
envshake.ampl = 6


[State 3021, HitDef 4]
type = HitDef
trigger1 = AnimElem = 24
attr = A, HA
damage = 0,0;Ceil(IfElse(root,fvar(11) * 45 < 7, 7, root,fvar(11) * 45)), 0
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 25,11
guard.pauseTime = 0,0
sparkno = -1;s7040
guard.sparkno = -1;s7000
sparkxy = -16,-70
hitsound   = -1;s5,2
guardsound = -1;S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 0
id = 3020
p1sprpriority = 3
p2sprpriority = 1
envshake.Time = 10
envshake.freq = 60
envshake.ampl = 6








[State 3021, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = NumTarget(3020)
trigger1 = !(Target, IsHelper)
trigger1 = Target, Time = 0
value = 3012
ignorehitpause = 1
id = 3020



[State 3021, Pause]
type = Pause
trigger1 = MoveHit
trigger1 = NumTarget(3020)
trigger1 = !(Target, IsHelper)
trigger1 = Target, Time = 0
Time = 10
moveTime = 5;10
ignorehitpause = 1



[State 3021, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3021, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 




[State 3001, Land]
type = ChangeState
trigger1 = Pos Y >= 0
value = 3033


[State 3021, Gravity]
type = Gravity
trigger1 = AnimElemTime(28) >= 0
ignorehitpause = 1

[State 3021, Gravity]
type = VelAdd
trigger1 = AnimElemTime(28) = 0
x = -2
ignorehitpause = 1




;---------------------------------------------------------------------------
;Helper 2
[Statedef 3022]
type    = A
movetype= A
physics = N
juggle  = 2
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
Anim = 3022
sprpriority = 2

[State -2, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze

[State 3022, PlaySND]	;teleport
type = PlaySND
trigger1 = AnimElem = 2
value = S2500,0
volumescale = 50 
persistent = 0



[State 2004, Voice]	;Tien: "Heeeei!"   
type = PlaySND
trigger1 = AnimElemTime (17) = 0
value = 85, 4
volumescale = 200
channel = 0

[State 2004, Voice]
type = PlaySND
trigger1 = AnimElemTime (5) = 0
value = 85, 2
volumescale = 200
channel = 0





[State 3022, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = NumTarget(3021)
trigger1 = !(Target, IsHelper)
trigger1 = Target, Time = 0
fvar(13) = 1
ignorehitpause = 1
persistent = 1


[State 3022, PlaySND]
type = PlaySND
trigger1 = AnimElem = 11
trigger2 = AnimElem = 18
value = 0, 2
ignorehitpause = 1

[State 3022, PlaySND]
type = PlaySND
trigger1 = AnimElem = 5
value = 0, 5
ignorehitpause = 1



[State 3022, HitDef 1]
type = HitDef
trigger1 = AnimElem = 6
attr = A, HA
damage = Ceil(IfElse(root,fvar(11) * 60 < 15, 15, root,fvar(11) * 60)), 0	;80,7
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 20,11
guard.pauseTime = 0,0
sparkno = s7040
guard.sparkno = s7000
sparkxy = -10,-120
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 0
id = 3021
p1sprpriority = 3
p2sprpriority = 1
envshake.Time = 10
envshake.freq = 60
envshake.ampl = 6



[State 3022, HitDef 2]
type = HitDef
trigger1 = AnimElem = 13
attr = A, HA
damage = Ceil(IfElse(root,fvar(11) * 60 < 15, 15, root,fvar(11) * 60)), 0	;70,7
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 25,11
guard.pauseTime = 0,0
sparkno = s7040
guard.sparkno = s7000
sparkxy = -10,-100
hitsound   = s5,2
guardsound = S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 0
id = 3021
p1sprpriority = 3
p2sprpriority = 1
envshake.Time = 10
envshake.freq = 60
envshake.ampl = 6


[State 3022, HitDef 3]
type = HitDef
trigger1 = AnimElem = 18
attr = A, HA
damage = Ceil(IfElse(root,fvar(11) * 60 < 15, 15, root,fvar(11) * 60)), 0	;45,7
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 20,11;25,11
guard.pauseTime = 0,0
sparkno = s7040
guard.sparkno = s7000
sparkxy = -10,-120
hitsound   = s5,2
guardsound = S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 0
id = 3021
p1sprpriority = 3
p2sprpriority = 1
envshake.Time = 10
envshake.freq = 60
envshake.ampl = 6



[State 3022, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, isHelper)
trigger1 = target, Time = 0
value = 3013
ignorehitpause = 1
id = 3021



[State 3022, Pause]
type = Pause
trigger1 = MoveHit
trigger1 = NumTarget(3021)
trigger1 = !(Target, IsHelper)
trigger1 = Target, Time = 0
Time = 10
moveTime = 5;10
ignorehitpause = 1


[State 3022, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3022, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 







[State 3022, VelSet]
type = VelSet
trigger1 = AnimElem = 18
x = P2Dist x/29
y = -6
ignorehitpause = 1
persistent = 0

[State 3022, Land]
type = ChangeState
trigger1 = AnimTime = 0
value = 3024
ctrl = 0

[State 3022, Aerial state]
type = StateTypeSet
trigger1 = AnimElemTime(18)>=0
physics = N
statetype = A

[State 3022, Gravity]
type = Gravity
trigger1 = AnimElemTime(18)>=5
ignorehitpause = 0





;---------------------------------------------------------------------------
;Helper 2 fake
[Statedef 3023]
type    = A
movetype= A
physics = N
juggle  = 2
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
Anim = 3022
sprpriority = 2

[State -2, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze

[State 3023, PlaySND]	;teleport
type = PlaySND
trigger1 = AnimElem = 2
value = S2500,0
volumescale = 50
persistent = 0


;[State 2102, ParentVarAdd - for 'dmg dampening']
;type = ParentVarAdd
;trigger1 = MoveHit
;trigger1 = NumTarget(3021)
;trigger1 = !(Target, IsHelper)
;trigger1 = Target, Time = 0
;fvar(13) = 0	;no hits because it's a fake attacker
;ignorehitpause = 1
;persistent = 1




[State 3023, HitDef 1]
type = HitDef
trigger1 = AnimElem = 6
attr = A, HA
damage = 0,0;Ceil(IfElse(root,fvar(11) * 45 < 7, 7, root,fvar(11) * 45)), 0
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 20,11
guard.pauseTime = 0,0
sparkno = -1;s7040
guard.sparkno = -1;s7000
sparkxy = -16,-70
hitsound   = -1;s5,5
guardsound = -1;S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 0
id = 3021
p1sprpriority = 3
p2sprpriority = 1
envshake.Time = 10
envshake.freq = 60
envshake.ampl = 6



[State 3023, HitDef 2]
type = HitDef
trigger1 = AnimElem = 13
attr = A, HA
damage = 0,0;Ceil(IfElse(root,fvar(11) * 45 < 7, 7, root,fvar(11) * 45)), 0
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 25,11
guard.pauseTime = 0,0
sparkno = -1;s7040
guard.sparkno = -1;s7000
sparkxy = -16,-70
hitsound   = -1;s5,2
guardsound = -1;S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 0
id = 3021
p1sprpriority = 3
p2sprpriority = 1
envshake.Time = 10
envshake.freq = 60
envshake.ampl = 6


[State 3023, HitDef 3]
type = HitDef
trigger1 = AnimElem = 18
attr = A, HA
damage = 0,0;Ceil(IfElse(root,fvar(11) * 45 < 7, 7, root,fvar(11) * 45)), 0
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 20,11;25,11
guard.pauseTime = 0,0
sparkno = -1;s7040
guard.sparkno = -1;s7000
sparkxy = -16,-70
hitsound   = -1;s5,2
guardsound = -1;S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 0
id = 3021
p1sprpriority = 3
p2sprpriority = 1
envshake.Time = 10
envshake.freq = 60
envshake.ampl = 6



[State 3023, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, isHelper)
trigger1 = target, Time = 0
value = 3013
ignorehitpause = 1
id = 3021



[State 3023, Pause]
type = Pause
trigger1 = MoveHit
trigger1 = NumTarget(3021)
trigger1 = !(Target, IsHelper)
trigger1 = Target, Time = 0
Time = 10
moveTime = 5;10
ignorehitpause = 1


[State 3023, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3023, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 





[State 3023, VelSet]
type = VelSet
trigger1 = AnimElem = 18
x = P2Dist x/30
y = -6
ignorehitpause = 1
persistent = 0


[State 3023, Aerial state]
type = StateTypeSet
trigger1 = AnimElemTime(18)>=0
physics = N
statetype = A

[State 3023, Gravity]
type = Gravity
trigger1 = AnimElemTime(18)>=5
ignorehitpause = 0


[State 3023, Land]
type = ChangeState
;trigger1 = Vel Y > 0
;trigger1 = Pos Y >= 0
trigger1 = AnimTime = 0
value = 3024
ctrl = 0



;---------------------------------------------------------------------------
;Helper 1-2-3-4 - end
[Statedef 3024]
type    = A
movetype= I
physics = N
ctrl = 0
sprpriority = 2

[State -2, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze

[State 3024, VelMul]
type = VelSet
trigger1 = !Time
x = 0
y = 0
ignorehitpause = 1

[State 3024, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
Time = 1
ignorehitpause = 1


[State 3024, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 3009
ignorehitpause = 1 
persistent = 0

[State 3024, PlaySND] ;teleport
type = PlaySND
trigger1 = !Time
value = S2500,0
volumescale = 50 
persistent = 0




[State 3024, DestroySelf]
type = DestroySelf
trigger1 = Time >= 100







;---------------------------------------------------------------------------
;Helper 3 Tien (3)
[Statedef 3030]
type    = A
movetype= A
physics = N
juggle  = 2
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
Anim = 3030
sprpriority = 3

[State -2, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze

[State 3030, PlaySND]	;teleport
type = PlaySND
trigger1 = AnimElem = 1
value = S2500,0
volumescale = 50 
persistent = 0



[State 3030, Voice]	 
type = PlaySND
trigger1 = AnimElemTime (3) = 0
value = 85,3002
volumescale = 220
channel = 0







[State 2102, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = NumTarget(3030)
trigger1 = !(Target, IsHelper)
trigger1 = Target, Time = 0
fvar(13) = 1
ignorehitpause = 1
persistent = 1

[State 3022, PlaySND]
type = PlaySND
trigger1 = AnimElem = 5
value = 0, 2
ignorehitpause = 1








[State 3030, HitDef 2]
type = HitDef
triggerall =root,fvar(28)<30 || root,fvar(27)=0
;triggerall = Root, var(40) = 0
trigger1 = AnimElem = 7
attr = A, HA
damage = Ceil(IfElse(root,fvar(11) * 60 < 15, 15, root,fvar(11) * 60)), 0	;80,7
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 30,11
guard.pauseTime = 0,0
sparkno = s7040
guard.sparkno = s7000
sparkxy = -10,-25
hitsound   = s5,14
guardsound = S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 1
id = 3030
p1sprpriority = 3
p2sprpriority = 1
envshake.Time = 20
envshake.freq = 60
envshake.ampl = 9






[State 3030, HitDef 2]
type = HitDef
triggerall = root,fvar(28)>=30 ;&& root,fvar(28)<40
;triggerall = Root, var(40) != 0
trigger1 = AnimElem = 7
attr = A, HA
damage = Ceil(IfElse(root,fvar(11) * 60 < 15, 15, root,fvar(11) * 60)), 0	;80,7
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 30,11
guard.pauseTime = 0,0
sparkno = s7040
guard.sparkno = s7000
sparkxy = -10,-25
hitsound   = s5,14
guardsound = S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
kill = 0
id = 3030
p1sprpriority = 3
p2sprpriority = 1
envshake.Time = 20
envshake.freq = 60
envshake.ampl = 9




[State 3030, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = NumTarget(3030)
trigger1 = !(Target, IsHelper)
trigger1 = Target, Time = 0
value = 3014
ignorehitpause = 1
id = 3030









[State 3031, Pause]
type = Pause
trigger1 = MoveHit
trigger1 = NumTarget(3030)
trigger1 = !(Target, IsHelper)
trigger1 = Target, Time = 1
;trigger1 = Enemy, Life > 1
Time = 20
moveTime = 20
ignorehitpause = 1
persistent = 0






[State 2503, Super BG Proj]
type = Projectile
triggerall = RoundState != 2
trigger1 = Enemy, Alive = 0
trigger1 = MoveHit
ProjID = 3001	;Physical attack
projAnim = 15999
projremoveTime = 1
ignorehitpause=1
supermoveTime = 9001
pausemoveTime = 9001














[State 3030, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3030, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 




[State 3030, Gravity]
type = Gravity
trigger1 = AnimElemTime(11) >= 0
ignorehitpause = 1






[State 3030, Land]
type = ChangeState
triggerall = root,fvar(28)>=30 ;&& root,fvar(28)<40 
trigger1 = Pos Y >= 0
value = 3034


[State 3030, Land]
type = DestroySelf;ChangeState
triggerall = root,fvar(28)<30 || root,fvar(27)=0;Root,var(40) = 0
trigger1 = Pos Y >= 0
;value = 3034

;[State 3030, Land]
;type = DestroySelf;ChangeState
;triggerall = Pos Y >= 0
;trigger1 = root,fvar(28)<20 || root,fvar(27)=0
;trigger2 = root,fvar(28)>=60




;---------------------------------------------------------------------------
;Helper 3 fake (4)
[Statedef 3031]
type    = A
movetype= A
physics = N
juggle  = 2
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
Anim = 3030
sprpriority = 3

[State -2, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze

[State 3031, PlaySND]	;teleport
type = PlaySND
trigger1 = AnimElem = 1
value = S2500,0
volumescale = 50 
persistent = 0

;[State 2102, ParentVarAdd - for 'dmg dampening']
;type = ParentVarAdd
;trigger1 = MoveHit
;trigger1 = NumTarget(3030)
;trigger1 = !(Target, IsHelper)
;trigger1 = Target, Time = 0
;fvar(13) = 0	;no hits because it's a fake attacker
;ignorehitpause = 1
;persistent = 1



[State 3031, HitDef 1]
type = HitDef
trigger1 = AnimElem = 7
attr = A, HA
damage = 0,0;Ceil(IfElse(root,fvar(11) * 45 < 7, 7, root,fvar(11) * 45)), 0
hitflag = MAFD
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 30,11
guard.pauseTime = 0,0
sparkno = -1;s7040
guard.sparkno = -1;s7000
sparkxy = -16,-70
hitsound   = -1;s5,2
guardsound = -1;S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = 0,-2
down.velocity = 0,-10
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
fall.recover = 0
p2facing = 1
;kill = 1
id = 3030
p1sprpriority = 3
p2sprpriority = 1
envshake.Time = 20
envshake.freq = 60
envshake.ampl = 9
;numhits = 0




[State 3031, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = NumTarget(3030)
trigger1 = !(Target, IsHelper)
trigger1 = Target, Time = 0
value = 3014
ignorehitpause = 1
id = 3030


[State 3031, Pause]
type = Pause
trigger1 = MoveHit
trigger1 = NumTarget(3030)
trigger1 = !(Target, IsHelper)
trigger1 = Target, Time = 1
;trigger1 = Enemy, Life > 1
Time = 20
moveTime = 20
ignorehitpause = 1
persistent = 0




[State 3031, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3031, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 

[State 3031, Gravity]
type = Gravity
trigger1 = AnimElemTime(11) >= 0
ignorehitpause = 1



[State 3031, Land]
type = ChangeState
trigger1 = Pos Y >= 0
value = 30359





;---------------------------------------------------------------------------
; Helpers landing (1)
; farthest to the left
[Statedef 3032]
type = S
movetype = I
physics = S
ctrl = 0
Anim = 3035
VelSet = 0,0
sprpriority = 2

[State -2, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze



[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !AnimTime
value = 3037
elem = 1 
persistent = 0




[State -3, Landing Sound]
type = PlaySND
trigger1 = Time = 0
value = 40, 0
channel = 15

[State -3, Land FX]
type = Helper
trigger1 = !Time
name = "LandFX"
Helpertype = normal
StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermoveTime = 99999
pausemoveTime = 99999

[State 3032, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3032, ChangeState]	;LVL 0
type = ChangeState
triggerall = root,fvar(28)<30 || root,fvar(27)=0
trigger1 = Root, StateNo = 3037
value = 3038
ctrl = 0

[State 3035, ChangeState]	;LVL 1
type = ChangeState
triggerall = root,fvar(28)>=30 && root,fvar(28)<60
trigger1 = Enemy, StateNo = 3041;!Time
value = 3044

[State 3035, ChangeState]	;LVL 2
type = ChangeState
triggerall = root,fvar(28)>=60 && root,fvar(28)<90
trigger1 = Enemy, StateNo = 3250;!Time
value = 3210

[State 3035, ChangeState]	;LVL 3
type = ChangeState
triggerall = root,fvar(28)>=90
trigger1 = Root, StateNo = 3402;Enemy, StateNo = 3450;!Time
value = 3399



[State 3031, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 




;---------------------------------------------------------------------------
; Helpers landing (2)
; farthest to the right
[Statedef 3033]
type = S
movetype = I
physics = S
ctrl = 0
Anim = 3035
VelSet = 0,0
sprpriority = 2

[State -2, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze



[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !AnimTime
value = 3037
elem = 1 
persistent = 0




[State -3, Landing Sound]
type = PlaySND
trigger1 = Time = 0
value = 40, 0
channel = 15

[State -3, Land FX]
type = Helper
trigger1 = !Time
name = "LandFX"
Helpertype = normal
StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermoveTime = 99999
pausemoveTime = 99999

[State 3032, PosSet]
type = PosSet
trigger1 = !Time
y = 0




[State 3032, ChangeState]	;LVL 0
type = ChangeState
triggerall = root,fvar(28)<30 || root,fvar(27)=0
trigger1 = Root, StateNo = 3037
value = 3038
ctrl = 0

[State 3035, ChangeState]	;LVL 1
type = ChangeState
triggerall = root,fvar(28)>=30 && root,fvar(28)<60
trigger1 = Enemy, StateNo = 3041;!Time
value = 3045;3044

[State 3035, ChangeState]	;LVL 2
type = ChangeState
triggerall = root,fvar(28)>=60 && root,fvar(28)<90
trigger1 = Enemy, StateNo = 3250;!Time
value = 3211

[State 3035, ChangeState]	;LVL 3
type = ChangeState
triggerall = root,fvar(28)>=90
trigger1 = Root, StateNo = 3402;Enemy, StateNo = 3450;!Time
value = 3399




[State 3031, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 









;---------------------------------------------------------------------------
; Helpers landing (3)
; in the middle, left
[Statedef 3034]
type = S
movetype = I
physics = S
ctrl = 0
Anim = 3035
VelSet = 0,0
sprpriority = 2

[State -2, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze



[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !AnimTime
value = 3037
elem = 1 
persistent = 0




[State -3, Landing Sound]
type = PlaySND
trigger1 = Time = 0
value = 40, 0
channel = 15

[State -3, Land FX]
type = Helper
triggerall = root,fvar(28)<90
trigger1 = !Time
name = "LandFX"
Helpertype = normal
StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermoveTime = 99999
pausemoveTime = 99999

[State 3032, PosSet]
type = PosSet
trigger1 = !Time
y = 0



;[State 3032, ChangeState]
;type = ChangeState
;triggerall = Root,var(40) = 0
;trigger1 = Root, StateNo = 3037
;value = 3038
;ctrl = 0
;
;
;
;[State 3035, ChangeState]
;type = ChangeState
;triggerall = Root,var(40) > 0
;trigger1 = Enemy, StateNo = 3041;!Time
;value = 3046


[State 3032, ChangeState]	;LVL 0
type = ChangeState
triggerall = root,fvar(28)<30 || root,fvar(27)=0
trigger1 = Root, StateNo = 3037
value = 3038
ctrl = 0

[State 3035, ChangeState]	;LVL 1
type = ChangeState
triggerall = root,fvar(28)>=30 && root,fvar(28)<60
trigger1 = Enemy, StateNo = 3041;!Time
value = 3046

[State 3035, ChangeState]	;LVL 2
type = ChangeState
triggerall = root,fvar(28)>=60 && root,fvar(28)<90
trigger1 = Enemy, StateNo = 3250;!Time
value = 3213 ;DestroySelf

[State 3035, ChangeState]	;LVL 3
type = DestroySelf;ChangeState
triggerall = root,fvar(28)>=90
trigger1 = Pos Y = 0;Enemy, StateNo = 3450;!Time
;value = 3399



[State 3031, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 




;---------------------------------------------------------------------------
; Helpers landing (4)
; in the middle, right
[Statedef 30359]
type = S
movetype = I
physics = S
ctrl = 0
Anim = 3035
VelSet = 0,0
sprpriority = 2

[State -2, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze



[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !AnimTime
value = 3037
elem = 1 
persistent = 0




[State -3, Landing Sound]
type = PlaySND
trigger1 = Time = 0
value = 40, 0
channel = 15

[State -3, Land FX]
type = Helper
trigger1 = !Time
name = "LandFX"
Helpertype = normal
StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermoveTime = 99999
pausemoveTime = 99999

[State 3032, PosSet]
type = PosSet
trigger1 = !Time
y = 0



[State 3032, ChangeState]	;LVL 0
type = ChangeState
triggerall = root,fvar(28)<30 || root,fvar(27)=0
trigger1 = Root, StateNo = 3037
value = 3038
ctrl = 0

[State 3035, ChangeState]	;LVL 1
type = ChangeState
triggerall = root,fvar(28)>=30 && root,fvar(28)<60
trigger1 = Enemy, StateNo = 3041;!Time
value = 3047

[State 3035, ChangeState]	;LVL 2
type = ChangeState
triggerall = root,fvar(28)>=60 && root,fvar(28)<90
trigger1 = Enemy, StateNo = 3250;!Time
value = 3212

[State 3035, ChangeState]	;LVL 3
type = ChangeState
triggerall = root,fvar(28)>=90
trigger1 = Root, StateNo = 3402;Enemy, StateNo = 3450;!Time
value = 3399





[State 3031, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 










;---------------------------------------------------------------------------
; Helpers - breathing
[Statedef 3038]
type = S
movetype = I
physics = S
ctrl = 0
Anim = 3036
VelSet = 0,0
sprpriority = 2



[State 195, PosAdd 1]
type = PosAdd
trigger1 = AnimElem = 2
x = -7
[State 195, PosAdd 2]
type = PosAdd
trigger1 = AnimElem = 3
x = -2
[State 195, PosAdd 3]
type = PosAdd
trigger1 = AnimElem = 4
x = -8
[State 195, PosAdd 4]
type = PosAdd
trigger1 = AnimElem = 11
x = 8
[State 195, PosAdd 5]
type = PosAdd
trigger1 = AnimElem = 12
x = 2
[State 195, PosAdd 6]
type = PosAdd
trigger1 = AnimElem = 13
x = 7




[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = AnimElemTime(10) > 0
flag = NoShadow




[State 3038, VelSet]
type = VelSet
trigger1 = AnimElemTime(10) > 0 && AnimElemTime(10) <= 70
x = (RootDist X)/6
y = 0
ignorehitpause = 1


[State 3038, DestroySelf]
type = DestroySelf
trigger1 = RootDist X = [-5,5]
;ignorehitpause = 
;persistent = 

[State 3038, PalFX]
type = PalFX
trigger1 = Time%3 = 0 && AnimElemTime(10) > 0 && AnimElemTime(10) <= 70
Time = 2
add = 128,128,128


[State 3038, ChangeState]
type = DestroySelf
trigger1 = Time = 100

[State 3031, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 






;---------------------------------------------------------------------------
; Lvl 1 - Volley pose (1)
; farthest to the left
[Statedef 3044]
type = S
movetype = I
physics = S
ctrl = 0
Anim = 3045
VelSet = 0,0
sprpriority = 2

[State 2260, bg]
type = AssertSpecial
trigger1 = 1;Time >= 8
flag = NoBarDisplay
ignorehitpause = 1

[State 1849, Sound Effect]
type = PlaySND
trigger1 = Time = 8
value = s3000,1
volumescale = 100

[State 1849, Sound Effect]
type = PlaySND
trigger1 = Time = 8
value = s3000,1
volumescale = 100


[State 2004, Voice]	;Tien: "Volley Style!"
type = PlaySND
trigger1 = !Time
value = 85,1000+random%3;80,1055
volumescale = 100
channel = 0





[State 183, Full Screen effect]
type = Explod
trigger1 = Time = 8
Anim = 19900
ID = 184
pos = 0,0
postype = back
removeTime = 16
scale = .84, 1.07
sprpriority = 5
bindTime = -1
ownpal = 1
removeongethit = 1


[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 






[State 3037, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3050
ctrl = 0





;---------------------------------------------------------------------------
; Lvl 1 - Volley pose (2)
; farthest to the right
[Statedef 3045]
type = S
movetype = I
physics = S
ctrl = 0
Anim = 3045
VelSet = 0,0
sprpriority = 2


[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 


[State 3037, ChangeState]
type = ChangeState
trigger1 = Time > 119
value = 3065
ctrl = 0



;[State 3037, ChangeState]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1

;---------------------------------------------------------------------------
; Lvl 1 - Volley pose (3)
; in the middle, left
[Statedef 3046]
type = S
movetype = I
physics = S
ctrl = 0
Anim = 3045
VelSet = 0,0
sprpriority = 2



[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 

[State 3037, ChangeState]
type = ChangeState
trigger1 = Time > 86
value = 3060
ctrl = 0




;[State 3037, ChangeState]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1

;---------------------------------------------------------------------------
; Lvl 1 - Volley pose (4)
; in the middle, right
[Statedef 3047]
type = S
movetype = I
physics = S
ctrl = 0
Anim = 3045
VelSet = 0,0
sprpriority = 2







[State 3037, ChangeState]
type = ChangeState
trigger1 = Time > 60
value = 3055
ctrl = 0



[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 






;[State 3037, ChangeState]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1






;---------------------------------------------------------------------------
; (1) Save - attack
[Statedef 3050]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
Anim = 3050

[State 2260, bg]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
Time = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 



[State 1005, VelMul]
type = VelSet
trigger1 = !Time
x = 6
ignorehitpause = 1
;persistent = 

[State 1005, StateTypeSet]
type = StateTypeSet
trigger1 = Time >= 25
physics = S
ignorehitpause = 1
;persistent = 




[State 1005, ground effect]
type = Explod
trigger1 = AnimElemTime(3) = 0
Anim = 8060
ID = 8060
pos = 20,5
facing = -1
bindTime = 1
removeTime = -2
pausemoveTime = 0
scale = 1,1
sprpriority = 2
ownpal = 1
removeongethit = 1
ignorehitpause = 1
supermove = 0
pausemove = 0



[State 1005, PlaySND]	;blur SFX
type = PlaySND
trigger1 = AnimElem = 3
value = 0, 2
ignorehitpause = 1

[State 1005, PlaySND]	;dust, sliding on ground
type = PlaySND
trigger1 = AnimElem = 3
value = 5, 8
ignorehitpause = 1




[State 1005, HitDef]
type = HitDef
;triggerall = !Var(2)
;triggerall = Var(18) <= 55
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6 && !MoveContact
trigger3 = AnimElem = 7 && !MoveContact
attr = S, HT
damage = 0,0;Ceil(IfElse(fvar(11) * 42 < 15, 15, fvar(11) * 42)), 0
Animtype = Hard
guardflag = L
hitflag = MAF
priority = 3, Hit
pauseTime = 2, 8
guard.pauseTime = 15,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-25
hitsound = s3000, 2
guardsound = S6,0
ground.type = Low
ground.slideTime = 16;8
ground.hitTime  = 22;8
ground.velocity = 0,-9  ;0,-10 ;0,-15
guard.velocity = -3
airguard.velocity = -4.5,-1
air.type = Low	
air.velocity =  0,-9
air.hitTime = 12
air.Animtype = back
getpower= 0,0;IfElse(P2MoveType=H,40,140), 35
givepower = 0,0;35,35
;yaccel = 0.30	;0.5
fall = 1
fall.recover =  0
kill = 0
;fall.recoverTime = 50
ID = 3050	;?????


[State 620, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget(3050)
trigger1 = !(target, isHelper)
value = 3100 ;651
ignorehitpause = 1
persistent = 0
id = 3050

[State 620, TargetState];Fix against characters that have no CLSN in Animation 5300
type = TargetState
trigger1 = AnimelemTime(4)>0 && AnimelemTime(7)<=0 && !movehit
value = 3100 
persistent = 0



[State 1005, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 3051
ctrl = 0





;---------------------------------------------------------------------------
; (1) Save - Roll
[Statedef 3051]
type = S
ctrl = 0
Anim = 3051
movetype = I
physics = S
sprpriority = 2

[State 2260, bg]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
Time = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 



[State 807, PlaySND]
type = PlaySND
trigger1 = AnimelemTime(7) = 0
value = S41,0

[State 807, PlaySND]
type = PlaySND
trigger1 = AnimelemTime(13) = 0
value = S40,0


[State 807, VelSet 1]
type = VelSet
trigger1 = AnimelemTime(7) = 0
x = -18
[State 807, VelSet 2]
type = VelSet
trigger1 = AnimelemTime(8) = 0
x = 0
[State 807, VelSet 3]
type = VelSet
trigger1 = AnimelemTime(10) = 0
x = -20
[State 807, VelSet 4]
type = VelSet
trigger1 = AnimelemTime(13) = 0
x = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
;ignorehitpause = 
;persistent = 

[State 3037, ChangeState]
type = ChangeState
;triggerall = Enemy, StateNo = 3103
trigger1 = Time > 97
value = 3070
ctrl = 0





;---------------------------------------------------------------------------
;(4) Serve - attack
[Statedef 3055]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
VelSet = 0,0
Anim = 3055
facep2 = 1

[State 2260, bg]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
Time = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 

[State 1010, VelSet]
type = VelSet
triggerall = PrevStateno = 1006
trigger1 = AnimElem = 2
x = P2Dist x/16
y = -6
ignorehitpause = 1
persistent = 0

[State 1010, VelSet]
type = VelSet
triggerall = PrevStateno != 1006
trigger1 = AnimElem = 2
x = 3
y = -6
ignorehitpause = 1
persistent = 0

[State 1010, VelSet]
type = VelMul
trigger1 = AnimElem = 4
x = 0.5
ignorehitpause = 1
persistent = 0


[State 1010, Aerial state]
type = StateTypeSet
trigger1 = AnimElemTime(2)>=0
physics = N
statetype = A

[State 1010, Gravity]
type = Gravity
trigger1 = AnimElemTime(2)>=5
ignorehitpause = 0





[State 1005, PlaySND]	;blur SFX
type = PlaySND
trigger1 = AnimElem = 2
value = 0, 2
ignorehitpause = 1




[State 2004, Voice]	;Tien: "Hop!"
type = PlaySND
trigger1 = AnimElem = 2
value = 85,1010+random%2;80,1005
volumescale = 150
channel = 0





[State 1010, HitDef]
type = HitDef
;trigger1 = AnimElem = 2
trigger1 = AnimElem = 3; && !MoveContact
attr = A, HA
damage = 0,0		;32
Animtype = Medium
guardflag = MA
hitflag = MAF ;AF
priority = 3, Hit
pauseTime = 2, 8
guard.pauseTime = 11,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-ceil(enemynear,p2bodydist y)-10;-12,-ceil(enemynear,p2bodydist y)-50	;-125
hitsound = s3000, 2
guardsound = S6,0
ground.type = Low
ground.slideTime = 14;8
ground.hitTime  = 14;8
ground.velocity = -2.5,IfElse(p2bodydist y <15,-13,-7)   ;-3	;p2bodydist y <15,-15,-8
guard.velocity = -6
airguard.velocity = -1.5,-1.1
air.type = Low	
air.velocity =  -1,IfElse(p2bodydist y <15,-13,-7)  ;-15
air.hitTime = 12
air.Animtype = back
getpower= 0,0;IfElse(P2MoveType=H,40,140), 35
givepower = 0,0;35,35
yaccel = 0.35
ID = 3060	;?????
fall = 1
fall.recover = 0
kill = 0


[State 620, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget(3060)
trigger1 = !(target, isHelper)
value = 3101 ;651
ignorehitpause = 1
persistent = 0
id = 3060





[State 3060, Land]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3056
ctrl = 0




;---------------------------------------------------------------------------
; (4) Serve - Land
[Statedef 3056]
type    = S
physics = S
ctrl = 0
Anim = 3056

[State 2260, bg]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
Time = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 

[State 1011, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 0


[State 807, VelSet 1]
type = VelSet
trigger1 = AnimelemTime(4) = 0
x = -15
[State 807, VelSet 2]
type = VelSet
trigger1 = AnimelemTime(7) = 0
x = 0


[State 1011, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1011, PlaySND]
type = PlaySND
trigger1 = Time = 0
value = 40, 0
ignorehitpause = 1


[State 1011, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0



[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = Root, StateNo = 3075 && AnimElemTime(3) >= 0
flag = NoShadow




[State 3038, VelSet]
type = VelSet
trigger1 = Root, StateNo = 3075 && AnimElemTime(3) >= 0
x = (RootDist X)/6
y = 0
ignorehitpause = 1


[State 3038, DestroySelf]
type = ChangeState;DestroySelf
triggerall = Root, StateNo = 3075 && AnimElemTime(3) >=2
trigger1 = RootDist X = [-5,5]
value = 3090


[State 3038, PalFX]
type = PalFX
trigger1 = Time%3 = 0 && Root,StateNo = 3075
Time = 2
add = 128,128,128


[State 3038, ChangeState]
type = DestroySelf
trigger1 = Time = 300

[State 3031, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 



;---------------------------------------------------------------------------
;(3) Spike - Start jump
[Statedef 3060]
type    = S
physics = S
Anim = 3060
ctrl = 0
VelSet = 0,0
facep2 = 1

[State 2260, bg]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
Time = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 

[State 1013, Dash Effects]
type = Explod
trigger1 = !Time
Anim = 8051
postype = P1
pos = 0,-20
bindTime = 15
sprpriority = 2
ownpal = 1
removeTime = -2
removeongethit = 1

[State 1013, SND Super jump]
type = PlaySND
trigger1 = Time = 0
value = 0,24



[State 1013, VelSet]
type = VelSet
trigger1 = Time = 0
x = -4+p2dist x/26		;Const(velocity.jump.neu.x)
y = p2dist y/20



[State 1013, Go to real Super Jump state]
type = ChangeState
trigger1 = AnimTime = 0
value = 3061
ctrl = 0




;---------------------------------------------------------------------------
;(3) Spike - Jump
[Statedef 3061]
type    = A
physics = A

[State 2260, bg]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
Time = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 


[State 1014, System Variable Set]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0


[State 1014, ChangeAnim]
type = ChangeAnim
trigger1 = vel y >= 0
value = 41
persistent = 0

[State 1014, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 41 && AnimTime = 0
value = 44
persistent = 0


[State 2004, Voice]	;Tien: "Above you!"
type = PlaySND
trigger1 = !Time
value = s85,1015;80,1015
volumescale = 150
channel = 0


[State 1014, Go to Spike!!! state]
type = ChangeState
trigger1 = p2statetype = A
trigger1 = P2BodyDist y = [-150,50]
value = 3062
ctrl = 0





;---------------------------------------------------------------------------
;(3) Spike - attack
[Statedef 3062]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
Anim = 3061
sprpriority = 2
facep2 = 1

[State 2260, bg]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
Time = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 



[State 1015, Gravity]
type = Gravity
trigger1 = 1



[State 1015, 2]
type = PlaySND
trigger1 = AnimElemTime(5)=0
value = 0, 2








[State 1015, 3];Opponent in air sent to custom bounce state
type = HitDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 8 && !MoveContact
attr = A, HA
damage = 0,0
hitflag = MAF
guardflag = HA
Animtype = Hard
priority = 4, Hit
pauseTime = 15,16
guard.pauseTime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-40
hitsound   = s3000,3
guardsound = S6,0
ground.type = High
ground.slideTime = 12
ground.hitTime  = 15
ground.velocity = -5
air.velocity = -1.5,5
envshake.Time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.Animtype = Back
fall.Animtype = Back
getpower= 0,0;IfElse(p2movetype=H,40,140), 35
givepower = 0,0;35,35
yaccel = 0.5
fall = 1;(NumHelper(15999) || PrevStateno=600 || PrevStateno=630 || PrevStateno=610 || PrevStateno=640)
air.fall = 1
fall.recover = 0
id = 3060
p2facing = 1
kill = 0


[State 620, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget(3060)
trigger1 = !(target, isHelper)
value = 3102 ;651
ignorehitpause = 1
persistent = 0
id = 3060




[State 1015, Land]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3063
ctrl = 0





;---------------------------------------------------------------------------
; (3) Spike - Land
[Statedef 3063]
type    = S
physics = S
ctrl = 0
Anim = 3062

[State 2260, bg]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
Time = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 

[State 1016, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 0

[State 1016, PlaySND]
type = PlaySND
trigger1 = Time = 0
value = 40, 0
ignorehitpause = 1

[State 1016, 2]
type = PosSet
trigger1 = Time = 0
y = 0


[State 1016, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0





[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = Root, StateNo = 3075 && AnimElemTime(3) >= 0
flag = NoShadow




[State 3038, VelSet]
type = VelSet
trigger1 = Root, StateNo = 3075 && AnimElemTime(3) >= 0
x = (RootDist X)/6
y = 0
ignorehitpause = 1


[State 3038, DestroySelf]
type = ChangeState;DestroySelf
triggerall = Root, StateNo = 3075 && AnimElemTime(3) >=0
trigger1 = RootDist X = [-5,5]
value = 3090


[State 3038, PalFX]
type = PalFX
trigger1 = Time%3 = 0 && Root,StateNo = 3075
Time = 2
add = 128,128,128


[State 3038, ChangeState]
type = DestroySelf
trigger1 = Time = 300

[State 3031, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 





;---------------------------------------------------------------------------
; (2) Save - attack
[Statedef 3065]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
Anim = 3050

[State 2260, bg]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
Time = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 


[State 1005, VelMul]
type = VelSet
trigger1 = !Time
x = 6
ignorehitpause = 1
;persistent = 

[State 1005, StateTypeSet]
type = StateTypeSet
trigger1 = Time >= 25
physics = S
ignorehitpause = 1
;persistent = 



[State 1005, ground effect]
type = Explod
trigger1 = AnimElemTime(3) = 0
Anim = 8060
ID = 8060
pos = 20,5
facing = -1
bindTime = 1
removeTime = -2
pausemoveTime = 0
scale = 1,1
sprpriority = 2
ownpal = 1
removeongethit = 1
ignorehitpause = 1
supermove = 0
pausemove = 0


[State 1005, PlaySND]	;blur SFX
type = PlaySND
trigger1 = AnimElem = 3
value = 0, 2
ignorehitpause = 1

[State 1005, PlaySND]	;dust, sliding on ground
type = PlaySND
trigger1 = AnimElem = 3
value = 5, 8
ignorehitpause = 1



[State 2004, Voice]	;Tien: "Yes Sir!"
type = PlaySND
trigger1 = AnimElem = 3
value = s85,1005;80,1010
volumescale = 150
channel = 0



[State 1005, HitDef]
type = HitDef
;triggerall = !Var(2)
;triggerall = Var(18) <= 55
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6 && !MoveContact
trigger3 = AnimElem = 7 && !MoveContact
attr = S, HA
damage = 0,0;Ceil(IfElse(fvar(11) * 42 < 15, 15, fvar(11) * 42)), 0
Animtype = Hard
guardflag = L
hitflag = MAF
priority = 3, Hit
pauseTime = 2, 8
guard.pauseTime = 15,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-25
hitsound = s3000, 2
guardsound = S6,0
ground.type = Low
ground.slideTime = 16;8
ground.hitTime  = 22;8
ground.velocity = 0,-9  ;0,-10 ;0,-15
guard.velocity = -3
airguard.velocity = -4.5,-1
air.type = Low	
air.velocity =  0,-9
air.hitTime = 12
air.Animtype = back
getpower= 0,0;IfElse(P2MoveType=H,40,140), 35
givepower = 0,0;35,35
yaccel = 0.30	;0.5
fall = 1
fall.recover =  0
;fall.recoverTime = 50
ID = 3065	;?????
kill = 0

[State 620, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget(3065)
trigger1 = !(target, isHelper)
value = 3103 ;651
ignorehitpause = 1
persistent = 0
id = 3065



[State 1005, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 3066
ctrl = 0




;---------------------------------------------------------------------------
; (2) Save - Roll
[Statedef 3066]
type = S
ctrl = 0
Anim = 3051
movetype = I
physics = S
sprpriority = 2

[State 2260, bg]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
Time = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 



[State 807, PlaySND]
type = PlaySND
trigger1 = AnimelemTime(7) = 0
value = S41,0

[State 807, PlaySND]
type = PlaySND
trigger1 = AnimelemTime(13) = 0
value = S40,0




[State 807, VelSet 1]
type = VelSet
trigger1 = AnimelemTime(7) = 0
x = -18
[State 807, VelSet 2]
type = VelSet
trigger1 = AnimelemTime(8) = 0
x = 0
[State 807, VelSet 3]
type = VelSet
trigger1 = AnimelemTime(10) = 0
x = -20
[State 807, VelSet 4]
type = VelSet
trigger1 = AnimelemTime(13) = 0
x = 0




[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = Root, StateNo = 3075 && AnimElemTime(3) >= 0
flag = NoShadow



[State 3038, VelSet]
type = VelSet
trigger1 = Root, StateNo = 3075 && AnimElemTime(3) >= 0
x = (RootDist X)/6
y = 0
ignorehitpause = 1


[State 3038, DestroySelf]
type = ChangeState;DestroySelf
triggerall = Root, StateNo = 3075 && AnimElemTime(3) >=0
trigger1 = RootDist X = [-5,5]
value = 3090
;ignorehitpause = 
;persistent = 

[State 3038, PalFX]
type = PalFX
trigger1 = Time%3 = 0 && Root,StateNo = 3075
Time = 2
add = 128,128,128


[State 3038, ChangeState]
type = DestroySelf
trigger1 = Time = 300

[State 3031, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 


;---------------------------------------------------------------------------
;(1) Serve - attack
[Statedef 3070]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
VelSet = 0,0
Anim = 3055
facep2 = 1

[State 2260, bg]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
Time = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 

[State 1010, VelSet]
type = VelSet
triggerall = PrevStateno = 1006
trigger1 = AnimElem = 2
x = P2Dist x/16
y = -6
ignorehitpause = 1
persistent = 0

[State 1010, VelSet]
type = VelSet
triggerall = PrevStateno != 1006
trigger1 = AnimElem = 2
x = 3
y = -6
ignorehitpause = 1
persistent = 0

[State 1010, VelSet]
type = VelMul
trigger1 = AnimElem = 4
x = 0.5
ignorehitpause = 1
persistent = 0


[State 1010, Aerial state]
type = StateTypeSet
trigger1 = AnimElemTime(2)>=0
physics = N
statetype = A

[State 1010, Gravity]
type = Gravity
trigger1 = AnimElemTime(2)>=5
ignorehitpause = 0



[State 1005, PlaySND]	;blur SFX
type = PlaySND
trigger1 = AnimElem = 2
value = 0, 2
ignorehitpause = 1




[State 2004, Voice]	;Tien: "Now!"
type = PlaySND
trigger1 = !Time
value = 85,1301+random%2;80,1303
volumescale = 120
channel = 0



[State 1010, HitDef]
type = HitDef
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3 && !MoveContact
attr = A, HA
damage = 0,0		;32
Animtype = Medium
guardflag = MA
hitflag = MAF ;AF
priority = 3, Hit
pauseTime = 2, 8
guard.pauseTime = 11,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-ceil(enemynear,p2bodydist y)-50	;-125
hitsound = s3000, 3
guardsound = S6,0
ground.type = Low
ground.slideTime = 14;8
ground.hitTime  = 14;8
ground.velocity = -2.5,IfElse(p2bodydist y <15,-13,-7)   ;-3	;p2bodydist y <15,-15,-8
guard.velocity = -6
airguard.velocity = -1.5,-1.1
air.type = Low	
air.velocity =  -1,IfElse(p2bodydist y <15,-13,-7)  ;-15
air.hitTime = 12
air.Animtype = back
getpower= 0,0;IfElse(P2MoveType=H,40,140), 35
givepower = 0,0;35,35
yaccel = 0.35
ID = 3090	;?????
fall = 1
fall.recover = 0
kill = 0


[State 620, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget(3090)
trigger1 = !(target, isHelper)
value = 3104 ;651
ignorehitpause = 1
persistent = 0
id = 3090




[State 3060, Land]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3071
ctrl = 0




;---------------------------------------------------------------------------
; (1) Serve - Land
[Statedef 3071]
type    = S
physics = S
ctrl = 0
Anim = 3056

[State 2260, bg]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
Time = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 

[State 1011, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 0



[State 807, VelSet 1]
type = VelSet
trigger1 = AnimelemTime(4) = 0
x = -15
[State 807, VelSet 2]
type = VelSet
trigger1 = AnimelemTime(7) = 0
x = 0


[State 1011, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1011, PlaySND]
type = PlaySND
trigger1 = Time = 0
value = 40, 0



[State 1011, PlaySND]
type = PlaySND
trigger1 = AnimelemTime(4) = 0
value = 40, 1



[State 1011, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0




[State 0, ChangeState]
type = ChangeState
trigger1 = AnimElemTime(7) = 0
value = 3072
ctrl = 0



;---------------------------------------------------------------------------
; (1) Serve - Land
[Statedef 3072]
type    = S
physics = S
ctrl = 0
Anim = 3057

[State 1011, PlaySND]
type = PlaySND
trigger1 = Time = 0
value = 40, 0


[State 2260, bg]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = 
Time = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 

[State 1011, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 1
;ignorehitpause = 
;persistent = 






;---------------------------------------------------------------------------
; Ground FX 1 and 2
[Statedef 3085]
type = S
movetype = A
physics = S
ctrl = 0
Anim = 8450
sprpriority = 2

[State 2260, bg]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1

[State 3038, ChangeState]
type = DestroySelf
trigger1 = !AnimTime


;---------------------------------------------------------------------------
;Helper - keeps the combo count
[Statedef 3090]
type = S
movetype = A
physics = N
ctrl = 0
Anim = 15999
sprpriority = 2
VelSet = 0,0

[State 3090, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
;flag2 = roundnotover
ignorehitpause = 1
persistent = 1


[State 3090, ChangeState]
type = DestroySelf
trigger1 = enemy, stateno = 3108














;---------------------------------------------------------------------------
; LVL 2 Helpers - getting to root
[Statedef 3210]
type = S
movetype = I
physics = S
ctrl = 0
VelSet = 0,0
sprpriority = 2

[State 3210, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1
persistent = 1

[State 3210, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 1
value = root,Anim
elem = 1
ignorehitpause = 1
persistent = 0



[State 3038, VelSet]
type = VelSet
trigger1 = Time > 20;AnimElemTime(10) > 0 && AnimElemTime(10) <= 70
x = (RootDist X)/6
y = 0
ignorehitpause = 1


[State 3038, DestroySelf]
type = DestroySelf
trigger1 = Time > 26
;trigger1 = RootDist X = [-5,5]
;ignorehitpause = 
;persistent = 

[State 3038, PalFX]
type = PalFX
trigger1 = Time%3 = 0
Time = 2
add = 128,128,128


[State 3038, ChangeState]
type = DestroySelf
trigger1 = Time = 100

[State 3031, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 



;---------------------------------------------------------------------------
; LVL 2 Helpers - getting to Helper
[Statedef 3211]
type = S
movetype = I
physics = S
ctrl = 0
VelSet = 0,0
sprpriority = 2

[State 3210, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 1
value = root,Anim
elem = 1
ignorehitpause = 1
persistent = 0



[State 3038, VelSet]
type = VelSet
;triggerall = NumHelper(3031)
trigger1 = Time > 20;AnimElemTime(10) > 0 && AnimElemTime(10) <= 70
trigger1 = NumHelper(19598)
trigger1 = Helper(19598), pos x >= Helper(3031),pos x
x = Helper(19598),screenpos x/25
y = 0
ignorehitpause = 1
persistent = 0





;[State 181, stop walking]
;type = PosAdd
;trigger1 = NumHelper(19598)
;trigger1 = Helper(19598),RootDist x <= 0
;trigger1 = Time = 10	;I took into account the constants (walk back velocity)
;x = 0

[State 3035, PosSet]
type = PosSet
trigger1 = Time > 26
x = cond(NumHelper(19598), Helper(19598),pos x, pos x)
y = 0







[State 3038, DestroySelf]
type = DestroySelf
triggerall = NumHelper(3031)
triggerall = Time > 26
trigger1 = Helper(3021),pos x = Helper(3031),pos x
;trigger1 = RootDist X = [-5,5]
;ignorehitpause = 
;persistent = 

[State 3038, PalFX]
type = PalFX
trigger1 = Time%3 = 0
Time = 2
add = 128,128,128


[State 3038, ChangeState]
type = DestroySelf
trigger1 = Time = 100

[State 3031, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 



;---------------------------------------------------------------------------
; LVL 2 Helpers - no move
[Statedef 3212]
type = S
movetype = I
physics = S
ctrl = 0
VelSet = 0,0
sprpriority = 2

[State 3037, PlaySND] ;clones returning
type = PlaySND
trigger1 = AnimElem = 1
value = S183,3
volumescale = 100

[State 3212, Helper]
type = Helper
trigger1 = !Time
Helpertype = normal ;player
name = "Position"
ID = 19598
stateno = 19598
pos = 0,-12
postype = p1    ;p2,front,back,left,right
persistent = 0
size.xscale = 0 
size.yscale = 0
size.ground.back = 0
size.ground.front = 0
size.air.back = 0
size.air.front = 0
size.height = 0

[State 3212, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 1
value = root,Anim
elem = 1
ignorehitpause = 1
persistent = 0

[State 3038, PalFX]
type = PalFX
trigger1 = Time%3 = 0
Time = 2
add = 128,128,128

[State 3212, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
Time = 1


[State 3035, ChangeState]
type = ChangeState
trigger1 = Root, StateNo = 3201
value = 3215
ctrl = 0




;---------------------------------------------------------------------------
;  LVL 2 Helpers - no movement - DestroySelf
[Statedef 3213]
type = S
movetype = I
physics = S
ctrl = 0
VelSet = 0,0
sprpriority = 2

[State 3210, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 1
value = root,Anim
elem = 1
ignorehitpause = 1
persistent = 0

[State 3031, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 

[State 3038, PalFX]
type = PalFX
trigger1 = Time%3 = 0
Time = 2
add = 128,128,128

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 1
;ignorehitpause = 
;persistent = 








;---------------------------------------------------------------------------
; LVL 2 
; Flying
[Statedef 3215, Flying]
type = A
movetype = A
physics = N
ctrl = 0
Anim = 3201
VelSet = 0,0
sprpriority = 2


[State 3201, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1

[State 3201, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze
flag2		= NoBarDisplay



[State 3201, HitBy]
type = HitBy
trigger1 = 1
value = 
Time = 1
ignorehitpause = 1
;persistent = 


[State 3201, PalFX]
type = PalFX
trigger1 = Time = 0
Time = 0




[State 3201, 4]
type = VelSet
trigger1 = Time = 0
x = -2.25
y = -7.02	

[State 3201, VelAdd]
type = VelAdd
trigger1 = Time > 0 && Time < 5
x = .10
y = .40
[State 3201, VelAdd]
type = VelAdd
trigger1 = Time > 5 && Time < 10
x = .09
y = .35
[State 3201, VelAdd]
type = VelAdd
trigger1 = Time > 10 && Time < 20
x = .08
y = .30
[State 3201, VelAdd]
type = VelAdd
trigger1 = Time > 20 && Time < 40
y = .20


[State 3201, Stop movement]
type = VelSet
trigger1 = Time =40
x = 0
y = 0



[State 3201, Explod]
type = Explod
trigger1 = AnimElem = 6
Anim = 3220
ID = 3201
pos = -46,-137
postype = p1  ;p2,front,back,left,right
bindTime = -1
removeTime = -1
pausemoveTime = 9999999999
scale = 1,1
sprpriority = -5
ownpal = 1
removeongethit = 1
ignorehitpause = 1
supermove = 1
pausemove = 1
persistent = 0



[State 3201, PosFreeze]
type = PosFreeze
trigger1 = Time >=40
value = 1





[State 3035, ChangeState]
type = ChangeState
trigger1 = Time = 115
value = 3216
ctrl = 0



;---------------------------------------------------------------------------
; LVL 2
; Shooting
[Statedef 3216, Shooting]
type = A
movetype = A
physics = N
ctrl = 0
Anim = 3202
VelSet = 0,0
sprpriority = 2


[State 3202, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
id = 3201


[State 3202, Dodonpa orb 1st pose]
type = Explod
trigger1 = AnimElem = 8
Anim = 3227
ID = 3202
pos = -34,-127
postype = p1  ;p2,front,back,left,right
bindTime = -1
removeTime = 5
pausemoveTime = 9999999999
scale = 1,1
sprpriority = -5
ownpal = 1
removeongethit = 1
ignorehitpause = 1
supermove = 1
pausemove = 1

[State 3202, Dodonpa orb 2nd pose]
type = Explod
trigger1 = AnimElem = 15
Anim = 3227
ID = 3202
pos = -46,-137
postype = p1  ;p2,front,back,left,right
bindTime = -1
removeTime = 5
pausemoveTime = 9999999999
scale = 1,1
sprpriority = -5
ownpal = 1
removeongethit = 1
ignorehitpause = 1
supermove = 1
pausemove = 1



[State 3202, Dodonpa blur effect 1]
type = Explod
trigger1 = AnimElem = 1
trigger2 = AnimElem = 9
trigger3 = AnimElem = 16
Anim = 3221
ID = 3202
pos = 27,-144
postype = p1  ;p2,front,back,left,right
bindTime = -1
removeTime = -2
pausemoveTime = 9999999999
scale = 1,1
sprpriority = -5
ownpal = 1
removeongethit = 1
ignorehitpause = 1
supermove = 1
pausemove = 1

[State 3202, Dodonpa blur effect 2]
type = Explod
trigger1 = AnimElem = 2
trigger2 = AnimElem = 10
trigger3 = AnimElem = 17
Anim = 3222
ID = 3202
pos = 58,-51
postype = p1  ;p2,front,back,left,right
bindTime = -1
removeTime = -2
pausemoveTime = 9999999999
scale = 1,1
sprpriority = -5
ownpal = 1
removeongethit = 1
ignorehitpause = 1
supermove = 1
pausemove = 1



[State 3037, PlaySND] ;Dodonpa
type = PlaySND
trigger1 = AnimElem = 3
trigger2 = AnimElem = 11
trigger3 = AnimElem = 18
value = S2200,10
volumescale = 100












[State 3201, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1



[State 2201, Dodonpa Helper]
type = Helper
trigger1 = AnimElem = 3
trigger2 = AnimElem = 11
trigger3 = AnimElem = 18
Helpertype = normal
stateno = 3223
ID = 3223
name = "Dodonpa - Finisher"
postype = p1
pos = 0,0;0,0	;BindToParent in Helper.cns
ownpal = 1
sprpriority = 5



[State 3201, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze
flag2		= NoBarDisplay



[State 3201, PosFreeze]
type = PosFreeze
trigger1 = Time >=40
value = 1


[State 3035, ChangeState]
type = ChangeState
trigger1 = Time = 115
value = 3217
ctrl = 0




;---------------------------------------------------------------------------
; LVL 2
; Charge for the last
[Statedef 3217, Charge]
type = A
movetype = A
physics = N
ctrl = 0
Anim = 3203
VelSet = 0,0
sprpriority = 2

[State 3201, Explod]
type = Explod
trigger1 = AnimElem = 3
Anim = 3220
ID = 3203
pos = -46,-137
postype = p1  ;p2,front,back,left,right
bindTime = -1
removeTime = -1
pausemoveTime = 9999999999
scale = 1,1
sprpriority = -5
ownpal = 1
removeongethit = 1
ignorehitpause = 1
supermove = 1
pausemove = 1
persistent = 0

[State 3201, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1

[State 3201, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze
flag2		= NoBarDisplay

[State 3201, PosFreeze]
type = PosFreeze
trigger1 = Time >=40
value = 1



[State 3202, ChangeState]
type = ChangeState
trigger1 = Root, StateNo = 3204
value = 3218
ctrl = 0




;---------------------------------------------------------------------------
; LVL 2
; Shooting
[Statedef 3218, Shooting last]
type = A
movetype = A
physics = N
ctrl = 0
Anim = 3204
VelSet = 0,0
sprpriority = 2

[State 3218, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
id = 3203



[State 3218, Dodonpa blur effect 1]
type = Explod
trigger1 = AnimElem = 1
Anim = 3221
ID = 3204
pos = 27,-144
postype = p1  ;p2,front,back,left,right
bindTime = -1
removeTime = -2
pausemoveTime = 9999999999
scale = 1,1
sprpriority = -5
ownpal = 1
removeongethit = 1
ignorehitpause = 1
supermove = 1
pausemove = 1

[State 3218, Dodonpa blur effect 2]
type = Explod
trigger1 = AnimElem = 2
Anim = 3222
ID = 3204
pos = 58,-51
postype = p1  ;p2,front,back,left,right
bindTime = -1
removeTime = -2
pausemoveTime = 9999999999
scale = 1,1
sprpriority = -5
ownpal = 1
removeongethit = 1
ignorehitpause = 1
supermove = 1
pausemove = 1







[State 3218, PlaySND] ;Dodonpa
type = PlaySND
trigger1 = AnimElem = 3
value = S2200,20
volumescale = 100 






[State 3218, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1



[State 3218, Dodonpa Helper]
type = Helper
trigger1 = AnimElem = 3
Helpertype = normal
stateno = 3228
ID = 3223
name = "Dodonpa - Finisher"
postype = p1
pos = 0,0;0,0	;BindToParent in Helper.cns
ownpal = 1
sprpriority = 5



[State 3218, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze
flag2		= NoBarDisplay




[State 3218, Gravity]
type = VelAdd
trigger1 = AnimElemTime(5) >= 0
y = 0.5
ignorehitpause = 1



[State 3218, 12]
type = ChangeState
trigger1 = Pos y >= -5
value = 3219
ctrl = 0


;---------------------------------------------------------------------------
; LVL 2
[Statedef 3219, Landing, pose]
type = S
movetype = I
physics = S
ctrl = 0
Anim = 3205
VelSet = 0,0
sprpriority = 2

[State 3202, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1

;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
[State 3219, RemoveExplod];Put this when tien finishes or fails the technique
type = RemoveExplod
trigger1 = AnimTime>0
id = 991901


[State 3219, PosAdd 1]
type = PosAdd
trigger1 = AnimElem = 5
x = -30
[State 3219, PosAdd 2]
type = PosAdd
trigger1 = AnimElem = 10
x = 23
[State 3219, PosAdd 3]
type = PosAdd
trigger1 = AnimTime = 0
x = 7




[State 3219, AssertSpecial]
type = AssertSpecial
trigger1 = AnimElemTime(8) > 0
flag = NoShadow




[State 3219, VelSet]
type = VelSet
trigger1 = AnimElemTime(8) > 0 && AnimElemTime(9) <= 0
x = (RootDist X)/6
y = 0
ignorehitpause = 1


[State 3219, DestroySelf]
type = DestroySelf
trigger1 = RootDist X = [-5,5]
;ignorehitpause = 
;persistent = 

[State 3219, PalFX]
type = PalFX
trigger1 = Time%3 = 0 && AnimElemTime(8) > 0 && AnimElemTime(9) <= 0
Time = 2
add = 128,128,128


[State 3219, Swing sound]
type = PlaySND
trigger1 = AnimElem = 5
value = 3000,13

[State 3219, Landing Sound]
type = PlaySND
trigger1 = Time = 1
value = 40, 0
channel = 15

[State 3219, Land FX]
type = Helper
trigger1 = Time = 1
name = "LandFX"
Helpertype = normal
StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermoveTime = 99999
pausemoveTime = 99999











;===================================================
; LVL2 Dodonpa Helper
[Statedef 3223]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5
Anim = 3223



[State 3223, Super BG Proj]
type = Projectile
triggerall = RoundState = 2
trigger1 = MoveHit = 1
ProjID = 3000	;Ki attack
projAnim = 15999
projremoveTime = 1
ignorehitpause=1

;[State 2207, Velocity]
;type = VelSet
;trigger1 = 1
;x = IfElse((Time<2 && var(2)>1),1,20)

[State 3223, BindToRoot]
type = BindToParent
trigger1 = Time = 0
pos = 49,-31

;[State 2207, ParentVarAdd - for 'dmg dampening']
;type = ParentVarAdd
;trigger1 = MoveHit
;trigger1 = P2MoveType = H
;fvar(13) = 8		;for damage dampening purposes it's 4 instead of 1.
;ignorehitpause = 1
;persistent = 0





[State 3223, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1


[State 3223, hit]
type = HitDef
trigger1 = !MoveContact
attr = A,HP
hitflag = MAFD
guardflag = 
priority = 7,Hit
damage = 0,0;Ceil(IfElse(root,fvar(11) * 175 < 30, 30, root,fvar(11) * 175)), 9
getpower = 0,0
givepower = 0,0;35,35
pauseTime = 0,0
Animtype = Low
air.Animtype = Back
fall.Animtype = Back
ground.type = High
air.type = Low
ground.hitTime = 16
ground.slideTime = 16
guard.hitTime = 16
air.hitTime = 13
airguard.ctrlTime = 16
ground.velocity= 0,-4
guard.velocity = -6
air.velocity= 0,-5
airguard.velocity = -6.5, -1.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
sparkno = s3225
guard.sparkno = s7000
sparkxy = -20,100
hitsound   = s2200,13; s2015,20 ;s1000,0
guardsound = S6,0
envshake.Time = 16
envshake.ampl = 6
envshake.freq = 100
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.Time=32
p1sprpriority = 2
p2sprpriority = 1
id = 3223

[State 3223, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget(3223)
trigger1 = !(target, isHelper)
value = 3251 ;651
ignorehitpause = 1
persistent = 0
id = 3223

[State 3223, Helper - Explosion]
type = Helper
trigger1 = MoveHit
Helpertype = normal ;player
name = "Explosion1"
ID = 3224
stateno = 3224
pos = 0,-0
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1
persistent = 0

[State 3223, Helper - Explosion]
type = Helper
trigger1 = MoveHit
Helpertype = normal ;player
name = "Explosion2"
ID = 3225
stateno = 3225
pos = 0,-0
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1
persistent = 0

[State 3223, Helper - Explosion]
type = Helper
trigger1 = MoveHit
Helpertype = normal ;player
name = "Explosion4"
ID = 3227
stateno = 3227
pos = 0,-0
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1
persistent = 0




[State 3223, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
ignorehitpause = 1
persistent = 1



;
;
;
;[State 2207, End]
;type = ChangeState
;trigger1 = Time = 45
;trigger2 = parent,movetype = H
;ignorehitpause = 1
;value = 2215
;
;[State 2207, End]
;type = ChangeState
;trigger1 = Root, StateNo != 2201
;ignorehitpause = 1
;value = 2215






;===================================================
; Explosion 1
[Statedef 3224]
type = A
movetype = I
physics = N
ctrl = 0
sprpriority = 0
Anim = 3224
[State 3224, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1
[State 3224, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause = 1
[State 3224, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
ignorehitpause = 1
persistent = 1



;===================================================
; Explosion 2
[Statedef 3225]
type = A
movetype = I
physics = N
ctrl = 0
sprpriority = 5
Anim = 3226
[State 3225, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1
[State 3225, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause = 1
[State 3225, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
ignorehitpause = 1
persistent = 1


;===================================================
; Explosion 3
[Statedef 3226]
type = A
movetype = I
physics = N
ctrl = 0
sprpriority = 5
Anim = 2270
[State 3226, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1
[State 3226, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause = 1
[State 3226, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
ignorehitpause = 1
persistent = 1



;===================================================
; Explosion 4
[Statedef 3227]
type = A
movetype = I
physics = N
ctrl = 0
sprpriority = 5
Anim = 3228
[State 3227, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1
[State 3227, PosSet]
type = PosSet
trigger1 = 1
y = 28
ignorehitpause = 1
[State 3227, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
ignorehitpause = 1
persistent = 1





;===================================================
; LVL2 Dodonpa Helper - final
[Statedef 3228]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5
Anim = 3223

[State 3228, Super BG Proj]
type = Projectile
triggerall = RoundState = 2
trigger1 = MoveHit = 1
ProjID = 3000	;Ki attack
projAnim = 15999
projremoveTime = 1
ignorehitpause=1

[State 3228, BindToRoot]
type = BindToParent
trigger1 = Time = 0
pos = 49,-31

[State 3228, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1

[State 3228, hit]
type = HitDef
trigger1 = !MoveContact
attr = A,HP
hitflag = MAFD
guardflag = 
priority = 7,Hit
damage = Ceil(IfElse(root,fvar(11) * 150 < 30, 30, root,fvar(11) * 150)), 9
getpower = 0,0
givepower = 0,0;35,35
pauseTime = 0,0
Animtype = Low
air.Animtype = Back
fall.Animtype = Back
ground.type = High
air.type = Low
ground.hitTime = 16
ground.slideTime = 16
guard.hitTime = 16
air.hitTime = 13
airguard.ctrlTime = 16
ground.velocity= 0,-4
guard.velocity = -6
air.velocity= 0,-5
airguard.velocity = -6.5, -1.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
sparkno = s3225
guard.sparkno = s7000
sparkxy = -20,100
hitsound   = -1;s2200,21
guardsound = S6,0
envshake.Time = 35
envshake.ampl = 10
envshake.freq = 100
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.Time=32
p1sprpriority = 2
p2sprpriority = 1
id = 3227

[State 3228, PlaySnd]
type = PlaySnd
trigger1 = MoveHit
value = S2200,21
volumescale = 75
ignorehitpause = 1
persistent = 0


[State 3228, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget(3227)
trigger1 = !(target, isHelper)
value = 3252 ;651
ignorehitpause = 1
persistent = 0
id = 3227

[State 3228, Helper - Explosion]
type = Helper
trigger1 = MoveHit
Helpertype = normal ;player
name = "Explosion1"
ID = 3224
stateno = 3224
pos = 0,-0
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1
persistent = 0

[State 3228, Helper - Explosion]
type = Helper
trigger1 = MoveHit
Helpertype = normal ;player
name = "Explosion2"
ID = 3225
stateno = 3225
pos = 0,-0
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1
persistent = 0

[State 3228, Helper - Explosion]
type = Helper
trigger1 = MoveHit
Helpertype = normal ;player
name = "Explosion3"
ID = 3226
stateno = 3226
pos = 0,-0
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1
persistent = 0

[State 3228, Helper - Explosion]
type = Helper
trigger1 = MoveHit
Helpertype = normal ;player
name = "Explosion4"
ID = 3227
stateno = 3227
pos = 0,-0
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1
persistent = 0




[State 3228, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
ignorehitpause = 1
persistent = 1







;---------------------------------------------------------------------------
; Helpers - returning
[Statedef 3399]
type = S
movetype = I
physics = S
ctrl = 0
Anim = 3400
VelSet = 0,0
sprpriority = 2







[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = AnimElemTime(3) > 0
flag = NoShadow




[State 3038, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) > 0 && AnimElemTime(4) <= 0
x = (RootDist X)/6
y = (RootDist Y)/6
ignorehitpause = 1





[State 3038, DestroySelf]
type = ChangeState;DestroySelf
trigger1 = RootDist X = [-5,5]
value = 3425


;
;[State 3038, DestroySelf]
;type = DestroySelf
;trigger1 = RootDist X = [-5,5]
;;ignorehitpause = 
;;persistent = 




[State 3038, PalFX]
type = PalFX
trigger1 = Time%3 = 0 && AnimElemTime(3) > 0 && AnimElemTime(4) <= 0
Time = 2
add = 128,128,128


[State 3031, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 


[State 3038, ChangeState];fail safe
type = DestroySelf
trigger1 = Time = 100






;======================================================================
; LVL 3 Hand - Left
[Statedef 3415]
type = A
movetype = I
physics = N
ctrl = 0
Anim = 3401
VelSet = 0,0
sprpriority = 3




[State 3415, Turn]
type = Turn
trigger1 = !Time
;ignorehitpause = 
;persistent = 

[State 3415, VelSet]
type = VelSet
trigger1 = 1
x = -9;(p2Dist X)/6
ignorehitpause = 1

[State 3415, VelSet]
type = VelSet
trigger1 = Pos X >= 2;P2Dist x = -2
x = 0
y = 0
ignorehitpause = 1

[State 3415, PosSet]
type = PosSet
trigger1 = Pos X >= 2
x = 2
ignorehitpause = 1


[State 3415, ChangeAnim]
type = ChangeAnim
trigger1 = Vel X = 0
value = 3402
elem = 1
persistent = 0


[State 3415, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 




[State 1005, PlaySND]	;hand
type = PlaySND
trigger1 = Anim = 3402
value = 3000, 35
persistent = 0


[State 0, DestroySelf]
type = DestroySelf
trigger1 = Root,stateno = 3404

;======================================================================
; LVL 3 Hand - Right
[Statedef 3416]
type = A
movetype = I
physics = N
ctrl = 0
Anim = 3401
VelSet = 0,0
sprpriority = 2




[State 3416, VelSet]
type = VelSet
trigger1 = 1
x = -9;(p2Dist X)/6
ignorehitpause = 1

[State 3416, VelSet]
type = VelSet
trigger1 = Pos X <= -2;P2Dist x = -2
x = 0
y = 0
ignorehitpause = 1

[State 3416, PosSet]
type = PosSet
trigger1 = Pos X <= -2
x = -2
ignorehitpause = 1

[State 3415, ChangeAnim]
type = ChangeAnim
trigger1 = Vel X = 0
value = 3402
elem = 1
persistent = 0


[State 3416, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 


[State 3416, Voice]	;Tien: "Hhhh...focus!"
type = PlaySND
triggerall = Anim = 3402
trigger1 = Time = 60
value = s85,3400 + random%3
volumescale = 255
channel = 0
persistent = 0



[state 1300, White (zoom)]
type = Explod
trigger1 = Time = 69 || Time = 139 || Time = 199
Anim = 3412
scale = 1,1
pos = 0,0
postype = P1
sprpriority = 1
ownpal = 1
removeTime = 2;3
ignorehitpause = 1
bindTime = -1


[State 0, DestroySelf]
type = DestroySelf
trigger1 = Root,stateno = 3404 





;======================================================================
; LVL 3 Tien Kikoho
[Statedef 3420]
type = A
movetype = I
physics = N
ctrl = 0
Anim = 3404
VelSet = 0,0
sprpriority = 3

[state 3420, Hand effect]
type = Explod
trigger1 = AnimElemTime(7)=5
Anim = 3416
id = 3416
pos = -14,-22
postype = P1
facing = -1
sprpriority = 8
ownpal = 1
removeTime = -1
persistent = 0
bindTime = -1
ignorehitpause = 1
pausemoveTime = 99999
supermoveTime = 99999


[State 3420, Lightning Helper]
type = Helper
trigger1 = AnimElemTime(7)>=5
trigger1 = GameTime%(4) = 0
id = 2999
stateno = 2999
name = "Lightning"
pos = 45-(random%90),-45+(Random%80)
; Cond (Facing=1,0-5*(Random%5),5-5*(Random%5)),-55 very old
; Cond (Facing=1,-3*(Random%-10),3*(Random%-10)),-85+(Random%60)  if x and y scale is 1
postype = P1
facing = IfElse(random%2=0,1,-1)
Helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 0.5+0.1*(random%4)
size.yscale = 0.5+0.1*(random%4)





[State 3420, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 124
id = 3416
ignorehitpause = 1


[State 1005, PlaySND]
type = PlaySND
trigger1 = Time = 0
value = 3000, 41
channel = 20




[State 0, PosSet]
type = PosSet
trigger1 = !Time
x = 145*facing
y = 6

[State 0, PosAdd]
type = PosAdd
trigger1 = Animelem = 3
x = -24
y = -61

[State 0, PosAdd]
type = PosAdd
trigger1 = Animelem = 4
x = -21
y = -39

[State 0, PosAdd]
type = PosAdd
trigger1 = Animelem = 5
x = -25
y = -19

[State 0, PosAdd]
type = PosAdd
trigger1 = Animelem = 6
x = -30
y = -4

[State 3416, VelSet]
type = VelSet
trigger1 = AnimelemTime(6)>=0 && Pos x != 0
x = (p2Dist X)/12
ignorehitpause = 1

[State 3416, VelSet]
type = VelSet
trigger1 = AnimelemTime(6)>=0 && AnimelemTime(7)<0
y = -0.7
ignorehitpause = 1


[State 3416, VelSet]
type = VelSet
trigger1 = Pos x = 0 
x = 0
ignorehitpause = 1

[State 3416, VelMul]
type = VelMul
trigger1 = AnimelemTime(7)>0
y = 0.95
ignorehitpause = 1



[State 3415, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 


[State 2004, Voice]		;Tien : "Shin!"
type = PlaySND
trigger1 = Time = 60
value = 85, 3106
volumescale = 200
channel = 0




[State 3038, ChangeState]
type = ChangeState
trigger1 = Time = 125;150
value = 3421


;======================================================================
; LVL 3 Tien Kikoho
[Statedef 3421]
type = A
movetype = I
physics = N
ctrl = 0
Anim = 3405
VelSet = 0,0
sprpriority = 3

[State 900, shake]
type		= EnvShake
triggerall	= Time > 0
trigger1		= !(Time%4)
Time		= 4
freq		= 80
ampl		= 1+0.09*Time




[State 2004, Voice]		;Tien : "Kikoho!"
type = PlaySND
trigger1 = Time = 0
value = s85, 3101+random%5
volumescale = 200
channel = 0



[State 1005, PlaySND]
type = PlaySND
trigger1 = Time = 0
value = 3000, 38
channel = 20



[state 1300, Kikoho]
type = Explod
trigger1 = Time = 0
Anim = 3406
id = 3406
scale = 1,9999
pos = 0,0
postype = p1
sprpriority = 1
ownpal = 0
removeTime = -1
ignorehitpause = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 109
id = 3406
;ignorehitpause = 
;persistent = 




[State 3421, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
Time = 1
;ignorehitpause = 
;persistent = 


[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 110;135




;---------------------------------------------------------------------------
;Helper LVL 3 - keeps the combo count
[Statedef 3425]
type = S
movetype = A
physics = N
ctrl = 0
Anim = 15999
sprpriority = 2
VelSet = 0,0

[State 3090, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
;flag2 = roundnotover
ignorehitpause = 1
persistent = 1




[State 806, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = p2stateno = 3453 && enemy, Time = 300
value = -1* Ceil(IfElse(root,fvar(11) * 180 < 70, 70, root,fvar(11) * 180))  ;-250
kill = 1
absolute = 0
ignorehitpause = 1
persistent = 0

;[State 3228, Super BG Proj]
;type = Projectile
;trigger1 = RoundState = 2
;ProjID = 3000	;Ki attack
;projAnim = 15999
;projremoveTime = 1
;ignorehitpause=1






[State 3090, ChangeState]
type = DestroySelf
trigger1 = enemy, stateno = 3455




;===================================================
;DASH COLLISION NOTIFICATION
[Statedef 13200]
type=A
physics=N
MoveType=I
Anim = 15999
VelSet=0,0
sprpriority=6

[State 8000, Assert]
type=AssertSpecial
trigger1= 1
flag=NoShadow
ignorehitpause = 1

;[State -2, Explod]; Notification
;type = Explod
;trigger1 = !Time
;Anim = 13200
;removeTime = -2
;supermove = 1
;sprpriority = 1
;id = 13200
;bindTime = -1
;ontop = 1
;ownpal = 1
;ignorehitpause = 1
;pausemoveTime = -1
;facing = facing
;scale = 0.5,0.5
;
;[state 17100,scale FX]
;type = modifyExplod
;trigger1 = NumExplod(13200)
;trigger1 = Time>=10
;scale = 0.5+0.02*(Time-10),0.5+0.02*(Time-10)
;id = 13200

[State 8000, End]
type=DestroySelf
trigger1= Time>=40








;===================================================
; Limit basics comboability
[Statedef 15999]
type    = S
MoveType= A
physics = N
Anim = 15999
sprpriority = -5

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, destroy]
type = DestroySelf
trigger1 = NumEnemy
trigger1 = enemynear, MoveType != H || (enemynear, stateno = [120,155]) || enemynear, ctrl
trigger2 = Time = 24













;======================================================================
;Land effects
[Statedef 17100]
type = A
MoveType = I
physics = N
Anim = 15999
sprpriority = 1
VelSet = 0,0

[state 17100, bind]
type = bindtoparent
trigger1 = !Time
pos = -11,0

[state 17100, Landing Effect]
type = Explod
trigger1 = !Time
Anim = 17100
id = 17100
pos = 0,0
postype = P1
sprpriority = -3
ownpal = 1
supermoveTime = -1

[state 17100, Remove Explod]
type = RemoveExplod
trigger1 = Time>10

[State 17100, DestroySelf]
type = DestroySelf
trigger1 = Time>10



;======================================================================
; Tien Voice Pose Crane
[Statedef 18105]
type = A
MoveType = I
physics = N
Anim = 18105+random%3
sprpriority = 2
VelSet = 0,0

[State 18105, Voice]	;"We are the birds of prey."
type = PlaySND
triggerall = Anim = 18105
trigger1 = Time = 0
value = 85,180
volumescale = 200

[State 18105, Voice]	;"Harness your result."
type = PlaySND
triggerall = Anim = 18106
trigger1 = Time = 0
value = 85,181
volumescale = 200

[State 18105, Voice]	;"Nothing can harm you as much as your own thoughts unguarded."
type = PlaySND
triggerall = Anim = 18107
trigger1 = Time = 0
value = 85,182
volumescale = 200

[state 18105, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0


[State 18105, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 18105, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime

[State 18105, DestroySelf]
type = DestroySelf
trigger1 = Root, MoveType = H



;======================================================================
; Tien Voice Pose Kung Fu
[Statedef 18140]
type = A
MoveType = I
physics = N
Anim = 18140+random%3
sprpriority = 2
VelSet = 0,0

[State 18140, Voice]	;"Don't test my patience."
type = PlaySND
triggerall = Anim = 18140
trigger1 = Time = 0
value = 85,270
volumescale = 200

[State 18140, Voice]	;"Understand, repent."
type = PlaySND
triggerall = Anim = 18141
trigger1 = Time = 0
value = 85,271
volumescale = 200

[State 18140, Voice]	;"You've wondered the wrong path."
type = PlaySND
triggerall = Anim = 18142
trigger1 = Time = 0
value = 85,272
volumescale = 200

[state 18140, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0


[State 18140, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 18140, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime

[State 18140, DestroySelf]
type = DestroySelf
trigger1 = Root, MoveType = H






;======================================================================
; Tien Voice Pose Students
[Statedef 18300]
type = A
MoveType = I
physics = N
Anim = 18300+random%4
sprpriority = 2
VelSet = 0,0




[State 18300, Voice]	;"You can only be true to yourself."
type = PlaySND
triggerall = Anim = 18300
trigger1 = Time = 0
value = 85,230

[State 18300, Voice]	;"The whole secret to existence is to have no fear."
type = PlaySND
triggerall = Anim = 18301
trigger1 = Time = 0
value = 85,231

[State 18300, Voice]	;"Only two mistakes when searching for a purpose: not going all the way and not starting."
type = PlaySND
triggerall = Anim = 18302
trigger1 = Time = 0
value = 85,232

[State 18300, Voice]	;"What we do today is what matters."
type = PlaySND
triggerall = Anim = 18303
trigger1 = Time = 0
value = 85,233







[state 18300, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0


[State 18300, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 18105, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime

[State 18105, DestroySelf]
type = DestroySelf
trigger1 = Root, MoveType = H








;--------------------------------------------------------------------------------
;Win 3 - Clones - 1
[Statedef 18395]
type = S
MoveType = I
physics = S
Anim = 18395
sprpriority = 0

[State 182, Voice - and me]
type = PlaySND
triggerall = Root, NumExplod(18399)
trigger1 = AnimElemTime (1) = 1
value = 85,226
volumescale = 255
channel = 0

[State 18395, VelSet]
type = VelSet
trigger1 = !Time
x = -8
y = -0.5

[State 18395, VelSet]
type = VelSet
trigger1 = Time >= 5
y = 0


[State 18395, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 

[State 18395, PalFX]
type = PalFX
trigger1 = Time%4 = 0 && Time < 20 
Time = 1
add = 128,128,128


[state 18395, BindToParent]
type = BindToParent
trigger1 = !Time
pos = -14,-2











;Win 3 - Clones - 2
[Statedef 18396]
type = S
MoveType = I
physics = S
Anim = 18396
sprpriority = 1

[State 182, Voice - and me]
type = PlaySND
triggerall = Root, NumExplod(18399)
trigger1 = AnimElemTime (1) = 1
value = 85,227
volumescale = 255
channel = 0

[State 18396, VelSet]
type = VelSet
trigger1 = !Time
x = -8
y = 0.5

[State 18396, VelSet]
type = VelSet
trigger1 = Time >= 5
y = 0


[State 18396, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 

[State 18396, PalFX]
type = PalFX
trigger1 = Time%4 = 0 && Time < 20 
Time = 1
add = 128,128,128


[state 18396, BindToParent]
type = BindToParent
trigger1 = !Time
pos = 0,0














;Win 3 - Clones - 3
[Statedef 18397]
type = S
MoveType = I
physics = S
Anim = 18397
sprpriority = 2

[State 182, Voice - and me]
type = PlaySND
triggerall = Root, NumExplod(18399)
trigger1 = AnimElemTime (1) = 1
value = 85,228+random%2
volumescale = 255
channel = 0

[State 18397, VelSet]
type = VelSet
trigger1 = !Time
x = 9

[State 18397, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent = 

[State 18397, PalFX]
type = PalFX
trigger1 = Time%4 = 0 && Time < 20 
Time = 1
add = 128,128,128


[state 18397, BindToParent]
type = BindToParent
trigger1 = !Time
pos = 0,0










;--------------------------------------------------------------------------------
;Win 4 - Students - 1
[Statedef 18400]
type = S
MoveType = I
physics = S
Anim = 18400
sprpriority = -5

[State 18400, PosAdd]
type = PosAdd
trigger1 = !Time
y = -150

[State 18400, PosAdd]
type = PosSet
trigger1 = AnimElem = 3
y = -25

[State 18400, PosAdd]
type = PosSet
trigger1 = AnimElem = 4
y = 0

[State 18400, PlaySND]
type = PlaySND
trigger1 = AnimElem = 2
value = S114,1

[State 18400, PlaySND]
type = PlaySND
trigger1 = AnimElem = 4
value = S40,0




;--------------------------------------------------------------------------------
;Win 4 - Students - 2
[Statedef 18401]
type = S
MoveType = I
physics = S
Anim = 18401
sprpriority = -5

[State 18401, PosAdd]
type = PosAdd
trigger1 = !Time
y = -150

[State 18401, PosAdd]
type = PosSet
trigger1 = AnimElem = 3
y = -25

[State 18401, PosAdd]
type = PosSet
trigger1 = AnimElem = 4
y = 0

[State 18401, PlaySND]
type = PlaySND
trigger1 = AnimElem = 2
value = S114,1

[State 18401, PlaySND]
type = PlaySND
trigger1 = AnimElem = 4
value = S40,0




;--------------------------------------------------------------------------------
;Win 4 - Students - 3
[Statedef 18402]
type = S
MoveType = I
physics = S
Anim = 18402
sprpriority = -5

[State 18402, PosAdd]
type = PosAdd
trigger1 = !Time
y = -150

[State 18402, PosAdd]
type = PosSet
trigger1 = AnimElem = 3
y = -25

[State 18402, PosAdd]
type = PosSet
trigger1 = AnimElem = 4
y = 0

[State 18402, PlaySND]
type = PlaySND
trigger1 = AnimElem = 2
value = S114,1

[State 18402, PlaySND]
type = PlaySND
trigger1 = AnimElem = 4
value = S40,0




;--------------------------------------------------------------------------------
;Win 4 - Students - 4
[Statedef 18403]
type = S
MoveType = I
physics = S
Anim = 18403
sprpriority = -5

[State 18403, PosAdd]
type = PosAdd
trigger1 = !Time
y = -150

[State 18403, PosAdd]
type = PosSet
trigger1 = AnimElem = 3
y = -25

[State 18403, PosAdd]
type = PosSet
trigger1 = AnimElem = 4
y = 0

[State 18403, PlaySND]
type = PlaySND
trigger1 = AnimElem = 2
value = S114,1

[State 18403, PlaySND]
type = PlaySND
trigger1 = AnimElem = 4
value = S40,0






;======================================================================
; Tien Voice Forgiveness
[Statedef 18500]
type = A
MoveType = I
physics = N
Anim = 18500+random%2
sprpriority = 2
VelSet = 0,0

[State 18500, Voice]	;"Sshh... it will be over soon."
type = PlaySND
triggerall = Anim = 18500
trigger1 = Time = 0
value = 85,275
volumescale = 100

[State 18500, Voice]	;"I forgive you."
type = PlaySND
triggerall = Anim = 18501
trigger1 = Time = 0
value = 85,276+random%2
volumescale = 100


[state 18500, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0


[State 18500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 18500, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime

[State 18500, DestroySelf]
type = DestroySelf
trigger1 = Root, MoveType = H












;===================================================
; Intro 1- Object
[Statedef 19000]
type = A
physics = N
movetype = I
ctrl = 0
sprpriority = 5
Anim = 18000+random%16
;Anim 18000 = Anvil							;Credits:
;Anim 18001 = Boulder
;Anim 18002 = Giran (held)		Anim 18050 = Giran (thrown)
;Anim 18003 = Veku (held)		Anim 18051 = Veku (thrown)
;Anim 18004 = Katchin (strongest material)
;Anim 18005 = Fish (held)		Anim 18052 = Fish (thrown)		;Bob Lee	
;Anim 18006 = Poop (held)		Anim 18053 = Poop (thrown)		;EthanTheHuman
;Anim 18007 = Shark (held)		Anim 18054 = Shark (thrown)		;Toni
;Anim 18008 = Bubbles (held)		Anim 18055 = Bubbles (thrown)		;Kercy
;Anim 18009 = Donald Duck (held)	Anim 18056 = Donald Duck (thrown)	;NDSilva
;Anim 18010 = Iwanbou (held)		Anim 18057 = Iwanbou (thrown)		;DanielMatheus/Speedster
;Anim 18011 = Shippou (held)		Anim 18058 = Shippou (thrown)		;DanielMatheus/Speedster
;Anim 18012 = Epyon							;DanielMatheus/Speedster
;Anim 18013 = Andr (held)		Anim 18059 = Andr (thrown)		;ToonAlexSora
;Anim 18014 = Thor's Hammer (Mjolnir)					;EthanTheHuman
;Anim 18015 = Toriyama						;Toni
;Anim 18016 = ... (held)		Anim 18062 = ... (thrown)

;Anim 18017 = ... (held)		Anim 18062 = ... (thrown)
;Anim 18018 = ... (held)		Anim 18062 = ... (thrown)





[State 19000, SprPriority]
type = SprPriority
trigger1 = Anim = 18005 ; Fish (held)
trigger2 = Anim = 18012 ; Epyon
value = 0



[State 19000, Helper]		;Camera helper
type = Helper
triggerall = !Time
trigger1 = Anim = 18001 ; Boulder
trigger2 = Anim = 18004 ; Katchin
trigger3 = Anim = 18005 ; Fish (held)
trigger4 = Anim = 18007 ; Shark
trigger5 = Anim = 18011 ; Shippou
trigger6 = Anim = 18012 ; Epyon
trigger7 = Anim = 18015 ; Toriyama
stateno = 19005
id = 19005
name = "Camera"
pos = 0,0
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 19000, Toriyama]		;Toriyama
type = Helper
triggerall = Time = 16
trigger1 = Anim = 18015 ; Toriyama
stateno = 1704
id = 1704
name = "Toriyama"
pos = 0,-16
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
;taiyoken effect


[State 19000, AngleDraw]		;anvil rotated when kicked out
type = AngleDraw
trigger1 = Anim = 18000
triggerall = Root,StateNo = 191
triggerall = Root, AnimElemTime(7)>= 2  
value = -30
ignorehitpause = 1
[State 19000, AngleDraw]		;katchin rotated when kicked out
type = AngleDraw
trigger1 = Anim = 18004
triggerall = Root,StateNo = 191
triggerall = Root, AnimElemTime(7)>= 2  
value = -30
ignorehitpause = 1



[State 19000, AngleDraw]		;Epyon rotated when held
type = AngleDraw
trigger1 = Anim = 18012
triggerall = Root,StateNo = 191
triggerall = Root, AnimElemTime(7)< 2  
value = -40
ignorehitpause = 1



[State 19000, AngleDraw]		;Thor's Hammer (Mjolnir) rotated when hit
type = AngleDraw
trigger1 = Anim = 18014
triggerall = Root,StateNo = 191
triggerall = Root, AnimElemTime(7)>= 2  
value = -40
ignorehitpause = 1



[State 19000, AngleDraw]		;Toriyama bust rotated when hit
type = AngleDraw
trigger1 = Anim = 18015
triggerall = Root,StateNo = 191
triggerall = Root, AnimElemTime(7)>= 2  
value = -40
ignorehitpause = 1











[State 19000, ChangeAnim]		;Giran changes animation when kicked
type = ChangeAnim
trigger1 = Anim = 18002
triggerall = Root,StateNo = 191
triggerall = Root, AnimElemTime(7)>= 2  
value = 18050
ignorehitpause = 1
persistent = 0

[State 19000, ChangeAnim]		;Veku changes animation when kicked
type = ChangeAnim
trigger1 = Anim = 18003
triggerall = Root,StateNo = 191
triggerall = Root, AnimElemTime(7)>= 2  
value = 18051
ignorehitpause = 1
persistent = 0

[State 19000, ChangeAnim]		;Fish changes animation when kicked
type = ChangeAnim
trigger1 = Anim = 18005
triggerall = Root,StateNo = 191
triggerall = Root, AnimElemTime(7)>= 2  
value = 18052
ignorehitpause = 1
persistent = 0

[State 19000, ChangeAnim]		;Poop changes animation when kicked
type = ChangeAnim
trigger1 = Anim = 18006
triggerall = Root,StateNo = 191
triggerall = Root, AnimElemTime(7)>= 2  
value = 18053
ignorehitpause = 1
persistent = 0

[State 19000, ChangeAnim]		;Shark changes animation when kicked
type = ChangeAnim
trigger1 = Anim = 18007
triggerall = Root,StateNo = 191
triggerall = Root, AnimElemTime(7)>= 2  
value = 18054
ignorehitpause = 1
persistent = 0

[State 19000, ChangeAnim]		;Bubbles changes animation when kicked
type = ChangeAnim
trigger1 = Anim = 18008
triggerall = Root,StateNo = 191
triggerall = Root, AnimElemTime(7)>= 2  
value = 18055
ignorehitpause = 1
persistent = 0

[State 19000, ChangeAnim]		;Donald Duck changes animation when kicked
type = ChangeAnim
trigger1 = Anim = 18009
triggerall = Root,StateNo = 191
triggerall = Root, AnimElemTime(7)>= 2  
value = 18056
ignorehitpause = 1
persistent = 0

[State 19000, ChangeAnim]		;Iwanbou changes animation when kicked
type = ChangeAnim
trigger1 = Anim = 18010
triggerall = Root,StateNo = 191
triggerall = Root, AnimElemTime(7)>= 2  
value = 18057
ignorehitpause = 1
persistent = 0

[State 19000, ChangeAnim]		;Shippou changes animation when kicked
type = ChangeAnim
trigger1 = Anim = 18011
triggerall = Root,StateNo = 191
triggerall = Root, AnimElemTime(7)>= 2  
value = 18058
ignorehitpause = 1
persistent = 0

[State 19000, ChangeAnim]		;Andr changes animation when kicked
type = ChangeAnim
trigger1 = Anim = 18013
triggerall = Root,StateNo = 191
triggerall = Root, AnimElemTime(7)>= 2  
value = 18059
ignorehitpause = 1
persistent = 0











[State 19000, PosAdd]		;PosAdd - boulder
type	= PosAdd
triggerall= Anim = 18001
trigger1	= Time = 0
y	= -30
ignorehitpause = 1

[State 19000, PosAdd]		;PosAdd - katchin
type	= PosAdd
triggerall= Anim = 18004
trigger1	= Time = 0
x	= -3
y	= -23
ignorehitpause = 1

[State 19000, PosAdd]		;PosAdd - Fish
type	= PosAdd
triggerall= Anim = 18005
trigger1	= Time = 0
x	= -5
y	= 8
ignorehitpause = 1

[State 19000, PosAdd]		;PosAdd - Poop
type	= PosAdd
triggerall= Anim = 18006
trigger1	= Time = 0
x	= 0
y	= 20
ignorehitpause = 1

[State 19000, PosAdd]		;PosAdd - Shark
type	= PosAdd
triggerall= Anim = 18007
trigger1	= Time = 0
x	= 4
y	= 40
ignorehitpause = 1

[State 19000, PosAdd]		;PosAdd - Bubbles
type	= PosAdd
triggerall= Anim = 18008
trigger1	= Time = 0
x	= 5
y	= 23
ignorehitpause = 1

[State 19000, PosAdd]		;PosAdd - Donald Duck
type	= PosAdd
triggerall= Anim = 18009
trigger1	= Time = 0
x	= 0
y	= 20
ignorehitpause = 1

[State 19000, PosAdd]		;PosAdd - Iwanbou
type	= PosAdd
triggerall= Anim = 18010
trigger1	= Time = 0
x	= 0
y	= 21
ignorehitpause = 1

[State 19000, PosAdd]		;PosAdd - Shippou
type	= PosAdd
triggerall= Anim = 18011
trigger1	= Time = 0
x	= 0
y	= 10
ignorehitpause = 1

[State 19000, PosAdd]		;PosAdd - Epyon
type	= PosAdd
triggerall= Anim = 18012
trigger1	= Time = 0
x	= -28
y	= 8
ignorehitpause = 1

[State 19000, PosAdd]		;PosAdd - Andr the Giant
type	= PosAdd
triggerall= Anim = 18013
trigger1	= Time = 0
x	= 0
y	= 24
ignorehitpause = 1

[State 19000, PosAdd]		;PosAdd - Thor's Hammer
type	= PosAdd
triggerall= Anim = 18014
trigger1	= Time = 0
x	= 0
y	= 20
ignorehitpause = 1

[State 19000, PosAdd]		;PosAdd - Toriyama
type	= PosAdd
triggerall= Anim = 18015
trigger1	= Time = 0
x	= 0
y	= 20
ignorehitpause = 1





















[State 19000, VelSet]		;The object goes forward a bit...
type = VelSet
triggerall = Root,StateNo = 191	;when the root (Tien) is in the intro state and
trigger1 = Root, AnimElemTime(4)= 0	;starts moving...
x = 6.9
[State 19000, StateTypeSet]		;added gravity
type = StateTypeSet
triggerall = Root,StateNo = 191
trigger1 = Root, AnimElemTime(4)= 0 
physics = A         	;A stands for aerial, every physics in air states (like gravity) are applied.
ignorehitpause = 1


[State 19000, StateTypeSet]	;when the object gets hit, I remove the gravity
type = StateTypeSet
triggerall = Root,StateNo = 191
trigger1 = Root, AnimElemTime(7)= 0 
physics = N         	;N stands for Null, so there's no gravity, there's no anything.
ignorehitpause = 1
[State 19000, PosFreeze]	;and I stop it right there for a moment
type = PosFreeze
triggerall = Root,StateNo = 191
trigger1 = Root, AnimElemTime(7)>=0 && Root, AnimElemTime(8)<4
value = 1
ignorehitpause = 1
persistent = 1

[State 19000, VelSet]	;then it flies awaaayyy!
type = VelSet
triggerall = Root,StateNo = 191
trigger1 = Root, AnimElemTime(8)= 4 
x = 15
y = -7

[State 19000, StateTypeSet]	;with gravity.
type = StateTypeSet
triggerall = Root,StateNo = 191
trigger1 = Root, AnimElemTime(8)= 4 
physics = A
ignorehitpause = 1






;[State 19000, Helper destroyed]
;type = DestroySelf
;trigger1	= FrontEdgeDist <=-80 ;it gets destroyed (aka it disappears) if it's out of the screen.

[State 19000, Helper "destroyed"]
type = ChangeState
trigger1	= FrontEdgeDist <=-150 ;it goes into another state if it's out of the screen.
value = 19001
;Before coding the above ChangeState I wrote a DestroySelf, to make the Helper disappear;
;but since I also have to play some sounds after the Helper is out of the screen,
;I have to simulate that, making another state for it.
;So what I do is:
;- make a new state for the Helper,
;- make the Helper invisible and freeze its position;
;- play the sounds and put some environment shake;
;- and now I can put a DestroySelf.


;This is a safety measure, it removes the Helper in case Tien is damaged or not in his right states,
;thing that can never happen unless you're dumb and press F1 or ctrl+F1 or ctrl+I...
;I must have been dumb to think about this... :P
[State 19000, DestroySelf]
type = DestroySelf
trigger1 = Root, MoveType = H
trigger2 = Root, StateNo != [190,199]
ignorehitpause = 1




;===================================================
; Intro 1- Object 2
[Statedef 19001]
type = A
physics = N
movetype = I
VelSet = 0,0
ctrl = 0
sprpriority = 5
;You mustn't write Anim=etc. etc., the engine will keep the last Animation in mind. This is also helpful for what
;I'm doing here, which is playing the corresponding sounds for the anvil or the boulder.



[State 19001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Invisible


[State 19001, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1
ignorehitpause = 1
persistent = 1




[State 19001, PlaySND]	;hitting ground - anvil
type = PlaySND
triggerall= Anim != [18050,18099]
triggerall = Anim = 18000
trigger1 = Time = 50
trigger2 = Time = 70
value = s191, 4
ignorehitpause = 1
volumescale = IfElse(Time = 50,200,50)	;different volume for different timing
channel = 10

[State 19001, PlaySND]	;hitting ground - boulder
type = PlaySND
triggerall= Anim != [18050,18099]
triggerall = Anim = 18001
trigger1 = Time = 50
trigger2 = Time = 70
value = s191, 5
ignorehitpause = 1
volumescale = IfElse(Time = 50,200,50)	;different volume for different timing
channel = 10

[State 19001, PlaySND]	;hitting ground - katchin
type = PlaySND
triggerall= Anim != [18050,18099]
triggerall = Anim = 18004
trigger1 = Time = 50
trigger2 = Time = 70
value = s191, 4
ignorehitpause = 1
volumescale = IfElse(Time = 50,200,50)	;different volume for different timing
channel = 10

[State 19001, PlaySND]	;hitting ground - Fish
type = PlaySND
triggerall = Anim = 18052
trigger1 = Time = 50
trigger2 = Time = 70
value = s15000, 1
ignorehitpause = 1
volumescale = IfElse(Time = 50,35,15)	;different volume for different timing
channel = 10

[State 19001, PlaySND]	;hitting ground - Epyon
type = PlaySND
triggerall = Anim = 18012
trigger1 = Time = 50
trigger2 = Time = 70
value = s191, 9
ignorehitpause = 1
volumescale = IfElse(Time = 50,55,20)	;different volume for different timing
channel = 10

[State 19001, PlaySND]	;hitting ground - Mjolnir
type = PlaySND
triggerall= Anim != [18050,18099]
triggerall = Anim = 18014
trigger1 = Time = 50
trigger2 = Time = 70
value = s191, 4
ignorehitpause = 1
volumescale = IfElse(Time = 50,200,50)	;different volume for different timing
channel = 10

[State 19001, PlaySND]	;hitting ground - Toriyama
type = PlaySND
triggerall= Anim != [18050,18099]
triggerall = Anim = 18015
trigger1 = Time = 50
trigger2 = Time = 70
value = s191, 5
ignorehitpause = 1
volumescale = IfElse(Time = 50,200,50)	;different volume for different timing
channel = 10

[State 19001, PlaySND];hitting ground - Giran, Veku, Shark, Bubbles, Donald Duck, Iwanbou, Shippou, Andr
type = PlaySND
triggerall = Anim = [18050,18052]
triggerall = Anim = [18054,18059]
trigger1 = Time = 50
trigger2 = Time = 70
value = s15000, 1
ignorehitpause = 1
volumescale = IfElse(Time = 50,25,10)	;different volume for different timing
channel = 10












[State 19001, StopSnd]
type = StopSnd
trigger1 = StageVar(info.name) = "Korin's Tower"
trigger2 = StageVar(info.name) = "Neko Majins gathering"
trigger3 = StageVar(info.name) = "Kami's Lookout"
trigger4 = StageVar(info.name) = "Kami's Lookout (Eclipse)"
trigger5 = StageVar(info.name) = "Space"
channel = 10
;ignorehitpause = 
;persistent = 



[State 19001, EnvShake]
type = EnvShake
triggerall = StageVar(info.name) != "Korin's Tower"
triggerall = StageVar(info.name) != "Neko Majins gathering"
triggerall = StageVar(info.name) != "Kami's Lookout"
triggerall = StageVar(info.name) != "Kami's Lookout (Eclipse)"
triggerall = StageVar(info.name) != "Space"
triggerall= Anim != [18050,18059]
triggerall= Anim != [18098,18099]
trigger1 = Time = 50
trigger2 = Time = 70
Time = 5
freq = 60
ampl = IfElse(Time = 50,-3,-1)	;different amplitude for different timing
phase = 90
ignorehitpause = 1


[State 19001, EnvShake]
type = EnvShake
triggerall = StageVar(info.name) != "Korin's Tower"
triggerall = StageVar(info.name) != "Neko Majins gathering"
triggerall = StageVar(info.name) != "Kami's Lookout"
triggerall = StageVar(info.name) != "Kami's Lookout (Eclipse)"
triggerall = StageVar(info.name) != "Space"
triggerall= Anim != [18098,18099]
trigger1 = Time = 50
trigger2 = Time = 70
Time = 5
freq = 60
ampl = IfElse(Time = 50,-3,-1)	;different amplitude for different timing
phase = 90
ignorehitpause = 1


[State 19001, EnvShake];Fish
type = EnvShake
triggerall = StageVar(info.name) != "Korin's Tower"
triggerall = StageVar(info.name) != "Neko Majins gathering"
triggerall = StageVar(info.name) != "Kami's Lookout"
triggerall = StageVar(info.name) != "Kami's Lookout (Eclipse)"
triggerall = StageVar(info.name) != "Space"
triggerall = Anim = 18052
trigger1 = Time = 50
trigger2 = Time = 70
Time = 5
freq = 60
ampl = IfElse(Time = 50,-3,-1)	;different amplitude for different timing
phase = 90
ignorehitpause = 1


[State 19000, Helper destroyed]
type = DestroySelf
trigger1	= Time >100		;now I can destroy this Helper.










;===================================================
; Intro 1- Object - Inoshikacho
[Statedef 19002]
type = A
physics = N
movetype = I
ctrl = 0
sprpriority = 5
Anim = 18098
;Anim 18098 = Held		Anim 18099 = Flying away
;credits to kuratizahuatl for the sprites!




[State 19000, Helper]		;Camera helper
type = Helper
trigger1 = !Time
stateno = 19005
id = 19005
name = "Camera"
pos = 0,0
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0







[State 19000, ChangeAnim]		;Inoshikacho changes animation when kicked
type = ChangeAnim
trigger1 = Root,StateNo = 191
trigger1 = Root, AnimElemTime(3)>= 25  
value = 18099
ignorehitpause = 1
persistent = 0



[State 19000, PosAdd]		;PosAdd - Toriyama
type	= PosAdd
trigger1	= Time = 0
x	= 0
y	= 20
ignorehitpause = 1








[State 19002, Stand Hover]
type = Offset
trigger1 = Anim = 18099 && Time > 15
y = 20*cos(Time/6.0)


[State 19000, VelSet]
type = VelSet
trigger1 = Anim = 18099
x = 5



;[State 19000, Helper destroyed]
;type = DestroySelf
;trigger1	= FrontEdgeDist <=-80 ;it gets destroyed (aka it disappears) if it's out of the screen.

[State 19000, Helper "destroyed"]
type = ChangeState
trigger1	= FrontEdgeDist <=-150 ;it goes into another state if it's out of the screen.
value = 19001
;Before coding the above ChangeState I wrote a DestroySelf, to make the Helper disappear;
;but since I also have to play some sounds after the Helper is out of the screen,
;I have to simulate that, making another state for it.
;So what I do is:
;- make a new state for the Helper,
;- make the Helper invisible and freeze its position;
;- play the sounds and put some environment shake;
;- and now I can put a DestroySelf.


;This is a safety measure, it removes the Helper in case Tien is damaged or not in his right states,
;thing that can never happen unless you're dumb and press F1 or ctrl+F1 or ctrl+I...
;I must have been dumb to think about this... :P
;[State 19000, DestroySelf]
;type = DestroySelf
;trigger1 = Root, MoveType = H
;trigger2 = Root, StateNo != [190,199]
;ignorehitpause = 1








;---------------------------------------------------------------------------
; Object intro - camera
[Statedef 19005]
type = S
movetype = I
physics = S
ctrl = 0
anim = 15999
VelSet = 0,0
sprpriority = 2

;[State 19005, BindToParent]
;type = BindToParent
;trigger1 = !Time
;time = 1
;pos = 0,0
;persistent = 0

;[State 19005, PosAdd]
;type = PosAdd
;trigger1 = !Time
;x = 0
;y = -150

[State 19005, PosSet]
type = PosSet
trigger1 = !Time
x = 0
y = -200;-300

[State 19005, ScreenBound]	;camera bound to object
type = ScreenBound
;triggerall = Helper(19000), Anim = 18005 ;fish
trigger1 = 1
value = 1
movecamera = 0,1
;ignorehitpause = 
;persistent = 

[State 19005, VelSet]
type = VelSet
triggerall = Time > 60
trigger1 = Time%4 = 2
y = 5;1
;ignorehitpause = 
;persistent = 


[State 19005, ChangeState]
type = DestroySelf
trigger1 = Pos Y >= 10;Time >= 130

















;---------------------------------------------------------------------------
; Intro 2 - Meditation2
[Statedef 19101]
type = S
movetype = I
physics = S
ctrl = 0
Anim = 19101
VelSet = 0,0
sprpriority = 0



[State 0, Helper]
type = Helper
trigger1 = !Time
ID = 19102
stateno = 19102
pos = 0,0
postype = p1 
facing = 1
keyctrl = 0
ownpal = 0
supermoveTime = 0
pausemoveTime = 0



[State 19101, Trans]
type = Trans
trigger1 = Time < 100
trans = addalpha
alpha = 205,51
ignorehitpause = 1



[State 19101, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 19101, ChangeState]
type = ChangeState
trigger1 = Time >= 100
value = 191019
ctrl = 1



;---------------------------------------------------------------------------
; Intro 2 - Meditation2
[Statedef 191019]
type = S
movetype = I
physics = S
ctrl = 0
VelSet = 0,0
sprpriority = 0

[State 191019, Trans]
type = Trans
trigger1 = Time >= 0
trans = addalpha
alpha = 205-(Time*4),51+(Time*4)
ignorehitpause = 1

[State 191019, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 191019, DestroySelf]
type = DestroySelf
trigger1 = Time >= 51





;---------------------------------------------------------------------------
; Intro 2 - Meditation2
[Statedef 19102]
type = S
movetype = I
physics = S
ctrl = 0
Anim = 19102+random%7
VelSet = 0,0
sprpriority = 1

[State 19102, Trans]
type = Trans
trigger1 = Time < 100
trans = addalpha
alpha = 179,77
ignorehitpause = 1

[State 19102, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 19102, ChangeState]
type = ChangeState
trigger1 = Time >= 100
value = 191029
ctrl = 1

;---------------------------------------------------------------------------
; Intro 2 - Meditation2
[Statedef 191029]
type = S
movetype = I
physics = S
ctrl = 0
VelSet = 0,0
sprpriority = 1

[State 191029, Trans]
type = Trans
trigger1 = Time >= 0
trans = addalpha
alpha = 179-(Time*4),77+(Time*4)
ignorehitpause = 1

[State 191029, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow



[State 191029, DestroySelf]
type = DestroySelf
trigger1 = Time >= 51



;--------------------------------------------------------------------------------
;Intro 4 - Costume
[Statedef 19400]
type = A
MoveType = I
physics = N
sprpriority = 5



[State 19400, ChangeAnim]
type = ChangeAnim
triggerall = Root, Anim = 194
trigger1 = !Time
value = 19400+random%2
persistent = 0

[State 19400, ChangeAnim]
type = ChangeAnim
triggerall = Root, Anim = 1940
trigger1 = !Time
value = 19402
persistent = 0

[State 19400, ChangeAnim]
type = ChangeAnim
triggerall = Root, Anim = 1941
trigger1 = !Time
value = 19403
persistent = 0

[State 19400, ChangeAnim]
type = ChangeAnim
triggerall = Root, Anim = 1942
trigger1 = !Time
value = 19404
persistent = 0

[State 19400, ChangeAnim]
type = ChangeAnim
triggerall = Root, Anim = 1943
trigger1 = !Time
value = 19405+random%2
persistent = 0

[State 19400, ChangeAnim]
type = ChangeAnim
triggerall = Root, Anim = 1944
trigger1 = !Time
value = 19407
persistent = 0

[State 19400, ChangeAnim]
type = ChangeAnim
triggerall = Root, Anim = 1945
trigger1 = !Time
value = 19408
persistent = 0






[State 19400, PosAdd]
type = PosAdd
trigger1 = (AnimElemTime(3) = 0)
x = -30
y = -14

[State 19400, VelSet]
type = VelSet
trigger1 = (AnimElemTime(3) = 0)
x = -13
y = -7.5
persistent = 0

[State 19400, VelSet]
type = VelSet
trigger1 = (AnimElemTime(4) >= 0)
x = -9
y = -5
persistent = 0

[State 19400, VelSet]
type = VelMul
trigger1 = Time >= 30
x = 0.8
y = 0.8

[State 19400, Invisible]
type = AssertSpecial
triggerall = Time = [120,130]
trigger1 = Time % 2 = 0
flag = Invisible
IgnoreHitPause = 1

[State 19400, Invisible]
type = AssertSpecial
triggerall = Time >130
trigger1 = 1
flag = Invisible
IgnoreHitPause = 1

[State 19400, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 19400, DestroySelf]
type = DestroySelf
trigger1 = Root,MoveType = H

[State 19400, DestroySelf]
type = DestroySelf
trigger1 = BackEdgeDist < -80
trigger2 = Time > 130





;===================================================
; Position
[Statedef 19598]
type = A
physics = N
movetype = I
ctrl = 0
sprpriority = 5
Anim = 15999
VelSet = 0,0

[State 0, BindToParent]	;bound to Tien
type = BindToParent
trigger1 = !Time
Time = 1
pos = 0,-12
ignorehitpause = 1






[State 19000, Helper destroyed]
type = DestroySelf
trigger1	= Time = 150




;===================================================
; Position - P1 - Intro 5
[Statedef 19599]
type = A
physics = N
movetype = I
ctrl = 0
sprpriority = 5
Anim = 15999
VelSet = 0,0

[State 0, BindToParent]	;bound to Tien
type = BindToRoot
trigger1 = !Time
Time = 1
pos = 0,-12
ignorehitpause = 1






[State 19000, Helper destroyed]
type = DestroySelf
trigger1	= RoundState >= 2










;===================================================
; Intro 5- Volleyball
[Statedef 19600]
type = A
movetype = I
physics = N
ctrl = 0
sprpriority = 5
Anim = 19700
VelSet = 0,0

[State 30190, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 0,0;1,0


[State 0, BindToParent]	;bound to Chiaotzu
type = BindToParent
trigger1 = !Time
Time = 1
pos = 0,-60
ignorehitpause = 1

[State 30190, Stand Hover]	;copied from Jailbot by altoiddealer and edited a bit. ;)
type = Offset
trigger1 = 1
y = 2*cos(GameTime/10.0)

[State 19000, VelSet]		;The anvil goes forward a bit...
type = VelSet
triggerall = Parent,StateNo = 30193	;when the parent (Chiaotzu) is in the intro state and
trigger1 = Parent, AnimElemTime(1)= 0	;throws the ball...
x = RootDist x/25		
y = -12
persistent = 0


[State 0, Gravity]
type = Gravity
triggerall = Parent,StateNo = 30193
trigger1 = 1
;ignorehitpause = 
;persistent = 



[State 31000, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 19601		;change this for damage states
Time = -1



;[State 19000, Helper bounces]
;type = ChangeState
;trigger1	= Root, StateNo = 1960;197
;value = 19601


;This is a safety measure, it removes the Helper in case Tien is damaged or not in his right states,
;thing that can never happen unless you're dumb and press F1 or ctrl+F1 or ctrl+I...
;I must have been dumb to think about this... :P
;[State 19000, DestroySelf]
;type = DestroySelf
;trigger1 = Root, MoveType = H
;trigger2 = Root, StateNo != [190,199]
;ignorehitpause = 1




;===================================================
; Intro 5- Volleyball
[Statedef 19601]
type = A
physics = N
movetype = I
VelSet = -2,-7
ctrl = 0
sprpriority = 5

[State 30190, ScreenBound]
type = ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 0,0;1,0


;[State 0, BindToRoot]	;bound to Tien
;type = BindToRoot
;trigger1 = root,AnimelemTime(2)>=4 && root,AnimelemTime(3)<0;!Time
;Time = 1
;pos = 0,-80
;ignorehitpause = 1
;
;[State 0, VelSet]
;type = VelSet
;trigger1 = root,AnimelemTime(3)>=0
;y = -5
;;ignorehitpause = 
;;persistent = 



;[State 19001, PosFreeze]
;type = PosFreeze
;trigger1 = 1
;value = 1
;ignorehitpause = 1
;persistent = 1




[State 19000, Helper destroyed]
type = DestroySelf
trigger1	= Time >100		;now I can destroy this Helper.









;==========================================================
; SUPER BG - SF III
[Statedef 19875]
type = S
VelSet = 0,0
sprpriority = 0
Anim = 15999
ctrl = 0

[State 10500, snd]
type = PlaySND
trigger1 = !Time
value = 9,0

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = Time <= 55
flag = NoFG

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 10000, Explod]; White BG
type = Explod
trigger1 = Time = 0
Anim = 19877
id = 19875
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindTime = -1
ownpal = 1
removeTime = 99999999999999
pausemoveTime = 99999999999999
supermoveTime = 99999999999999
supermove = 1
scale = 1.20,1.20
ignorehitpause = 1
persistent = 0

[State 10000, Explod SF3]
type = Explod
trigger1 = Time = 0
Anim = 19875
id = 10000
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindTime = -1
ownpal = 1
removeTime = 9999999999999
pausemoveTime = 99999999999999
supermoveTime = 99999999999999
supermove = 1
scale = 1.20*0.9,1.20*1.05
ignorehitpause = 1
persistent = 0

[State 10000, pause]
type = Pause
trigger1 = Time = 0
Time = 40
moveTime = 40

[State 10000, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 44
id = 10000

[State 10000, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 55
id = 10500

[State 8020, End]
type = DestroySelf
trigger1 = !(roundstate>2)
trigger2 = Time=1000


;==========================================================
; SUPER BG - SuperDBZ (Physics)
[Statedef 19885]
type = S
VelSet = 0,0
sprpriority = 0
Anim = 15999
ctrl = 0

[State 1000, shake]
type = EnvShake
trigger1 = !(Time%4) && Time<150
Time=4
freq=80
ampl=7

[State 10500, snd]
type = PlaySND
trigger1 = !Time
value = 9,0

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = nokoslow
ignorehitpause = 1

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic
flag2 = NoBarDisplay
ignorehitpause = 1

[State 10000, Explod]; White BG
type = Explod
trigger1 = Time = 0
Anim = 19884
id = 19884
pos =  160,120
postype = left
sprpriority = -4
facing = 1
bindTime = -1
ownpal = 1
pausemoveTime = 99999999999999
supermoveTime = 99999999999999
scale = 1.20,1.20
ignorehitpause = 1
persistent = 0
removeTime = -2

[State 10000, Explod Krak]
type = Explod
trigger1 = Time = 0
Anim = 19885
id = 19885
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindTime = -1
ownpal = 1
removeTime = 9999999999999
pausemoveTime = 99999999999999
supermoveTime = 99999999999999
supermove = 1
scale = 1,1
ignorehitpause = 1
persistent = 0

[State 10000, Scale Explod]
type = ModifyExplod
trigger1 = Time>6
scale = 1+.01*Time, 1+.01*Time
id = 19885

[State 10000, RemoveExplod Krak]
type = RemoveExplod
trigger1 = Time = 23;44
id = 19885

[State 10000, Explod Space BG]
type = Explod
trigger1 = Time = 23
Anim = 19886
id = 19886
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindTime = -1
ownpal = 1
removeTime = 9999999999999
pausemoveTime = 99999999999999
supermoveTime = 99999999999999
scale = 1.3,1.3
ignorehitpause = 1
persistent = 0

[State 10000, Explod planet left]
type = Explod
trigger1 = Time = 23
Anim = 19887
id = 19886
pos =  0,240
postype = left
sprpriority = -6
facing = 1
ownpal = 1
removeTime = 9999999999999
pausemoveTime = 99999999999999
supermoveTime = 99999999999999
scale = 1.2,1.2
ignorehitpause = 1
persistent = 0
;vel = -.2,0
bindTime = -1

[State 10000, Explod planet right]
type = Explod
trigger1 = Time = 23
Anim = 19888
id = 19886
pos =  320,240
postype = left
sprpriority = -6
facing = 1
ownpal = 1
removeTime = 9999999999999
pausemoveTime = 99999999999999
supermoveTime = 99999999999999
scale = 1.2,1.2
ignorehitpause = 1
persistent = 0
;vel = .2,0
bindTime = -1

[State 1000, Helper]
type = Helper
trigger1 = Time>=23 && Time<70 && !(Time%5) && NumHelper(19890)<80 && NumHelper(19891)<80
Helpertype = Normal
name = "rocks"
id = 19890
pos = 160,20
postype = left
facing = 1
stateno = 19890
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999

[State 13300, black screen fade]
type = Explod
trigger1 = Time = 60
Anim = 19883   ;2771
ID = 2771
postype = left
pos = 0,-50
bindTime = -1
removeTime = 91
pausemoveTime = 91
ontop = 1
scale = 2,3

[State 10000, RemoveExplod Krak]
type = RemoveExplod
trigger1 = Time = 150
id = 19886

[State 8020, End]
type = DestroySelf
trigger1 = !(roundstate>2)
trigger2 = Time=150  ;1000

;------------------------------------------------------
;Rocks going up
[Statedef 19890]
type = A
MoveType = I
physics = N
Anim = 15999

[State 1003, Helper]
type = Helper
trigger1 = !Time
Helpertype = Normal
name = "rocks"
id = 19891
pos = ((random%320)),10*(random%13)
postype = left
facing = 1
stateno = 19891
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
size.xscale = .5
size.yscale = .5

[State 1003, Helper]
type = Helper
trigger1 = !Time
Helpertype = Normal
name = "rocks"
id = 19891
pos = ((random%320)+320),10*(random%13)
postype = left
facing = 1
stateno = 19891
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
size.xscale = .5
size.yscale = .5

[State 1003, Helper]
type = Helper
trigger1 = !Time
Helpertype = Normal
name = "rocks"
id = 19891
pos = ((random%320)-320),10*(random%13)
postype = left
facing = 1
stateno = 19891
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
size.xscale = .5
size.yscale = .5

[State 1003, DestroySelf]
type = DestroySelf
trigger1 = Time=2

;-----------------
[Statedef 19891]
type = A
MoveType = I
physics = N
Anim = 19890 + random%6
sprpriority = -5

[State 1004, assert]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1004, vel]
type = VelSet
trigger1 = !Time
y = -3-random%7

[State 1004, vel]
type = VarSet
trigger1 = !Time
var(10) = random%2

[State 1004, assert]
type = AngleDraw
trigger1 = 1
value = IfElse(var(10)=0,5*Time,-5*Time)

[State 1004, DestroySelf]
type = DestroySelf
trigger1 = Time > 300
trigger2 = pos Y < -340
trigger3 = root,stateno = 180

;==========================================================
; SUPER BG - SuperDBZ (Ki attacks)
[Statedef 19892]
type = S
VelSet = 0,0
sprpriority = 0
Anim = 15999
ctrl = 0

[State 3001, screen]
type = PosSet
trigger1 = !Time
x = 0
y = -ceil(screenpos Y)
ignorehitpause = 1

[State 3001, screen]
type = PosSet
trigger1 = 1
x = 0
ignorehitpause = 1

[State 1000, shake]
type = EnvShake
trigger1 = !(Time%4) && Time<150
Time=4
freq=80
ampl=7

[State 10500, snd]
type = PlaySND
trigger1 = !Time
value = 9,0

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = nokoslow
ignorehitpause = 1

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic
flag2 = NoBarDisplay
ignorehitpause = 1

[State 10000, Explod]; White BG
type = Explod
trigger1 = !Time
Anim = 957
id = 11111
pos =  0,-30
postype = left
sprpriority = -7
facing = 1
bindTime = -1
ownpal = 1
removeTime = -1
supermoveTime = -1
pausemoveTime = -1
ignorehitpause = 1
scale = 2,2

[State 10000, Explod Zwang]
type = Explod
trigger1 = Time = 0
Anim = 19896
id = 19896
pos =  160,120
postype = left
sprpriority = -5
facing = 1
bindTime = -1
ownpal = 1
removeTime = 9999999999999
pausemoveTime = 99999999999999
supermoveTime = 99999999999999
ignorehitpause = 1
scale = .9,1.2

[State 10000, Scale Explod]
type = ModifyExplod
trigger1 = Time>50
scale = .9+.005*(Time-50), 1.2+.005*(Time-50)
id = 19896

[State 1003, Helper]
type = Helper
trigger1 = !Time
Helpertype = Normal
name = "yellow_BG"
id = 19897
pos = 0,0
postype = left
facing = 1
stateno = 19897
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
persistent = 0

[State 13300, white screen fade]
type = Explod
trigger1 = Time = 60
Anim = 19883
ID = 2771
postype = left
pos = 0,-50
bindTime = -1
removeTime = 91
pausemoveTime = 91
ontop = 1
scale = 2,3
ignorehitpause = 1

[State 10000, RemoveExplod zwang]
type = RemoveExplod
trigger1 = Time = 140
id = 19896
[State 10000, RemoveExplod yellow BG]
type = RemoveExplod
trigger1 = Time = 140
id = 19897
[State 10000, RemoveExplod white BG]
type = RemoveExplod
trigger1 = Time = 140
id = 11111

[State 10000, pause]
type = Pause
trigger1 = !Time
Time = 20
moveTime = 20
ignorehitpause = 1

[State 10000, pause]
type = null;Pause
trigger1 = Time>20 && Time<100 && !(Time%3)
Time = 1
moveTime = 1
ignorehitpause = 1

[State 8020, End]
type = DestroySelf
trigger1 = !(roundstate>2)
trigger2 = Time=150

;--------------------------------------
;Yellow Super BG Helper
[Statedef 19897]
type = S
MoveType = I
physics = N
Anim = 19897
sprpriority = -6

[State 1004, assert]
type = bindtoparent
trigger1 = 1
pos = 0,120
ignorehitpause = 1

[State 1004, assert]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2 = NoFG
ignorehitpause = 1

[State 1004, assert]
type = AngleDraw
trigger1 = Time < 50
value = 10*Time
scale = .7,.7
ignorehitpause = 1

[State 1004, assert]
type = AngleDraw
trigger1 = Time >= 50
value = 10*Time
scale = .7+.01*(Time-50),.7+.01*(Time-50)
ignorehitpause = 1

[State 1004, DestroySelf]
type = DestroySelf
trigger1 = Time > 130

;==========================================================
; SUPER BG - JJBA
[Statedef 19900]
type    = A
MoveType= I
physics = N
ctrl = 0
Anim = 15999
sprpriority = -21

[State 19900, Exclamation]
type = Explod
trigger1 = Time = 0
Anim = 19910
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindTime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removeTime = -1
supermoveTime = -1
pausemoveTime = -1
ignorehitpause = 1

[State 19900, Exclamation]
type = Explod
trigger1 = Time = 0
Anim = 19911
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindTime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removeTime = -1
supermoveTime = -1
pausemoveTime = -1
ignorehitpause = 1

[State 19900, Exclamation]
type = Explod
trigger1 = Time = 0
Anim = 19912
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindTime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removeTime = -1
supermoveTime = -1
pausemoveTime = -1
ignorehitpause = 1

[State 19900, Exclamation]
type = Explod
trigger1 = Time = 0
Anim = 19913
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindTime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removeTime = -1
supermoveTime = -1
pausemoveTime = -1
ignorehitpause = 1

[State 19900, Exclamation]
type = Explod
trigger1 = Time = 0
Anim = 19900
id = 19900
pos = 0,0
postype = back
sprpriority = 5
bindTime = -1
scale = .84, 1.07
supermoveTime = -1
pausemoveTime = -1
ignorehitpause = 1
persistent = 0
ontop = 1

[State 19900, snd]
type = PlaySND
trigger1 = !Time
value = 9,0

[state 19900]
type = VarSet
trigger1 = Time = 0
var(3) = 0

[state 19900]
type = VarAdd
trigger1 = Time >= 5
trigger1 = var(3) < 220
var(3) = 5

[State 19900 (that starts the inverted effect9]
type           = PalFX
trigger1       = Time >= 5
add            = var(3),var(3),var(3)
Time           = 1
ignorehitpause = 1

[State 19900, 0]
type = AssertSpecial
Trigger1 = Time < IfElse(matchover, 120, 50)
flag = NoFG
flag2 = NoBarDisplay
ignorehitpause = 1

[State 19900]
type = RemoveExplod
trigger1 = Time = IfElse(matchover, 120, 50)
id = 8001

[State 19900, DestroySelf]
type = DestroySelf
trigger1 = RoundState = 0




;==============================================
; MARKER - Chiaotzu
[Statedef 30050]
type = A
movetype = I
physics = N
ctrl = 0
Anim = 30050
VelSet = 0,0
sprpriority = 5


;[State 30050, BindToRoot]
;type		= BindToRoot
;trigger1		= 1
;time		= 1
;pos		= const(size.mid.pos.x),const(size.mid.pos.y)
;ignorehitpause	= 1

[State 30050, PosSet]
type = PosSet
trigger1 = 1
;x = ifelse((Helper(30000),facing=1),-148,148)
x = -148*(helper(30000),facing)
;x = ifelse(root,facing=1,-148,148)
y = Helper(30000), pos y +Ifelse(TeamSide=1,-30,-60)



[State 30050, OM PalFX]
type = PalFX
triggerall = NumHelper(30000)
trigger1 = Helper(30000), StateNo = 31000 && Helper(30000),StateTime = 1
trigger2 = Helper(30000), StateNo = 31500 && Helper(30000),StateTime = 1
trigger3 = Helper(30000), StateNo = 32000 && Helper(30000),StateTime = 1
time = 5
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
;persistent = 0



[State 30050, AssertSpecial]
type 		= AssertSpecial
trigger1		= 1
flag		= NoShadow
ignorehitpause	= 1


[State 30050, DestroySelf]
type 	 = DestroySelf
trigger1	 = NumHelper(30000)
trigger1	 = Helper(30000), BackEdgeDist >= -20

[State 30050, DestroySelf]
type 	= DestroySelf
trigger1	= RoundState != 2

[State 30050, DestroySelf]
type 	= DestroySelf
trigger1	= parent,fvar(27)!=0

[State 30050, DestroySelf]
type 	= DestroySelf
trigger1	= NumHelper(30000)
trigger1	= Helper(30000), Stateno = [30005,30007]

[State 30050, DestroySelf]
type 	= DestroySelf
trigger1	= NumHelper(30000)
trigger1	= Helper(30000), Stateno = [32500,32510]

[State 30050, DestroySelf]
type 	= DestroySelf
trigger1	= NumHelper(30000)
trigger1	= Helper(30000), Stateno = [35210,35230]





;---------------------------------------------------------------------------
; Telekinesis - FX 1
[Statedef 31505]
type    = A
movetype= I
physics = N
Anim = 31505
sprpriority = 0

[State 31505, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 31505, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow


[State 31505, End]
type = DestroySelf
trigger1 = Parent, StateNo != 31500



;---------------------------------------------------------------------------
; Telekinesis - FX 2
[Statedef 31506]
type    = A
movetype= I
physics = N
Anim = 31506
sprpriority = 0

[State 31506, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 31506, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 31506, End]
type = DestroySelf
trigger1 = Parent, StateNo != 31501
trigger2 = Time >= 6


;---------------------------------------------------------------------------
; Telekinesis - FX 3
[Statedef 31507]
type    = A
movetype= I
physics = N
Anim = 31507
;sprpriority = -1

[State 31507, SprPriority];Fixed sprite priority
type = SprPriority
trigger1 = 1
value = -3
ignorehitpause = 1 


[State 31507, BindToParent]
type = BindToParent
trigger1 = 1
pos = 3,-28

[State 31507, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow


[State 31507, AssertSpecial]
type = AssertSpecial
trigger1 = Time >= 60
flag = invisible



[State 31507, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1.0-0.018*(Time*1/1.5),1.0-0.018*(Time*1/1.5)




[State 31507, End]
type = DestroySelf
trigger1 = Parent, StateNo != 31501
;trigger1 = Time >= 20

;
;[State 31507, End]
;type = DestroySelf
;;trigger1 = Parent, StateNo != 31501
;trigger1 = Time >= 20



;---------------------------------------------------------------------------
; Telekinesis Helper
[Statedef 31508]
type    = S
movetype= A
physics = S
juggle  = 7
VelSet = 0,0
ctrl = 0
Anim = 31508
poweradd = 0
sprpriority = 0



[State 2220, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1



[State 31508, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
damage = Ceil(IfElse(root, fvar(11) * 18 < 7, 7, root, fvar(11) * 18)), 0
Animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pauseTime = 0, 8
guard.pauseTime = 8,8
sparkno = -1; s7010
guard.sparkno = s7000
sparkxy = 0,0;-12,-34
hitsound = s31500,2;s5, 0
guardsound = S6,0
ground.type = High
ground.slideTime = 12;8
ground.hitTime  = 12;8
ground.velocity = 0   ;-3
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = 0,-3
Ground.cornerpush.veloff=0
Air.cornerpush.veloff=0
air.hitTime = 12
air.Animtype = back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
kill = 0
fall.recover = 0

[State 31508, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = NumTarget
trigger1 = !(Target, IsHelper)
value = 31509
ignorehitpause = 1
persistent = 0


;[State 31509, End]
;type = DestroySelf
;trigger1 = NumTarget
;trigger1 = Target, MoveType != H
;
;[State 31509, End]
;type = DestroySelf
;trigger1 = !AnimTime

[State 31509, End]
type = DestroySelf
trigger1 = time = 150









;---------------------------------------------------------------------------
; Shield Helper - 1
[Statedef 32005]
type    = A
movetype= A;I
physics = N
VelSet = 0,0
ctrl = 0
Anim = 32005
poweradd = 0
sprpriority = -3


[State 32005, Helper - effect]
type = Helper
trigger1 = Time = 0
Helpertype = normal
name = "Shield - effect"
ID = 32007
stateno = 32007
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermoveTime = 0
pausemoveTime = 0
ignorehitpause = 1



[State 32005, snd]
type = PlaySND
trigger1 = !Time
value = 32000,3;1
volumescale = 255
channel = 25


[State 32005, turn]
type = Turn
trigger1 = p2dist X < -3

[State 32005, Invisible]
type = AssertSpecial
trigger1 = Time < 50
flag = Invisible
IgnoreHitPause = 1

[State 32005, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1

[State 32005, SprPriority];Fixed sprite priority
type = SprPriority
trigger1 = 1
value = -3
ignorehitpause = 1 

[State 32005, BindToParent]
type = BindToParent
trigger1 = 1
Time = 1
pos = -7,-28		;-7,-55
ignorehitpause = 1
;persistent = 

[State 32005, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
Time = 1
ignorehitpause = 1


[State 32005, VarSet]
type = VarSet
trigger1 = !Time
var(2) =  0
ignorehitpause = 1
persistent = 0

[State 32005, VarAdd]
type = VarAdd
trigger1 = MoveHit = 1
var(2) =  1
ignorehitpause = 1
persistent = 0



[State 32005, HitDef]
type = HitDef
trigger1 = var(2) < 3
trigger1 = AnimElem = 4
attr = S, SA
damage = Ceil(IfElse(root, fvar(11) * 7 < 3, 3, root, fvar(11) * 7)), 0
Animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pauseTime = 11, 8
guard.pauseTime = 11,11
sparkno = -1; s7010
guard.sparkno = s7000
sparkxy = 0,0;-12,-34
hitsound = s8,1;s5, 0
guardsound = S6,0
ground.type = High
ground.slideTime = 12;8
ground.hitTime  = 12;8
ground.velocity = -8   ;-3
guard.velocity = -8
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -8,-6
Ground.cornerpush.veloff=0
Air.cornerpush.veloff=0
air.hitTime = 12
air.Animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
kill = 0
p1sprpriority = -3	;not p1 sprite priority, but the Helper's...


[State 32005, DestroySelf];Cinematic
type = DestroySelf
trigger1 = Parent, StateNo = 35210
;ignorehitpause = 
;persistent = 


[State 32005, ChangeState]
type = ChangeState
trigger1 = Time >= 50 ;100
value = 32006
ctrl = 0
ignorehitpause = 1

[State 32005, ChangeState]
type = ChangeState
trigger1 = Parent, MoveType = H;Time >= 50 ;100
value = 32006
ctrl = 0
ignorehitpause = 1







;---------------------------------------------------------------------------
; Shield Helper - 2
[Statedef 32006]
type    = A
movetype= I
physics = N
VelSet = 0,0
ctrl = 0
poweradd = 0
sprpriority = -3



[State 32006, snd]
type = null;PlaySND
trigger1 = !Time
value = 32000,2
volumescale = 255
channel = 25


[State 32006, SprPriority];Fixed sprite priority
type = SprPriority
trigger1 = 1
value = -3
ignorehitpause = 1 

[State 32006, BindToParent]
type = BindToParent
trigger1 = 1
Time = 1
pos = -7,-28		;-7,-55
;ignorehitpause = 
;persistent = 

[State 32006, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1

[State 32006, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
Time = 1
ignorehitpause = 1



[State 32006, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-(Time*8),128+(Time*8)
;ignorehitpause = 
;persistent = 



[State 32006, DestroySelf]
type = DestroySelf
trigger1 = Time >= 32






;---------------------------------------------------------------------------
; Shield Helper - effect
[Statedef 32007]
type    = A
movetype= A;I
physics = N
VelSet = 0,0
ctrl = 0
Anim = 32005
poweradd = 0
sprpriority = -3




[State 32007, push]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 32007, turn]
type = Turn
trigger1 = p2dist X < -3

[State 32007, Invisible]
type = AssertSpecial
triggerall = Time = [0,8]
trigger1 = Time % 2 = 0
flag = Invisible
IgnoreHitPause = 1

[State 32007, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1

[State 32007, SprPriority];Fixed sprite priority
type = SprPriority
trigger1 = 1
value = -3
ignorehitpause = 1 

[State 32007, BindToParent]
type = BindToParent
trigger1 = 1
Time = 1
pos = 0,0;-7,-55		;-7,-55
ignorehitpause = 1
;persistent = 





[State 32005, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
Time = 1
ignorehitpause = 1

[State 32005, ChangeState]
type = DestroySelf
trigger1 = NumHelper(32005)
trigger1 = Helper(32005), StateNo != 32005
ignorehitpause = 1













;===================================================
;Pulse Effect during fall recovery (taken from Possessed Heita by The_None)
[Statedef 52100]
type    = S
movetype = I
physics = S
sprpriority = 4
Anim = 15999
ctrl = 0

[State 52000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 52000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT

[State 52000, PosAdd]
type = PosAdd
trigger1 = 1
x = IfElse(root,stateno=5201,ceil(parentdist x/3.0),parentdist x)
y = parentdist y

[State 52000, VarSet]
type = VarSet
trigger1 = !Time
var(0) = parent,Anim

[State 52000, VarSet]
type = VarSet
trigger1 = !Time
var(1) = parent,Animelemno(0)

[State 52000, ChangeAnim]
type = ChangeAnim
trigger1 = Time
value = var(0)
elem = var(1)

[State 52000, VarSet]
type = VarAdd
trigger1 = Time
fvar(0) = 11.2

[State 52000, VarSet]
type = VarAdd
trigger1 = Time
fvar(1) = 0.015

[State 52000, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1+fvar(1),1+fvar(1)

[State 52000, Trans]
type = Trans
trigger1 = 1
trans = add

[State 52000, PalFX]
type = PalFX
trigger1 = 1
Time = 1
add = floor(0-fvar(0)),floor(0-fvar(0)),floor(0-fvar(0))

[State 52000, DestroySelf]
type = DestroySelf
trigger1 = root,stateno != 5201
trigger1 = root,stateno != 5210

;[State 52000, DestroySelf]
;type = null;DestroySelf
;trigger1 = parent,stateno != 35201
;trigger1 = parent,stateno != 35210




;=========================================
;Debris generator
[Statedef 66853]
type = A
movetype = I
physics = N
Anim = 15999

[State 1003, Helper 1]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66854
pos = 0,0
postype = p1
facing = facing
stateno = 66854
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125

[State 1003, Helper 2]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66854
pos = 0,0
postype = p1
facing = facing
stateno = 66854
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125

[State 1003, Helper 3]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66854
pos = 0,0
postype = p1
facing = facing
stateno = 66854
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125

[State 1003, Helper 4]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66854
pos = 0,0
postype = p1
facing = facing
stateno = 66854
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125

[State 1003, Helper 5]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66854
pos = 0,0
postype = p1
facing = facing
stateno = 66854
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125


[State 1003, Helper 6]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66854
pos = 0,0
postype = p1
facing = facing
stateno = 66854
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125


[State 1003, DestroySelf]
type = DestroySelf
trigger1 = Time=2




;Debris
[Statedef 66854]
type = A
movetype = I
physics = N
Anim = 6685 + random%3
sprpriority = 7

[State 0, VelSet]
type = VelSet
trigger1 = !Time
x = 8-random%20
y = -17+random%10
;ignorehitpause =
;persistent =

[State 0, Gravity]
type = Gravity
trigger1 = 1
;ignorehitpause =
;persistent =

[State 1004, assert]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1004, vel]
type = VarSet
trigger1 = !Time
var(10) = random%2

[State 1004, assert]
type = AngleDraw
trigger1 = 1
value = IfElse(var(10)=0,5*Time,-5*Time)

[State 1004, DestroySelf]
type = DestroySelf
trigger1 = pos y > -vel y




;====================================
; Broken Back - BG Arms + legs
[Statedef 245947]
type = S
movetype = H
physics = N
VelSet = 0,0
Anim = 5947

[State 2260, bind]
type = bindtoroot
trigger1 = !isHelper
trigger1 = 1
pos = 0,0

[State 2260, bind]
type = bindtoparent
trigger1 = IsHelper
trigger1 = 1
pos = 0,0

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, destroy]
type = DestroySelf
triggerall = Parent, StateNo = 2512
triggerall = Parent, Anim != 5946
trigger1 = Parent, Time > 44 

[State 2260, destroy]
type = DestroySelf
trigger1 = Time = 126

;====================================
; Broken Back - BG Arms + legs
[Statedef 245948]
type = S
movetype = H
physics = N
VelSet = 0,0
Anim = 5947

[State 2260, bind]
type = bindtoroot
trigger1 = !isHelper
trigger1 = 1
pos = 0,0

[State 2260, bind]
type = bindtoparent
trigger1 = IsHelper
trigger1 = 1
pos = 0,0

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, destroy]
type = DestroySelf
triggerall = Parent, StateNo = 2512
triggerall = Parent, Anim != 5946
trigger1 = Parent, Time > 44 

[State 2260, destroy]
type = DestroySelf
trigger1 = Time = 126


;====================================
; RE Broken Back - BG Arms + legs
[Statedef 355947]
type = S
movetype = H
physics = N
VelSet = 0,0
Anim = 5947

[State 2260, bind]
type = bindtoroot
trigger1 = !isHelper
trigger1 = 1
pos = 0,0

[State 2260, bind]
type = bindtoparent
trigger1 = IsHelper
trigger1 = 1
pos = 0,0

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, destroy]
type = DestroySelf
triggerall = Parent, StateNo = 2512
triggerall = Parent, Anim != 5946
trigger1 = Parent, Time > 44 

[State 2260, destroy]
type = DestroySelf
trigger1 = Time = 19









;========================<EXPLODSIVE BUFFERING HELPER>=============================
;Explodsive Buffering
[StateDef 90000005]
type = A
movetype = I
physics = N
anim = 1
velSet = 0,0
ctrl = 0

[State 90000005, BindToRoot]	;added by me
type = BindToRoot
trigger1 = 1
pos = 0,-12
ignorehitpause = 1 


[State 90000005, Turn]
type = Turn
trigger1 = (enemy, NumExplod(94646464) || enemy, NumExplod(92468246)) && !var(0)
trigger2 = !enemy, NumExplod(94646464) && !enemy, NumExplod(92468246) && var(0)
ignoreHitPause = 1

[State 90000005, Reverse Left/Right]
type = VarSet
trigger1 = (enemy, NumExplod(94646464) || enemy, NumExplod(92468246)) && !var(0)
var(0) = 1
ignoreHitPause = 1

[State 90000005, Reset Turn Variable]
type = VarSet
trigger1 = !enemy, NumExplod(94646464) && !enemy, NumExplod(92468246) && var(0)
var(0) = 0
ignoreHitPause = 1

[State 90000005, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "by JustMorphPointman"
ignoreHitPause = 1




