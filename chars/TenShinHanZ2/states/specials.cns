;==============================================================
; CNS File for TenShinHan by Team Z2
; Special and EX moves
;==============================================================


;---------------------------------------------------------------------------
; Volley - Stance
[Statedef 1000]
type    = S
movetype= I
physics = S
juggle  = 0
VelSet = 0,0
ctrl = 0
anim = 1000
poweradd = 0
sprpriority = 2



[State 1000, Voice]	;Tien: "Volley Style!"
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (1) = 0
value = 85,1001
volumescale = 100
channel = 0





[State 1000, Go to End]
type = ChangeState
triggerall = !AILevel
triggerall = Time > 40
trigger1 = command = "a" || command = "b" || command = "c"
value = 1004

[State 1000, Go to Save!!! state]
type = ChangeState
triggerall = !AILevel
triggerall = Time > 20; && Time < 40
trigger1 = Command = "holddown" && Command != "hold_z"
value = 1005
ctrl = 0

[State 1000, Go to Spike!!! state]
type = ChangeState
triggerall = !AILevel
triggerall = Time > 20; && Time < 40
trigger1 = Command = "holdup" && Command != "hold_z"
value = 1013
ctrl = 0

[State 1000, Go to Serve!!! state]
type = ChangeState
triggerall = !AILevel
triggerall = Time > 20; && Time < 40
trigger1 = Command != "hold_z"
value = 1010
ctrl = 0



[State 1000, AI ChangeState]
type = ChangeState
triggerall = AILevel
trigger1 = Time > 20
;value = IfElse(ceil(random < 400 * (AILevel**2/64.0)),1005,IfElse(P2BodyDist y < -50, 1013,1010))
value = IfElse((P2BodyDist y > -20),1005,IfElse(ceil(random < 499 * (AILevel**2/64.0)), 1013,1010))




;---------------------------------------------------------------------------
; Volley - End
[Statedef 1004]
type    = S
movetype= A
physics = S
;juggle  = 7
VelSet = 0,0
ctrl = 0
anim = 1004
poweradd = 0
sprpriority = 2

[State 1004, PosSet]
type = PosSet
trigger1 = !Time
y = 0
ignorehitpause = 1



[State 1004, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;---------------------------------------------------------------------------
; Volley - Save!!!
[Statedef 1005]
type    = C;S
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 1005
;I copied the same animations and used them for these moves, just to be safe.

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 2
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1005, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0


[State 1005, Voice]	;Tien: "Yes sir!"
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (1) = 0
value = s85,1005
volumescale = 100
channel = 0








[State 1005, VelMul]
type = VelSet
trigger1 = !Time
x = 6
ignorehitpause = 1
;persistent = 

[State 1005, StateTypeSet]
type = StateTypeSet
trigger1 = Time >= 25
physics = S
ignorehitpause = 1
;persistent = 




[State 1005, ground effect]
type = Explod
trigger1 = AnimElemTime(3) = 0
anim = 8060
ID = 8060
pos = 20,5
facing = -1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3;2
ownpal = 1
removeongethit = 1
ignorehitpause = 1
supermove = 0
pausemove = 0



[State 1005, PlaySND]	;blur SFX
type = PlaySND
trigger1 = AnimElem = 3
value = 0, 2
ignorehitpause = 1

[State 1005, PlaySND]	;dust, sliding on ground
type = PlaySND
trigger1 = AnimElem = 3
value = 5, 8
ignorehitpause = 1




[State 1005, Hitdef]	;1st bounce
type = HitDef
;triggerall = !Var(2)
triggerall = Var(18) <= 55
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6 && !MoveContact
trigger3 = AnimElem = 7 && !MoveContact
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 42 < 15, 15, fvar(11) * 42)), 0
animtype = Hard
guardflag = L
hitflag = MAF
priority = 3, Hit
pausetime = 2, 8
guard.pausetime = 15,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-25
hitsound = s5, 2
guardsound = S6,0
ground.type = Low
ground.slidetime = 16;8
ground.hittime  = 22;8
ground.velocity = 0,-9  ;0,-10 ;0,-15
guard.velocity = -3
airguard.velocity = -4.5,-1
air.type = Low	
air.velocity =  0,-9
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.30	;0.5
fall = 1
fall.recover =  0
;fall.recovertime = 50
ID = 1098		;?????

[State 1005, Hitdef]	;2nd bounce
type = HitDef
triggerall = Var(18) <= 55
triggerall = Var(2) = 1
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6 && !MoveContact
trigger3 = AnimElem = 7 && !MoveContact
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 42 < 15, 15, fvar(11) * 42)), 0
animtype = Hard
guardflag = L
hitflag = MAF
priority = 3, Hit
pausetime = 2, 8
guard.pausetime = 15,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-25
hitsound = s5, 2
guardsound = S6,0
ground.type = Low
ground.slidetime = 16;8
ground.hittime  = 22;8
ground.velocity = 0,-9  ;-10
guard.velocity = -3
airguard.velocity = -4.5,-1
air.type = Low	
air.velocity =  0,-9
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.30
fall = 1
fall.recover =  0
;fall.recovertime = 50
ID = 1098		;?????

[State 1005, Hitdef]	;no more bounces
type = HitDef
triggerall = Var(18) <= 55
triggerall = Var(2) = 2
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6 && !MoveContact
trigger3 = AnimElem = 7 && !MoveContact
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 42 < 15, 15, fvar(11) * 42)), 0
animtype = Hard
guardflag = L
hitflag = MAF
priority = 3, Hit
pausetime = 2, 5
guard.pausetime = 15,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-25
hitsound = s5, 2
guardsound = S6,0
ground.type = Low
ground.slidetime = 16;8
ground.hittime  = 22;8
ground.velocity = -3,-3  ;-4
guard.velocity = -3
airguard.velocity = -4.5,-1
air.type = Low	
air.velocity = -8,-3
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover =  1
fall.recovertime = 35
ID = 1098		;?????





[State 1005, basics limiter]
type = helper
triggerall = !NumHelper(15999)
trigger1 = movehit
helpertype = normal
stateno = 15999
ID = 15999
name = "basics"
postype = p1
pos = 0,0
ownpal = 1





[State 1005, VarAdd]
type = VarAdd
trigger1 = MoveHit
var(2) = 1
ignorehitpause = 1
persistent = 0



[State 1005, No Attack Distance]
type = AttackDist
trigger1 = AnimElemTime(8)>=0
value = 0




[State 1005, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 1006
ctrl = 0





;---------------------------------------------------------------------------
; Volley - Roll
[Statedef 1006]
type = C;S
ctrl = 0
anim = 1006
movetype = I
physics = S
sprpriority = 2
movehitpersist = 1






[State 1006, Turn]
type = Turn
triggerall = P2BodyDist x < -10
trigger1 = AnimElem = 6

[State 1006, VelSet]
type = VelSet
trigger1 = AnimElem = 6 
x = 0



[State 1006, 3]
type = ChangeState
triggerall = Time >= 20 && Time < 38;40
trigger1 = Command = "z"
value = 1010
ctrl = 0

[State 1000, AI ChangeState]
type = ChangeState
triggerall = AILevel
trigger1 = Time > 27
value = 1010




[State 1006, 3]
type = ChangeState
trigger1 = Time = 38;40
value = 1004
persistent = 0


[State 1006, 3]
type = ChangeState
triggerall = !MoveHit
trigger1 = Time = 16
value = 0
ctrl = 1





;---------------------------------------------------------------------------
;Volley - Serve!!!
[Statedef 1010]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
VelSet = 0,0
anim = 1010
facep2 = 1

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 2
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1010, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0




[State 1010, VarAdd];in case of infinites
type = VarAdd
trigger1 = MoveHit
var(7) = 1
ignorehitpause = 1
persistent = 0




[State 1010, Voice]	;Tien: "Hop!"
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (1) = 0
value = s85,1010+random%2
volumescale = 100
channel = 0





[State 1010, VelSet]
type = VelSet
triggerall = PrevStateNo = 1006
trigger1 = AnimElem = 2
x = 1+P2Dist x/32;P2Dist x/16
y = -6
ignorehitpause = 1
persistent = 0

[State 1010, VelSet]
type = VelSet
triggerall = PrevStateNo != 1006
trigger1 = AnimElem = 2
x = 3
y = -6
ignorehitpause = 1
persistent = 0

[State 1010, VelSet]
type = VelMul
trigger1 = AnimElem = 4
x = 0.5
ignorehitpause = 1
persistent = 0


[State 1010, Aerial state]
type = StateTypeSet
trigger1 = AnimElemTime(2)>=0
physics = N
statetype = A

[State 1010, Gravity]
type = Gravity
trigger1 = AnimElemTime(2)>=5
ignorehitpause = 0





[State 1010, PlaySND]
type = PlaySND
trigger1 = AnimElem = 2
value = 0, 2
ignorehitpause = 1


[State 1010, Hitdef]
type = HitDef
triggerall = var(7)<=1
triggerall = Var(18) <= 55
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 27 < 15, 15, fvar(11) * 27)), 0		;32
animtype = Medium
guardflag = MA
hitflag = MAF ;AF
priority = 3, Hit
pausetime = 2, 8
guard.pausetime = 11,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-ceil(enemynear,p2bodydist y)-50	;-125
hitsound = s5, 2
guardsound = S6,0
ground.type = Low
ground.slidetime = 14;8
ground.hittime  = 14;8
ground.velocity = -2.5,IfElse(p2bodydist y <15,-13,-7)   ;-3	;p2bodydist y <15,-15,-8
guard.velocity = -6
airguard.velocity = -1.5,-1.1
air.type = Low	
air.velocity =  -1,IfElse(p2bodydist y <15,-13,-7)  ;-15
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.35
ID = 1098	;?????
fall = 1
fall.recover = 0



[State 1010, Hitdef];in case of infinites
type = HitDef
triggerall = var(7)>1
triggerall = Var(18) <= 55
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 27 < 15, 15, fvar(11) * 27)), 0		;32
animtype = Medium
guardflag = MA
hitflag = MAF ;AF
priority = 3, Hit
pausetime = 2, 8
guard.pausetime = 11,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-ceil(enemynear,p2bodydist y)-50	;-125
hitsound = s5, 2
guardsound = S6,0
ground.type = Low
ground.slidetime = 14;8
ground.hittime  = 14;8
ground.velocity = -2.5,IfElse(p2bodydist y <15,-13,-7)   ;-3	;p2bodydist y <15,-15,-8
guard.velocity = -6
airguard.velocity = -1.5,-1.1
air.type = Low	
air.velocity =  -1,IfElse(p2bodydist y <15,-13,-7)  ;-15
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.35
ID = 1099	;?????
fall = 1
fall.recover = 1
fall.recovertime = 45





[State 1010, No Attack Distance]	;this allows counter messages AND enemy guarding	
type = AttackDist
trigger1 = AnimElemTime(4)>=0
value = 0


[State 1010, Land]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1011
ctrl = 0




;---------------------------------------------------------------------------
; Volley - Land - Serve
[Statedef 1011]
type    = S
physics = S
ctrl = 0
anim = 1011
movehitpersist = 1

[State 1011, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 0

[State 1011, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1011, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 40, 0
ignorehitpause = 1


[State 1011, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0

[State 1011, 5]
type = ChangeState
triggerall = Time >= 18 && Time < 30
trigger1 = Command = "holdup" && Command = "z"
value = 1013
ctrl = 0


[State 1000, AI ChangeState]
type = ChangeState
triggerall = AILevel && ceil(random < 400 * (AILevel**2/64.0))
trigger1 = Time > 24
value = 1013




[State 1011, 3]
type = ChangeState
trigger1 = Time = 30
value = 1004
persistent = 0

[State 1011, 3]
type = ChangeState
triggerall = !MoveHit
trigger1 = Time = 8
value = 0
ctrl = 1







;---------------------------------------------------------------------------
;Volley - Start jump
[Statedef 1013]
type    = S
physics = S
anim = 1014
ctrl = 0
velset = 0,0
facep2 = 1

[State 1013, Dash Effects]
type = Explod
trigger1 = !Time
Anim = 8051
postype = P1
pos = 0,-20
bindtime = 15
sprpriority = 2
ownpal = 1
removetime = -2
removeongethit = 1

[State 1013, SND Super jump]
type = PlaySND
trigger1 = Time = 0
value = 0,24

;[State 1013, Trail]
;type = AfterImage
;trigger1 = Time = 0
;time= 30
;timegap= 1
;framegap= 3
;length= 12
;palbright= 0,0,0
;paladd= 0,0,0
;palmul= .9,.9,.9
;palcontrast= 120,120,120
;palpostbright= 0,0,0
;trans= add1

[State 1013, VelSet]
type = VelSet
triggerall = PrevStateNo = 1011
triggerall = P2bodydist y < -60
trigger1 = Time = 0
x = p2dist x/26		;Const(velocity.jump.neu.x)
y = p2dist y/32

[State 1013, VelSet]
type = VelSet
triggerall = PrevStateNo = 1011
triggerall = P2bodydist y > -60
trigger1 = Time = 0
x = p2dist x/26
y = Const(velocity.jump.y); - 2.5

[State 1013, VelSet]
type = VelSet
triggerall = PrevStateNo != 1011
trigger1 = Time = 0
x = p2dist x/45
y = Const(velocity.jump.y)+1

[State 1013, Go to real Super Jump state]
type = ChangeState
trigger1 = AnimTime = 0
value = 1014
ctrl = 0






;---------------------------------------------------------------------------
; Volley - Jump
[Statedef 1014]
type    = A
physics = A

[State 1014, System Variable Set]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0


[State 1014, ChangeAnim]
type = ChangeAnim
trigger1 = vel y >= 0
value = 41
persistent = 0

[State 1014, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 41 && AnimTime = 0
value = 44
persistent = 0

[State 1014, Go to Spike!!! state]
type = ChangeState
triggerall = p2statetype = A
trigger1 = P2BodyDist y = [-150,50]
value = 1015
ctrl = 0







;---------------------------------------------------------------------------
;Volley - Spike!!!
[Statedef 1015]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 1015
sprpriority = 2
facep2 = 1

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 7
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1015, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0


[State 1015, Voice]	;Tien: "Strike! / Spike!"
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (1) = 0
value = s85,1020+random%3
volumescale = 100
channel = 0




[State 1015, Gravity]
type = Gravity
trigger1 = 1



[State 1015, 2]
type = PlaySND
trigger1 = AnimElemTime(3)=0
value = 0, 2

[State 1015, 3];normal hit
type = HitDef
triggerall = Var(18) <= 55
triggerall = P2StateType != A
trigger1 = AnimElem = 6
trigger2 = AnimElem = 8 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 44 < 15, 15, fvar(11) * 44)), 0	;55
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 15,16
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-40
hitsound   = s5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -6,11;-1.5,5
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1;(numhelper(15999) || prevstateno=600 || prevstateno=630 || prevstateno=610 || prevstateno=640)
air.fall = 1
fall.recover = 0
id = 619
p2facing = 1




[State 1015, 3];Opponent in air sent to custom bounce state
type = HitDef
triggerall = Var(18) <= 55
triggerall = P2StateType = A
trigger1 = AnimElem = 6 && NumExplod(620) = 0
trigger2 = AnimElem = 8 && NumExplod(620) = 0 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 44 < 7, 7, fvar(11) * 44)), 0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 15,16
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-40
hitsound   = s5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -1.5,5
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1;(numhelper(15999) || prevstateno=600 || prevstateno=630 || prevstateno=610 || prevstateno=640)
air.fall = 1
fall.recover = 0
id = 620
p2facing = 1

[State 1015, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget(620)
trigger1 = !(target, ishelper)
value = 653
ignorehitpause = 1
persistent = 0
id = 620




[State 1015, 3];Opponent in air with bounce juggling limiter
type = HitDef
triggerall = Var(18) <= 55
triggerall = P2StateType = A
trigger1 = AnimElem = 6 && NumExplod(620)
trigger2 = AnimElem = 8 && NumExplod(620) && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 44 < 7, 7, fvar(11) * 44)), 0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 15,16
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-40
hitsound   = s5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -6,11;-1.5,5
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1;(numhelper(15999) || prevstateno=600 || prevstateno=630 || prevstateno=610 || prevstateno=640)
air.fall = 1
fall.recover = 0
id = 621
p2facing = 1


[State 1015, No Attack Distance]	;this allows counter messages AND enemy guarding
type = AttackDist
trigger1 = AnimElemTime(9)>=0
value = 0


[State 1015, Land]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1016
ctrl = 0





;---------------------------------------------------------------------------
; Volley - Land - Spike
[Statedef 1016]
type    = S
physics = S
ctrl = 0
anim = 1016

[State 1016, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 0

[State 1016, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 40, 0
ignorehitpause = 1

[State 1016, 2]
type = PosSet
trigger1 = Time = 0
y = 0


[State 1016, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0

[State 1016, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1








;---------------------------------------------------------------------------
;Hunting Crane -  Ground
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 0
velset  = 0,0
poweradd= 30
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 4
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1100, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1100, VarSet]; light = 0; medium = 1; heavy = 2
;type      = VarSet
;trigger1  = Time = 0 && !AILevel
;var(6)    = IfElse(Command = "QCB_a", 0, IfElse(Command = "QCB_b", 1, 2))
;[State 1100, VarSet]; for the AI (this may have to be removed)
;type      = VarSet
;trigger1  = Time = 0 && AILevel
;var(6)    = IfElse(random<100, 0, IfElse(random<350, 1, 2))

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1100, VarSet]; light = 0
type      = VarSet
trigger1  = Time = 0 && !AILevel
trigger1  = IfElse(Facing = 1,(NumExplod(90010104)),NumExplod(90010006)) && NumExplod(90000230)
var(6)    = 0
[State 1100, VarSet]; medium = 1
type      = VarSet
trigger1  = Time = 0 && !AILevel
trigger1  = IfElse(Facing = 1,(NumExplod(90010104)),NumExplod(90010006)) && NumExplod(90000240)
var(6)    = 1
[State 1100, VarSet]; heavy = 2
type      = VarSet
trigger1  = Time = 0 && !AILevel            
trigger1  = IfElse(Facing = 1,(NumExplod(90010104)),NumExplod(90010006)) && NumExplod(90000250)
var(6)    = 2
[State 1100, VarSet]; for the AI (this may have to be removed)
type      = VarSet
trigger1  = Time = 0 && AILevel
var(6)    = IfElse(random<100, 0, IfElse(random<350, 1, 2))




[State 1100, strength]; depending on the input it will change the animation, thus the attack strength
type      = ChangeAnim
Trigger1  = Time = 0
value     = 1100+var(6)



[State 1100, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(2)>=0
statetype = A       
physics = N        
ignorehitpause = 1



[State 1100, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 3+(var(6)*1.15)
y = -7.25;-7
ignorehitpause = 1
;persistent = 



[State 1100, Gravity]
type = Gravity
trigger1 = AnimElemTime(2)>=0
ignorehitpause = 0
persistent = 1





[State 1100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1100, 0
ignorehitpause = 1

[State 1100, Voice]
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (2) = 0
value = s85,1100+random%2
volumescale = 255
channel = 0




[State 1100, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
triggerall = !MoveContact
trigger1 = Time = 0
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (50 + var(6) * 7) < 10, 10, fvar(11) * (50 + var(6) * 7))), 8
animtype = Medium
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 10+(var(6)), 11+(var(6))
guard.pausetime = 11+(var(6)),11+(var(6))
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -2.5   ;-3
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recovertime = 45
envshake.time = 10
envshake.freq = 120
envshake.ampl = -4 



[State 1100, 5]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value = 1105



;---------------------------------------------------------------------------
;Hunting Crane- Landing
[Statedef 1105]
type    = S
movetype= I
physics = S
ctrl = 0
velset = 0,0
anim = 1105



[State 1105, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 40, 0
ignorehitpause = 1

[State 1105, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0
ignorehitpause = 1
[State 1105, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 15


[State 1105, Stand]
type = ChangeState
triggerall = command != "holddown"
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1105, Crouch]
type = ChangeState
triggerall = command = "holddown"
trigger1 = Time >= 16
value = 10
ctrl = 1



;---------------------------------------------------------------------------
;Hunting Crane - Air
[Statedef 1110]
type    = A
movetype= A
physics = A
juggle  = 0
;velset  = 0,0
poweradd= 30
ctrl = 0
anim = 1110

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 4
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1110, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0



;[State 620, Only once - explod] ;only once
;type = Explod
;triggerall = NumTarget
;triggerall = !NumExplod(620)
;trigger1 = MoveHit && Target,StateNo = 651
;anim = 15999	;blank anim
;ID = 620
;removeongethit = 1
;ignorehitpause = 1
;persistent = 0




;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1110, VarSet]; light = 0; medium = 1; heavy = 2
;type      = VarSet
;trigger1  = Time = 0 && !AILevel
;var(6)    = IfElse(Command = "QCB_a", 0, IfElse(Command = "QCB_b", 1, 2))
;[State 1110, VarSet]; for the AI (this may have to be removed)
;type      = VarSet
;trigger1  = Time = 0 && AILevel
;var(6)    = IfElse(random<100, 0, IfElse(random<350, 1, 2))

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1110, VarSet]; light = 0
type      = VarSet
trigger1  = Time = 0 && !AILevel
trigger1  = IfElse(Facing = 1,(NumExplod(90010104)),NumExplod(90010006)) && NumExplod(90000230)
var(6)    = 0
[State 1110, VarSet]; medium = 1
type      = VarSet
trigger1  = Time = 0 && !AILevel
trigger1  = IfElse(Facing = 1,(NumExplod(90010104)),NumExplod(90010006)) && NumExplod(90000240)
var(6)    = 1
[State 1110, VarSet]; heavy = 2
type      = VarSet
trigger1  = Time = 0 && !AILevel            
trigger1  = IfElse(Facing = 1,(NumExplod(90010104)),NumExplod(90010006)) && NumExplod(90000250)
var(6)    = 2
[State 1110, VarSet]; for the AI (this may have to be removed)
type      = VarSet
trigger1  = Time = 0 && AILevel
var(6)    = IfElse(random<100, 0, IfElse(random<350, 1, 2))






;[State 1100, strength]; depending on the input it will change the animation, thus the attack strength
;type      = ChangeAnim
;Trigger1  = Time = 0
;value     = 1100+var(6)

[State 1110, VelSet]
type = VelSet
trigger1 = !Time
x =  3+(var(6)*1.15);4
y = -2.5
ignorehitpause = 1
;persistent = 


[State 1110, Voice]	
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (2) = 0
value = s85,1100+random%2
volumescale = 255
channel = 0

[State 1110, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1100, 0
ignorehitpause = 1




[State 1110, Hitdef];ground bounce, enemy in air
type = HitDef
triggerall = Var(18) <= 55
;triggerall = p2statetype =A
;triggerall = !MoveContact ;&& NumExplod(620)=0
trigger1 = Time = 0
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (50 + var(6) * 7) < 10, 10, fvar(11) * (50 + var(6) * 7))), 8
animtype = Medium
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 10+(var(6)), 11+(var(6))
guard.pausetime = 11+(var(6)),11+(var(6))
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 5
guardsound = S6,0
ground.type = Low
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -2.5   ;-3
guard.velocity = -6
airguard.velocity = -2,1.1
air.type = Low	
air.velocity = -3,3
air.hittime = 12
air.animtype = Back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recovertime = 45
envshake.time = 10
envshake.freq = 120
envshake.ampl = -4
id = 1110 
;p2facing = 1

;[State 902, TargetState]
;type = TargetState
;trigger1 = MoveHit
;trigger1 = numtarget(1110)
;trigger1 = !(target, ishelper)
;value = 651
;ignorehitpause = 1
;persistent = 0
;id = 1110

;[State 1110, Hitdef];ground bounce limiter, enemy in air
;type = HitDef
;triggerall = p2statetype =A
;triggerall = !MoveContact && NumExplod(620)
;trigger1 = Time = 0
;attr = A, SA
;damage = Ceil(IfElse(fvar(11) * (50 + var(6) * 7) < 10, 10, fvar(11) * (50 + var(6) * 7))), 0
;animtype = Medium
;guardflag = HA
;hitflag = MAF
;priority = 3, Hit
;pausetime = 10+(var(6)), 11+(var(6))
;guard.pausetime = 11+(var(6)),11+(var(6))
;sparkno = s7030
;guard.sparkno = s7000
;sparkxy = -12,-75
;hitsound = s5, 5
;guardsound = S6,0
;ground.type = Low
;ground.slidetime = 12;8
;ground.hittime  = 12;8
;ground.velocity = -2.5   ;-3
;guard.velocity = -6
;airguard.velocity = -2,-1.1
;air.type = Low	
;air.velocity = -3,-3
;air.hittime = 12
;air.animtype = Back
;getpower= IfElse(P2MoveType=H,40,140), 35
;givepower = 35,35
;yaccel = 0.5
;fall = 1
;fall.recovertime = 45
;envshake.time = 10
;envshake.freq = 120
;envshake.ampl = -4
;id = 1111
;p2facing = 1
;
;
;[State 1110, Hitdef];no ground bounce, enemy on ground
;type = HitDef
;triggerall = p2statetype !=A
;triggerall = !MoveContact
;trigger1 = Time = 0
;attr = A, SA
;damage = Ceil(IfElse(fvar(11) * (50 + var(6) * 7) < 10, 10, fvar(11) * (50 + var(6) * 7))), 0
;animtype = Medium
;guardflag = HA
;hitflag = MAF
;priority = 3, Hit
;pausetime = 10+(var(6)), 11+(var(6))
;guard.pausetime = 11+(var(6)),11+(var(6))
;sparkno = s7030
;guard.sparkno = s7000
;sparkxy = -12,-75
;hitsound = s5, 5
;guardsound = S6,0
;ground.type = Low
;ground.slidetime = 12;8
;ground.hittime  = 12;8
;ground.velocity = -2.5   ;-3
;guard.velocity = -6
;airguard.velocity = -2,-1.1
;air.type = Low	
;air.velocity = -3,-3
;air.hittime = 12
;air.animtype = Back
;getpower= IfElse(P2MoveType=H,40,140), 35
;givepower = 35,35
;yaccel = 0.5
;fall = 1
;fall.recovertime = 45
;envshake.time = 10
;envshake.freq = 120
;envshake.ampl = -4
;id = 1112
;p2facing = 1




[State 1110, No Attack Distance]
type = AttackDist
trigger1 = AnimElemTime(12)>=0
value = 0


;[State 1100, 5]
;type = ChangeState
;trigger1 = Vel Y > 0
;trigger1 = Pos Y >= -12
;value = 1105




;---------------------------------------------------------------------------
;Hunting Crane EX 1
[Statedef 1120]
type    = S
movetype= A
physics = S
juggle  = 0
velset  = 0,0
poweradd= -500
anim = 1120
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 1
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0



[State 1120, only once - Explod]
type = Explod
trigger1 = MoveHit;Time = 0
anim = 15999	;empty anim
ID = 112000
removetime = -1
pausemovetime = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0



[State 1120, Width]
type = Width
trigger1 = 1
value = 5,0
ignorehitpause = 1


[State 1120, PalFX]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 1120, Trail]
type = AfterImage
trigger1 = Time = 0
time = 20
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1


[State 1120, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(2)>=0
statetype = A       ;S,A,C,L
physics = N        ;A,C,S,N
ignorehitpause = 1

[State 1120, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 6
y = -7
ignorehitpause = 1
;persistent = 

[State 1120, Gravity]
type = Gravity
trigger1 = AnimElemTime(2)>=0
ignorehitpause = 0
persistent = 1








[State 1120, EX Sound - PlaySnd]
type = PlaySnd
trigger1 = !Time
value = 7, 0
ignorehitpause = 1




[State 1120, Voice]	
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (2) = 0
value = s85,1100+random%2
volumescale = 255
channel = 0

[State 1120, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1100, 0
ignorehitpause = 1




[State 1120, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
triggerall = !MoveContact
trigger1 = Time = 0
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 60 < 10, 10, fvar(11) * 60)), 8
animtype = Medium
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 11
guard.pausetime = 10,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 5
guardsound = S6,0
ground.type = Low
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,5   ;-3
guard.velocity = -6
airguard.velocity = -1,5
air.type = Low	
air.velocity = -3,3
air.hittime = 12
air.animtype = back
getpower= 0, 0
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
envshake.time = 10
envshake.freq = 120
envshake.ampl = -4 
;p2stateno = 1125
id = 1120
p2facing = 1

[State 1120, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1125
ignorehitpause = 1
persistent = 0
id = 1120



[State 1120, Successful hit - Explod]
type = Explod
triggerall = NumEnemy
triggerall = Enemy, StateNo = 1125
trigger1 = MoveHit
anim = 15999	;empty anim
ID = 1120
removetime = -1
pausemovetime = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 1120, TargetBind]
type = TargetBind
trigger1 = MoveHit
time = 1
pos = 50, 0
ignorehitpause = 1
persistent = 0



[State 1120, Land]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value = 1121



;---------------------------------------------------------------------------
;Hunting Crane EX- Land
[Statedef 1121]
type    = S
movetype= I
physics = S
ctrl = 0
velset = 0,0
anim = 1105






[State 1121, flash]
type = PalFX
triggerall = NumExplod(1120)		;successful hit
trigger1 = Time < 7
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 1121, Trail]
type = AfterImage
triggerall = NumExplod(1120)		;successful hit
trigger1 = Time = 0
time = 7
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1



[State 1121, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 40, 0
ignorehitpause = 1

[State 1121, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0
ignorehitpause = 1
[State 1121, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 15


[State 1121, EX 2]
type = ChangeState
triggerall = NumExplod(1120)		;successful hit
trigger1 = Time >= 8 
value = 1122
ctrl = 0

[State 1121, Stand]
type = ChangeState
triggerall = !NumExplod(1120)		;hit not successful
trigger1 = AnimTime = 0
value = 0
ctrl = 1







;---------------------------------------------------------------------------
;Hunting Crane EX 2
[Statedef 1122]
type    = A
movetype= A
physics = N
;juggle  = 1
velset  = 0,0
anim = 1122
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 1
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0




[State 1122, flash]
type = PalFX
trigger1 = Time > 2
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 1122, Trail]
type = AfterImage
trigger1 = Time = 2
time = 14
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1

[State 1122, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1120, 0
ignorehitpause = 1

[State 1122, VelSet]	;teleport effect movement
type = PosAdd
trigger1 = AnimElem = 2
x = 32
y = -64
ignorehitpause = 1
;persistent = 

[State 1122, VelSet]	;floating a bit
type = VelSet
trigger1 = Time = 5
x = 1
y = -2
ignorehitpause = 1
;persistent = 

[State 1122, VelSet]	;stops in the air
type = VelSet
trigger1 = Time = 11
x = 0
y = 0
ignorehitpause = 1
;persistent = 

[State 1122, VelSet]	;falls down, towards the enemy
type = VelSet
trigger1 = Time >= 12
x = p2dist x/8
y = 12
ignorehitpause = 1




[State 1120, Voice]	
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (2) = 0 && Random < 350
value = s85,1120+random%2
volumescale = 255
channel = 0

[State 1122, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 114, 0
ignorehitpause = 1

[State 1122, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
triggerall = Enemy, StateNo = [1125,1129]
trigger1 = Time = 0
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 60 < 10, 10, fvar(11) * 60)), 8
animtype = Heavy
guardflag = HA
hitflag = MAFD
priority = 3, Hit
pausetime = 0,19;11,19
guard.pausetime = 0,19;11,19
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-25
hitsound = s5, 11
guardsound = S6,0
ground.type = Low
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -2.5   ;-3
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
down.velocity = -2,0;-5	;change the down.velocity to have a different behaviour, especially the y value.
down.hittime = 40
getpower= 0,0
givepower = 35,35
;yaccel = 0.5
fall = 1
fall.recover = 0
;envshake.time = 10
;envshake.freq = 120
;envshake.ampl = -4 
id = 1122
p2facing = 1



[State 1122, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = Enemy, StateNo != [1125,1129]
trigger1 = Time = 0
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 60 < 10, 10, fvar(11) * 60)), 8
animtype = Heavy
guardflag = HA
hitflag = MAFD
priority = 3, Hit
pausetime = 0,19;11,19
guard.pausetime = 0,19;11,19
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-25
hitsound = s5, 11
guardsound = S6,0
ground.type = Low
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -2.5   ;-3
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
down.velocity = -2,-5	;change the down.velocity to have a different behaviour, especially the y value.
down.hittime = 40
getpower= 0,0
givepower = 35,35
;yaccel = 0.5
fall = 1
fall.recover = 0
;envshake.time = 10
;envshake.freq = 120
;envshake.ampl = -4 
id = 1123
p2facing = 1


[State 1120, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = numtarget
trigger1 = !(target, ishelper)
trigger1 = Enemy, StateNo = [1125,1129]
value = 1128
ignorehitpause = 1
persistent = 0
id = 1122



[State 1122, ChangeState]
type = ChangeState
trigger1 = Pos y >= 20 && Time >= 1
trigger2 = MoveHit
value = 1123
ignorehitpause = 0
persistent = 1

;---------------------------------------------------------------------------
;Hunting Crane EX- Jump
[Statedef 1123]
type    = A
movetype= I
physics = N
velset  = 0,0
anim = 1123
ctrl = 0

[state 106, Landing Effect]
type = explod
trigger1 = Pos y >= 20
trigger1 = !Time
anim = 17100
id = 17100
pos = 0,-20
postype = P1
sprpriority = -3
ownpal = 1
supermovetime = -1
ignorehitpause = 1

[State 1122, PlaySnd]
type = PlaySnd
trigger1 = Pos y >= 20
trigger1 = Time = 2
value = 800, 2
ignorehitpause = 1
persistent = 0


[State 1123, SND Jumping away]
type = PlaySnd
trigger1 = AnimElem = 2
value = S40,1
ignorehitpause = 1
persistent = 0


[State 1123, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -2
y = -8
ignorehitpause = 1
;persistent = 


[State 1123, Gravity]
type = Gravity
trigger1 = AnimElemTime(2)>=0
ignorehitpause = 0
persistent = 1



[State 1123, Land]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52



;---------------------------------------------------------------------------
;Custom state - P2 going to the ground
[Statedef 1125]
type = A
movetype = H
physics = N
ctrl = 0
sprpriority = -1
velset = 0,0

[State 1125, 2]
type = changeanim2
trigger1 = !time && anim !=1125
value = 1125

[State 1125, vel Y]
type = velset
trigger1 = animelemtime(2)=0
y = 8
x = -7

[State 1125, Land]
type = changestate
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1126
persistent = 0

;---------------------------------------------------------------------------
;Custom state - P2 hitting ground
[Statedef 1126]
type    = L
movetype= H
physics = N
velset = 0,0

[State 1126, 1]
type = VelSet
trigger1 = Time = 0
x = -7;-15 ;FIX



[State 1126, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 1126, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 1126, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 1126, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 1126, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1126, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1126, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.5


[State 1126, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 1127

;---------------------------------------------------------------------------
;Custom state - Downed get-hit (hit ground from fall)
[Statedef 1127]
type    = L
movetype= H
physics = N

[State 1127, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 1127, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 1127, 2] ;Hit ground anim (normal)
type = ChangeAnim
trigger1 = time = 0
value = IfElse(vel x <=0,5110,5100)

[State 1127, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1127, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1127, 6] ;Reduce speed
type = VelMul
trigger1 = 1
x = 0.75

[State 1127, 11]
type = PosFreeze
trigger1 = Vel x >=0


[State 1127, 12]
type = SelfState		;in case something happens, like Tien not hitting the enemy.
trigger1 = Time >= 75
value = IfElse(Alive,5120,5150)	;Alive = he gets up; dead = he lies down.







;---------------------------------------------------------------------------
; Downed get-hit (shaking)
[Statedef 1128]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = IfElse (GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 1129 ;Downed get-hit (knocked back)




;---------------------------------------------------------------------------
; Downed get-hit (knocked back)
[Statedef 1129]
type    = L
movetype= H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 1127, 12]
type = SelfState		;in case something happens, like Tien not hitting the enemy.
trigger1 = Time >= 75
value = IfElse(Alive,5120,5150)	;Alive = he gets up; dead = he lies down.



;---------------------------------------------------------------------------
;Air Hunting Crane EX
[Statedef 1130]
type = A
movetype = A
physics = N
juggle = 0;1
velset = 0,0
poweradd = -500
anim = 1130
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 1
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0



[State 1130, only once - Explod]
type = Explod
trigger1 = MoveHit;Time = 0
anim = 15999	;empty anim
ID = 112000
removetime = -1
pausemovetime = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0





[State 1130, Width]
type = Width
trigger1 = 1
value = 5,0
ignorehitpause = 1

[State 1130, PalFX]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time = 1
ignorehitpause = 1

[State 1130, Trail (AfterImage)]
type = AfterImage
trigger1 = Time = 0
time = 20
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1

[State 1130, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 6
y = -6;-7
ignorehitpause = 1
;persistent = 

[State 1130, Gravity]
type = Gravity
trigger1 = AnimElemTime(1)>=0
ignorehitpause = 0
persistent = 1

[State 1130,  PlaySnd 1 - EX Sound - ]
type = PlaySnd
trigger1 = !Time
value = 7, 0




[State 1130, Voice]	
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (2) = 0
value = s85,1100+random%2
volumescale = 255
channel = 0

[State 1130, PlaySnd 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1100, 0



[State 1130, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
triggerall = !MoveContact
trigger1 = Time = 0
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 60 < 10, 10, fvar(11) * 60)), 8
animtype = Hard;Medium
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 11
guard.pausetime = 10,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 5
guardsound = S6,0
ground.type = Low
ground.slidetime = 12;8
ground.hittime = 12;8
ground.velocity = -1,5   ;-3
guard.velocity = -6
airguard.velocity = -1,5
air.type = Low	
air.velocity = -3,3
air.hittime = 12
air.animtype = back
getpower = 0, 0
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recovertime = 999;45
fall.recover = 0
envshake.time = 10
envshake.freq = 120
envshake.ampl = -4 
;p2stateno = 1125
id = 1130
p2facing = 1

[State 1130, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1125
ignorehitpause = 1
persistent = 0
id = 1130

[State 1130, Successful hit - Explod]
type = Explod
triggerall = NumEnemy
triggerall = Enemy, StateNo = 1125
trigger1 = MoveHit
anim = 15999	;empty anim
ID = 1130
removetime = -1
pausemovetime = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 1130, TargetBind]
type = TargetBind
trigger1 = MoveHit
time = 1
pos = 50, 0
ignorehitpause = 1
persistent = 0

[State 1130, Changestate - Land - ]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value = 1131





;---------------------------------------------------------------------------
;Air Hunting Crane EX- Land
[Statedef 1131]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0
anim = 1105




[State 1131, PalFX - Flash - ]
type = PalFX
triggerall = NumExplod(1130)		;successful hit
trigger1 = Time < 7
add = 40, 30, -40
time = 1
ignorehitpause = 1

[State 1131, AfterImage - Trail - ]
type = AfterImage
triggerall = NumExplod(1130)		;successful hit
trigger1 = Time = 0
time = 7
palbright= 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1

[State 1131, PlaySnd - Land - ]
type = PlaySnd
trigger1 = Time = 0
value = 40, 0

[State 1131, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0
ignorehitpause = 1
[State 1131, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 15

[State 1131, EX 2]
type = ChangeState
triggerall = NumExplod(1130)		;successful hit
trigger1 = Time >= 8 
value = 1122
ctrl = 0

[State 1131, Stand]
type = ChangeState
triggerall = !NumExplod(1130)		;hit not successful
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;---------------------------------------------------------------------------
;Talons 1-
[Statedef 1300]
type    = S
movetype= A
physics = S
;juggle  = 4
velset  = 0,0
Anim = 1300
poweradd= 30
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 2
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1300, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0



;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;This variable decides the velocity.
;[State 1300, VarSet]; light = 0; medium = 1; heavy = 2
;type      = VarSet
;trigger1  = Time = 0 && !AILevel
;var(6)    = IfElse(Command = "QCF_x", 0, IfElse(Command = "QCF_y", 1, 2))
;[State 1300, VarSet]; for the AI (this may have to be removed)
;type      = VarSet
;trigger1  = Time = 0 && AILevel
;var(6)    = IfElse(random<100, 0, IfElse(random<350, 1, 2))

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


;This variable decides the velocity.
[State 1300, VarSet]; light = 0
type      = VarSet
trigger1  = Time = 0 && !AILevel
trigger1  = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104)) && NumExplod(90000200)
var(6)    = 0
[State 1300, VarSet]; medium = 1
type      = VarSet
trigger1  = Time = 0 && !AILevel
trigger1  = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104)) && NumExplod(90000210)
var(6)    = 1
[State 1300, VarSet]; heavy = 2
type      = VarSet
trigger1  = Time = 0 && !AILevel            
trigger1  = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104)) && NumExplod(90000220)
var(6)    = 2
[State 1300, VarSet]; for the AI (this may have to be removed)
type      = VarSet
trigger1  = Time = 0 && AILevel
var(6)    = IfElse(random<100, 0, IfElse(random<350, 1, 2))





[State 1300, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(3)>=0
statetype = A       
physics = N        
ignorehitpause = 1

[State 1300, Width]
type = Width
trigger1 = AnimElemTime(3)>=0
value = 15,0
ignorehitpause = 1


;This is the velocity decided with the variable 6 written above.
[State 1300, VelSet]
type     = VelSet
trigger1 = AnimElem = 3
x        = 4+(var(6)*0.8)
y        = -3.5




[State 1300, Gravity]
type = Gravity
trigger1 = AnimElemTime(3)>=0
ignorehitpause = 0
persistent = 1




[state 1300, Dust]
type = Explod
trigger1 = animelemtime(3)=0
anim = 1207
id = 1207
pos = -30,4
postype = P1
sprpriority = -3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1






[State 1300, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 5

[State 1300, Voice]	;Tien: "Let's go!"
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (1) = 0
value = 85,1300
volumescale = 100
channel = 0



[State 1300, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = Animelem = 6
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 25 < 10, 10, fvar(11) * 25)), 6
animtype = Medium
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 6,7
guard.pausetime = 6,6
sparkno = s7030
guard.sparkno = s7000
sparkxy = -18,-80
hitsound = s5, 1
guardsound = S6,0
ground.type = Low
ground.slidetime = 16;8
ground.hittime  = 16;8
ground.velocity = -2.5   ;-3
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = Low	
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 0
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4



[State 1300, 5]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -2;12
value = 1301



;---------------------------------------------------------------------------
;Talons 1- Landing
[Statedef 1301]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 1301

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 0
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1301, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0



[State 1301, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 5

[State 1301, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 40, 0



[State 1301, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0
ignorehitpause = 1


[State 1301, PosAdd]
type     = PosAdd
trigger1 = Animelem = 1
x        = 30;37
[State 1301, PosAdd]
type     = PosAdd
trigger1 = Animelem = 2
x        = 13;20
[State 1301, PosAdd]
type     = PosAdd
trigger1 = Animelem = 3
x        = 13



[State 1301, Width]
type = Width
trigger1 = AnimElemTime(1)>=0
value = 10,0
ignorehitpause = 1


[State 1301, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = Animelem = 4
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 25 < 10, 10, fvar(11) * 25)), 6
animtype = Hard
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 6,7
guard.pausetime = 6,6
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 2
guardsound = S6,0
ground.type = Low
ground.slidetime = 16;8
ground.hittime  = 16;8
ground.velocity = -2.5   ;-3
guard.velocity = -4
airguard.velocity = -2,-1.1
air.type = Low	
air.velocity = -3,-1    ;-3,-3
air.hittime = 12
air.animtype = back
getpower= 0,0;IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 0
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4
ID = 1301

[State 1301, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
triggerall = !MoveContact
trigger1 = Animelem = 6
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 25 < 10, 10, fvar(11) * 25)), 6
animtype = Hard
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 6,7
guard.pausetime = 6,6
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-45
hitsound = s5, 2
guardsound = S6,0
ground.type = Low
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -2.5   ;-3
guard.velocity = -4
airguard.velocity = -2,-1.1
air.type = Low	
air.velocity = -3,-1    ;-3,-3
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 0
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4
NoChainID = 1301

[State 1301, VarSet];Reset
type     = VarSet
trigger1 = !time
var(6)   = 0

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1301, VarSet];Reset
;type     = VarSet
;trigger1 = !time
;var(4)   = 0
;[State 1301, VarSet];Reset
;type     = VarSet
;trigger1 = AnimelemTime(10)>=0
;var(4)   = 0
;[State 1301, VarSet];Change to Talons 2 (Punch to Low Kick)
;type     = VarSet
;trigger1 = time > 1 && AnimelemTime(10) < 0
;trigger1 = (command = "QCF_x" || command = "QCF_y" || command = "QCF_z")
;var(4)   = 1

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE





;GOKU CODES GOKU CODES GOKU CODES GOKU CODES GOKU CODES GOKU CODES
;GOKU CODES GOKU CODES GOKU CODES GOKU CODES GOKU CODES GOKU CODES

;[State 800, VarSet]
;type = VarSet
;trigger1 = !time
;var(4) = 0
;[State 800, VarSet]
;type = VarSet
;trigger1 = time > 15 && !AILevel
;trigger1 = IfElse(Facing = 1,(NumExplod(90010104)),NumExplod(90010006))
;trigger1 = NumExplod(90000200) || NumExplod(90000210) || NumExplod(90000220)
;var(4) = 1
;[State 800, VarSet]
;type = VarSet
;trigger1 = time > 15 && !AILevel
;trigger1 = IfElse(Facing = 1,(NumExplod(90010104)),NumExplod(90010006))
;trigger1 = NumExplod(90000230) || NumExplod(90000240) || NumExplod(90000250)
;var(4) = 2
;[State 800, VarSet]
;type = VarSet
;trigger1 = time > 15 && !AILevel
;trigger1 = IfElse(Facing = 1,(NumExplod(90010104)),NumExplod(90010006))
;trigger1 = NumExplod(90000230) && NumExplod(90000240) || NumExplod(90000230) && NumExplod(90000250) || NumExplod(90000240) && NumExplod(90000250)
;var(4) = 3

;GOKU CODES GOKU CODES GOKU CODES GOKU CODES GOKU CODES GOKU CODES
;GOKU CODES GOKU CODES GOKU CODES GOKU CODES GOKU CODES GOKU CODES


[State 1301, VarSet];Reset
type     = VarSet
trigger1 = !time
var(4)   = 0
[State 1301, VarSet];Reset
type     = VarSet
trigger1 = AnimelemTime(10)>=0
var(4)   = 0

[State 1301, VarSet]; for the AI (not OM)
type       = VarSet
triggerall = fvar(27)=0
trigger1   = time > 1 && AnimelemTime(10) < 0 && AILevel
var(4)     = 1
[State 1301, VarSet]; for the AI (OM)
type       = VarSet
triggerall = fvar(27)!=0
trigger1   = time > 1 && AnimelemTime(10) < 0 && AILevel
var(4)     = 1*random%4


[State 1301, VarSet];Change to Talons 2 (Punch to Low Kick)
type     = VarSet
trigger1 = time > 1 && AnimelemTime(10) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000200) || NumExplod(90000210) || NumExplod(90000220)
var(4)   = 1

[State 1301, VarSet];Change to Wing Attack (Light)
type       = VarSet
triggerall = fvar(27)!=0	;OM mode
trigger1   = time > 1 && AnimelemTime(10) < 0 && !AILevel
trigger1   = IfElse(Facing = -1,(NumExplod(90010301)),NumExplod(90010203))
trigger1   = NumExplod(90000200)
var(4)     = 2
[State 1301, VarSet];Change to Wing Attack (Medium)
type       = VarSet
triggerall = fvar(27)!=0	;OM mode
trigger1   = time > 1 && AnimelemTime(10) < 0 && !AILevel
trigger1   = IfElse(Facing = -1,(NumExplod(90010301)),NumExplod(90010203))
trigger1   = NumExplod(90000210)
var(4)     = 3
[State 1301, VarSet];Change to Wing Attack (Hard)
type       = VarSet
triggerall = fvar(27)!=0	;OM mode
trigger1   = time > 1 && AnimelemTime(10) < 0 && !AILevel
trigger1   = IfElse(Facing = -1,(NumExplod(90010301)),NumExplod(90010203))
trigger1   = NumExplod(90000220)
var(4)     = 4





;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1301, VarSet];Change to Wing Attack (Light)
;type     = VarSet
;triggerall = fvar(27)!=0;var(40) > 0	;OM mode
;trigger1 = Time > 1 && AnimelemTime(10) < 0
;trigger1 = Command = "dp_x"
;var(4)   = 2
;[State 1301, VarSet];Change to Wing Attack (Medium)
;type     = VarSet
;triggerall = fvar(27)!=0;var(40) > 0	;OM mode
;trigger1 = Time > 1 && AnimelemTime(10) < 0
;trigger1 = Command = "dp_y"
;var(4)   = 3
;[State 1301, VarSet];Change to Wing Attack (Hard)
;type     = VarSet
;triggerall = fvar(27)!=0;var(40) > 0	;OM mode
;trigger1 = Time > 1 && AnimelemTime(10) < 0
;trigger1 = Command = "dp_z"
;var(4)   = 4

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1301, ChangeState];Talons 2 (Punch to Low Kick)
type       = ChangeState
triggerall = AnimelemTime(9)>=1 && AnimelemTime(10) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000200) || NumExplod(90000210) || NumExplod(90000220)
value      = 1302
[State 1301, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
trigger1   = var(4)=1
value      = 1302




;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1301, ChangeState];Talons 2 (Punch to Low Kick)
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = (command = "QCF_x" || command = "QCF_y" || command = "QCF_z") && AnimelemTime(9)>=1 && AnimelemTime(10) < 0
;value      = 1302
;[State 1301, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
;trigger1   = var(4)=1
;value      = 1302

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1301, ChangeState];Light Wing Attack
type       = ChangeState
triggerall = AnimelemTime(9)>=1 && AnimelemTime(10) < 0 && !AILevel
triggerall = fvar(27)!=0	;OM mode
trigger1   = IfElse(Facing = -1,(NumExplod(90010301)),NumExplod(90010203))
trigger1   = NumExplod(90000200)
value      = 1400
[State 1301, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = fvar(27)!=0	;OM mode
triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
trigger1   = var(4)=2
value      = 1400



;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1301, ChangeState];Light Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;triggerall = fvar(27)!=0;var(40) > 0	;OM mode
;trigger1   = Command = "dp_x" && AnimelemTime(9)>=1 && AnimelemTime(10) < 0
;value      = 1400
;[State 1301, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = fvar(27)!=0;var(40) > 0	;OM mode
;triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
;trigger1   = var(4)=2
;value      = 1400

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1301, ChangeState];Medium Wing Attack
type       = ChangeState
triggerall = AnimelemTime(9)>=1 && AnimelemTime(10) < 0 && !AILevel
triggerall = fvar(27)!=0	;OM mode
trigger1   = IfElse(Facing = -1,(NumExplod(90010301)),NumExplod(90010203))
trigger1   = NumExplod(90000210)
value      = 1401
[State 1301, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = fvar(27)!=0	;OM mode
triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
trigger1   = var(4)=3
value      = 1401

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1301, ChangeState];Medium Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;triggerall = fvar(27)!=0;var(40) > 0	;OM mode
;trigger1   = Command = "dp_y" && AnimelemTime(9)>=1 && AnimelemTime(10) < 0
;value      = 1401
;[State 1301, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = fvar(27)!=0;var(40) > 0	;OM mode
;triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
;trigger1   = var(4)=3
;value      = 1401

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1301, ChangeState];Hard Wing Attack
type       = ChangeState
triggerall = AnimelemTime(9)>=1 && AnimelemTime(10) < 0 && !AILevel
triggerall = fvar(27)!=0	;OM mode
trigger1   = IfElse(Facing = -1,(NumExplod(90010301)),NumExplod(90010203))
trigger1   = NumExplod(90000220)
value      = 1402
[State 1301, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = fvar(27)!=0	;OM mode
triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
trigger1   = var(4)=4
value      = 1402


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1301, ChangeState];Hard Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;triggerall = fvar(27)!=0;var(40) > 0	;OM mode
;trigger1   = Command = "dp_z" && AnimelemTime(9)>=1 && AnimelemTime(10) < 0
;value      = 1402
;[State 1301, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = fvar(27)!=0;var(40) > 0	;OM mode
;triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
;trigger1   = var(4)=4
;value      = 1402

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE






[State 1301, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
trigger1   = var(4)=1
value      = 1302
[State 1301, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = fvar(27)!=0
triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
trigger1   = var(4)=2
value      = 1400
[State 1301, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = fvar(27)!=0
triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
trigger1   = var(4)=3
value      = 1401
[State 1301, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = fvar(27)!=0
triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
trigger1   = var(4)=4
value      = 1402






[State 1301, Stand]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
;Talons 2 (Punch to Low Kick)
[Statedef 1302]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 1302

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 0
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1302, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0


[State 1302, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 1302, PosAdd]
type     = PosAdd
trigger1 = Animelem = 1
x        = 13


[State 1303, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 0, 4

[State 1303, PosAdd]
type     = PosAdd
trigger1 = Animelem = 6
x        = 27
[State 1303, PosAdd]
type = PosAdd
trigger1 = AnimElem = 9
x = -8
[State 1303, PosAdd]
type = PosAdd
trigger1 = AnimElem = 10
x = -6
[State 1303, PosAdd]
type = PosAdd
trigger1 = AnimElem = 11
x = -12




[State 1302, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = Animelem = 3
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 25 < 10, 10, fvar(11) * 25)), 4
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 2,4
guard.pausetime = 3,3
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 1
guardsound = S6,0
ground.type = Low
ground.slidetime = 13;8
ground.hittime  = 13;8
ground.velocity = -2.5   ;-3
guard.velocity = -3
airguard.velocity = -2,-1.1
air.type = Low	
air.velocity = -3,-4
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 0
fall.recovertime = 45
envshake.time = 3;10
envshake.freq = 45;120
envshake.ampl = -1;-4
forcestand = 1

[State 1303, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = Animelem = 7
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 25 < 10, 10, fvar(11) * 25)), 4
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 2,4
guard.pausetime = 3,3
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-45
hitsound = s5, 4
guardsound = S6,0
ground.type = Low
ground.slidetime = 18;8
ground.hittime  = 18;8
ground.velocity = -2.5   ;-3
guard.velocity = -3
airguard.velocity = -2,-1.1
air.type = Low	
air.velocity = -3,-4
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 0
fall.recovertime = 45
envshake.time = 3;10
envshake.freq = 45;120
envshake.ampl = -1;-4
forcestand = 1


;
;[State 1303, VarSet];Reset
;type     = VarSet
;trigger1 = !time
;var(4)   = 0
;[State 1304, VarSet];Reset
;type     = VarSet
;trigger1 = AnimelemTime(10)>=0
;var(4)   = 0
;[State 1303, VarSet];Change to Talons 3 (UpperKick)
;type     = VarSet
;trigger1 = time > 1 && AnimelemTime(9) < 0
;trigger1 = (command = "QCF_x" || command = "QCF_y" || command = "QCF_z")
;var(4)   = 1
;
;
;[State 1303, ChangeState];Talons 3 (UpperKick)
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = (command = "QCF_x" || command = "QCF_y" || command = "QCF_z") && (AnimelemTime(8)>=1 && AnimelemTime(9) < 0)             
;value      = 1303
;[State 1303, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(8)>=1 && AnimelemTime(9)<0
;trigger1   = var(4)=1
;value      = 1303


;;[State 1303, ChangeState]
;;type = ChangeState
;;triggerall = !MoveContact
;;trigger1 = AnimTime = 0
;;value = 0
;;ctrl = 1

[State 1303, ChangeState]
type = ChangeState
;triggerall = MoveContact
trigger1 = AnimelemTime(8)>=1 && AnimelemTime(9)<0
value = 1303
;ctrl = 1


;---------------------------------------------------------------------------
;Talons 3 (UpperKick)
[Statedef 1303]
type    = S
movetype= A
physics = S
ctrl = 0
VelSet = 0,0
anim = 1303
sprpriority = 2



[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 2
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1303, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0


[state 1400, Dust]
type = explod
trigger1 = animelemtime(2)=0
anim = 1216
id = 1216
facing = -1
pos = -10,4
postype = P1
sprpriority = -3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1


[State 1303, 1]
type = PlaySND
trigger1 = AnimElem = 2
value = 0, 5


[State 1303, Voice]	;Tien: "Hai!"
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (2) = 0
value = s85,9;80,1303
volumescale = 255
channel = 0




[State 1303, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = Animelem = 3
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 35 < 10, 10, fvar(11) * 35)), 5
animtype = Up
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 14,15
guard.pausetime = 12,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-125
hitsound = s5, 5
guardsound = S6,0
ground.type = High
ground.slidetime = 15;8
ground.hittime  = 15;8
ground.velocity = -2,-12  ;-4
guard.velocity = -4
airguard.velocity = -4,-4
air.type = Low	
air.velocity = -2,-12
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
envshake.time = 3;10
envshake.freq = 45;120
envshake.ampl = -1;-4

[State 1303, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
x = 25

[State 1303, PosAdd]
type = PosAdd
trigger1 = AnimElem = 6
x = 16

[State 1303, PosAdd]
type = PosAdd
triggerall = !MoveHit
trigger1 = Animelem = 7
x = 25


[State 1303, ChangeState]
type = ChangeState
triggerall = !MoveHit
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1303, ChangeState]
type = ChangeState
triggerall = MoveHit
trigger1 = Animelemtime(7)>=0
value = 1304
;ctrl = 1



;---------------------------------------------------------------------------
;Talons 4 (Pose)
[Statedef 1304]
type    = S
movetype= A
physics = S
ctrl = 0
VelSet = 0,0
anim = 1304
sprpriority = 2





[State 1304, PosAdd]
type = PosAdd
trigger1 = AnimElem = 1
x = -6

[State 1304, PosAdd]
type = PosAdd
trigger1 = AnimElem = 5
x = 30

[State 1304, Swing sound]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,13;0,0


[State 1304, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = 40, 0

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1304, VarSet];Reset
;type     = VarSet
;trigger1 = !time
;var(4)   = 0
;[State 1304, VarSet];Change to Talons 5 (Energy Attack)
;type     = VarSet
;trigger1 = AnimElemTime(3)>=5 && AnimelemTime(4) <= 0
;trigger1 = command = "p" && command = "holdfwd"
;var(4)   = 1
;[State 1304, VarSet];Change to Talons 6 (Kick)
;type     = VarSet
;trigger1 = AnimElemTime(3)>=5 && AnimelemTime(4) <= 0
;trigger1 = command = "k" && command = "holdfwd"
;var(4)   = 2
;[State 1304, VarSet];Change to Talons 7 (Energy Attack Up)
;type     = VarSet
;trigger1 = AnimElemTime(3)>=5 && AnimelemTime(4) <= 0
;trigger1 = command = "p" && command = "holdup"
;var(4)   = 3
;[State 1304, VarSet];Change to Talons 8 (Spiral Kick)
;type     = VarSet
;trigger1 = AnimElemTime(3)>=5 && AnimelemTime(4) <= 0
;trigger1 = command = "k" && command = "holdup"
;var(4)   = 4

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1304, VarSet];Reset
type     = VarSet
trigger1 = !time
var(4)   = 0
[State 1304, VarSet];Change to Talons 5 (Energy Attack)
type     = VarSet
trigger1 = AnimElemTime(3)>=5 && AnimelemTime(4) <= 0 && !AILevel
trigger1 = IfElse(Facing = 1, NumExplod(90000026),NumExplod(90000024))
trigger1 = NumExplod(90000200) || NumExplod(90000210) || NumExplod(90000220)
var(4)   = 1
[State 1304, VarSet];Change to Talons 6 (Kick)
type     = VarSet
trigger1 = AnimElemTime(3)>=5 && AnimelemTime(4) <= 0 && !AILevel
trigger1 = IfElse(Facing = 1, NumExplod(90000026),NumExplod(90000024))
trigger1 = NumExplod(90000230) || NumExplod(90000240) || NumExplod(90000250)
var(4)   = 2
[State 1304, VarSet];Change to Talons 7 (Energy Attack Up)
type     = VarSet
trigger1 = AnimElemTime(3)>=5 && AnimelemTime(4) <= 0 && !AILevel
trigger1 = NumExplod(90000028)
trigger1 = NumExplod(90000200) || NumExplod(90000210) || NumExplod(90000220)
var(4)   = 3
[State 1304, VarSet];Change to Talons 8 (Spiral Kick)
type     = VarSet
trigger1 = AnimElemTime(3)>=5 && AnimelemTime(4) <= 0 && !AILevel
trigger1 = NumExplod(90000028)
trigger1 = NumExplod(90000230) || NumExplod(90000240) || NumExplod(90000250)
var(4)   = 4

[State 1304, VarSet]; for the AI
type       = VarSet
trigger1   = AnimElemTime(3)>=5 && AnimelemTime(4) <= 0 && AILevel
var(4)     = 1*random%4


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1304, ChangeState];Change to Talons 5 (Energy Attack)
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = (AnimElemTime(3)>=5 && AnimElemTime(4) <= 0) && command = "p" && command = "holdfwd"
;value      = 1305
;[State 1304, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimElemTime(3)>=5
;trigger1   = var(4)=1
;value      = 1305

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1304, ChangeState];Change to Talons 5 (Energy Attack)
type       = ChangeState
triggerall = (AnimElemTime(3)>=5 && AnimElemTime(4) <= 0) && !AILevel
trigger1   = IfElse(Facing = 1, NumExplod(90000026),NumExplod(90000024))
trigger1   = NumExplod(90000200) || NumExplod(90000210) || NumExplod(90000220)
value      = 1305
[State 1304, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimElemTime(3)>=5
trigger1   = var(4)=1
value      = 1305


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1304, ChangeState];Change to Talons 6 (Kick)
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = (AnimElemTime(3)>=5 && AnimElemTime(4) <= 0) && command = "k" && command = "holdfwd"
;value      = 1307
;[State 1304, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimElemTime(3)>=5
;trigger1   = var(4)=2
;value      = 1307

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

[State 1304, ChangeState];Change to Talons 6 (Kick)
type       = ChangeState
triggerall = (AnimElemTime(3)>=5 && AnimElemTime(4) <= 0) && !AILevel
trigger1   = IfElse(Facing = 1, NumExplod(90000026),NumExplod(90000024))
trigger1   = NumExplod(90000230) || NumExplod(90000240) || NumExplod(90000250)
value      = 1307
[State 1304, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimElemTime(3)>=5
trigger1   = var(4)=2
value      = 1307



;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1304, ChangeState];Change to Talons 7 (Energy Attack Up)
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = (AnimElemTime(3)>=5 && AnimElemTime(4) <= 0) && command = "p" && command = "holdup"
;value      = 1310
;[State 1304, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimElemTime(3)>=5
;trigger1   = var(4)=3
;value      = 1310

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1304, ChangeState];Change to Talons 7 (Energy Attack Up)
type       = ChangeState
triggerall = (AnimElemTime(3)>=5 && AnimElemTime(4) <= 0) && !AILevel
trigger1   = NumExplod(90000028)
trigger1   = NumExplod(90000200) || NumExplod(90000210) || NumExplod(90000220)
value      = 1310
[State 1304, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimElemTime(3)>=5
trigger1   = var(4)=3
value      = 1310




;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1304, ChangeState];Change to Talons 8 (Spiral Kick)
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = (AnimElemTime(3)>=5 && AnimElemTime(4) <= 0) && command = "k" && command = "holdup"
;value      = 1315
;[State 1304, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimElemTime(3)>=5
;trigger1   = var(4)=4
;value      = 1315

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1304, ChangeState];Change to Talons 8 (Spiral Kick)
type       = ChangeState
triggerall = (AnimElemTime(3)>=5 && AnimElemTime(4) <= 0) && !AILevel
trigger1   = NumExplod(90000028)
trigger1   = NumExplod(90000230) || NumExplod(90000240) || NumExplod(90000250)
value      = 1315
[State 1304, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimElemTime(3)>=5
trigger1   = var(4)=4
value      = 1315




[State 1304, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = (AnimElemTime(3)>=8 && AnimElemTime(4) <= 0) && p2bodydist x < 90 && p2bodydist y > -130
trigger1   = var(4)=1
value      = 1305
[State 1304, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = (AnimElemTime(3)>=8 && AnimElemTime(4) <= 0) && p2bodydist x < 90 && p2bodydist y > -130
trigger1   = var(4)=2
value      = 1307
[State 1304, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = (AnimElemTime(3)>=8 && AnimElemTime(4) <= 0) && p2bodydist x < 90 && p2bodydist y > -130
trigger1   = var(4)=3
value      = 1310
[State 1304, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = (AnimElemTime(3)>=8 && AnimElemTime(4) <= 0) && p2bodydist x < 90 && p2bodydist y > -130
trigger1   = var(4)=4
value      = 1315





[State 1304, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;Talons 5 (Energy Attack)
[Statedef 1305]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 1305


[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 7
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1305, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0




[State 1305, PlaySND]
type = PlaySND
trigger1 = AnimElem = 3
value = 0, 2
ignorehitpause = 1

[State 1305, PlaySND]
type = PlaySND
trigger1 = AnimElem = 4
value = 1305, 0	;8,3
ignorehitpause = 1

[State 200, Voice]
type = PlaySND
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime(1) = 0 && Random < 400
value = s85,1330
channel = 0



[State 1305, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 4
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 40 < 10, 10, fvar(11) * 40)), 7
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 14, 15
guard.pausetime = 15,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 7
guardsound = S6,0
ground.type = Low
ground.slidetime = 16;8
ground.hittime  = 22;8
ground.velocity = -9   ;-3
guard.velocity = -7.5
airguard.velocity = -4.5,-1
air.type = Low	
air.velocity = -8,-2
air.hittime = 12
air.animtype = back
fall = 1
fall.recover = 0
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5


[State 1305, EnvShake]
type = EnvShake
trigger1 = AnimElemTime(4) = 0
time = 10
freq = 60
ampl = -4
phase = 90
ignorehitpause = 1


[state 1305, Energy Attack FX]
type = explod
trigger1 = animelemtime(4)=0
anim = 1306
id = 1306
pos = 80,-75
postype = P1
sprpriority = 4
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1


[State 1305, PosAdd]
type	= PosAdd
trigger1	= AnimElem = 2
x	= 1
[State 1305, PosAdd]
type	= PosAdd
trigger1	= AnimElem = 3
x	= 44
[State 1305, PosAdd]
type	= PosAdd
trigger1	= AnimElem = 4
x	= 17
[State 1305, PosAdd]
type	= PosAdd
trigger1	= AnimElem = 5
x	= -3
[State 1305, PosAdd]
type	= PosAdd
trigger1	= AnimElem = 6
x	= -4
[State 1305, PosAdd]
type	= PosAdd
trigger1	= AnimElem = 7
x	= -10
[State 1305, PosAdd]
type	= PosAdd
trigger1	= AnimElem = 8
x	= -9
[State 1305, PosAdd]
type	= PosAdd
trigger1	= AnimTime = 0
x	= -7


[State 1305, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Talons 6 (Kick finisher)
[Statedef 1307]
type     = S
movetype = A
physics  = S
velset   = 0,0
anim     = 1307
poweradd = 30
ctrl     = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 7
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1307, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0



[State 1307, StateTypeSet]
type           = StateTypeSet
trigger1       = AnimElemTime(1)>=1
statetype      = A       
physics        = N        
ignorehitpause = 1


[State 1307, Width]
type           = Width
trigger1       = AnimElemTime(1)>=0
value          = 15,0
ignorehitpause = 1


[State 1307, VelSet]
type     = VelSet
trigger1 = AnimElemTime(1)=1
x        = 3
y        = -7.5


[State 1307, PosAdd]
type	= PosAdd
trigger1	= AnimElem = 2
x	= 12


[State 1307, PlaySND]
type = PlaySND
trigger1 = AnimElem = 5
value = 0, 5

[State 1307, PlaySND]
type = PlaySND
trigger1 = AnimElem = 1
value = 40, 1

[State 1110, Voice]	;Tien: "Repent!"
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (3) = 0 && Random < 400
value = s85,1310
volumescale = 100
channel = 0


[State 1307, 3]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 6
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 40 < 10, 10, fvar(11) * 40)), 7
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 8,9
guard.pausetime = 6,6
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-65
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -1.5,8
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
air.fall = 1
fall.recover = 0


[State 1307, Gravity]
type           = Gravity
trigger1       = AnimElemTime(1)>=1
ignorehitpause = 0
persistent     = 1


[state 1307, Dust]
type           = explod
trigger1       = animelemtime(1)=0
anim           = 1216
id             = 1216
facing         = -1
pos            = -10,4
postype        = P1
sprpriority    = -3
ownpal         = 1
removetime     = -2
persistent     = 0
ignorehitpause = 1


[State 1307, 5]
type     = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value    = 1308

;---------------------------------------------------------------------------
; Talons 6 (Kick, Land)
[Statedef 1308]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 1308
poweradd = 0
ctrl = 0

[State 1105, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 40, 0
ignorehitpause = 1

[State 1105, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0
ignorehitpause = 1
[State 1105, PosAdd]
type = null;PosAdd
trigger1 = Time = 0
x = 15


[State 1105, Stand]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
;Talons 7 (Energy Attack Up)
[Statedef 1310]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 1310


[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 7
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1310, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0




[State 1310, PlaySND]
type = PlaySND
trigger1 = AnimElem = 3
value = 0, 2
ignorehitpause = 1

[State 1310, PlaySND]
type = PlaySND
trigger1 = AnimElem = 4
value = 1305, 0	;8,3
ignorehitpause = 1

[State 200, Voice]
type = PlaySND
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime(1) = 0 && Random < 400
value = s85,1330
channel = 0



[State 1310, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 4
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 40 < 10, 10, fvar(11) * 40)), 7
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 14, 15
guard.pausetime = 15,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-105
hitsound = s5, 7
guardsound = S6,0
ground.type = Low
ground.slidetime = 16;8
ground.hittime  = 22;8
ground.velocity = -9,-1   ;-3
guard.velocity = -7.5
airguard.velocity = -4.5,-1
air.type = Low	
air.velocity = -8,-2
air.hittime = 12
air.animtype = back
fall = 1
fall.recover = 0
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5




[State 1310, EnvShake]
type = EnvShake
trigger1 = AnimElemTime(4) = 0
time = 5
freq = 60
ampl = -2
phase = 90
ignorehitpause = 1


;[state 1310, Energy Attack FX]
;type = explod
;trigger1 = animelemtime(4)=0
;anim = 1306
;id = 1306
;pos = 80,-75
;postype = P1
;sprpriority = 4
;ownpal = 1
;removetime = -2
;persistent = 0
;ignorehitpause = 1

[State 1300, Energy Attack FX]
type = helper
trigger1 = animelemtime(4) = 0
helpertype = normal
stateno = 1311
ID = 1311
name = "Energy"
postype = p1
pos = 100,-115

[State 1310, PosAdd]
type	= PosAdd
trigger1	= AnimElem = 2
x	= 23


[State 1310, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Talons 8 (Up+Kick)
[Statedef 1315]
type     = S
movetype = A
physics  = S
velset   = 0,0
anim     = 1315
ctrl     = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 7
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1315, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0


[State 1315, StateTypeSet]
type           = StateTypeSet
trigger1       = AnimElemTime(4)>=1
statetype      = A       
physics        = N        
ignorehitpause = 1


[State 1315, Width]
type           = Width
trigger1       = AnimElemTime(4)>=0
value          = 15,0
ignorehitpause = 1


[State 1315, VelSet]
type     = VelSet
trigger1 = AnimElemTime(2)=1
x        = 4
y        = -5.5



[State 1315, PlaySND - spin]
type = PlaySND
trigger1 = AnimElem = 5
value = 0, 302
volumescale = 255
[State 1315, PlaySND - attack]
type = PlaySND
trigger1 = AnimElem = 8
value = 0, 5
volumescale = 80
[State 1315, PlaySND - jump]
type = PlaySND
trigger1 = AnimElem = 2
value = 40, 1

[State 1110, Voice]	;Tien: "Atone!"
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (3) = 0 && Random < 400
value = s85,1311
volumescale = 100
channel = 0


[State 1315, 3]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 10
attr = A, NA
damage = Ceil(IfElse(fvar(11) * 35 < 10, 10, fvar(11) * 35)), 0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 8,9
guard.pausetime = 6,6
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-65
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -1.5,8
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
air.fall = 1
fall.recover = 0
id = 1330

[State 1315, TargetState]  ;New state
type = TargetState
trigger1 = Numtarget(1330)
trigger1 = movehit = 1
value = 1520
ID = 1330
ignorehitpause = 1
persistent = 0


[State 1315, Gravity]
type           = Gravity
trigger1       = AnimElemTime(2)>=1
ignorehitpause = 0
persistent     = 1


[state 1315, Dust]
type           = explod
trigger1       = animelemtime(2)=0
anim           = 1216
id             = 1216
facing         = -1
pos            = -10,4
postype        = P1
sprpriority    = -3
ownpal         = 1
removetime     = -2
persistent     = 0
ignorehitpause = 1


[State 1315, 5]
type     = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value    = 1317

;---------------------------------------------------------------------------
; Talons 8 (Up+Kick) OM
[Statedef 1316]
type     = S
movetype = A
physics  = S
velset   = 0,0
anim     = 1316
ctrl     = 0

[State 1316, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 7
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1316, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0


[State 1316, StateTypeSet]
type           = StateTypeSet
trigger1       = AnimElemTime(2)>=1
statetype      = A       
physics        = N        
ignorehitpause = 1


[State 1316, Width]
type           = Width
trigger1       = AnimElemTime(2)>=0
value          = 15,0
ignorehitpause = 1


[State 1316, VelSet]
type     = VelSet
trigger1 = AnimElemTime(2)=1
x        = 1.6
y        = -9.5



[State 1316, PlaySND - spin]
type = PlaySND
trigger1 = AnimElem = 5
value = 0, 302
volumescale = 255
[State 1316, PlaySND - attack]
type = PlaySND
trigger1 = AnimElem = 8
value = 0, 5
volumescale = 80

[State 1316, PlaySND - jump]
type = PlaySND
trigger1 = AnimElem = 2
value = 40, 1

[State 1110, Voice]	;Tien: "Atone!"
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (3) = 0 && Random < 400
value = s85,1311
volumescale = 100
channel = 0


[State 1316, 3]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 10
attr = A, NA
damage = Ceil(IfElse(fvar(11) * 35 < 10, 10, fvar(11) * 35)), 0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 8,9
guard.pausetime = 6,6
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-65
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -1.5,8
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
air.fall = 1
fall.recover = 0
id = 1330

[State 1316, TargetState]  ;New state
type = TargetState
trigger1 = Numtarget(1330)
trigger1 = movehit = 1
value = 1520
ID = 1330
ignorehitpause = 1
persistent = 0


[State 1316, Gravity]
type           = Gravity
trigger1       = AnimElemTime(2)>=1
ignorehitpause = 0
persistent     = 1


[state 1316, Dust]
type           = explod
trigger1       = animelemtime(2)=0
anim           = 1216
id             = 1216
facing         = -1
pos            = -10,4
postype        = P1
sprpriority    = -3
ownpal         = 1
removetime     = -2
persistent     = 0
ignorehitpause = 1


[State 1316, 5]
type     = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value    = 1317


;---------------------------------------------------------------------------
; Talons 8 (Up+Kick) landing
[Statedef 1317]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 1317
ctrl = 0

[State 1317, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 40, 0
ignorehitpause = 1

[State 1317, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0
ignorehitpause = 1


[State 1317, PosAdd 1]
type	= PosAdd
trigger1	= AnimElem = 3
x	= -15
ignorehitpause = 1
[State 1317, PosAdd 2]
type	= PosAdd
trigger1	= AnimElem = 4
x	= -12
ignorehitpause = 1
[State 1317, PosAdd 3]
type	= PosAdd
trigger1	= AnimElem = 5
x	= -29
ignorehitpause = 1
[State 1317, PosAdd 4]
type	= PosAdd
trigger1	= AnimElem = 6
x	= -2
ignorehitpause = 1


[State 1317, Crouch]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = Command = "holddown"
value = 11
ctrl = 1

[State 1317, Stand]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = Command != "holddown"
value = 12
ctrl = 1





;---------------------------------------------------------------------------
; EX Talons 1
[Statedef 1320]
type    = S
movetype= A
physics = S
;juggle  = 4
velset  = 0,0
Anim = 1320
poweradd= -500
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 2
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0




[State 1320, PalFX]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 1320, Trail]
type = AfterImage
trigger1 = Time = 0
time = 20
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1

[State 1320, EX Sound - PlaySnd]
type = PlaySnd
trigger1 = !Time
value = 7, 0
ignorehitpause = 1




[State 1320, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(3)>=0
statetype = A       
physics = N        
ignorehitpause = 1

[State 1320, Width]
type = Width
trigger1 = AnimElemTime(3)>=0
value = 15,0
ignorehitpause = 1



[State 1320, VelSet]
type     = VelSet
trigger1 = AnimElem = 3
x        = 7.25
y        = -3.25




[State 1320, Gravity]
type = Gravity
trigger1 = AnimElemTime(3)>=0
ignorehitpause = 0
persistent = 1




[state 1300, Dust]
type = explod
trigger1 = animelemtime(3)=0
anim = 1207
id = 1207
pos = -30,4
postype = P1
sprpriority = -3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1






[State 1300, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 5



[State 1300, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = Animelem = 6
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 30 < 10, 10, fvar(11) * 30)), 4
animtype = Medium
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 6,7
guard.pausetime = 6,6
sparkno = s7030
guard.sparkno = s7000
sparkxy = -18,-80
hitsound = s5, 1
guardsound = S6,0
ground.type = Low
ground.slidetime = 16;8
ground.hittime  = 16;8
ground.velocity = -2.5   ;-3
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = Low	
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= 0, 0
givepower = 35,35
yaccel = 0.5
fall = 0
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4





[State 1320, 5]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -2;12
value = 1321



;---------------------------------------------------------------------------
; EX Talons 1- Landing
[Statedef 1321]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1301

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 0
ignorehitpause = 1
persistent = 0


;[State 0, OM variable]
;type = VarAdd
;triggerall = numhelper(2550)=1||numhelper(2560)=1
;triggerall = fvar(28) < 90
;trigger1 = MoveHit
;fvar(28) = 3
;ignorehitpause = 1
;persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0


[State 1320, PalFX]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1


[State 1320, Trail]
type = AfterImage
trigger1 = Time = 0
time = 5
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1








[State 1321, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 5

[State 1321, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 40, 0


[state 17100, Landing Effect]
type = explod
trigger1 = !time
anim = 17100
id = 17100
pos = 0,0
postype = P1
sprpriority = -3
ownpal = 1
supermovetime = -1




[State 1321, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0
ignorehitpause = 1


[State 1321, PosAdd]
type     = PosAdd
trigger1 = Animelem = 1
x        = 37
[State 1321, PosAdd]
type     = PosAdd
trigger1 = Animelem = 2
x        = 20
[State 1321, PosAdd]
type     = PosAdd
trigger1 = Animelem = 3
x        = 13


[State 1321, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = Animelem = 4
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 30 < 10, 10, fvar(11) * 30)), 4
animtype = Hard
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 6,7
guard.pausetime = 6,6
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 2
guardsound = S6,0
ground.type = Low
ground.slidetime = 16;8
ground.hittime  = 16;8
ground.velocity = -2.5   ;-3
guard.velocity = -4
airguard.velocity = -2,-1.1
air.type = Low	
air.velocity = -3,-1.1    ;-3,-3
air.hittime = 12
air.animtype = back
getpower= 0, 0
givepower = 35,35
yaccel = 0.5
fall = 0
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4
ID = 1321

[State 1301, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
triggerall = !MoveContact
trigger1 = Animelem = 6
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 30 < 10, 10, fvar(11) * 30)), 4
animtype = Hard
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 6,7
guard.pausetime = 6,6
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-45
hitsound = s5, 2
guardsound = S6,0
ground.type = Low
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -2.5   ;-3
guard.velocity = -4
airguard.velocity = -2,-1.1
air.type = Low	
air.velocity = -3,-1.1    ;-3,-3
air.hittime = 12
air.animtype = back
getpower= 0, 0
givepower = 35,35
yaccel = 0.5
fall = 0
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4
NoChainID = 1321


;[State 1321, VarSet];Reset
;type     = VarSet
;trigger1 = !time
;var(4)   = 0
;[State 1321, VarSet];Reset
;type     = VarSet
;trigger1 = AnimelemTime(10)>=0
;var(4)   = 0
;[State 1321, VarSet];Change to Talons 2 (Punch to Low Kick)
;type     = VarSet
;trigger1 = time > 1 && AnimelemTime(10) < 0
;trigger1 = (command = "QCF_x" || command = "QCF_y" || command = "QCF_z"); || QCF_ex
;var(4)   = 1
;
;
;
;[State 1321, VarSet];Change to Wing Attack (Light)
;type     = null;VarSet
;trigger1 = time > 1 && AnimelemTime(10) < 0
;trigger1 = Command = "dp_x"
;var(4)   = 2
;[State 1321, VarSet];Change to Wing Attack (Medium)
;type     = null;VarSet
;trigger1 = time > 1 && AnimelemTime(10) < 0
;trigger1 = Command = "dp_y"
;var(4)   = 3
;[State 1321, VarSet];Change to Wing Attack (Hard)
;type     = null;VarSet
;trigger1 = time > 1 && AnimelemTime(10) < 0
;trigger1 = Command = "dp_z"
;var(4)   = 4
;[State 1321, VarSet];Change to EX Wing Attack
;type     = VarSet
;trigger1 = time > 1 && AnimelemTime(10) < 0 && Power>=500
;trigger1 = Command = "dp_2p"
;var(4)   = 5
;
;
;[State 1321, ChangeState];Talons 2 (Punch to Low Kick)
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = (command = "QCF_x" || command = "QCF_y" || command = "QCF_z") && AnimelemTime(9)>=1 && AnimelemTime(10) < 0
;value      = 1322
;[State 1321, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
;trigger1   = var(4)=1
;value      = 1322
;
;[State 1321, ChangeState];Light Wing Attack
;type       = null;ChangeState
;;triggerall = !AILevel
;trigger1   = Command = "dp_x" && AnimelemTime(9)>=1 && AnimelemTime(10) < 0
;value      = 1400
;[State 1321, ChangeState]
;type       = null;Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
;trigger1   = var(4)=2
;value      = 1400
;
;
;[State 1321, ChangeState];Medium Wing Attack
;type       = null;ChangeState
;;triggerall = !AILevel
;trigger1   = Command = "dp_y" && AnimelemTime(9)>=1 && AnimelemTime(10) < 0
;value      = 1401
;[State 1321, ChangeState]
;type       = null;Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
;trigger1   = var(4)=3
;value      = 1401
;
;
;[State 1321, ChangeState];Hard Wing Attack
;type       = null;ChangeState
;;triggerall = !AILevel
;trigger1   = Command = "dp_z" && AnimelemTime(9)>=1 && AnimelemTime(10) < 0
;value      = 1402
;[State 1321, ChangeState]
;type       = null;Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0
;trigger1   = var(4)=4
;value      = 1402
;
;
;
;
;
;
;[State 1321, ChangeState];EX Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = Command = "dp_2p" && AnimelemTime(9)>=1 && AnimelemTime(10) < 0 && Power>=500
;value      = 1420
;[State 1321, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(9)>=0 && AnimelemTime(10) < 0 && Power>=500
;trigger1   = var(4)=5
;value      = 1420


;[State 1321, Stand]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1




[State 1321, ChangeState]
type = ChangeState
triggerall = !MoveHit
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1321, ChangeState]
type = ChangeState
triggerall = MoveHit
trigger1 = AnimelemTime(9) >= 0 && AnimelemTime(10) < 0
value = 1322
;ctrl = 1




;---------------------------------------------------------------------------
; EX Talons 2 (Punch to Low Kick)
[Statedef 1322]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1302

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 0
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0


[State 1322, PalFX]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1




[State 1322, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 1322, PosAdd]
type     = PosAdd
trigger1 = Animelem = 1
x        = 13






[State 1322, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 0, 4

[State 1322, PosAdd]
type     = PosAdd
trigger1 = Animelem = 6
x        = 27
[State 1322, PosAdd]
type = PosAdd
trigger1 = AnimElem = 9
x = -8
[State 1322, PosAdd]
type = PosAdd
trigger1 = AnimElem = 10
x = -6
[State 1322, PosAdd]
type = PosAdd
trigger1 = AnimElem = 11
x = -12






[State 1322, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = Animelem = 3
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 25 < 10, 10, fvar(11) * 25)), 4
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 2,4
guard.pausetime = 3,3
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 1
guardsound = S6,0
ground.type = Low
ground.slidetime = 13;8
ground.hittime  = 13;8
ground.velocity = -2.5   ;-3
guard.velocity = -3
airguard.velocity = -2,-1.1
air.type = Low	
air.velocity = -3,-4
air.hittime = 12
air.animtype = back
getpower= 0, 0
givepower = 35,35
yaccel = 0.5
fall = 0
fall.recovertime = 45
envshake.time = 3;10
envshake.freq = 45;120
envshake.ampl = -1;-4

[State 1322, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = Animelem = 7
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 25 < 10, 10, fvar(11) * 25)), 4
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 2,4
guard.pausetime = 3,3
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-45
hitsound = s5, 4
guardsound = S6,0
ground.type = Low
ground.slidetime = 18;8
ground.hittime  = 18;8
ground.velocity = -2.5   ;-3
guard.velocity = -3
airguard.velocity = -2,-1.1
air.type = Low	
air.velocity = -3,-4
air.hittime = 12
air.animtype = back
getpower= 0, 0
givepower = 35,35
yaccel = 0.5
fall = 0
fall.recovertime = 45
envshake.time = 3;10
envshake.freq = 45;120
envshake.ampl = -1;-4





;[State 1303, VarSet];Reset
;type     = VarSet
;trigger1 = !time
;var(4)   = 0
;[State 1304, VarSet];Reset
;type     = VarSet
;trigger1 = AnimelemTime(10)>=0
;var(4)   = 0
;[State 1303, VarSet];Change to EX Talons 3 (Elbow to High Palm)
;type     = VarSet
;trigger1 = time > 1 && AnimelemTime(9) < 0
;trigger1 = (command = "QCF_x" || command = "QCF_y" || command = "QCF_z")
;var(4)   = 1
;
;
;[State 1303, ChangeState];EX Talons 3 (Elbow to High Palm)
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = (command = "QCF_x" || command = "QCF_y" || command = "QCF_z") && (AnimelemTime(8)>=1 && AnimelemTime(9) < 0)             
;value      = 1323
;[State 1303, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(8)>=1 && AnimelemTime(9)<0
;trigger1   = var(4)=1
;value      = 1323

[State 1322, ChangeState]
type = ChangeState
triggerall = !MoveHit
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1322, ChangeState]
type = ChangeState
triggerall = MoveHit
trigger1 = AnimelemTime(8)>=1 && AnimelemTime(9)<0
value = 1323
ctrl = 1







;---------------------------------------------------------------------------
; EX Talons 3 (Elbow to High Palm)
[Statedef 1323]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1323

;[State 0, OM variable]
;type = VarAdd
;triggerall = numhelper(2550)=1||numhelper(2560)=1
;triggerall = fvar(28) < 90
;trigger1 = MoveHit
;fvar(28) = 3
;ignorehitpause = 1
;persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0


[State 1320, PalFX]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1



[State 1323, PosAdd]
type     = PosAdd
trigger1 = Animelem = 2
x        = 40
[State 1323, PosAdd]
type     = PosAdd
trigger1 = Animelem = 3
x        = 23
[State 1323, PosAdd]
type     = PosAdd
trigger1 = Animelem = 6
x        = 8









[State 1323, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 1

[State 1323, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = 0, 4







[State 1302, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = Animelem = 4
trigger2 = Animelem = 8
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 20 < 10, 10, fvar(11) * 20)), 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 2,4
guard.pausetime = 3,3
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-80
hitsound = s5, 1
guardsound = S6,0
ground.type = High
ground.slidetime = 17;8
ground.hittime  = 17;8
ground.velocity = -2.5   ;-3
guard.velocity = -3
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -3,-4
air.hittime = 12
air.animtype = back
getpower= 0, 0
givepower = 35,35
yaccel = 0.5
fall = 0
fall.recovertime = 45
envshake.time = 3;10
envshake.freq = 45;120
envshake.ampl = -1;-4



;
;[State 1303, VarSet];Reset
;type     = VarSet
;trigger1 = !time
;var(4)   = 0
;[State 1304, VarSet];Reset
;type     = VarSet
;trigger1 = AnimelemTime(10)>=0
;var(4)   = 0
;[State 1303, VarSet];Change to Talons 3 (UpperKick)
;type     = VarSet
;trigger1 = time > 1 && AnimelemTime(9) < 0
;trigger1 = (command = "QCF_x" || command = "QCF_y" || command = "QCF_z")
;var(4)   = 1
;
;
;[State 1303, ChangeState];Talons 3 (UpperKick)
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = (command = "QCF_x" || command = "QCF_y" || command = "QCF_z") && (AnimelemTime(8)>=1 && AnimelemTime(9) < 0)             
;value      = 1303
;[State 1303, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(8)>=1 && AnimelemTime(9)<0
;trigger1   = var(4)=1
;value      = 1303






[State 1303, ChangeState]
type = ChangeState
triggerall = !MoveHit
trigger1 = AnimTime = 0
value = 0
ctrl = 1



[State 1303, ChangeState]
type = ChangeState
triggerall = MoveHit
trigger1 = AnimelemTime(8)>=1 && AnimelemTime(9)<0
value = 1324







;---------------------------------------------------------------------------
; EX Talons 4 (Somersault)
[Statedef 1324]
type    = A
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1324

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 2
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0


[State 1320, PalFX]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1


[State 1302, PosAdd]
type     = PosAdd
trigger1 = Animelem = 1
x        = 13



;Jump back
[State 801, Vel Add]
type = VelSet
trigger1 = AnimElem = 2
x = -2
y = -6
ignorehitpause = 1

[State 801, Gravity]
type = Gravity
trigger1 = AnimElemTime(4)>=0







[State 1303, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 5


[State 1100, Voice]
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (2) = 0
value = s85,1100+random%2
volumescale = 255
channel = 0




[State 1420, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 3
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 30 < 10, 10, fvar(11) * 30)), 7
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-9
guard.velocity = -6
airguard.velocity = -2,-3
air.type = High	
air.velocity = -3,-10
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
fall.recovertime = 999
envshake.time = 7
envshake.freq = 80
envshake.ampl = -3
id = 1324

[State 902, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = Numtarget(1324)
trigger1 = !(target, ishelper)
value = 763
ignorehitpause = 1
persistent = 0
id = 1324


[State 801, State End]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1325;52



;---------------------------------------------------------------------------
; EX Talons 4 (Landing)
[Statedef 1325]
type     = S
movetype = I
physics  = S
poweradd = 0
ctrl     = 0
velset   = 0,0
anim     = 1325

[State 1325, PlaySnd];Landing sound
type     = PlaySnd
trigger1 = Time = 0
value    = 40, 0

[State 1325, PosSet]
type     = PosSet
trigger1 = Time = 0
y        = 0

[State 1325, Helper];Land FX
type          = Helper
trigger1      = Time = 0
name          = "LandFX"
helpertype    = normal
StateNo       = 17100
id            = 17100
postype       = P1
pos           = 0,0
ownpal        = 1
keyctrl       = 0
supermovetime = 99999
pausemovetime = 99999

[State 1325, ChangeState]
type     = ChangeState
trigger1 = AnimTime = 0
value    = 0
ctrl     = 1


;---------------------------------------------------------------------------
;Crane stance (OM)
[Statedef 1350]
type    = S
movetype= I
physics = S
ctrl = 0
VelSet = 0,0
anim = 1350
sprpriority = 2
;copied from state 1304

[State 200, Voice]
type = PlaySND
trigger1 = AnimElemTime(1) = 0 && Random < 400
value = s85,1320 + Random%3
channel = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = Time = 0
fvar(28) = 7
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1350, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = !Time
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0

[State 1350, PosAdd]
type = PosAdd
trigger1 = AnimElem = 1
x = -30

[State 1350, PosAdd]
type = PosAdd
trigger1 = AnimElem = 5
x = 30

[State 1350, Swing sound]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,13


[State 1350, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = 40, 0





;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1350, VarSet];Reset
;type     = VarSet
;trigger1 = !time
;var(4)   = 0
;[State 1350, VarSet];Change to Talons 5 (Energy Attack)
;type     = VarSet
;trigger1 = AnimElemTime(3)>=8 && AnimelemTime(4) <= 0
;trigger1 = command = "p" && command = "holdfwd"
;var(4)   = 1
;[State 1350, VarSet];Change to Talons 6 (Kick)
;type     = VarSet
;trigger1 = AnimElemTime(3)>=8 && AnimelemTime(4) <= 0
;trigger1 = command = "k" && command = "holdfwd"
;var(4)   = 2
;[State 1350, VarSet];Change to Talons 7 (Energy Attack Up)
;type     = VarSet
;trigger1 = AnimElemTime(3)>=8 && AnimelemTime(4) <= 0
;trigger1 = command = "p" && command = "holdup"
;var(4)   = 3
;[State 1350, VarSet];Change to Talons 8 (Spiral Kick)
;type     = VarSet
;trigger1 = AnimElemTime(3)>=8 && AnimelemTime(4) <= 0
;trigger1 = command = "k" && command = "holdup"
;var(4)   = 4

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE




[State 1350, VarSet];Reset
type     = VarSet
trigger1 = !time
var(4)   = 0
[State 1350, VarSet];Change to Talons 5 (Energy Attack)
type     = VarSet
trigger1 = AnimElemTime(3)>=8 && AnimelemTime(4) <= 0 && !AILevel
trigger1 = IfElse(Facing = 1, NumExplod(90000026),NumExplod(90000024))
trigger1 = NumExplod(90000200) || NumExplod(90000210) || NumExplod(90000220)
var(4)   = 1
[State 1350, VarSet];Change to Talons 6 (Kick)
type     = VarSet
trigger1 = AnimElemTime(3)>=8 && AnimelemTime(4) <= 0 && !AILevel
trigger1 = IfElse(Facing = 1, NumExplod(90000026),NumExplod(90000024))
trigger1 = NumExplod(90000230) || NumExplod(90000240) || NumExplod(90000250)
var(4)   = 2
[State 1350, VarSet];Change to Talons 7 (Energy Attack Up)
type     = VarSet
trigger1 = AnimElemTime(3)>=8 && AnimelemTime(4) <= 0 && !AILevel
trigger1 = NumExplod(90000028)
trigger1 = NumExplod(90000200) || NumExplod(90000210) || NumExplod(90000220)
var(4)   = 3
[State 1350, VarSet];Change to Talons 8 (Spiral Kick)
type     = VarSet
trigger1 = AnimElemTime(3)>=8 && AnimelemTime(4) <= 0 && !AILevel
trigger1 = NumExplod(90000028)
trigger1 = NumExplod(90000230) || NumExplod(90000240) || NumExplod(90000250)
var(4)   = 4


[State 1350, VarSet]; for the AI
type       = VarSet
trigger1   = AnimElemTime(3)>=8 && AnimelemTime(4) <= 0 && AILevel
var(4)     = 1*random%4



;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1350, ChangeState];Change to Talons 5 (Energy Attack)
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = (AnimElemTime(3)>=8 && AnimElemTime(4) <= 0) && command = "p" && command = "holdfwd"
;value      = 1305
;[State 1350, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimElemTime(3)>=8
;trigger1   = var(4)=1
;value      = 1305

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE




[State 1350, ChangeState];Change to Talons 5 (Energy Attack)
type       = ChangeState
triggerall = (AnimElemTime(3)>=8 && AnimElemTime(4) <= 0) && !AILevel
trigger1   = IfElse(Facing = 1, NumExplod(90000026),NumExplod(90000024))
trigger1   = NumExplod(90000200) || NumExplod(90000210) || NumExplod(90000220)
value      = 1305
[State 1350, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimElemTime(3)>=8
trigger1   = var(4)=1
value      = 1305



;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1350, ChangeState];Change to Talons 6 (Kick)
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = (AnimElemTime(3)>=8 && AnimElemTime(4) <= 0) && command = "k" && command = "holdfwd"
;value      = 1307
;[State 1350, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimElemTime(3)>=8
;trigger1   = var(4)=2
;value      = 1307

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1350, ChangeState];Change to Talons 6 (Kick)
type       = ChangeState
triggerall = (AnimElemTime(3)>=8 && AnimElemTime(4) <= 0) && !AILevel
trigger1   = IfElse(Facing = 1, NumExplod(90000026),NumExplod(90000024))
trigger1   = NumExplod(90000230) || NumExplod(90000240) || NumExplod(90000250)
value      = 1307
[State 1350, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimElemTime(3)>=8
trigger1   = var(4)=2
value      = 1307




;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1350, ChangeState];Change to Talons 7 (Energy Attack Up)
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = (AnimElemTime(3)>=8 && AnimElemTime(4) <= 0) && command = "p" && command = "holdup"
;value      = 1310
;[State 1350, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimElemTime(3)>=8
;trigger1   = var(4)=3
;value      = 1310

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

[State 1350, ChangeState];Change to Talons 7 (Energy Attack Up)
type       = ChangeState
triggerall = (AnimElemTime(3)>=8 && AnimElemTime(4) <= 0) && !AILevel
trigger1   = NumExplod(90000028)
trigger1   = NumExplod(90000200) || NumExplod(90000210) || NumExplod(90000220)
value      = 1310
[State 1350, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimElemTime(3)>=8
trigger1   = var(4)=3
value      = 1310



;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1350, ChangeState];Change to Talons 8 (Spiral Kick)
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = (AnimElemTime(3)>=8 && AnimElemTime(4) <= 0) && command = "k" && command = "holdup"
;value      = 1316
;[State 1350, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimElemTime(3)>=8
;trigger1   = var(4)=4
;value      = 1316

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

[State 1350, ChangeState];Change to Talons 8 (Spiral Kick)
type       = ChangeState
triggerall = (AnimElemTime(3)>=8 && AnimElemTime(4) <= 0) && !AILevel
trigger1   = NumExplod(90000028)
trigger1   = NumExplod(90000230) || NumExplod(90000240) || NumExplod(90000250)
value      = 1316
[State 1350, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimElemTime(3)>=8
trigger1   = var(4)=4
value      = 1316





[State 1350, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = (AnimElemTime(3)>=11 && AnimElemTime(4) <= 0)  && p2bodydist x < 45
trigger1   = var(4)=1
value      = 1305
[State 1350, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = (AnimElemTime(3)>=11 && AnimElemTime(4) <= 0) && p2bodydist x < 45
trigger1   = var(4)=2
value      = 1307
[State 1350, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = (AnimElemTime(3)>=11 && AnimElemTime(4) <= 0) && p2bodydist x < 45
trigger1   = var(4)=3
value      = 1310
[State 1350, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = (AnimElemTime(3)>=11 && AnimElemTime(4) <= 0) && p2bodydist x < 45
trigger1   = var(4)=4
value      = 1316





[State 1350, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;---------------------------------------------------------------------------
;Light Wing Attack 
[Statedef 1400]
type    = S
movetype= A
physics = S
;juggle  = 4
velset  = 0,0
anim = 1400
poweradd= 30
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 2
ignorehitpause = 1
persistent = 0



[State 1400, ChangeAnim]
type       = ChangeAnim
trigger1   = prevstateno = 1301
value      = 1400
elem       = 2
persistent = 0




[State 1400, StateTypeSet]
type           = StateTypeSet
trigger1       = Animelemtime(3)>=0
statetype      = A       
physics        = N       
ignorehitpause = 1


[State 1400, VarSet];Reset (Strength Button)
type     = VarSet
trigger1 = !time
var(6)   = 0



[state 1400, Dust]
type = Explod
trigger1 = animelemtime(3)=0
anim = 1216
id = 1216
facing = -1
pos = -30,4
postype = P1
sprpriority = -3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1



[State 1400, Not too many Wing attacks in a combo (explod)]
type = Explod
trigger1 = MoveHit
anim = 15999
id = 1400
removetime = -2
persistent = 0
ignorehitpause = 1






[State 1400, VelSet]
type           = VelSet
trigger1       = Animelemtime(3)=0
x              = 2
y              = -2.5;-2.75
ignorehitpause = 0
[State 1400, VelSet]
type           = VelSet
trigger1       = Animelemtime(7)=0
x              = 1	;2
y              = -1.75;-3.5
ignorehitpause = 0
[State 1400, VelSet]
type           = VelSet
trigger1       = Animelemtime(14)=0
x              = 1	;2
y              = -1	;-2
ignorehitpause = 0 




[State 1400, Gravity]
type = Gravity
trigger1 = Animelemtime(16)>=0
ignorehitpause = 0
persistent = 1





[State 1400, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1400, 0




[State 1400, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 12 < 8, 8, fvar(11) * 12)), 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,15	;3,7
guard.pausetime = 5,5
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 1
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1;,-12
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -1.5,-6
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
air.fall = 1
fall.recovertime = 45
envshake.time = 4
envshake.freq = 45
envshake.ampl = -2
forcestand = 1
fall = NumExplod(1400)>1

[State 1400, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 12 < 8, 8, fvar(11) * 12)), 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,15
guard.pausetime = 5,5
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 2;5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1;,-9
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -1.5,-6
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
air.fall = 1
fall.recovertime = 45
envshake.time = 4
envshake.freq = 45
envshake.ampl = -2
forcestand = 1
fall = NumExplod(1400)>1


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, VarSet];Reset
;type     = VarSet
;trigger1 = !time
;var(4)   = 0
;[State 1400, VarSet];Reset
;type     = VarSet
;trigger1 = AnimelemTime(13)>=0
;var(4)   = 0
;[State 1400, VarSet];Change to 2nd Light Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_x"
;var(4)   = 1
;[State 1400, VarSet];Change to 2nd Medium Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_y"
;var(4)   = 2
;[State 1400, VarSet];Change to 2nd Heavy Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_z"
;var(4)   = 3

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1400, VarSet];Reset
type     = VarSet
trigger1 = !time
var(4)   = 0
[State 1400, VarSet];Reset
type     = VarSet
trigger1 = AnimelemTime(13)>=0
var(4)   = 0
[State 1400, VarSet];Change to 2nd Light Wing Attack
type     = VarSet
trigger1 = time > 7 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000200)
var(4)   = 1
[State 1400, VarSet];Change to 2nd Medium Wing Attack
type     = VarSet
trigger1 = time > 7 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000210)
var(4)   = 2
[State 1400, VarSet];Change to 2nd Heavy Wing Attack
type     = VarSet
trigger1 = time > 7 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000220)
var(4)   = 3


[State 1400, VarSet]; for the AI
type       = VarSet
trigger1   = time > 7 && AnimelemTime(13) < 0 && AILevel
var(4)     = 1*random%3




;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, ChangeState];Change to 2nd Light Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_x" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1405
;[State 1400, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=1
;value      = 1405

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1400, ChangeState];Change to 2nd Light Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000200)
value      = 1405
[State 1400, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=1
value      = 1405


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, ChangeState];Change to 2nd Medium Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_y" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1406
;[State 1400, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=2
;value      = 1406

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1400, ChangeState];Change to 2nd Medium Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000210)
value      = 1406
[State 1400, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=2
value      = 1406


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, ChangeState];Change to 2nd Heavy Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_z" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1407
;[State 1400, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=3
;value      = 1407

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1400, ChangeState];Change to 2nd Medium Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000220)
value      = 1407
[State 1400, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=3
value      = 1407




[State 1400, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=1
value      = 1405
[State 1400, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=2
value      = 1406
[State 1400, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=3
value      = 1407










[State 1400, CtrlSet]
type     = CtrlSet
trigger1 = animelem = 15
value    = 1


[State 1400, 5]
type     = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value    = 52


;[State 1400, Levitation]
;type = ChangeState
;value = 109
;;triggerall = command = "a+b+c";"QCB_p";"UU"
;triggerall = NumExplod(90000230) && NumExplod(90000240) && NumExplod(90000250)
;triggerall = NumExplod(625) = 1	;only once
;triggerall = Pos y <= -50
;trigger1 = StateType = A; && ctrl






;---------------------------------------------------------------------------
;Medium Wing Attack 
[Statedef 1401]
type    = S
movetype= A
physics = S
;juggle  = 4
velset  = 0,0
anim = 1400
poweradd= 30
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 2
ignorehitpause = 1
persistent = 0

[State 1401, ChangeAnim]
type       = ChangeAnim
trigger1   = prevstateno = 1301
value      = 1400
elem       = 2
persistent = 0




[State 1401, StateTypeSet]
type           = StateTypeSet
trigger1       = Animelemtime(3)>=0
statetype      = A       
physics        = N       
ignorehitpause = 1


[State 1401, VarSet];Reset (Strength Button)
type     = VarSet
trigger1 = !time
var(6)   = 0



[state 1401, Dust]
type = explod
trigger1 = animelemtime(3)=0
anim = 1216
id = 1216
facing = -1
pos = -30,4
postype = P1
sprpriority = -3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1

[State 1400, Not too many Wing attacks in a combo (explod)]
type = Explod
trigger1 = MoveHit
anim = 15999
id = 1400
removetime = -2
persistent = 0
ignorehitpause = 1





[State 1401, VelSet]
type           = VelSet
trigger1       = Animelemtime(3)=0
x              = 3.5;3.5
y              = -2;-2.4
ignorehitpause = 0
[State 1401, VelSet]
type           = VelSet
trigger1       = Animelemtime(7)=0
x              = 3;3.25
y              = -1.5;-3.125
ignorehitpause = 0
[State 1401, VelSet]
type           = VelSet
trigger1       = Animelemtime(14)=0
x              = 1;2
y              = -1;-2
ignorehitpause = 0 




[State 1401, Gravity]
type = Gravity
trigger1 = Animelemtime(16)>=0
ignorehitpause = 0
persistent = 1





[State 1401, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1400, 0




[State 1401, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 12 < 8, 8, fvar(11) * 12)), 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,15;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 1
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1;,-12
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -1.5,-6
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
air.fall = 1
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4
forcestand = 1
fall = NumExplod(1400)>1

[State 1401, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 12 < 8, 8, fvar(11) * 12)), 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,15;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 2;5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1;,-9
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -1.5,-6
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
air.fall = 1
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4
forcestand = 1
fall = NumExplod(1400)>1



;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1401, VarSet];Reset
;type     = VarSet
;trigger1 = !time
;var(4)   = 0
;[State 1401, VarSet];Reset
;type     = VarSet
;trigger1 = AnimelemTime(13)>=0
;var(4)   = 0
;[State 1401, VarSet];Change to 2nd Light Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_x"
;var(4)   = 1
;[State 1401, VarSet];Change to 2nd Medium Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_y"
;var(4)   = 2
;[State 1401, VarSet];Change to 2nd Heavy Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_z"
;var(4)   = 3

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1401, VarSet];Reset
type     = VarSet
trigger1 = !time
var(4)   = 0
[State 1401, VarSet];Reset
type     = VarSet
trigger1 = AnimelemTime(13)>=0
var(4)   = 0
[State 1401, VarSet];Change to 2nd Light Wing Attack
type     = VarSet
trigger1 = time > 7 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000200)
var(4)   = 1
[State 1401, VarSet];Change to 2nd Medium Wing Attack
type     = VarSet
trigger1 = time > 7 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000210)
var(4)   = 2
[State 1401, VarSet];Change to 2nd Heavy Wing Attack
type     = VarSet
trigger1 = time > 7 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000220)
var(4)   = 3

[State 1401, VarSet]; for the AI
type       = VarSet
trigger1   = time > 7 && AnimelemTime(13) < 0 && AILevel
var(4)     = 1*random%3



;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1401, ChangeState];Change to 2nd Light Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_x" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1405
;[State 1401, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=1
;value      = 1405

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1401, ChangeState];Change to 2nd Light Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000200)
value      = 1405
[State 1401, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=1
value      = 1405


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1401, ChangeState];Change to 2nd Medium Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_y" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1406
;[State 1401, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=2
;value      = 1406

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1401, ChangeState];Change to 2nd Medium Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000210)
value      = 1406
[State 1401, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=2
value      = 1406


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1401, ChangeState];Change to 2nd Heavy Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_z" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1407
;[State 1401, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=3
;value      = 1407

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1401, ChangeState];Change to 2nd Medium Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000220)
value      = 1407
[State 1401, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=3
value      = 1407




[State 1401, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=1
value      = 1405
[State 1401, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=2
value      = 1406
[State 1401, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=3
value      = 1407





[State 1401, CtrlSet]
type = CtrlSet
trigger1 = animelem = 15
value = 1


[State 1401, 5]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value = 52

;[State 1401, Levitation]
;type = ChangeState
;value = 109
;;triggerall = command = "a+b+c";"QCB_p";"UU"
;triggerall = NumExplod(90000230) && NumExplod(90000240) && NumExplod(90000250)
;triggerall = NumExplod(625) = 1	;only once
;triggerall = Pos y <= -50
;trigger1 = StateType = A; && ctrl



;---------------------------------------------------------------------------
;Heavy Wing Attack 
[Statedef 1402]
type    = S
movetype= A
physics = S
;juggle  = 4
velset  = 0,0
anim = 1400
poweradd= 30
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 2
ignorehitpause = 1
persistent = 0

[State 1402, ChangeAnim]
type       = ChangeAnim
trigger1   = prevstateno = 1301
value      = 1400
elem       = 2
persistent = 0




[State 1402, StateTypeSet]
type           = StateTypeSet
trigger1       = Animelemtime(3)>=0
statetype      = A       
physics        = N       
ignorehitpause = 1


[State 1402, VarSet];Reset (Strength Button)
type     = VarSet
trigger1 = !time
var(6)   = 0



[state 1402, Dust]
type = explod
trigger1 = animelemtime(3)=0
anim = 1216
id = 1216
facing = -1
pos = -30,4
postype = P1
sprpriority = -3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1

[State 1402, Not too many Wing attacks in a combo (explod)]
type = Explod
trigger1 = MoveHit
anim = 15999
id = 1400
removetime = -2
persistent = 0
ignorehitpause = 1




 
[State 1402, VelSet]
type           = VelSet
trigger1       = Animelemtime(3)=0
x              = 3.5;4.5
y              = -1.5;-2
ignorehitpause = 0
[State 1402, VelSet]
type           = VelSet
trigger1       = Animelemtime(7)=0
x              = 2.5;4.25
y              = -1.5;-2.8
ignorehitpause = 0
[State 1402, VelSet]
type           = VelSet
trigger1       = Animelemtime(14)=0
x              = 1;2
y              = -1;-2
ignorehitpause = 0 




[State 1402, Gravity]
type = Gravity
trigger1 = Animelemtime(16)>=0
ignorehitpause = 0
persistent = 1




[State 1402, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1400, 0



[State 1402, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 12 < 8, 8, fvar(11) * 12)), 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,15;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 1
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1;,-12
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -1.5,-6
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
air.fall = 1
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4
forcestand = 1
fall = NumExplod(1400)>1

[State 1402, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 12 < 8, 8, fvar(11) * 12)), 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,15;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 2;5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1;,-9
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -1.5,-6
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
air.fall = 1
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4
forcestand = 1
fall = NumExplod(1400)>1


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1402, VarSet];Reset
;type     = VarSet
;trigger1 = !time
;var(4)   = 0
;[State 1402, VarSet];Reset
;type     = VarSet
;trigger1 = AnimelemTime(13)>=0
;var(4)   = 0
;[State 1402, VarSet];Change to 2nd Light Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_x"
;var(4)   = 1
;[State 1402, VarSet];Change to 2nd Medium Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_y"
;var(4)   = 2
;[State 1402, VarSet];Change to 2nd Heavy Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_z"
;var(4)   = 3

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1402, VarSet];Reset
type     = VarSet
trigger1 = !time
var(4)   = 0
[State 1402, VarSet];Reset
type     = VarSet
trigger1 = AnimelemTime(13)>=0
var(4)   = 0
[State 1402, VarSet];Change to 2nd Light Wing Attack
type     = VarSet
trigger1 = time > 7 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000200)
var(4)   = 1
[State 1402, VarSet];Change to 2nd Medium Wing Attack
type     = VarSet
trigger1 = time > 7 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000210)
var(4)   = 2
[State 1402, VarSet];Change to 2nd Heavy Wing Attack
type     = VarSet
trigger1 = time > 7 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000220)
var(4)   = 3


[State 1402, VarSet]; for the AI
type       = VarSet
trigger1   = time > 7 && AnimelemTime(13) < 0 && AILevel
var(4)     = 1*random%3


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1402, ChangeState];Change to 2nd Light Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_x" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1405
;[State 1402, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=1
;value      = 1405

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1402, ChangeState];Change to 2nd Light Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000200)
value      = 1405
[State 1402, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=1
value      = 1405


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1402, ChangeState];Change to 2nd Medium Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_y" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1406
;[State 1402, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=2
;value      = 1406

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1402, ChangeState];Change to 2nd Medium Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000210)
value      = 1406
[State 1402, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=2
value      = 1406


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1402, ChangeState];Change to 2nd Heavy Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_z" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1407
;[State 1402, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=3
;value      = 1407

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1402, ChangeState];Change to 2nd Medium Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000220)
value      = 1407
[State 1402, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=3
value      = 1407



[State 1402, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=1
value      = 1405
[State 1402, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=2
value      = 1406
[State 1402, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=3
value      = 1407



[State 1402, CtrlSet]
type = CtrlSet
trigger1 = animelem = 15
value = 1


[State 1402, 5]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value = 52


;[State 1402, Levitation]
;type = ChangeState
;value = 109
;;triggerall = command = "a+b+c";"QCB_p";"UU"
;triggerall = NumExplod(90000230) && NumExplod(90000240) && NumExplod(90000250)
;triggerall = NumExplod(625) = 1	;only once
;triggerall = Pos y <= -50
;trigger1 = StateType = A; && ctrl




;---------------------------------------------------------------------------
;2nd Light Wing Attack 
[Statedef 1405]
type    = A
movetype= A
physics = N
;juggle  = 4
velset  = 0,0
anim = 1405
poweradd= 30
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 4
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1405, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0




[State 1405, VelSet]
type = VelSet
trigger1 = Animelem = 1
x = 0
y = 0
ignorehitpause = 0


[State 1405, VelSet]
type           = VelSet
trigger1       = Animelemtime(3)=0
x              = 2
y              = -2.75
ignorehitpause = 0
[State 1405, VelSet]
type           = VelSet
trigger1       = Animelemtime(7)=0
x              = 2
y              = -3.5
ignorehitpause = 0
[State 1405, VelSet]
type           = VelSet
trigger1       = Animelemtime(14)=0
x              = 2
y              = -2
ignorehitpause = 0  




[State 1405, Gravity]
type = Gravity
trigger1 = Animelemtime(16)>=0
ignorehitpause = 0
persistent = 1




[State 1405, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1400, 0

[State 1405, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 12 < 8, 8, fvar(11) * 12)), 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 1
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-15
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -1.5,-8
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4

[State 1405, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 12 < 8, 8, fvar(11) * 12)), 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 2;5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-11
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -1.5,-8
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4




;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, VarSet];Reset
;type     = VarSet
;trigger1 = !time
;var(4)   = 0
;[State 1400, VarSet];Reset
;type     = VarSet
;trigger1 = AnimelemTime(13)>=0
;var(4)   = 0
;[State 1400, VarSet];Change to 2nd Light Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_x"
;var(4)   = 1
;[State 1400, VarSet];Change to 2nd Medium Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_y"
;var(4)   = 2
;[State 1400, VarSet];Change to 2nd Heavy Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_z"
;var(4)   = 3

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1405, VarSet];Reset
type     = VarSet
trigger1 = !time
var(4)   = 0
[State 1405, VarSet];Reset
type     = VarSet
trigger1 = AnimelemTime(13)>=0
var(4)   = 0
[State 1405, VarSet];Change to 2nd Light Wing Attack
type     = VarSet
trigger1 = time > 1 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000200)
var(4)   = 1
[State 1405, VarSet];Change to 2nd Medium Wing Attack
type     = VarSet
trigger1 = time > 1 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000210)
var(4)   = 2
[State 1405, VarSet];Change to 2nd Heavy Wing Attack
type     = VarSet
trigger1 = time > 1 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000220)
var(4)   = 3

[State 1405, VarSet]; for the AI
type       = VarSet
trigger1   = time > 1 && AnimelemTime(13) < 0 && AILevel
var(4)     = 1*random%3


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, ChangeState];Change to 2nd Light Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_x" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1410
;[State 1400, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=1
;value      = 1410

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1405, ChangeState];Change to 2nd Light Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000200)
value      = 1410
[State 1405, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=1
value      = 1410


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, ChangeState];Change to 2nd Medium Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_y" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1411
;[State 1400, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=2
;value      = 1411

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1405, ChangeState];Change to 2nd Medium Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000210)
value      = 1411
[State 1405, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=2
value      = 1411


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, ChangeState];Change to 2nd Heavy Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_z" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1412
;[State 1400, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=3
;value      = 1412

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1405, ChangeState];Change to 2nd Heavy Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000220)
value      = 1412
[State 1405, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=3
value      = 1412




[State 1405, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0 && ceil(random < 400 * (AILevel**2/64.0))
trigger1   = var(4)=1
value      = 1410
[State 1405, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0 && ceil(random < 400 * (AILevel**2/64.0))
trigger1   = var(4)=2
value      = 1411
[State 1405, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0 && ceil(random < 400 * (AILevel**2/64.0))
trigger1   = var(4)=3
value      = 1412





[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelem = 15
value = 1


[State 1405, 5]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value = 52


[State 1405, Levitation]
type = ChangeState
value = 109
;triggerall = command = "a+b+c";"QCB_p";"UU"
triggerall = NumExplod(90000230) && NumExplod(90000240) && NumExplod(90000250)
triggerall = NumExplod(625) = 1	;only once
triggerall = Pos y <= -50
trigger1 = StateType = A; && ctrl




;---------------------------------------------------------------------------
;2nd Medium Wing Attack 
[Statedef 1406]
type    = A
movetype= A
physics = N
;juggle  = 4
velset  = 0,0
anim = 1405
poweradd= 30
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 4
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1406, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0



[State 1406, VelSet]
type = VelSet
trigger1 = Animelem = 1
x = 0
y = 0
ignorehitpause = 0

[State 1406, VelSet]
type           = VelSet
trigger1       = Animelemtime(3)=0
x              = 3.5
y              = -2.4
ignorehitpause = 0
[State 1406, VelSet]
type           = VelSet
trigger1       = Animelemtime(7)=0
x              = 3.25
y              = -3.125
ignorehitpause = 0
[State 1406, VelSet]
type           = VelSet
trigger1       = Animelemtime(14)=0
x              = 2
y              = -2
ignorehitpause = 0




[State 1406, Gravity]
type = Gravity
trigger1 = Animelemtime(16)>=0
ignorehitpause = 0
persistent = 1



[State 1406, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1400, 0


[State 1406, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 12 < 8, 8, fvar(11) * 12)), 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 1
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-15
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -1.5,-8
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4

[State 1406, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 12 < 8, 8, fvar(11) * 12)), 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 2;5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-11
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -1.5,-8
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, VarSet];Reset
;type     = VarSet
;trigger1 = !time
;var(4)   = 0
;[State 1400, VarSet];Reset
;type     = VarSet
;trigger1 = AnimelemTime(13)>=0
;var(4)   = 0
;[State 1400, VarSet];Change to 2nd Light Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_x"
;var(4)   = 1
;[State 1400, VarSet];Change to 2nd Medium Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_y"
;var(4)   = 2
;[State 1400, VarSet];Change to 2nd Heavy Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_z"
;var(4)   = 3

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1406, VarSet];Reset
type     = VarSet
trigger1 = !time
var(4)   = 0
[State 1406, VarSet];Reset
type     = VarSet
trigger1 = AnimelemTime(13)>=0
var(4)   = 0
[State 1406, VarSet];Change to 2nd Light Wing Attack
type     = VarSet
trigger1 = time > 1 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000200)
var(4)   = 1
[State 1406, VarSet];Change to 2nd Medium Wing Attack
type     = VarSet
trigger1 = time > 1 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000210)
var(4)   = 2
[State 1406, VarSet];Change to 2nd Heavy Wing Attack
type     = VarSet
trigger1 = time > 1 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000220)
var(4)   = 3


[State 1406, VarSet]; for the AI
type       = VarSet
trigger1   = time > 1 && AnimelemTime(13) < 0 && AILevel
var(4)     = 1*random%3



;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, ChangeState];Change to 2nd Light Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_x" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1410
;[State 1400, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=1
;value      = 1410

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1406, ChangeState];Change to 2nd Light Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000200)
value      = 1410
[State 1406, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=1
value      = 1410


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, ChangeState];Change to 2nd Medium Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_y" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1411
;[State 1400, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=2
;value      = 1411

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1406, ChangeState];Change to 2nd Medium Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000210)
value      = 1411
[State 1406, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=2
value      = 1411


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, ChangeState];Change to 2nd Heavy Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_z" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1412
;[State 1400, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=3
;value      = 1412

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1406, ChangeState];Change to 2nd Heavy Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000220)
value      = 1412
[State 1406, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=3
value      = 1412



[State 1406, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0 && ceil(random < 400 * (AILevel**2/64.0))
trigger1   = var(4)=1
value      = 1410
[State 1406, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0 && ceil(random < 400 * (AILevel**2/64.0))
trigger1   = var(4)=2
value      = 1411
[State 1406, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0 && ceil(random < 400 * (AILevel**2/64.0))
trigger1   = var(4)=3
value      = 1412



[State 1406, CtrlSet]
type = CtrlSet
trigger1 = animelem = 15
value = 1


[State 1406, 5]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value = 52

[State 1406, Levitation]
type = ChangeState
value = 109
;triggerall = command = "a+b+c";"QCB_p";"UU"
triggerall = NumExplod(90000230) && NumExplod(90000240) && NumExplod(90000250)
triggerall = NumExplod(625) = 1	;only once
triggerall = Pos y <= -50
trigger1 = StateType = A; && ctrl



;---------------------------------------------------------------------------
;2nd Wing Heavy Attack 
[Statedef 1407]
type    = A
movetype= A
physics = N
;juggle  = 4
velset  = 0,0
anim = 1405
poweradd= 30
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 4
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1407, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0


[State 1407, VelSet]
type = VelSet
trigger1 = Animelem = 1
x = 0
y = 0
ignorehitpause = 0


[State 1407, VelSet]
type           = VelSet
trigger1       = Animelemtime(3)=0
x              = 4.5
y              = -2
ignorehitpause = 0
[State 1407, VelSet]
type           = VelSet
trigger1       = Animelemtime(7)=0
x              = 4.25
y              = -2.8
ignorehitpause = 0
[State 1407, VelSet]
type           = VelSet
trigger1       = Animelemtime(14)=0
x              = 2
y              = -2
ignorehitpause = 0  




[State 1407, Gravity]
type = Gravity
trigger1 = Animelemtime(16)>=0
ignorehitpause = 0
persistent = 1




[State 1407, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1400, 0




[State 1407, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 12 < 8, 8, fvar(11) * 12)), 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 1
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-15
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -1.5,-8
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4

[State 1407, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 12 < 8, 8, fvar(11) * 12)), 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 2;5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-11
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -1.5,-8
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4




;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, VarSet];Reset
;type     = VarSet
;trigger1 = !time
;var(4)   = 0
;[State 1400, VarSet];Reset
;type     = VarSet
;trigger1 = AnimelemTime(13)>=0
;var(4)   = 0
;[State 1400, VarSet];Change to 2nd Light Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_x"
;var(4)   = 1
;[State 1400, VarSet];Change to 2nd Medium Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_y"
;var(4)   = 2
;[State 1400, VarSet];Change to 2nd Heavy Wing Attack
;type     = VarSet
;trigger1 = time > 7 && AnimelemTime(13) < 0
;trigger1 = command = "QCF_z"
;var(4)   = 3

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1407, VarSet];Reset
type     = VarSet
trigger1 = !time
var(4)   = 0
[State 1407, VarSet];Reset
type     = VarSet
trigger1 = AnimelemTime(13)>=0
var(4)   = 0
[State 1407, VarSet];Change to 2nd Light Wing Attack
type     = VarSet
trigger1 = time > 1 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000200)
var(4)   = 1
[State 1407, VarSet];Change to 2nd Medium Wing Attack
type     = VarSet
trigger1 = time > 1 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000210)
var(4)   = 2
[State 1407, VarSet];Change to 2nd Heavy Wing Attack
type     = VarSet
trigger1 = time > 1 && AnimelemTime(13) < 0 && !AILevel
trigger1 = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1 = NumExplod(90000220)
var(4)   = 3

[State 1407, VarSet]; for the AI
type       = VarSet
trigger1   = time > 1 && AnimelemTime(13) < 0 && AILevel
var(4)     = 1*random%3


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, ChangeState];Change to 2nd Light Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_x" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1410
;[State 1400, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=1
;value      = 1410

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE



[State 1407, ChangeState];Change to 2nd Light Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000200)
value      = 1410
[State 1407, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=1
value      = 1410


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, ChangeState];Change to 2nd Medium Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_y" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1411
;[State 1400, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=2
;value      = 1411

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1407, ChangeState];Change to 2nd Medium Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000210)
value      = 1411
[State 1407, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=2
value      = 1411


;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE

;[State 1400, ChangeState];Change to 2nd Heavy Wing Attack
;type       = ChangeState
;;triggerall = !AILevel
;trigger1   = command = "QCF_z" && AnimelemTime(12)>=1 && AnimelemTime(13) < 0
;value      = 1412
;[State 1400, ChangeState]
;type       = Changestate
;;triggerall = !AILevel
;triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
;trigger1   = var(4)=3
;value      = 1412

;OLD CODE OLD CODE OLD CODE OLD CODE OLD CODE


[State 1407, ChangeState];Change to 2nd Heavy Wing Attack
type       = ChangeState
triggerall = AnimelemTime(12)>=1 && AnimelemTime(13) < 0 && !AILevel
trigger1   = IfElse(Facing = 1,(NumExplod(90010006)),NumExplod(90010104))
trigger1   = NumExplod(90000220)
value      = 1412
[State 1407, ChangeState]
type       = Changestate
triggerall = !AILevel
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0
trigger1   = var(4)=3
value      = 1412




[State 1407, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0 && ceil(random < 400 * (AILevel**2/64.0))
trigger1   = var(4)=1
value      = 1410
[State 1407, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0 && ceil(random < 400 * (AILevel**2/64.0))
trigger1   = var(4)=2
value      = 1411
[State 1407, AI ChangeState]
type       = Changestate
triggerall = AILevel && RoundState = 2
triggerall = AnimelemTime(12)>=0 && AnimelemTime(13) < 0 && ceil(random < 400 * (AILevel**2/64.0))
trigger1   = var(4)=3
value      = 1412





[State 1407, CtrlSet]
type = CtrlSet
trigger1 = animelem = 15
value = 1


[State 1407, 5]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value = 52

[State 1407, Levitation]
type = ChangeState
value = 109
;triggerall = command = "a+b+c";"QCB_p";"UU"
triggerall = NumExplod(90000230) && NumExplod(90000240) && NumExplod(90000250)
triggerall = NumExplod(625) = 1	;only once
triggerall = Pos y <= -50
trigger1 = StateType = A; && ctrl



;---------------------------------------------------------------------------
;Final Light Wing Attack 
[Statedef 1410]
type    = A
movetype= A
physics = N
;juggle  = 4
velset  = 0,0
anim = 1405
poweradd= 30
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 4
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1410, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0





[State 1410, VarSet];Reset
type     = VarSet
trigger1 = !time
var(4)   = 0


[State 1410, VelSet]
type = VelSet
trigger1 = Animelem = 1
x = 0
y = 0
ignorehitpause = 0

[State 1410, VelSet]
type           = VelSet
trigger1       = Animelemtime(3)=0
x              = 2
y              = -2.75
ignorehitpause = 0
[State 1410, VelSet]
type           = VelSet
trigger1       = Animelemtime(7)=0
x              = 2
y              = -3.5
ignorehitpause = 0
[State 1410, VelSet]
type           = VelSet
trigger1       = Animelemtime(14)=0
x              = 2
y              = -2
ignorehitpause = 0 




[State 1410, Gravity]
type = Gravity
trigger1 = Animelemtime(16)>=0
ignorehitpause = 0
persistent = 1


[State 1410, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1400, 0

[State 1410, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 12 < 8, 8, fvar(11) * 12)), 4
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 1
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-15
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -3,-8
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4

[State 1410, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 16 < 10, 10, fvar(11) * 16)), 4
getpower = 0,0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-9
guard.velocity = -6
airguard.velocity = -2,-3
air.type = High	
air.velocity = -3,-10
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
fall.recovertime = 999
envshake.time = 7
envshake.freq = 80
envshake.ampl = -3
id = 1415

[State 1410, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = Numtarget(1415)
trigger1 = !(target, ishelper)
value = 755;763
ignorehitpause = 1
persistent = 0
id = 1415





[State 1410, 5]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value = 52

;---------------------------------------------------------------------------
;Final Medium Wing Attack 
[Statedef 1411]
type    = A
movetype= A
physics = N
;juggle  = 4
velset  = 0,0
anim = 1405
poweradd= 30
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 4
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1411, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0




[State 1411, VarSet];Reset
type     = VarSet
trigger1 = !time
var(4)   = 0



[State 1411, VelSet]
type = VelSet
trigger1 = Animelem = 1
x = 0
y = 0
ignorehitpause = 0

[State 1411, VelSet]
type           = VelSet
trigger1       = Animelemtime(3)=0
x              = 3.5
y              = -2.4
ignorehitpause = 0
[State 1411, VelSet]
type           = VelSet
trigger1       = Animelemtime(7)=0
x              = 3.25
y              = -3.125
ignorehitpause = 0
[State 1411, VelSet]
type           = VelSet
trigger1       = Animelemtime(14)=0
x              = 2
y              = -2
ignorehitpause = 0




[State 1411, Gravity]
type = Gravity
trigger1 = Animelemtime(16)>=0
ignorehitpause = 0
persistent = 1




[State 1411, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1400, 0

[State 1411, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 12 < 8, 8, fvar(11) * 12)), 4
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 1
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-15
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -3,-8
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4

[State 1411, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 16 < 10, 10, fvar(11) * 16)), 4
getpower = 0,0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-9
guard.velocity = -6
airguard.velocity = -2,-3
air.type = High	
air.velocity = -3,-10
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
fall.recovertime = 999
envshake.time = 7
envshake.freq = 80
envshake.ampl = -3
id = 1415

[State 1411, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = Numtarget(1415)
trigger1 = !(target, ishelper)
value = 755;763
ignorehitpause = 1
persistent = 0
id = 1415





[State 1411, 5]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value = 52

;---------------------------------------------------------------------------
;Final Heavy Wing Attack 
[Statedef 1412]
type    = A
movetype= A
physics = N
;juggle  = 4
velset  = 0,0
anim = 1405
poweradd= 30
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 4
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0

[State 1412, OM PalFX]
type = PalFX
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
time = 2
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0




[State 1412, VarSet];Reset
type     = VarSet
trigger1 = !time
var(4)   = 0


[State 1412, VelSet]
type = VelSet
trigger1 = Animelem = 1
x = 0
y = 0
ignorehitpause = 0

[State 1412, VelSet]
type           = VelSet
trigger1       = Animelemtime(3)=0
x              = 4.5
y              = -2
ignorehitpause = 0
[State 1412, VelSet]
type           = VelSet
trigger1       = Animelemtime(7)=0
x              = 4.25
y              = -2.8
ignorehitpause = 0
[State 1412, VelSet]
type           = VelSet
trigger1       = Animelemtime(14)=0
x              = 2
y              = -2
ignorehitpause = 0 




[State 1412, Gravity]
type = Gravity
trigger1 = Animelemtime(16)>=0
ignorehitpause = 0
persistent = 1








[State 1412, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1400, 0

[State 1412, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 12 < 8, 8, fvar(11) * 12)), 4
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 1
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-15
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -3,-8
air.hittime = 12
air.animtype = back
getpower= IfElse(P2MoveType=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recovertime = 45
envshake.time = 4;10
envshake.freq = 45;120
envshake.ampl = -2;-4

[State 1412, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 16 < 10, 10, fvar(11) * 16)), 4
getpower = 0,0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5;10, 11
guard.pausetime = 5,5;11,11
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-9
guard.velocity = -6
airguard.velocity = -2,-3
air.type = High	
air.velocity = -3,-10
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
fall.recovertime = 999
envshake.time = 7
envshake.freq = 80
envshake.ampl = -3
id = 1415

[State 1412, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = Numtarget(1415)
trigger1 = !(target, ishelper)
value = 755;763
ignorehitpause = 1
persistent = 0
id = 1415





[State 1412, 5]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value = 52



;---------------------------------------------------------------------------
;EX Wing Attack 
[Statedef 1420]
type    = S
movetype= A
physics = S
juggle  = 0;1
velset  = 0,0
anim = 1420
poweradd= -500
ctrl = 0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 1
ignorehitpause = 1
persistent = 0

[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 9;3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0


[State 1420, Width]
type = Width
trigger1 = AnimElemTime(1)>=0
value = 15,15
ignorehitpause = 1


[State 1420, StateTypeSet]
type = StateTypeSet
trigger1 = Animelemtime(3)>=0
statetype = A       
physics = N       
ignorehitpause = 1

[State 1420, PosAdd]
type     = PosAdd
trigger1 = Animelem = 3
x        = 20



[state 1420, Dust]
type = explod
trigger1 = animelemtime(3)=0
anim = 1207
id = 1207
pos = -30,4
postype = P1
sprpriority = -3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1



[State 1420, PalFX]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 1420, Trail]
type = AfterImage
trigger1 = Time = 0
time = 40;20
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1




[State 1420, VelSet]
type = VelSet
trigger1 = Animelemtime(3)=0
x = 4
y = -3
ignorehitpause = 0




[State 1420, VelSet]
type = VelSet
trigger1 = Animelemtime(7)=0
x = 3
y = -3.5
ignorehitpause = 0


[State 1420, VelSet]
type = VelSet
trigger1 = Animelemtime(38)=0
x = 1
y = -2.5
ignorehitpause = 0 

[State 1420, Gravity]
type = Gravity
trigger1 = Animelemtime(40)>=0
ignorehitpause = 0
persistent = 1






[State 1420, EX Sound - PlaySnd]
type = PlaySnd
trigger1 = !Time
value = 7, 0
ignorehitpause = 1



[State 1400, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3 || AnimElem = 15 || AnimElem = 27
value = 1400, 0

[State 1420, Hitdef] ;frame 1400,3  1400,5    1400,23
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 23 < 10, 10, fvar(11) * 23)), 8
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5
guard.pausetime = 5,5
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-12
guard.velocity = -6
airguard.velocity = -2,-3
air.type = High	
air.velocity = -3,-7
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
fall.recovertime = 999
envshake.time = 7
envshake.freq = 80
envshake.ampl = -3
forcestand = 1
id = 1415

[State 1420, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 16
trigger2 = AnimElem = 18 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 23 < 10, 10, fvar(11) * 23)), 8
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5
guard.pausetime = 5,5
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-12
guard.velocity = -6
airguard.velocity = -2,-3
air.type = High	
air.velocity = -3,-7
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
fall.recovertime = 999
envshake.time = 7
envshake.freq = 80
envshake.ampl = -3
id = 1415

[State 1420, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 28
trigger2 = AnimElem = 30 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 23 < 10, 10, fvar(11) * 23)), 8
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5
guard.pausetime = 5,5
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-12
guard.velocity = -6
airguard.velocity = -2,-3
air.type = High	
air.velocity = -3,-7
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
fall.recovertime = 999
envshake.time = 7
envshake.freq = 80
envshake.ampl = -3
id = 1415

[State 1420, Hitdef]; frame 1400,7   1400,9
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 23 < 10, 10, fvar(11) * 23)), 8
getpower = 0,0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5
guard.pausetime = 5,5
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-9
guard.velocity = -6
airguard.velocity = -2,-3
air.type = High	
air.velocity = -3,-7
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
fall.recovertime = 999
envshake.time = 7
envshake.freq = 80
envshake.ampl = -3
id = 1415

[State 1420, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 20
trigger2 = AnimElem = 22 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 23 < 10, 10, fvar(11) * 23)), 8
getpower = 0,0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5
guard.pausetime = 5,5
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-9
guard.velocity = -6
airguard.velocity = -2,-3
air.type = High	
air.velocity = -3,-7
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
fall.recovertime = 999
envshake.time = 7
envshake.freq = 80
envshake.ampl = -3
id = 1415

[State 1420, Hitdef]
type = HitDef
triggerall = Var(18) <= 55
trigger1 = AnimElem = 32
trigger2 = AnimElem = 34 && !MoveContact
attr = A, SA
damage = Ceil(IfElse(fvar(11) * 23 < 10, 10, fvar(11) * 23)), 8
getpower = 0,0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,5
guard.pausetime = 5,5
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12,-75
hitsound = s5, 5
guardsound = S6,0
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -1,-9
guard.velocity = -6
airguard.velocity = -2,-3
air.type = High	
air.velocity = -3,-10
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
fall.recovertime = 999
envshake.time = 7
envshake.freq = 80
envshake.ampl = -3
id = 1420

[State 1420, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = Numtarget(1420)
trigger1 = !(target, ishelper)
value = 755 ;763
ignorehitpause = 1
persistent = 0
id = 1420





[State 1420, 5]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -12
value = 52













;===========================================================================
; <<<<< KIAI- FOCUS ATTACK >>>>>
; Charge state 1 = 1500
; Charge state 2 (when hit) = 1501
; Actual attack = 1502
; Helper for repel = 1505
; Destroyed helper = 1506
; Reflect with random projectile = 1508
; Reflected projectile = 1515
; Reflected projectile explods = 1516
; Custom state when hit by slashing chop max charge = 1520
;===========================================================================

;Focus Strike - charge state 1
;This state covers the charging aspect of the Focus Strike attack at the start.
[Statedef 1500]
type = S
movetype = I
physics = S
;juggle = 10
anim = 1500
ctrl = 0
poweradd = 0
velset = 0,0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 10
ignorehitpause = 1
persistent = 0
 
; These next two sctrls cover initial charge value and building it up
[State 900, starting value]
type = VarSet
trigger1 = time = 1 && var(20)
fvar(9) = 0
 
[State 900, adding to value]
type = VarAdd
trigger1 = time >= 1
fv = 9
value = 1
persistent = 1

[State 8000, flash]
type = PalFX
trigger1 = time =10 
add = 40, 30, -40
sinadd = 50,50,50,16
time = 40
 
; These change states control dash cancels and moving into the attack portion
[State 900, dash cancel back]
type = ChangeState
trigger1 = time >= 8 && command = "BB"
trigger2 = Ailevel>=1&&numenemy&&(enemynear,inguarddist)&&(enemynear,vel x>1)
value = 105
 
[State 900, dash cancel forward]
type = ChangeState
trigger1 = time >= 8 && command = "FF"
value = 100
 
[State 900, stopping early]
type = ChangeState
trigger1 = time >= 8 && command != "hold_c" && command !="hold_z"
trigger2 = Ailevel>=1&&numenemy&&(enemynear,inguarddist)&&Movetype=A
value = 1502
 
[State 900, fully charged]
type = ChangeState
trigger1 = fvar(9)>=60
value = 1502
 
;---------------------------------------------
;Focus Strike - charge state 2
;This state covers the charging aspect of the Focus Strike attack if hit
[Statedef 1501]
type = S
movetype = I
physics = S
juggle = 0;10
ctrl = 0
poweradd = 0
velset = 0,0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 10
ignorehitpause = 1
persistent = 0
 
; This part covers the after effects of getting hit from earlier.
[state 901, no more saving hit]
type = varset
trigger1 = time = 1
var(20) = 0

[State 8000, hitsnd]
type = Playsnd
trigger1 = time = 0
value = 1301,0

[State 8000, flash]
type = PalFX
trigger1 = time%10=0
add = 150, 30, 30
sinadd = 50,50,50,16
time = 10
 
[State 901, life removal]
type = LifeAdd
trigger1 = time = 1 && !var(20)
value = -(gethitvar(damage))
kill = 1

[State 901, Killed]
type = ChangeState
trigger1 = life <= 0
value = 5950
 
; This ctrl changes the animframe back to the last active one
[State 901, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 1500
elem = var(23)
 
; This varset is the continuation of charging
[State 901, adding to charge]
type = VarAdd
trigger1 = time >= 1
fv = 9
value = 1
persistent = 1
 
; These change states control dash cancels and moving into the attack portion
[State 900, dash cancel back]
type = ChangeState
trigger1 = time >= 8 && command = "BB"
trigger2 = Ailevel>=1&&numenemy&&(enemynear,inguarddist)&&(enemynear,vel x>1)
value = 105

[State 900, dash cancel forward]
type = ChangeState
trigger1 = time >= 8 && command = "FF"
value = 100

[State 900, stopping early]
type = ChangeState
trigger1 = time >= 8 && command != "hold_c" && command !="hold_z"
trigger2 = Ailevel>=1&&numenemy&&(enemynear,inguarddist)&&Movetype=A
value = 1502
 
[State 901, fully charged]
type = ChangeState
trigger1 = fvar(9)>=60
value = 1502
 
;----------------------------------------
;Focus Attack - actual attack
[Statedef 1502]
type = S
movetype = A
physics = S
juggle = 0;10
anim = 1501
ctrl = 0
velset = 0,0

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 10
ignorehitpause = 1
persistent = 0
 
;PalFX sctrls; the first removes any earlier stuff, and the second the white flash that appears if you have maxed out focus
[state 901, cancel earlier fx flash]
type = PalFx
trigger1 = time = 0
add = 0,0,0
time = 0
 
[state 901, bright flash if maxed out]
type = PalFx
triggerall = FVar(9) = 60
trigger1 = time = 1
add = 128,128,128
sinadd = -128,-128,-128,32
time = 8


[State 2004, Voice]
type = PlaySnd
triggerall = NumExplod(389115)=0
trigger1 = AnimElemTime (1) = 0
value = 85,3
volumescale = 150
channel = 0



[State 1302, 2]
type = PlaySnd
trigger1 = AnimElem = 2 
value = 0,2 

[State 1302, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1301,10 



[State 4000, Invincible]
type = NotHitBy
trigger1 = animelemtime(2) >= 0 && animelemtime(8) < 0
value = ,NP, SP

[State 1300, repel helper]
type = helper
trigger1 = animelemtime(2) = 0
helpertype = normal
stateno = 1505
ID = 1505
name = "repel"
postype = p1
pos = 50, -40




[State 1502, Kiai attack FX (Front)]
type           = Explod
trigger1       = AnimElemTime(2) = 0
anim           = 1508
id             = 1508
pos            = 30,-80
postype        = P1
sprpriority    = 0;4
ownpal         = 1
removetime     = -2
persistent     = 0
ignorehitpause = 1
[State 1502, Kiai attack FX (Back)]
type           = Explod
trigger1       = AnimElemTime(2) = 0
anim           = 1509
id             = 1509
pos            = 30,-80
postype        = P1
sprpriority    = 4;0
ownpal         = 1
removetime     = -2
persistent     = 0
ignorehitpause = 1





[state 1215, Smoke FX]
type = explod
trigger1 = animelemtime(2)=1
anim = 1207
id = 1206
pos = 30,0
postype = P1
sprpriority = -3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1

 
; The hitdef used depends on the how long you've been charging. In case you are wondering why there are 2 versions of each lvl's
; hitdef, the second one has been refined to compensate for hitting air opponents.
; LV 1
[State 902, 0-30]
type = HitDef
triggerall = Var(18) <= 55
triggerall = P2stateno != [5020,5040]
triggerall = p2stateno != [154,155]
trigger1 = AnimElem = 2 && (FVar(9) < 60)
attr = S, NA
;damage = 32,0
damage = ceil(IfElse(fvar(11) * 32 < 7, 7, fvar(11) * 32)), 0
animtype = Hard
guardflag = M
hitflag = M
priority = 4, Hit
pausetime = 8, 9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-74;65
hitsound   = s5, 2
guardsound = S6,0
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -8.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
air.fall = 1
air.juggle = 15
fall = (p2movetype=H)
 
[State 902, 0-30]
type = HitDef
triggerall = Var(18) <= 55
triggerall = P2stateno != [5020,5040]
triggerall = p2stateno != [154,155]
triggerall = p2statetype = A
trigger1 = AnimElem = 2 && (FVar(9) < 60)
attr = S, NA
;damage= 32,0
damage = ceil(IfElse(fvar(11) * 32 < 7, 7, fvar(11) * 32)), 0
animtype = Hard
guardflag = A
hitflag = A
priority = 4, Hit
pausetime = 8, 9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-74;65
hitsound   = s5, 2
guardsound = S6,0
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -6.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
air.fall = 1
air.juggle = 15
fall = (p2movetype=H)
 
; LV 2 MAX
[State 902, max-charge]
type = HitDef
triggerall = Var(18) <= 55
triggerall = P2stateno != [5020,5040]
triggerall = p2stateno != [154,155]
trigger1 = AnimElem = 2 && FVar(9) = 60
attr = S, NA
;damage = 59,0
damage = ceil(IfElse(fvar(11) * 59 < 7, 7, fvar(11) * 59)), 0
animtype = Hard
;guardflag = MA ;<-- Commented out as you will not be blocking this. This will hurt, and you will fall!
hitflag = MAF
priority = 4, Hit
pausetime = 13, 14
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-74;65
hitsound   = s5, 6
guardsound = S6,0
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -4.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
air.fall = 1
air.juggle = 15
ID = 1502   ;add this line
;p2stateno = 1520 ; <- Opponent sent to flying state

[State 0, TargetState]  ;New state
type = TargetState
trigger1 = Numtarget(1502)
trigger1 = movehit = 1
value = 1520
ID = 1502
ignorehitpause = 1
persistent = 0

 
[State 902, max-charge]
type = HitDef
triggerall = Var(18) <= 55
triggerall = P2stateno != [5020,5040]
triggerall = p2stateno != [154,155]
triggerall = p2statetype = A
trigger1 = AnimElem = 2 && FVar(9) = 60
attr = S, NA
;damage = 59,0
damage = ceil(IfElse(fvar(11) * 59 < 7, 7, fvar(11) * 59)), 0
animtype = Hard
hitflag = A
priority = 6, Hit
pausetime = 13, 14
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-74;65
hitsound   = s5, 6
guardsound = S6,0
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -4.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
air.fall = 1
air.juggle = 15
 
[State 902, fvar reset]
type = VarSet
trigger1 = !AnimTime
fvar(9) = 0
 
;Dash Cancels upon movecontact
;[State 902, dash cancel]
;type = ChangeState
;trigger1 = Movecontact && command = "FF"
;value = 100
; 
;[State 902, dash cancel]
;type = ChangeState
;trigger1 = Movecontact && command = "BB"
;value = 105

;Dash Cancels upon movecontact
[State 902, dash cancel]
type = ChangeState
trigger1 = Movecontact && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001016)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001064)) && !AILevel
trigger2 = AILevel>=1 && movecontact && random<150
value = Cond(P2Dist X < -12, 105, 100)
ignorehitpause = 1

[State 902, dash cancel]
type = ChangeState
trigger1 = Movecontact && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001064)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001016)) && !AILevel
trigger2 = AILevel>=1 && movecontact && random<250
value = Cond(P2Dist X < -12, 100, 105)
ignorehitpause = 1
 
[State 902, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;-------------------------------------
;Custom state
[Statedef 1520]
type = A
movetype = H
physics = N
anim = IfElse(selfanimexist(5052),5052,5030)
ctrl = 0
velset = -7, -5
facep2 = 1

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 1
 
[State 9011, VelAdd]
type = VelAdd
trigger1 = (Pos Y < 0)
y = 0.35
 
[State 9011, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
 
[State 9011, ChangeState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100






;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; (OM) Taiyoken
[Statedef 1700]
type    = S
movetype= A
physics = S
;juggle  = 7
VelSet = 0,0
ctrl = 0
anim = 1700
poweradd = -500
sprpriority = 2

[State 0, Juggle variable]
type = VarAdd
trigger1 = MoveHit = 1
trigger1 = P2StateType = A
var(18) = 7 ;?
ignorehitpause = 1
persistent = 0


[State 1700, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = S85,1700+random%2;S80,1700+random%2
volumescale = 100
channel = 0







[State 1700, Solar Helper]
type = Helper
trigger1 = AnimElem = 4
helpertype = normal
stateno = 1701
ID = 1701
name = "Solar Flare"
postype = p1
ownpal = 1
pos = 0,0

[State 1700, Helper - effect]
type = Helper
trigger1 = AnimElemTime(4) = 3
helpertype = normal
name = "Solar Flare - effect"
ID = 1703
stateno = 1703
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 1



[State 1700, AssertSpecial]
type = AssertSpecial
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(8) < 0
flag = NoShadow
ignorehitpause = 1
persistent = 1





[State 1700, No Attack Distance]	;this allows counter messages AND enemy guarding
type = AttackDist
trigger1 = AnimElemTime(5)>=0		;after the attack's hit properties are finished working
value = 0				;there's no distance between attacker and defender

[State 1700, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;Taiyoken - custom state 1 (stand)
[Statedef 1705]
type     = S
movetype = H
physics  = S
velset   = 0,0

[State 1705, PosSet]
type           = PosSet
trigger1       = 1
y              = 0
ignorehitpause = 1

[State 1705, ChangeAnim]
type     = ChangeAnim2
Trigger1 = Time = 0
value    = 1705

[State 1705, ChangeState]
type     = ChangeState
trigger1 = time = 30
value    = 1706


;---------------------------------------------------------------------------
;Taiyoken - custom state 2 (stand)
[Statedef 1706]
type     = S
movetype = H
physics  = S
velset   = 0,0

[State 1706, ChangeAnim]
type     = ChangeAnim
trigger1 = (selfanimexist(15312)) && (time = 0)
value    = 15312

[State 1706, ChangeAnim]
type     = ChangeAnim
trigger1 = (!selfanimexist(15312)) && (time = 0)
value    = 5300

[State 1706, Selfstate]
type     = Selfstate
trigger1 = time = 100
value    = 0
ctrl     = 1


;---------------------------------------------------------------------------
;Taiyoken - custom state 1 (air)
[Statedef 1707]
type     = L
movetype = H
physics  = N
velset   = 0,0

[State 1707, ChangeAnim]
type     = ChangeAnim
Trigger1 = Time = 0
value    = 5030

[State 1707, Gravity]
type     = Gravity
trigger1 = time > 7

[State 1707, ChangeState]
type     = ChangeState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value    = 1708


;---------------------------------------------------------------------------
;Taiyoken - custom state 2a (air)
[Statedef 1708]
type     = L
movetype = H
physics  = N
velset   = 0,0

[State 1708, PosSet]
type     = PosSet
trigger1 = time = 0
y        = 0

[State 1708, ChangeAnim]
type     = ChangeAnim
Trigger1 = Time = 0
value    = 5100

[State 1708, ChangeState]
type     = ChangeState
trigger1 = time = 3
value    = 1709


;---------------------------------------------------------------------------
;Taiyoken - custom state 2b (air)
[Statedef 1709]
type     = L
movetype = H
physics  = N
velset   = 0,0

[State 1709, PosSet]
type     = PosSet
trigger1 = time = 0
y        = 0

[State 1709, ChangeAnim]
type     = ChangeAnim
Trigger1 = Time = 0
value    = 5110

[State 1709, ChangeState]
type     = ChangeState
trigger1 = time = 30
value    = 1710


;---------------------------------------------------------------------------
;Taiyoken - custom state 3 (air)
[Statedef 1710]
type     = L
movetype = H
physics  = N
velset   = 0,0

[State 1710,ChangeAnim]
type     = ChangeAnim
Trigger1 = Time = 0
value    = 5120

[State 1710,ChangeState]
type     = ChangeState
trigger1 = Animtime = 0
value    = 1706









;Not used
;---------------------------------------------------------------------------
; (OM) Shiyoken - L
[Statedef 1800]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
poweradd = 0
anim = 1800
ctrl = 0
sprpriority = 2


[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0


[State 1800, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
x = 16
ignorehitpause = 1
persistent = 0

[State 1800, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 2
ignorehitpause = 1
persistent = 0


[state 1800, Dust]
type = Explod
trigger1 = animelemtime(3)=0
anim = 1216
id = 1216
facing = -1
pos = -35,4
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
ignorehitpause = 1
persistent = 0






[State 1800, PlaySND]
type = PlaySND
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 7
trigger5 = AnimElem = 8
trigger6 = AnimElem = 9
value = 0, 0;+random%3
ignorehitpause = 1
volumescale = 40



[State 1800, Hitdef]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 7
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 8 < 5, 5, fvar(11) * 8)), 0	;25
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3, 4
guard.pausetime = 4, 4
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12-random%40,-95+random%30
hitsound = s5,0+random%3
guardsound = S6,0
ground.type = High
ground.slidetime = 16;8
ground.hittime  = 16;8
ground.velocity = -8   ;-3
ground.cornerpush.veloff = -4
guard.velocity = -11 ;-4.5
airguard.velocity = -4.5,-1
air.type = High	
air.velocity = -2,-1.5
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
p2facing = 1



[State 1800, Hitdef]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 8 < 5, 5, fvar(11) * 8)), 0	;25
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3, 4
guard.pausetime = 4, 4
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12-random%40,-95+random%30
hitsound = s5,0+random%3
guardsound = S6,0
ground.type = High
ground.slidetime = 16;8
ground.hittime  = 16;8
ground.velocity = -8   ;-3
ground.cornerpush.veloff = -4
guard.velocity = -11 ;-4.5
airguard.velocity = -4.5,-1
air.type = High	
air.velocity = -2,-1.5
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
p2facing = 1



[State 1800, Hitdef]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 8 < 5, 5, fvar(11) * 8)), 0	;25
getpower = 0,0
givepower = 35,35
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3, 4
guard.pausetime = 4, 4
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12-random%40,-95+random%30
hitsound = s5,0+random%3
guardsound = S6,0
ground.type = Low
ground.slidetime = 16;8
ground.hittime  = 16;8
ground.velocity = -8   ;-3
ground.cornerpush.veloff = -4
guard.velocity = -11 ;-4.5
airguard.velocity = -4.5,-1
air.type = High	
air.velocity = -2,-1.5
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
p2facing = 1




;copied from Muteki's Chun Li (SF3)
[State 1800, VarSet]
type = VarSet
trigger1 = time = 0
var(45) = 0

[State 1800, VarSet]
type = VarSet
trigger1 = Time = 0
trigger2 = AnimElemTime(2) = 1
var(46) = 0

[State 1800, VarAdd]
type = varadd
triggerall = command = "x"
trigger1 = AnimElemTime(2) >= 1
trigger1 = AnimElemTime(9) < 0
var(46) = 1
ignorehitpause = 1
persistent = 1

[State 1800, VarAdd]
type = varadd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 7
trigger5 = AnimElem = 8
trigger6 = AnimElem = 9
var(45) = 1





[State 1800, ChangeState]
type = ChangeState
triggerall = AnimElem = 9 || AnimTime = 0
trigger1 = var(46) < 1
trigger2 = var(45) >= 20
value = 1805
ctrl = 0







;---------------------------------------------------------------------------
;Not used
; (OM) Shiyoken - M
[Statedef 1801]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
poweradd = 0
anim = 1801
ctrl = 0
sprpriority = 2


[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0


[State 1801, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
x = 16
ignorehitpause = 1
persistent = 0

[State 1801, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 4
ignorehitpause = 1
persistent = 0


[state 1800, Dust]
type = Explod
trigger1 = animelemtime(3)=0
anim = 1216
id = 1216
facing = -1
pos = -35,4
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
ignorehitpause = 1
persistent = 0





[State 1800, PlaySND]
type = PlaySND
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 7
trigger5 = AnimElem = 8
trigger6 = AnimElem = 9
value = 0, 0;+random%3
ignorehitpause = 1
volumescale = 40



[State 1800, Hitdef]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 7
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 8 < 5, 5, fvar(11) * 8)), 0	;25
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3, 4
guard.pausetime = 4, 4
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12-random%40,-95+random%30
hitsound = s5,0+random%3
guardsound = S6,0
ground.type = High
ground.slidetime = 16;8
ground.hittime  = 16;8
ground.velocity = -10   ;-3
ground.cornerpush.veloff = -7.5
guard.velocity = -12 ;-4.5
airguard.velocity = -4.5,-1
air.type = High	
air.velocity = -2,-1.5
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
p2facing = 1



[State 1800, Hitdef]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 8 < 5, 5, fvar(11) * 8)), 0	;25
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3, 4
guard.pausetime = 4, 4
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12-random%40,-95+random%30
hitsound = s5,0+random%3
guardsound = S6,0
ground.type = High
ground.slidetime = 16;8
ground.hittime  = 16;8
ground.velocity = -10   ;-3
ground.cornerpush.veloff = -7.5
guard.velocity = -12 ;-4.5
airguard.velocity = -4.5,-1
air.type = High	
air.velocity = -2,-1.5
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
p2facing = 1



[State 1800, Hitdef]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 8 < 5, 5, fvar(11) * 8)), 0	;25
getpower = 0,0
givepower = 35,35
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3, 4
guard.pausetime = 4, 4
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12-random%40,-95+random%30
hitsound = s5,0+random%3
guardsound = S6,0
ground.type = Low
ground.slidetime = 16;8
ground.hittime  = 16;8
ground.velocity = -10   ;-3
ground.cornerpush.veloff = -7.5
guard.velocity = -12 ;-4.5
airguard.velocity = -4.5,-1
air.type = High	
air.velocity = -2,-1.5
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
p2facing = 1




;copied from Muteki's Chun Li (SF3)
[State 1800, VarSet]
type = VarSet
trigger1 = time = 0
var(45) = 0

[State 1800, VarSet]
type = VarSet
trigger1 = Time = 0
trigger2 = AnimElemTime(2) = 1
var(46) = 0

[State 1800, VarAdd]
type = varadd
triggerall = command = "y"
trigger1 = AnimElemTime(2) >= 1
trigger1 = AnimElemTime(9) < 0
var(46) = 1
ignorehitpause = 1
persistent = 1

[State 1800, VarAdd]
type = varadd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 7
trigger5 = AnimElem = 8
trigger6 = AnimElem = 9
var(45) = 1





[State 1800, ChangeState]
type = ChangeState
triggerall = AnimElem = 9 || AnimTime = 0
trigger1 = var(46) < 1
trigger2 = var(45) >= 18
value = 1805
ctrl = 0






;---------------------------------------------------------------------------
;Not used
; (OM) Shiyoken - H
[Statedef 1802]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
poweradd = 0
anim = 1802
ctrl = 0
sprpriority = 2


[State 0, OM variable]
type = VarAdd
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) < 90
trigger1 = MoveHit
fvar(28) = 3
ignorehitpause = 1
persistent = 0
[State 0, OM variable]
type = VarSet
triggerall = numhelper(2550)=1||numhelper(2560)=1
triggerall = fvar(28) > 90
trigger1 = !Time
fvar(28) = 90
ignorehitpause = 1
persistent = 0


[State 1800, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
x = 16
ignorehitpause = 1
persistent = 0

[State 1800, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 6
ignorehitpause = 1
persistent = 0


[state 1800, Dust]
type = Explod
trigger1 = animelemtime(3)=0
anim = 1216
id = 1216
facing = -1
pos = -35,4
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
ignorehitpause = 1
persistent = 0





[State 1800, PlaySND]
type = PlaySND
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 7
trigger5 = AnimElem = 8
trigger6 = AnimElem = 9
value = 0, 0;+random%3
ignorehitpause = 1
volumescale = 40



[State 1800, Hitdef]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 7
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 8 < 5, 5, fvar(11) * 8)), 0	;25
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3, 4
guard.pausetime = 4, 4
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12-random%40,-95+random%30
hitsound = s5,0+random%3
guardsound = S6,0
ground.type = High
ground.slidetime = 16;8
ground.hittime  = 16;8
ground.velocity = -11   ;-3
ground.cornerpush.veloff = -8
guard.velocity = -13 ;-4.5
airguard.velocity = -4.5,-1
air.type = High	
air.velocity = -2,-1.5
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
p2facing = 1



[State 1800, Hitdef]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 8 < 5, 5, fvar(11) * 8)), 0	;25
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3, 4
guard.pausetime = 4, 4
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12-random%40,-95+random%30
hitsound = s5,0+random%3
guardsound = S6,0
ground.type = High
ground.slidetime = 16;8
ground.hittime  = 16;8
ground.velocity = -11   ;-3
ground.cornerpush.veloff = -8
guard.velocity = -13 ;-4.5
airguard.velocity = -4.5,-1
air.type = High	
air.velocity = -2,-1.5
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
p2facing = 1



[State 1800, Hitdef]
type = HitDef
trigger1 = AnimElem = 5
trigger1 = AnimElem = 9
attr = S, SA
damage = Ceil(IfElse(fvar(11) * 8 < 5, 5, fvar(11) * 8)), 0	;25
getpower = 0,0
givepower = 35,35
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3, 4
guard.pausetime = 4, 4
sparkno = s7030
guard.sparkno = s7000
sparkxy = -12-random%40,-95+random%30
hitsound = s5,0+random%3
guardsound = S6,0
ground.type = Low
ground.slidetime = 16;8
ground.hittime  = 16;8
ground.velocity = -11   ;-3
ground.cornerpush.veloff = -8
guard.velocity = -13 ;-4.5
airguard.velocity = -4.5,-1
air.type = High	
air.velocity = -2,-1.5
air.hittime = 12
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5
p2facing = 1




;copied from Muteki's Chun Li (SF3)
[State 1800, VarSet]
type = VarSet
trigger1 = time = 0
var(45) = 0

[State 1800, VarSet]
type = VarSet
trigger1 = Time = 0
trigger2 = AnimElemTime(2) = 1
var(46) = 0

[State 1800, VarAdd]
type = varadd
triggerall = command = "z"
trigger1 = AnimElemTime(2) >= 1
trigger1 = AnimElemTime(9) < 0
var(46) = 1
ignorehitpause = 1
persistent = 1

[State 1800, VarAdd]
type = varadd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 7
trigger5 = AnimElem = 8
trigger6 = AnimElem = 9
var(45) = 1





[State 1800, ChangeState]
type = ChangeState
triggerall = AnimElem = 9 || AnimTime = 0
trigger1 = var(46) < 1
trigger2 = var(45) >= 16
value = 1805
ctrl = 0



;---------------------------------------------------------------------------
;Not used
; (OM) Shiyoken end
[Statedef 1805]
type = S
ctrl = 0
anim = 1805
VelSet = 0,0
movetype = I
physics = S
sprpriority = 2


[State 1805, 4]
type = CtrlSet
trigger1 = AnimElemTime(4) = 2
value = 1

[State 1805, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;don't use 1849 as a state def number


