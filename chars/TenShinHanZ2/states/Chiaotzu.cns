;==============================================================
; CNS File for Chiaotzu
; Everything
;==============================================================



;Chiaotzu's variables:
;var(1): Shield activation condition (reacting -> DD 2p -> var activated -> shield -> var to 0)

;not going to be used because the shield move has been used in a different way

;var(10): no move variable (active when any action has been taken, not active when enemy is idle/attacking)




;---------------------------------------------------------------------------
;Stand
[Statedef 30000]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 30000
velset = 0,0




[State 30000, away from screen - OM mode - intro states - round 2 onwards]
type = Changestate
triggerall = RoundState = [0,1]
trigger1 = Root,FVar(27) = 1
value = 30006
persistent = 0 
ctrl = 0



[State 30000, Normal-worried animation]
Type = ChangeAnim
Trigger1 = Anim != IfElse (Root, Life <= 300, 30001, 30000)
Value = IfElse (Root, Life <= 300 , 30001, 30000)


[State 30000, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
id = 30190



[State 30000, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0

[State 30000, Stand Hover]	;copied from Jailbot by altoiddealer and edited a bit. ;)
type = Offset
trigger1 = 1
y = 2.5*cos(GameTime/6.0)


[State 30000, VelSet]
type = VelSet
trigger1 = Time = 0
y = 0

[State 30000, VelSet] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
trigger2 = Time = 4
x = 0


[State 30000, 1]
type = VelSet
trigger1 = RootDist Y = [10,30]
y = 0



[State 30000, turn]
type = Turn
trigger1 = p2dist X < -3




[State 30000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1



[State 30000, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1



;[State 30000, 4] ;Are you dead?
;type = ChangeState
;trigger1 = !alive
;value = 35050
;ctrl = 0


;ChangeStates
[State 30000, Intro];Volleyball
type = Changestate
triggerall = RoundState = 0
triggerall = RoundNo = 1
trigger1 = Root, StateNo = 196
value = 30192
persistent = 0 
ctrl = 0

[State 30000, Intro];Meditation
type = Changestate
triggerall = RoundState = 0
triggerall = RoundNo = 1
trigger1 = Root, StateNo = 192
value = 30196
persistent = 0 
ctrl = 0

[State 30000, Intro]
type = Changestate
trigger1 = RoundState = 0
trigger1 = RoundNo = 1
value = IfElse(random<500,30190,30196)
persistent = 0 
ctrl = 0

[State 30000, Win]
type = Changestate
;======
;triggerall = (RootDist X = [-20,60]) && (RootDist Y = [-30,50])
;Maybe this code was the problem why Chiaotzu wasn't doing the ending sometimes...
;======
triggerall = RoundState = 4
triggerall = Win
;trigger1 = Root, StateNo != [181,186]	;walking to the center
;trigger1 = Root, StateNo = 1819 || Root, StateNo = 1829 || Root, StateNo = 1839 || Root, StateNo = 1849 || Root, StateNo = 1859 || Root, StateNo = 1869
trigger1 = Root, StateNo != 1819	;walking to the center
trigger1 = Root, StateNo = 181 || Root, StateNo = 182 || Root, StateNo = 183 || Root, StateNo = 184 || Root, StateNo = 185 || Root, StateNo = 186
value = 30180
ctrl = 0


[State 30000, Win]	;"Congratulations! You're the winner!" screen
type = Changestate
triggerall = Win = 0
;trigger1 = (Root, StateNo = [180,189]) || Root, StateNo = 1839
;trigger1 = Root, StateNo != 183 
trigger1 = (Root, StateNo = [180,189]) || Root, StateNo = 183
;trigger1 = Root, StateNo != 183 
value = 30180
ctrl = 0







[State 30000, Lose]
type = Changestate
;triggerall = (RootDist X = [-20,60]) && (RootDist Y = [-20,60])
triggerall = RoundState != 2
;trigger1 = Lose
trigger1 = MatchOver
;trigger1 = Root, StateNo != [170,175]
;trigger1 = Root, StateNo != 5950
;trigger1 = Root, Stateno = 5150
trigger1 = Root, Alive = 0
trigger1 = Root, MoveType = H
value = 30171
ctrl = 0




[State 30000, Time Over / Cheap KO]
type = Changestate
triggerall = (RootDist X = [-20,60]) && (RootDist Y = [-20,60])
triggerall = RoundState != 2
;trigger1 = Lose
;trigger2 = Root, StateNo = 5300
trigger1 = Root, StateNo = 5950
trigger2 = Root, StateNo = [170,175]
value = 30170
ctrl = 0




[State 30000, Tien is damaged!]
type = Changestate
triggerall = Var(1) != 1
triggerall = Root, StateNo != [120,159]
trigger1 = Root, MoveType = H
trigger1 = Root, Alive
value = 30002
ctrl = 0









[State 30000, Move forward]
type = ChangeState
trigger1 = RootDist X > 70;60	;50
value = 30010
ctrl = 0

[State 30000, Move backward]
type = ChangeState
trigger1 = BackEdgeBodyDist >= 16
trigger1 = RootDist X < -30;-20	;-10
trigger2 = RootDist X < -50
value = 30020
ctrl = 0


[State 30000, Move Upward]		;these have to be used.
type = ChangeState
trigger1 = RootDist Y < -30	;-10
value = 30030
ctrl = 0


[State 30000, Move Downward]		
type = ChangeState
trigger1 = RootDist Y > 30	;10
value = 30040
ctrl = 0




[State 30000, Stop Moving]
type = VelSet
trigger1 = RootDist X = [30,61]	;30,60
x = 0



[State 30000, Taunt]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "start"
trigger1 = Root, NumExplod(90000195)
value = 30195
ctrl = 0
ignorehitpause = 1






;To code/use Chiaotzu's movements, you'll have to paste the specials' ChangeStates in all idle states.
[State 30000, Dodonpa command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "rdp"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010203) ), (root,NumExplod(90010301)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31000
ctrl = 0
ignorehitpause = 1





[State 30000, Telekinesis command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "HCB_x"
;trigger2 = Root, Command = "HCB_y"
;trigger3 = Root, Command = "HCB_z"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010406) ), (root,NumExplod(90010504)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31500
ctrl = 0
ignorehitpause = 1






;[State number, Shield command]
;type = ChangeState
;triggerall = RoundState = 2
;triggerall = Root, Power >= 1500
;triggerall = var(10) != 1
;triggerall = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
;value = 30012
;ctrl = 0

[State number, Shield command]
type = ChangeState
trigger1 = RoundState = 2
trigger1 = Root, Power >= 1500
trigger1 = var(10) != 1
trigger1 = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
value = 30012
ctrl = 0





;
;[State 30002, Shield variable]
;type = VarSet
;triggerall = RoundState = 2
;triggerall = Root, Power >= 1500
;triggerall = var(1) != 1		;no shield variable
;triggerall = var(10) = 0
;trigger1 = Root, Command = "DD_2p"
;triggerall = Root, StateNo != 5300
;var(1) = 1
;ignorehitpause = 1 

;[State 30002, Shield - action]
;type = ChangeState
;trigger1 = var(1) = 1
;value = 30000
;ctrl = 0


;
;[State 30002, Shield - action]
;type = ChangeState
;trigger1 = RootDist X >= -0	;-50,50
;triggerall = var(1) = 1
;value = 32000
;ctrl = 0



[State 30000, away]
type = ChangeState
trigger1 = 1;!Time
triggerall = Root,Fvar(27)=1
;triggerall = Root, var(40) = 1
value = 30005
ctrl = 0





;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = root, MoveType = H
triggerall = RoundState = 2
trigger1 = enemy, AnimExist(5939)
trigger1 = enemy, NumExplod(991901)
trigger2 = !enemy, AnimExist(5939)
trigger2 = root, Var(43)=1
trigger2 = root, NumExplod(3502)
trigger2 = root,var(48)-root,var(49)>=30
trigger3 = !enemy, AnimExist(5939)
trigger3 = root, Var(43)=2
trigger3 = root, NumExplod(3502)
trigger3 = root,var(48)-root,var(49)>=60
trigger4 = !enemy, AnimExist(5939)
trigger4 = root, Var(43)=3
trigger4 = root, NumExplod(3502)
trigger4 = root,var(48)-root,var(49)>=90
trigger5 = !enemy, AnimExist(5939)
trigger5 = root, Var(43)=4
trigger5 = root, NumExplod(3502)
trigger5 = root,var(48)-root,var(49)>=120
trigger6 = !enemy, AnimExist(5939)
trigger6 = root, Var(43)=5
trigger6 = root, NumExplod(3502)
trigger6 = root,var(48)-root,var(49)>=150
trigger7 = !enemy, AnimExist(5939)
trigger7 = root, NumExplod(3502)
trigger7 = root, Var(43)=6
trigger7 = root,var(48)-root,var(49)>=180
value = 35210		;30005;3521
ctrl = 0
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = RoundState = 2
trigger1 = root, NumExplod(991901)
;trigger2 = root, StateNo = 3419
;trigger3 = root, StateNo = 3414
value = 35210		;30005;3521
ctrl = 0





[State 30000, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1


[State 30000, no more moves variable]
type = VarSet
trigger1 = Enemy, MoveType != H
var(10) = 0
ignorehitpause = 1


;[State 30000, AI CHANGESTATE];Taunt
;type = ChangeState
;triggerall = Root, AILevel
;triggerall = RoundState = 2
;triggerall = Root, StateNo != [800,999]
;triggerall = var(1) != 1	
;triggerall = var(10) != 1
;trigger1 = ceil(random < 10 * (root, AILevel**2/64.0))
;value = 30195
;ctrl = 0
[State 30000, AI CHANGESTATE];Dodonpa
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31000
ctrl = 0
[State 30000, AI CHANGESTATE];Telekinesis
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31500
ctrl = 0




;---------------------------------------------------------------------------
;Reaction! Tien's damaged!
[Statedef 30002]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 30002
velset = 0,0

[State 30002, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
id = 30190



[State 30002, Voice]	;Chiaotzu: "Tenshinhan!!"  "Are you okay?" "Uh oh..."
type = PlaySnd
trigger1 = Anim = 30002
;trigger1 = AnimElemTime (5) >= 0
trigger1 = Random < 50
trigger1 = Root, GetHitVar(HitCount) = 3
trigger2 = Root, StateNo = 5300
value = 85,IfElse(random<500,30000+random%4,30170+random%4)
volumescale = 100
persistent = 0
channel = 1




;[State 30000, ScreenBound]
;type = Null; ScreenBound
;trigger1 = IsHelper
;value = 1
;movecamera = 1,0

[State 30002, Stand Hover]	;copied from Jailbot by altoiddealer and edited a bit. ;)
type = Offset
trigger1 = 1
y = 2.5*cos(GameTime/6.0)


[State 30002, VelSet]
type = VelSet
trigger1 = Time = 0
y = 0

[State 30002, VelSet] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
trigger2 = Time = 4
x = 0




[State 30002, turn]
type = Turn
trigger1 = p2dist X < -3




[State 30002, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1



[State 30002, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1



[State 30002, ChangeAnim]
type = ChangeAnim
trigger1 = Root, GetHitVar(HitCount) >= 7 
value = 30003
elem = 1
;ignorehitpause = 
persistent = 0





;ChangeStates
[State 30002, Tien is not damaged.]
type = Changestate
trigger1 = Root, MoveType != H
trigger2 = Root, Alive = 0
value = 30010
ctrl = 0


[State 30002, Stop Moving]
type = VelSet
trigger1 = RootDist X = [30,50]
x = 0




;[State number, Shield command]
;type = ChangeState
;triggerall = RoundState = 2
;triggerall = Root, Power >= 1500
;trigger1 = Root, Command = "DD_2p"
;value = 32000
;ctrl = 0
;
;
;[State 30002, Shield variable]
;type = VarSet
;triggerall = RoundState = 2
;triggerall = Root, Power >= 1500
;triggerall = var(1) != 1		;no shield variable
;triggerall = var(10) != 1
;trigger1 = Root, Command = "DD_2p"
;triggerall = Root, StateNo != 5300
;var(1) = 1
;ignorehitpause = 1 
;
;[State 30002, Shield - action]
;type = ChangeState
;trigger1 = var(1) = 1
;value = 30000
;ctrl = 0






;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = root, MoveType = H
triggerall = RoundState = 2
trigger1 = enemy, AnimExist(5939)
trigger1 = enemy, NumExplod(991901)
trigger2 = !enemy, AnimExist(5939)
trigger2 = root, Var(43)=1
trigger2 = root, NumExplod(3502)
trigger2 = root,var(48)-root,var(49)>=30
trigger3 = !enemy, AnimExist(5939)
trigger3 = root, Var(43)=2
trigger3 = root, NumExplod(3502)
trigger3 = root,var(48)-root,var(49)>=60
trigger4 = !enemy, AnimExist(5939)
trigger4 = root, Var(43)=3
trigger4 = root, NumExplod(3502)
trigger4 = root,var(48)-root,var(49)>=90
trigger5 = !enemy, AnimExist(5939)
trigger5 = root, Var(43)=4
trigger5 = root, NumExplod(3502)
trigger5 = root,var(48)-root,var(49)>=120
trigger6 = !enemy, AnimExist(5939)
trigger6 = root, Var(43)=5
trigger6 = root, NumExplod(3502)
trigger6 = root,var(48)-root,var(49)>=150
trigger7 = !enemy, AnimExist(5939)
trigger7 = root, NumExplod(3502)
trigger7 = root, Var(43)=6
trigger7 = root,var(48)-root,var(49)>=180
value = 35210		;30005;3521
ctrl = 0
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = RoundState = 2
trigger1 = root, NumExplod(991901)
;trigger2 = root, StateNo = 3419
;trigger3 = root, StateNo = 3414
value = 35210		;30005;3521
ctrl = 0



[State 30000, ChangeState]
type     = ChangeState
trigger1 = Root,Fvar(27)=1
value    = 30005
ctrl     = 0



[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1




;---------------------------------------------------------------------------
;away from screen
[Statedef 30005]
type    = A
movetype= I
physics = N
juggle  = 2
;poweradd= 30
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
anim = 30005
sprpriority = -5


[State 30005, VelSet]
type = VelSet
trigger1 = AnimElemTime(2)>0
x = -10	;8.6 -   10
ignorehitpause = 1


[State 30005, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 30005, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause = 
;persistent = 

[State 30005, Land]
type = ChangeState
trigger1 = BackEdgeDist < -80
value = 30006



;---------------------------------------------------------------------------
;away from screen - invisible
[Statedef 30006]
type    = A
movetype= I
physics = N
VelSet = 0,0
ctrl = 0
anim = 15999
sprpriority = 2


[State 30000, turn]
type = Turn
trigger1 = p2dist X < -3

;[State 0, PosSet]
;type = PosSet
;trigger1 = 1
;x = 300*enemy,facing


[State 0, PosSet];X
type = PosSet
trigger1 = 1
x = -300*root,facing

[State 0, PosSet];Y
type     = PosSet
trigger1 = Time = 0
y        = -30



[State 30006, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 30005, Land];Original code
type = ChangeState
triggerall = Root,Fvar(27)=0 ;;;;;; trigger1 = Root, var(40) = 0
trigger1 = root,stateno != [2700,3999]
;trigger1 = Root, AnimTime = 0
value = 30007



;
;;CODE FOR CINEMATIC 
;;CODE FOR CINEMATIC 
;;CODE FOR CINEMATIC 
;;CODE FOR CINEMATIC 
;[State 0, ChangeState];CODE FOR CINEMATIC COME BACK!
;type = ChangeState
;triggerall = Root, var(40) = 0	;added
;;triggerall = Root, AnimTime = 0	;added
;;triggerall = root, MoveType != H
;trigger1 = !root, NumExplod(991901)
;trigger1 = root, MoveType != H
;trigger1 = enemy, AnimExist(5939)
;trigger1 = !enemy, NumExplod(991901)
;trigger2 = root, MoveType != H
;trigger2 = !enemy, AnimExist(5939)
;trigger2 = root,var(48) <= root,var(49) +29
;trigger2 = root, Var(43)=[1,6] 
;trigger3 = Lose
;trigger4 = root, MoveType != H	;added
;;trigger4 = root, StateNo = 3417 || root, StateNo = 3413 || root, StateNo = 0
;value = 30007;30062
;ctrl = 0




[State 30005, Sacrifice command]
type = ChangeState
triggerall = RoundState = 2
;triggerall = Root, Power >= 1500
;triggerall = (Root, StateNo != [40,60]) || (Root, StateNo != [105,106])
;triggerall = Root, StateNo != 195 
;;triggerall = Root, StateNo != [200,899]
;;triggerall = Root, StateNo != [902,9999]
;;triggerall = Root, StateNo != [5100,9999] 
;triggerall = Root, StateType != A
;triggerall = Root, MoveType != H
;triggerall = Root, StateType != L
triggerall = var(1) != 1	;no shield variable
;triggerall = var(10) != 1	;no more moves available, balance made on purpose to not perform techniques. 
trigger1 = root,stateno = 4499;Root, Command = "DD_b+y"
value = 32500
ctrl = 0
ignorehitpause = 1





;---------------------------------------------------------------------------
;Comes back to screen
[Statedef 30007]
type    = A
movetype= I
physics = N
juggle  = 2
;poweradd= 30
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
anim = 30011
sprpriority = 2


[State 30007, VelSet]
type = VelSet
trigger1 = AnimElemTime(2)>0
x = 8	;8.6 -   10
ignorehitpause = 1


[State 30007, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 30007, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause = 
;persistent = 


[State 30011, Walk forward]
type = ChangeState
trigger1 = RootDist X < 100
value = 30010
ctrl = 0






;---------------------------------------------------------------------------
;Fly Forward
[Statedef 30010]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 30010
velset = 0,0

[State 30010, Normal-worried animation]
Type = ChangeAnim
Trigger1 = Anim != IfElse (Root, Life <= 300, 30012, 30010)
Value = IfElse (Root, Life <= 300 , 30012, 30010)


[State 30010, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0






;Y VelSet
[State 30010, VelSet 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 30010, VelSet 2]
type = VelSet
trigger1 = RootDist Y > 30
y = 2.5+var(1)*2

[State 30010, VelSet 3]
type = VelSet
trigger1 = RootDist Y < -30
y = -2.5-var(1)*2

[State 30010, VelSet 4]
type = VelSet
trigger1 = RootDist Y = [-30,30]
y = 0




;X VelSet
;Don't add this or Chiaotzu will bug.
;[State 30011, VelSet 5] ;Stop moving if low velocity or 4 ticks pass
;type = VelSet
;trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
;trigger2 = Time = 4
;x = 0

[State 30010, VelSet 6]
type = VelSet
trigger1 = RootDist X = [51,100];1	or	RootDist X = [51,100]
x = const(velocity.walk.fwd.x)*.9+var(1)*2

[State 30010, stop moving]
type = VelSet
trigger1 = RootDist X <= 50
x = 0




[State 30010, push]
type = PlayerPush
trigger1 = 1
value = 0

[State 30010, turn]
type = Turn
trigger1 = p2dist X < -3

[State 30010, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 30010, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1




;ChangeStates
[State 30000, Lose]
type = Changestate
;triggerall = (RootDist X = [-20,60]) && (RootDist Y = [-20,60])
triggerall = RoundState != 2
trigger1 = Lose
value = 30171
ctrl = 0



[State 30010, stand]
type = ChangeState
trigger1 = RootDist X = [20,60]
trigger2 = RootDist X < 20
value = 30000
ctrl = 0

[State 30010, dash forward]
type = ChangeState
trigger1 = RootDist X >= 100
value = 30011
ctrl = 0






[State 30010, Dodonpa command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "rdp"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010203) ), (root,NumExplod(90010301)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31000
ctrl = 0
ignorehitpause = 1




[State 30010, Telekinesis command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "HCB_x"
;trigger2 = Root, Command = "HCB_y"
;trigger3 = Root, Command = "HCB_z"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010406) ), (root,NumExplod(90010504)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31500
ctrl = 0
ignorehitpause = 1


;[State number, Shield command]
;type = ChangeState
;triggerall = RoundState = 2
;triggerall = Root, Power >= 1500
;triggerall = var(10) != 1
;triggerall = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
;value = 30012
;ctrl = 0

[State number, Shield command]
type = ChangeState
trigger1 = RoundState = 2
trigger1 = Root, Power >= 1500
trigger1 = var(10) != 1
trigger1 = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
value = 30012
ctrl = 0



[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1


[State 30000, ChangeState]
type     = ChangeState
trigger1 = Root,Fvar(27)=1
value    = 30005
ctrl     = 0



[State 30000, AI CHANGESTATE];Taunt
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 2 * (root, AILevel**2/64.0))
value = 30195
ctrl = 0
[State 30000, AI CHANGESTATE];Dodonpa
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31000
ctrl = 0
[State 30000, AI CHANGESTATE];Telekinesis
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31500
ctrl = 0





;---------------------------------------------------------------------------
;Dash Forward
[Statedef 30011]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 30011
velset = 0,0

[State 30000, Normal-worried animation]
Type = ChangeAnim
Trigger1 = Anim != IfElse (Root, Life <= 300, 30013, 30011)
Value = IfElse (Root, Life <= 300 , 30013, 30011)


[State 30011, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0




;Y VelSet
[State 30011, VelSet 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 30011, VelSet 2]
type = VelSet
trigger1 = RootDist Y > 30
y = 2.5+var(1)*2

[State 30011, VelSet 3]
type = VelSet
trigger1 = RootDist Y < -30
y = -2.5-var(1)*2

[State 30011, VelSet 4]
type = VelSet
trigger1 = RootDist Y = [-30,30]
y = 0




;X VelSet
[State 30011, VelSet 6]
type = VelSet
trigger1 = RootDist X > 100;1
;trigger2 = command = "holdfwd"
x = const(velocity.walk.fwd.x)*1.9+var(1)*2




[State 30011, push]
type = PlayerPush
trigger1 = 1
value = 0

[State 30011, turn]
type = Turn
trigger1 = p2dist X < -3

[State 30011, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 30011, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1




;ChangeStates
[State 30011, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 35050
ctrl = 0

[State 30011, Walk forward]
type = ChangeState
trigger1 = RootDist X < 100
value = 30010
ctrl = 0




[State 30011, Dodonpa command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "rdp"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010203) ), (root,NumExplod(90010301)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31000
ctrl = 0
ignorehitpause = 1






[State 30011, Telekinesis command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "HCB_x"
;trigger2 = Root, Command = "HCB_y"
;trigger3 = Root, Command = "HCB_z"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010406) ), (root,NumExplod(90010504)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31500
ctrl = 0
ignorehitpause = 1





[State 30000, Lose]
type = Changestate
;triggerall = (RootDist X = [-20,60]) && (RootDist Y = [-20,60])
triggerall = RoundState != 2
trigger1 = Lose
value = 30171
ctrl = 0

;[State 30000, Shield command]
;type = ChangeState
;triggerall = RoundState = 2
;triggerall = Root, Power >= 1500
;triggerall = var(10) != 1
;triggerall = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
;value = 30012
;ctrl = 0

[State 30000, Shield command]
type = ChangeState
trigger1 = RoundState = 2
trigger1 = Root, Power >= 1500
trigger1 = var(10) != 1
trigger1 = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
value = 30012
ctrl = 0






[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1



[State 30000, ChangeState]
type     = ChangeState
trigger1 = Root,Fvar(27)=1
value    = 30005
ctrl     = 0


[State 30000, AI CHANGESTATE];Taunt
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 10 * (root, AILevel**2/64.0))
value = 30195
ctrl = 0
[State 30000, AI CHANGESTATE];Dodonpa
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31000
ctrl = 0
[State 30000, AI CHANGESTATE];Telekinesis
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31500
ctrl = 0




;---------------------------------------------------------------------------
;Dash Forward (shield)
[Statedef 30012]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = IfElse(p2Dist x <-50,30011,30021)
velset = 0,0

[State 30000, Normal-worried animation]
Type = ChangeAnim
Trigger1 = Anim != IfElse (Root, Life <= 300, 30013, 30011)
Value = IfElse (Root, Life <= 300 , 30013, 30011)


[State 30011, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0






;Y VelSet
[State 30011, VelSet 1] ;reset vel
type = VelSet
trigger1 = Time = 0
y = 0

[State 30011, VelSet 2] ;down
type = VelSet
trigger1 = P2Dist Y > 0
y = 2.5+var(1)*2

[State 30011, VelSet 3] ;up
type = VelSet
trigger1 = P2Dist Y < 80
y = -2.5-var(1)*2

[State 30011, VelSet 4] ;limit
type = VelSet
trigger1 = P2Dist Y = [0,80]
y = 0




;X VelSet
[State 30011, VelSet 6]
type = VelSet
trigger1 = !Time;RootDist X > 100;1
;trigger2 = command = "holdfwd"
x = const(velocity.walk.fwd.x)*1.9+var(1)*2






[State 30011, push]
type = PlayerPush
trigger1 = 1
value = 0

[State 30011, turn]
type = Turn
trigger1 = p2dist X < -3

;[State 30011, NotHitBy]
;type = NotHitBy
;trigger1 = 1
;value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;time = 1
;ignorehitpause = 1

[State 30011, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1




[State 30011, Walk forward]
type = ChangeState
trigger1 = P2BodyDist X <- 10
value = 32000 ;30010
ctrl = 0




[State 30000, Lose]
type = Changestate
;triggerall = (RootDist X = [-20,60]) && (RootDist Y = [-20,60])
triggerall = RoundState != 2
trigger1 = Lose
value = 30171
ctrl = 0


[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1





;---------------------------------------------------------------------------
;Fly Back
[Statedef 30020]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 30020
velset = 0,0

[State 30000, Normal-worried animation]
Type = ChangeAnim
Trigger1 = Anim != IfElse (Root, Life <= 300, 30022, 30020)
Value = IfElse (Root, Life <= 300 , 30022, 30020)


[State 30020, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0




;Y VelSet
[State 30020, VelSet 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 30020, VelSet 2]
type = VelSet
trigger1 = RootDist Y > 30
y = 2.5+var(1)*2

[State 30020, VelSet 3]
type = VelSet
trigger1 = RootDist Y < -30
y = -2.5-var(1)*2

[State 30020, VelSet 4]
type = VelSet
trigger1 = RootDist Y = [-30,30]
y = 0




;X VelSet
[State 30020, VelSet 5]
type = VelSet
trigger1 = 1
x = const(velocity.walk.back.x)*.9-var(1)*2





[State 30020, push]
type = PlayerPush
trigger1 = 1
value = 0

[State 30020, turn]
type = Turn
trigger1 = p2dist X < -3

[State 30020, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 30020, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1




;ChangeStates
[State 30020, stand]
type = ChangeState
trigger1 = RootDist X = [-19,50]
trigger2 = RootDist X > 50
value = 30000
ctrl = 0

[State 30020, dash backward]
type = ChangeState
trigger1 = RootDist X <= -100
value = 30021
ctrl = 0





[State 30020, Dodonpa command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "rdp"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010203) ), (root,NumExplod(90010301)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31000
ctrl = 0
ignorehitpause = 1





[State 30020, Telekinesis command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "HCB_x"
;trigger2 = Root, Command = "HCB_y"
;trigger3 = Root, Command = "HCB_z"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010406) ), (root,NumExplod(90010504)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31500
ctrl = 0
ignorehitpause = 1

;[State 30000, Shield command]
;type = ChangeState
;triggerall = RoundState = 2
;triggerall = Root, Power >= 1500
;triggerall = var(10) != 1
;triggerall = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
;value = 30012
;ctrl = 0

[State 30000, Shield command]
type = ChangeState
trigger1 = RoundState = 2
trigger1 = Root, Power >= 1500
trigger1 = var(10) != 1
trigger1 = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
value = 30012
ctrl = 0



[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1


[State 30000, ChangeState]
type     = ChangeState
trigger1 = Root,Fvar(27)=1
value    = 30005
ctrl     = 0



[State 30000, Lose]
type = Changestate
;triggerall = (RootDist X = [-20,60]) && (RootDist Y = [-20,60])
triggerall = RoundState != 2
trigger1 = Lose
value = 30171
ctrl = 0








;---------------------------------------------------------------------------
;Dash Back
[Statedef 30021]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 30021
velset = 0,0

[State 30000, Normal-worried animation]
Type = ChangeAnim
Trigger1 = Anim != IfElse (Root, Life <= 300, 30023, 30021)
Value = IfElse (Root, Life <= 300 , 30023, 30021)


[State 30021, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0




;Y VelSet
[State 30021, VelSet 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 30021, VelSet 2]
type = VelSet
trigger1 = RootDist Y > 30
y = 2.5+var(1)*2

[State 30021, VelSet 3]
type = VelSet
trigger1 = RootDist Y < -30
y = -2.5-var(1)*2

[State 30021, VelSet 4]
type = VelSet
trigger1 = RootDist Y = [-30,30]
y = 0




;X VelSet
[State 30021, VelSet 5]
type = VelSet
trigger1 = RootDist X < -100
;trigger2 = command = "holdfwd"
x = const(velocity.walk.back.x)*1.9-var(1)*2




[State 30021, push]
type = PlayerPush
trigger1 = 1
value = 0

[State 30021, turn]
type = Turn
trigger1 = p2dist X < -3


[State 30021, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 30021, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1




[State 30021, fly backward]
type = ChangeState
trigger1 = RootDist X > -100
value = 30020
ctrl = 0

[State 30021, Dodonpa command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "rdp"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010203) ), (root,NumExplod(90010301)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31000
ctrl = 0
ignorehitpause = 1




[State 30021, Telekinesis command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "HCB_x"
;trigger2 = Root, Command = "HCB_y"
;trigger3 = Root, Command = "HCB_z"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010406) ), (root,NumExplod(90010504)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31500
ctrl = 0
ignorehitpause = 1

;[State number, Shield command]
;type = ChangeState
;triggerall = RoundState = 2
;triggerall = Root, Power >= 1500
;triggerall = var(10) != 1
;triggerall = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
;value = 30012
;ctrl = 0

[State number, Shield command]
type = ChangeState
trigger1 = RoundState = 2
trigger1 = Root, Power >= 1500
trigger1 = var(10) != 1
trigger1 = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
value = 30012
ctrl = 0


[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1


[State 30000, ChangeState]
type     = ChangeState
trigger1 = Root,Fvar(27)=1
value    = 30005
ctrl     = 0


[State 30000, Lose]
type = Changestate
;triggerall = (RootDist X = [-20,60]) && (RootDist Y = [-20,60])
triggerall = RoundState != 2
trigger1 = Lose
value = 30171
ctrl = 0


[State 30000, AI CHANGESTATE];Taunt
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 2 * (root, AILevel**2/64.0))
value = 30195
ctrl = 0
[State 30000, AI CHANGESTATE];Dodonpa
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31000
ctrl = 0
[State 30000, AI CHANGESTATE];Telekinesis
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31500
ctrl = 0



;---------------------------------------------------------------------------
; Fly Up
[Statedef 30030]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 30030
velset = 0,0

[State 30000, Normal-worried animation]
Type = ChangeAnim
Trigger1 = Anim != IfElse (Root, Life <= 300, 30032, 30030)
Value = IfElse (Root, Life <= 300 , 30032, 30030)


[State 30030, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0




;Y VelSet
[State 30030, VelSet 3]
type = VelSet
trigger1 = RootDist Y < -10
y = -2.5-var(1)*2





[State 30030, push]
type = PlayerPush
trigger1 = 1
value = 0

[State 30030, turn]
type = Turn
trigger1 = p2dist X < -3

[State 30030, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 30030, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1




;ChangeStates
[State 30030, stand]
type = ChangeState
trigger1 = RootDist Y = [10,30]
trigger2 = RootDist Y > 30
value = 30000
ctrl = 0



;Copy paste from Stand state
;[State 30030, Move forward]
;type = ChangeState
;trigger1 = RootDist X > 50	;50
;value = 30010
;ctrl = 0

[State 30010, VelSet 6]
type = VelSet
trigger1 = RootDist X > 50
x = const(velocity.walk.fwd.x)*.5+var(1)*2

[State 30030, Move backward]
type = ChangeState
trigger1 = BackEdgeBodyDist >= 16
trigger1 = RootDist X < -19	;-20	;-10
trigger2 = RootDist X < -50
value = 30020
ctrl = 0


[State 30030, Dash up]
type = ChangeState
trigger1 = RootDist Y < -60
value = 30031
ctrl = 0






[State 30030, Dodonpa command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "rdp"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010203) ), (root,NumExplod(90010301)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31000
ctrl = 0
ignorehitpause = 1




[State 30030, Telekinesis command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "HCB_x"
;trigger2 = Root, Command = "HCB_y"
;trigger3 = Root, Command = "HCB_z"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010406) ), (root,NumExplod(90010504)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31500
ctrl = 0
ignorehitpause = 1




[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1



[State 30000, ChangeState]
type     = ChangeState
trigger1 = Root,Fvar(27)=1
value    = 30005
ctrl     = 0


[State 30000, Lose]
type = Changestate
;triggerall = (RootDist X = [-20,60]) && (RootDist Y = [-20,60])
triggerall = RoundState != 2
trigger1 = Lose
value = 30171
ctrl = 0


[State 30000, AI CHANGESTATE];Taunt
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 2 * (root, AILevel**2/64.0))
value = 30195
ctrl = 0
[State 30000, AI CHANGESTATE];Dodonpa
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31000
ctrl = 0
[State 30000, AI CHANGESTATE];Telekinesis
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31500
ctrl = 0


;---------------------------------------------------------------------------
; Dash Up
[Statedef 30031]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 30031
velset = 0,0

[State 30000, Normal-worried animation]
Type = ChangeAnim
Trigger1 = Anim != IfElse (Root, Life <= 300, 30033, 30031)
Value = IfElse (Root, Life <= 300 , 30033, 30031)


[State 30031, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0




;Y VelSet
[State 30031, VelSet 3]
type = VelSet
trigger1 = RootDist Y < -10
y = -4-var(1)*2


[State 30010, VelSet 6]
type = VelSet
trigger1 = RootDist X > 50
x = const(velocity.walk.fwd.x)*.7+var(1)*2



[State 30031, push]
type = PlayerPush
trigger1 = 1
value = 0

[State 30031, turn]
type = Turn
trigger1 = p2dist X < -3

[State 30031, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 30031, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1






;ChangeStates
[State 30031, Fly Upward]
type = ChangeState
trigger1 = RootDist Y > -30
value = 30030
ctrl = 0



[State 30031, Dodonpa command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "rdp"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010203) ), (root,NumExplod(90010301)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31000
ctrl = 0
ignorehitpause = 1




[State 30031, Telekinesis command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "HCB_x"
;trigger2 = Root, Command = "HCB_y"
;trigger3 = Root, Command = "HCB_z"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010406) ), (root,NumExplod(90010504)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31500
ctrl = 0
ignorehitpause = 1

;[State number, Shield command]
;type = ChangeState
;triggerall = RoundState = 2
;triggerall = Root, Power >= 1500
;triggerall = var(10) != 1
;triggerall = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
;value = 30012
;ctrl = 0

[State number, Shield command]
type = ChangeState
trigger1 = RoundState = 2
trigger1 = Root, Power >= 1500
trigger1 = var(10) != 1
trigger1 = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
value = 30012
ctrl = 0




[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1


[State 30000, ChangeState]
type     = ChangeState
trigger1 = Root,Fvar(27)=1
value    = 30005
ctrl     = 0


[State 30000, Lose]
type = Changestate
;triggerall = (RootDist X = [-20,60]) && (RootDist Y = [-20,60])
triggerall = RoundState != 2
trigger1 = Lose
value = 30171
ctrl = 0

[State 30000, AI CHANGESTATE];Taunt
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 2 * (root, AILevel**2/64.0))
value = 30195
ctrl = 0
[State 30000, AI CHANGESTATE];Dodonpa
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31000
ctrl = 0
[State 30000, AI CHANGESTATE];Telekinesis
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31500
ctrl = 0





;---------------------------------------------------------------------------
; Fly Down
[Statedef 30040]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 30040
velset = 0,0

[State 30000, Normal-worried animation]
Type = ChangeAnim
Trigger1 = Anim != IfElse (Root, Life <= 300, 30042, 30040)
Value = IfElse (Root, Life <= 300 , 30042, 30040)


[State 30040, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0




;Y VelSet
[State 30040, VelSet 3]
type = VelSet
trigger1 = RootDist Y > 10
y = 2.5+var(1)*2




[State 30040, push]
type = PlayerPush
trigger1 = 1
value = 0

[State 30040, turn]
type = Turn
trigger1 = p2dist X < -3

[State 30040, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 30040, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1






;ChangeStates
[State 30040, stand]
type = ChangeState
trigger1 = RootDist Y = [10,30]
trigger2 = RootDist Y < 10
value = 30000
ctrl = 0


;Copy paste from Stand state
;[State 30040, Move forward]
;type = ChangeState
;trigger1 = RootDist X > 50	;50
;value = 30010
;ctrl = 0

[State 30010, VelSet 6]
type = VelSet
trigger1 = RootDist X > 50
x = const(velocity.walk.fwd.x)*.5+var(1)*2

[State 30040, Move backward]
type = ChangeState
trigger1 = BackEdgeBodyDist >= 16
trigger1 = RootDist X < -19	;-20	;-10
trigger2 = RootDist X < -50
value = 30020
ctrl = 0




[State 30040, Dash up]
type = ChangeState
trigger1 = RootDist Y > 60
value = 30041
ctrl = 0





[State 30040, Dodonpa command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "rdp"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010203) ), (root,NumExplod(90010301)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31000
ctrl = 0
ignorehitpause = 1






[State 30040, Telekinesis command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "HCB_x"
;trigger2 = Root, Command = "HCB_y"
;trigger3 = Root, Command = "HCB_z"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010406) ), (root,NumExplod(90010504)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31500
ctrl = 0
ignorehitpause = 1





;[State number, Shield command]
;type = ChangeState
;triggerall = RoundState = 2
;triggerall = Root, Power >= 1500
;triggerall = var(10) != 1
;triggerall = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
;value = 30012
;ctrl = 0

[State number, Shield command]
type = ChangeState
trigger1 = RoundState = 2
trigger1 = Root, Power >= 1500
trigger1 = var(10) != 1
trigger1 = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
value = 30012
ctrl = 0



[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1


[State 30000, ChangeState]
type     = ChangeState
trigger1 = Root,Fvar(27)=1
value    = 30005
ctrl     = 0


[State 30000, Lose]
type = Changestate
;triggerall = (RootDist X = [-20,60]) && (RootDist Y = [-20,60])
triggerall = RoundState != 2
trigger1 = Lose
value = 30171
ctrl = 0


[State 30000, AI CHANGESTATE];Taunt
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 2 * (root, AILevel**2/64.0))
value = 30195
ctrl = 0
[State 30000, AI CHANGESTATE];Dodonpa
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31000
ctrl = 0
[State 30000, AI CHANGESTATE];Telekinesis
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31500
ctrl = 0



;---------------------------------------------------------------------------
; Dash Down
[Statedef 30041]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 30041
velset = 0,0

[State 30000, Normal-worried animation]
Type = ChangeAnim
Trigger1 = Anim != IfElse (Root, Life <= 300, 30043, 30041)
Value = IfElse (Root, Life <= 300 , 30043, 30041)


[State 30041, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0




;Y VelSet
[State 30041, VelSet 3]
type = VelSet
trigger1 = RootDist Y > 10
y = 4+var(1)*2


[State 30010, VelSet 6]
type = VelSet
trigger1 = RootDist X > 50
x = const(velocity.walk.fwd.x)*.7+var(1)*2




[State 30041, push]
type = PlayerPush
trigger1 = 1
value = 0

[State 30041, turn]
type = Turn
trigger1 = p2dist X < -3

[State 30041, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 30041, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1




;ChangeStates
[State 30041, Fly down]
type = ChangeState
trigger1 = RootDist Y < 40
value = 30040
ctrl = 0




[State 30041, Dodonpa command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "rdp"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010203) ), (root,NumExplod(90010301)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31000
ctrl = 0
ignorehitpause = 1






[State 30041, Telekinesis command]
type = ChangeState
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1		;no shield variable
triggerall = var(10) != 1
;trigger1 = Root, Command = "HCB_x"
;trigger2 = Root, Command = "HCB_y"
;trigger3 = Root, Command = "HCB_z"
trigger1 = IfElse(root,Facing = -1, (root,NumExplod(90010406) ), (root,NumExplod(90010504)) )
trigger1 = root,NumExplod(90000200) || root,NumExplod(90000210) || root,NumExplod(90000220)
value = 31500
ctrl = 0
ignorehitpause = 1

;[State number, Shield command]
;type = ChangeState
;triggerall = RoundState = 2
;triggerall = Root, Power >= 1500
;triggerall = var(10) != 1
;triggerall = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
;value = 30012
;ctrl = 0

[State number, Shield command]
type = ChangeState
trigger1 = RoundState = 2
trigger1 = Root, Power >= 1500
trigger1 = var(10) != 1
trigger1 = Root, StateNo = 4498
;trigger1 = Root, Command = "DD_2p"
value = 30012
ctrl = 0


[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1


[State 30000, ChangeState]
type     = ChangeState
trigger1 = Root,Fvar(27)=1
value    = 30005
ctrl     = 0


[State 30000, AI CHANGESTATE];Taunt
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 10 * (root, AILevel**2/64.0))
value = 30195
ctrl = 0
[State 30000, AI CHANGESTATE];Dodonpa
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31000
ctrl = 0
[State 30000, AI CHANGESTATE];Telekinesis
type = ChangeState
triggerall = Root, AILevel
triggerall = RoundState = 2
triggerall = Root, StateNo != [800,999]
triggerall = Root, Power >= 750
triggerall = var(1) != 1	
triggerall = var(10) != 1
trigger1 = ceil(random < 30 * (root, AILevel**2/64.0))
value = 31500
ctrl = 0




;------------------------------------------------------------------------------------
;Time Over / Cheap KO reaction
[Statedef 30170]
type = A
physics = N
sprpriority = -3
ctrl = 0
anim = 30170
velset = 0,0

[State 30170, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1


[State 30170, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 30170, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = s85,30170+random%4
volumescale = 100
channel = 1



[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1




;[State 30000, Lose]
;type = Changestate
;;triggerall = (RootDist X = [-20,60]) && (RootDist Y = [-20,60])
;triggerall = RoundState != 2
;trigger1 = Lose
;value = 30171
;ctrl = 0

;------------------------------------------------------------------------------------
;Reaction! Tien's dead!
[Statedef 30171]
type = A
physics = N
sprpriority = -5
ctrl = 0
anim = 30171
velset = 0,0

[State 30171, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 30171, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = s85,35104+random%3
volumescale = 100
persistent = 0
channel = 1


[State 30171, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = IfElse(Root,Alive = 0, 30171, 30170)
ignorehitpause = 1
persistent = 0



[State 30171, 4];Cheap KO
type = ChangeState
trigger1 = Root, StateNo = 5950 ;AnimTime = 0
value = 30170
ctrl = 0



[State 30171, 4]
type = ChangeState
triggerall = RootDist x <= -3
trigger1 = Root, StateNo = 5150 && Time > 75 ;AnimTime = 0
value = 30176
ctrl = 0

[State 30171, 4]
type = ChangeState
triggerall = RootDist x > -3 
trigger1 = Root, StateNo = 5150 && Time > 75 ;AnimTime = 0
value = 30172
ctrl = 0


[State 30171, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1




;------------------------------------------------------------------------------------
;Moving 1
[Statedef 30172]
type = A
physics = N
sprpriority = -5
ctrl = 0
anim = 30172
velset = 0,0

[State 30172, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1


[State 30172, VelSet]
type = VelSet
trigger1 = AnimElemTime(1) =  0
x = RootDist x/60
y = RootDist y/60
ignorehitpause = 1

[State 30172, VelSet]
type = VelSet
trigger1 = AnimElemTime(2) =  0
x = RootDist x/30
y = RootDist y/30
ignorehitpause = 1



[State 30172, 4]
type = ChangeState
trigger1 = AnimElemTime(2) > 0 && (RootDist X = [-40,30]) && (RootDist Y = [-10,20])
value = 30173
ctrl = 0




[State 30172, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1







;------------------------------------------------------------------------------------
;Moving 2 - Turning
[Statedef 30173]
type = A
physics = N
sprpriority = -5
ctrl = 0
anim = 30173
velset = 0,0

[State 30173, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1


[State 30173, VelSet]
type = VelSet
trigger1 = AnimElemTime(1) =  0
x = RootDist x/75
y = RootDist y/70
ignorehitpause = 1

[State 30173, VelSet]
type = VelSet
trigger1 = AnimElemTime(2) =  0
x = -RootDist x/75
y = RootDist y/70
ignorehitpause = 1



[State 30173, 4] ;Are you dead?
type = ChangeState
trigger1 = AnimElemTime(2) > 0 && (RootDist X = [-40,60]) && (RootDist Y = [-10,20])
value = 30174
ctrl = 0






[State 30173, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1



;------------------------------------------------------------------------------------
;Moving 3
[Statedef 30174]
type = A
physics = N
sprpriority = -5
ctrl = 0
anim = 30174
velset = 0,0

[State 30174, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1


[State 30174, VelSet]
type = VelSet
trigger1 = 1;AnimElemTime(1) =  0
x = -RootDist x/50
y = RootDist y/30
ignorehitpause = 1



[State 30174, 4] ;Are you dead?
type = ChangeState
trigger1 = AnimElemTime(1) > 4 && (RootDist X = [-40,40]) && (RootDist Y = [0,20])
value = 30175
ctrl = 0




[State 30174, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1



;------------------------------------------------------------------------------------
;Tien is defeated 2
[Statedef 30175]
type = A
physics = N
sprpriority = -5
ctrl = 0
anim = 30175
velset = 0,0

[State 30171, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = s85,35107+random%4
volumescale = 100
persistent = 0
channel = 1

[State 30175, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1


[State 30175, Turn]
type = Turn
trigger1 = PrevStateNo = 30176
persistent = 0

;[State 0, Turn]
;type = Turn
;trigger1 = Root,Facing = -1
;;ignorehitpause = 
;persistent = 0



[State 30175, PosSet]
type = PosSet
trigger1 = Time = 0
x = Root,Pos x
y = Root,Pos y
;ignorehitpause = 
persistent = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = -29
y = -14
;ignorehitpause = 
;persistent = 


[State 30000, Time Over / Cheap KO]
type = Changestate
triggerall = (RootDist X = [-20,60]) && (RootDist Y = [-20,60])
triggerall = RoundState != 2
trigger1 = Lose
trigger1 = Root, Alive
;trigger1 = Root, StateNo = 5950
;trigger2 = Root, StateNo = [170,175]
value = 30170
ctrl = 0


[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1





;------------------------------------------------------------------------------------
;Moving 1 - turned
[Statedef 30176]
type = A
physics = N
sprpriority = -5
ctrl = 0
anim = 30172
velset = 0,0

[State 30176, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = !Time;PrevStateNo = 30176
persistent = 0

[State 30171, VelSet]
type = VelSet
trigger1 = AnimElemTime(1) =  0
x = RootDist x/60
y = RootDist y/60
ignorehitpause = 1

[State 30171, VelSet]
type = VelSet
trigger1 = AnimElemTime(2) =  0
x = RootDist x/30
y = RootDist y/30
ignorehitpause = 1



[State 30041, 4]
type = ChangeState
trigger1 = AnimElemTime(2) > 0 && (RootDist X = [0,20]) && (RootDist Y = [0,20])
value = 30175
ctrl = 0


[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1






;------------------------------------------------------------------------------------
;Win
[Statedef 30180]
type = A
physics = N
sprpriority = 3
ctrl = 0
anim = 30180+Random%3
velset = 0,0

[State 30180, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1



[State 30180, 2]
type = VelSet
trigger1 = Time = 0
y = 0




[State 30180, PlaySnd - Kick];End 2
type = PlaySnd
triggerall = Anim = 30181
trigger1 = AnimElem = 4
value = S0,4


[State 30180, PlaySnd - Voice];End 2
type = PlaySnd
triggerall = Anim = 30181
trigger1 = AnimElem = 5
value = S85,30180+random%3
volumescale = 150



[State 30180, PlaySnd - Voice];End 3
type = PlaySnd
triggerall = Anim = 30182
trigger1 = AnimElem = 4
value = S85,30185+random%6
volumescale = 150


[State 30180, ChangeAnim]
type = ChangeAnim
triggerall = (Root, Anim = [1840,1841]) && (Root, AnimTime = 0)
trigger1 = Time > 0
value = 30003
elem = 1
ignorehitpause = 1
persistent = 0

[State 30180, Voice]
type = PlaySnd
trigger1 = (Root, Anim = [1840,1841]) && (Root, AnimTime = 0)
value = s85,30170+random%4
volumescale = 100
persistent = 0
channel = 1

[State 1869, Sweat]
type = Explod
trigger1 = Anim = 30003 && AnimElem = 2
anim = 1842
pos = 5,-47
postype = p1
removetime = -1
scale = 1,1
sprpriority = 5
bindtime = -1
ownpal = 1
removeongethit = 1
persistent = 0




[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1



;------------------------------------------------------------------------------------
;Intro
[Statedef 30190]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = IfElse(random>500,30190,30196)
velset = 0,0


[State 30196, PosAdd]
type = PosAdd
triggerall = Root, StateNo != 191
trigger1 = !Time
y = -30
x = -8

[State 30196, PosAdd]
type = PosAdd
triggerall = Root, StateNo = 191
trigger1 = !Time
y = -30
x = 60

[State 30190, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 30190, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 0,0;1,0

[State 30190, Stand Hover]	;copied from Jailbot by altoiddealer and edited a bit. ;)
type = Offset
trigger1 = 1
y = 2.5*cos(GameTime/6.0)




[State 30190, Explod] ;thought bubble
type = Explod
triggerall = Anim = 30190
triggerall = facing = 1
trigger1 = Time = 0
anim = 30191
id = 30190
pos = 15,-65
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -1
sprpriority = 0
ownpal = 1
removeongethit = 1
supermove = 0
;pausemove = 0

[State 30190, Explod] ;thought bubble
type = Explod
triggerall = Anim = 30190
triggerall = facing = -1
trigger1 = Time = 0
anim = 30191
id = 30190
pos = -10,-65
postype = p1  ;p2,front,back,left,right
facing = -1
bindtime = -1
removetime = -1
sprpriority = 0
ownpal = 1
removeongethit = 1
supermove = 0
;pausemove = 0







[State 30190, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 30190, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
trigger2 = Time = 4
x = 0





[State 30190, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1



[State 30190, stop moving]
type = VelSet
trigger1 = RootDist X = [30,50]
x = 0

[State 30041, Stand]
type = ChangeState
trigger1 = RoundState = 2
value = 30191
ctrl = 0




[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1




;------------------------------------------------------------------------------------
;Intro 1 end
[Statedef 30191]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = IfElse(PrevStateNo = 30190 && Anim = 30190,30192,30197)
velset = 0,0

[State 30191, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1


[State 30195, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
id = 30190
;ignorehitpause = 
;persistent = 

[State 30190, Explod] ;thoguht bubble
type = Explod
triggerall = Anim = 30192
triggerall = facing = 1
trigger1 = Time = 0
anim = 30193
id = 30191
pos = 15,-65
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
sprpriority = 0
ownpal = 1
removeongethit = 1
supermove = 0
;pausemove = 0

[State 30190, Explod] ;thoguht bubble
type = Explod
triggerall = Anim = 30192
triggerall = facing = -1
trigger1 = Time = 0
anim = 30193
id = 30191
pos = -10,-65
postype = p1  ;p2,front,back,left,right
facing = -1
bindtime = -1
removetime = -2
sprpriority = 0
ownpal = 1
removeongethit = 1
supermove = 0
;pausemove = 0



[State 30195, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 0,0;1,0

[State 30195, Stand Hover]	;copied from Jailbot by altoiddealer and edited a bit. ;)
type = Offset
trigger1 = 1
y = 2.5*cos(GameTime/6.0)


[State 30195, VelSet]
type = VelSet
trigger1 = Time = 0
y = 0

[State 30195, VelSet] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
trigger2 = Time = 4
x = 0

[State 30195, 1]
type = VelSet
trigger1 = RootDist Y = 0
y = 0

[State 30195, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 30195, Stand]
type = Changestate
trigger1 = AnimTime = 0
value = 30000

[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1




;------------------------------------------------------------------------------------
;Intro 5 -1 - ball
[Statedef 30192]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 30198
velset = 0,0

[State 30190, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 30190, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 0,0;1,0

[State 30190, Stand Hover]	;copied from Jailbot by altoiddealer and edited a bit. ;)
type = Offset
trigger1 = 1
y = 2.5*cos(GameTime/6.0)


[State 2102, Helper - FX 1 Start]
type = Helper
trigger1 = !Time
helpertype = normal ;player
name = "Volleyball"
ID = 19600
stateno = 19600
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 1
sprpriority = 5



[State 30190, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 30190, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
trigger2 = Time = 4
x = 0


[State 30041, Stand]
type = ChangeState
trigger1 = AnimTime = 0
value = 30193
ctrl = 0




[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1




;------------------------------------------------------------------------------------
;Intro 5 -2 - ball
[Statedef 30193]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 30199
velset = 0,0



[State 30191, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1


[State 30195, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
id = 30190
;ignorehitpause = 
;persistent = 




[State 30195, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 0,0;1,0

[State 30195, Stand Hover]	;copied from Jailbot by altoiddealer and edited a bit. ;)
type = Offset
trigger1 = 1
y = 2.5*cos(GameTime/6.0)


[State 30195, VelSet]
type = VelSet
trigger1 = Time = 0
y = 0

[State 30195, VelSet] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
trigger2 = Time = 4
x = 0

[State 30195, 1]
type = VelSet
trigger1 = RootDist Y = 0
y = 0





[State 30195, Stand]
type = Changestate
trigger1 = roundstate = 2;AnimTime = 0
value = 30000

[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1






;------------------------------------------------------------------------------------
;Taunt
[Statedef 30195]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 30195
velset = 0,0


[State 30195, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
id = 30190



[State 30195, Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = s85,30195+random%3
volumescale = 100
persistent = 0
channel = 1




[State 30195, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0

[State 30195, Stand Hover]	;copied from Jailbot by altoiddealer and edited a bit. ;)
type = Offset
trigger1 = 1
y = 2.5*cos(GameTime/6.0)


[State 30195, VelSet]
type = VelSet
trigger1 = Time = 0
y = 0

[State 30195, VelSet] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
trigger2 = Time = 4
x = 0

[State 30195, 1]
type = VelSet
trigger1 = RootDist Y = 0
y = 0

[State 30195, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 35050
ctrl = 0

[State 30195, turn]
type = Turn
trigger1 = p2dist X < -3

[State 30195, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

;ChangeStates
[State 30195, Stand]
type = Changestate
trigger1 = AnimTime = 0
value = 30000


[State 30195, Tien is damaged!]
type = Changestate
triggerall = Root, StateNo != [120,159]
trigger1 = Root, MoveType = H
trigger1 = Root, Alive
value = 30002
ctrl = 0



[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1




;------------------------------------------------------------------------------------
;Intro 2 -1
[Statedef 30196]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 30200
velset = 0,0

[State 30196, PosAdd]
type = PosAdd
trigger1 = !Time
y = -30
x = -8


[State 30196, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 30196, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 0,0;1,0

[State 30196, Stand Hover]	;copied from Jailbot by altoiddealer and edited a bit. ;)
type = Offset
trigger1 = 1
y = 1*cos(GameTime/12.0)

[State 30196, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 30196, Stand]
type = ChangeState
trigger1 = RoundState = 2
value = 30197
ctrl = 0


[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1




;------------------------------------------------------------------------------------
;Intro 2 -2
[Statedef 30197]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 30201
velset = 0,0



[State 30197, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1


[State 30197, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
id = 30190
;ignorehitpause = 
;persistent = 




[State 30197, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 0,0;1,0

[State 30197, Stand Hover]	;copied from Jailbot by altoiddealer and edited a bit. ;)
type = Offset
trigger1 = 1
y = 2.5*cos(GameTime/6.0)


[State 30197, VelSet]
type = VelSet
trigger1 = Time = 0
y = 0

[State 30197, VelSet] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
trigger2 = Time = 4
x = 0

[State 30197, 1]
type = VelSet
trigger1 = RootDist Y = 0
y = 0




[State 30195, Stand]
type = Changestate
trigger1 = AnimTime = 0
value = 30000

[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1





;------------------------------------------------------------------------------------
;Dodonpa - start-up
[Statedef 31000]
type = A
movetype= I
physics = N
sprpriority = -1
ctrl = 0
anim = 31000
poweradd = -750
velset = 0,0

[State 30000, no more moves variable]
type = VarSet
trigger1 = !Time
var(10) = 1
ignorehitpause = 1

[State 31000, Dodonpa]
type = Explod
trigger1 = Animelem = 6
anim = 2205
id = 31000
pos = -20,-18
postype = p1
removetime = -1
sprpriority = 0
ownpal = 0
facing = 1
removeongethit = 1
ignorehitpause = 1
bindtime = -1
persistent = 0





[State 31000, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0

[State 31000, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 31000, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1




[State 31000, PlaySnd]
type = PlaySnd
trigger1 = Time = 16
value = s2200,0
[State 31000, PlaySnd]
type = PlaySnd
trigger1 = Time = 25
value = s2200,1
[State 31000, PlaySnd]
type = PlaySnd
trigger1 = Time = 34
value = s2200,2
[State 31000, PlaySnd]
type = PlaySnd
trigger1 = Time = 43
value = s2200,3









;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = root, MoveType = H
triggerall = RoundState = 2
trigger1 = enemy, AnimExist(5939)
trigger1 = enemy, NumExplod(991901)
trigger2 = !enemy, AnimExist(5939)
trigger2 = root, Var(43)=1
trigger2 = root, NumExplod(3502)
trigger2 = root,var(48)-root,var(49)>=30
trigger3 = !enemy, AnimExist(5939)
trigger3 = root, Var(43)=2
trigger3 = root, NumExplod(3502)
trigger3 = root,var(48)-root,var(49)>=60
trigger4 = !enemy, AnimExist(5939)
trigger4 = root, Var(43)=3
trigger4 = root, NumExplod(3502)
trigger4 = root,var(48)-root,var(49)>=90
trigger5 = !enemy, AnimExist(5939)
trigger5 = root, Var(43)=4
trigger5 = root, NumExplod(3502)
trigger5 = root,var(48)-root,var(49)>=120
trigger6 = !enemy, AnimExist(5939)
trigger6 = root, Var(43)=5
trigger6 = root, NumExplod(3502)
trigger6 = root,var(48)-root,var(49)>=150
trigger7 = !enemy, AnimExist(5939)
trigger7 = root, NumExplod(3502)
trigger7 = root, Var(43)=6
trigger7 = root,var(48)-root,var(49)>=180
value = 35210		;30005;3521
ctrl = 0
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = RoundState = 2
trigger1 = root, NumExplod(991901)
;trigger2 = root, StateNo = 3419
;trigger3 = root, StateNo = 3414
value = 35210		;30005;3521
ctrl = 0























;ChangeStates
[State 31000, Dodonpa - launch]
type = Changestate
trigger1 = Time = 50	;change
value = 31001
persistent = 0 
ctrl = 0



[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1



;------------------------------------------------------------------------------------
;Dodonpa - launch
[Statedef 31001]
type = A
movetype= A
physics = N
sprpriority = 0
ctrl = 0
anim = 31001
velset = 0,0

[state 31001, RemoveExplod - Dodonpa]
type = RemoveExplod
trigger1 = 1
id = 31000


[State 31001, Voice]	;Chiaotzu: "Dodon!" / "Dodon break!" / "Dodonpa!"
type = PlaySnd
trigger1 = AnimElemTime (1) = 0
value = 85,31000+random%9
volumescale = 100




[State 31001, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s2200,4

[State 31001, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0

[State 31001, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 31001, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1

[State 31001, beam helper]
type = helper
trigger1 = AnimElem = 2
helpertype = normal
stateno = 2220
ID = 2220
name = "Dodonpa"
postype = p1
ownpal = 1
pos = 20,-30  ;0,0

[State 2102, Helper - FX 1 Start]
type = Helper
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "Dodonpa FX 1 Start"
ID = 2221
stateno = 2221
pos = 0,27
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 1
sprpriority = 5












;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = root, MoveType = H
triggerall = RoundState = 2
trigger1 = enemy, AnimExist(5939)
trigger1 = enemy, NumExplod(991901)
trigger2 = !enemy, AnimExist(5939)
trigger2 = root, Var(43)=1
trigger2 = root, NumExplod(3502)
trigger2 = root,var(48)-root,var(49)>=30
trigger3 = !enemy, AnimExist(5939)
trigger3 = root, Var(43)=2
trigger3 = root, NumExplod(3502)
trigger3 = root,var(48)-root,var(49)>=60
trigger4 = !enemy, AnimExist(5939)
trigger4 = root, Var(43)=3
trigger4 = root, NumExplod(3502)
trigger4 = root,var(48)-root,var(49)>=90
trigger5 = !enemy, AnimExist(5939)
trigger5 = root, Var(43)=4
trigger5 = root, NumExplod(3502)
trigger5 = root,var(48)-root,var(49)>=120
trigger6 = !enemy, AnimExist(5939)
trigger6 = root, Var(43)=5
trigger6 = root, NumExplod(3502)
trigger6 = root,var(48)-root,var(49)>=150
trigger7 = !enemy, AnimExist(5939)
trigger7 = root, NumExplod(3502)
trigger7 = root, Var(43)=6
trigger7 = root,var(48)-root,var(49)>=180
value = 35210		;30005;3521
ctrl = 0
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = RoundState = 2
trigger1 = root, NumExplod(991901)
;trigger2 = root, StateNo = 3419
;trigger3 = root, StateNo = 3414
value = 35210		;30005;3521
ctrl = 0



















;ChangeStates
[State 31001, Dodonpa - return to idle]
type = Changestate
trigger1 = Time > 60;AnimTime = 0		;change
value = 31002
persistent = 0 
ctrl = 0


[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1

;------------------------------------------------------------------------------------
;Dodonpa - return to idle
[Statedef 31002]
type = A
movetype= I
physics = N
sprpriority = 0
ctrl = 0
anim = 31002
velset = 0,0

[State 31002, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0

[State 31002, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 31002, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1















;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = root, MoveType = H
triggerall = RoundState = 2
trigger1 = enemy, AnimExist(5939)
trigger1 = enemy, NumExplod(991901)
trigger2 = !enemy, AnimExist(5939)
trigger2 = root, Var(43)=1
trigger2 = root, NumExplod(3502)
trigger2 = root,var(48)-root,var(49)>=30
trigger3 = !enemy, AnimExist(5939)
trigger3 = root, Var(43)=2
trigger3 = root, NumExplod(3502)
trigger3 = root,var(48)-root,var(49)>=60
trigger4 = !enemy, AnimExist(5939)
trigger4 = root, Var(43)=3
trigger4 = root, NumExplod(3502)
trigger4 = root,var(48)-root,var(49)>=90
trigger5 = !enemy, AnimExist(5939)
trigger5 = root, Var(43)=4
trigger5 = root, NumExplod(3502)
trigger5 = root,var(48)-root,var(49)>=120
trigger6 = !enemy, AnimExist(5939)
trigger6 = root, Var(43)=5
trigger6 = root, NumExplod(3502)
trigger6 = root,var(48)-root,var(49)>=150
trigger7 = !enemy, AnimExist(5939)
trigger7 = root, NumExplod(3502)
trigger7 = root, Var(43)=6
trigger7 = root,var(48)-root,var(49)>=180
value = 35210		;30005;3521
ctrl = 0
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = RoundState = 2
trigger1 = root, NumExplod(991901)
;trigger2 = root, StateNo = 3419
;trigger3 = root, StateNo = 3414
value = 35210		;30005;3521
ctrl = 0






















;ChangeStates
[State 31002, Dodonpa - return to idle]
type = Changestate
trigger1 = AnimTime = 0		;change
value = 30000
persistent = 0 
ctrl = 0




[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1



;------------------------------------------------------------------------------------
;Telekinesis - start-up
[Statedef 31500]
type = A
movetype= I
physics = N
sprpriority = -1
ctrl = 0
anim = 31500
poweradd = -750
velset = 0,0

[State 30000, no more moves variable]
type = VarSet
trigger1 = !Time
var(10) = 1
ignorehitpause = 1


[State 31500, Telekinesis - FX 1]
type = Helper
trigger1 = AnimElem = 2
helpertype = normal
stateno = 31505
ID = 31505
name = "FX 1"
postype = p1
ownpal = 1
pos = 0,0
persistent = 0




[State 31500, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0

[State 31500, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 31500, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1

[State 31500, PlaySnd]
type = PlaySnd
trigger1 = Time = 16
value = s31500,0










;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = root, MoveType = H
triggerall = RoundState = 2
trigger1 = enemy, AnimExist(5939)
trigger1 = enemy, NumExplod(991901)
trigger2 = !enemy, AnimExist(5939)
trigger2 = root, Var(43)=1
trigger2 = root, NumExplod(3502)
trigger2 = root,var(48)-root,var(49)>=30
trigger3 = !enemy, AnimExist(5939)
trigger3 = root, Var(43)=2
trigger3 = root, NumExplod(3502)
trigger3 = root,var(48)-root,var(49)>=60
trigger4 = !enemy, AnimExist(5939)
trigger4 = root, Var(43)=3
trigger4 = root, NumExplod(3502)
trigger4 = root,var(48)-root,var(49)>=90
trigger5 = !enemy, AnimExist(5939)
trigger5 = root, Var(43)=4
trigger5 = root, NumExplod(3502)
trigger5 = root,var(48)-root,var(49)>=120
trigger6 = !enemy, AnimExist(5939)
trigger6 = root, Var(43)=5
trigger6 = root, NumExplod(3502)
trigger6 = root,var(48)-root,var(49)>=150
trigger7 = !enemy, AnimExist(5939)
trigger7 = root, NumExplod(3502)
trigger7 = root, Var(43)=6
trigger7 = root,var(48)-root,var(49)>=180
value = 35210		;30005;3521
ctrl = 0
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = RoundState = 2
trigger1 = root, NumExplod(991901)
;trigger2 = root, StateNo = 3419
;trigger3 = root, StateNo = 3414
value = 35210		;30005;3521
ctrl = 0




















;ChangeStates
[State 31000, Telekinesis - launch]
type = Changestate
trigger1 = Time = 50	;change
value = 31501
persistent = 0 
ctrl = 0




;[State 31000, VarSet]; light = 0; medium = 1; heavy = 2
;type      = VarSet
;trigger1  = Time = 0 && !AILevel
;var(6)    = IfElse(Root, Command = "HCB_x", 0, IfElse(Root, Command = "HCB_y", 1, 2))
;[State 31000, VarSet]; for the AI (this may have to be removed)
;type      = VarSet
;trigger1  = Time = 0 && AILevel
;var(6)    = IfElse(random<100, 0, IfElse(random<350, 1, 2))



[State 31000, VarSet]; light = 0
type      = VarSet
trigger1  = Time = 0 && !root,AILevel
trigger1  = IfElse(root,Facing = -1, (root,NumExplod(90010406) ), (root,NumExplod(90010504)) ) && root,NumExplod(90000200)
var(6)    = 0
[State 31000, VarSet]; medium = 1
type      = VarSet
trigger1  = Time = 0 && !root,AILevel
trigger1  = IfElse(root,Facing = -1, (root,NumExplod(90010406) ), (root,NumExplod(90010504)) ) && root,NumExplod(90000210)
var(6)    = 1
[State 31000, VarSet]; heavy = 2
type      = VarSet
trigger1  = Time = 0 && !root,AILevel            
trigger1  = IfElse(root,Facing = -1, (root,NumExplod(90010406) ), (root,NumExplod(90010504)) ) && root,NumExplod(90000220)
var(6)    = 2

;[State 31000, VarSet]; for the AI (this may have to be removed)
;type      = VarSet
;trigger1  = Time = 0 && AILevel
;var(6)    = IfElse(random<100, 0, IfElse(random<350, 1, 2))

[State 31000, VarSet]; for the AI 
type      = VarSet
trigger1  = Time = 0 && Root,AILevel
var(6)    = IfElse(p2dist x < 30, 0, IfElse((p2dist x >= 30 && p2dist x < 75) , 1, 2))






[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1



;------------------------------------------------------------------------------------
;Telekinesis - launch
[Statedef 31501]
type = A
physics = N
sprpriority = -1
ctrl = 0
anim = 31501
velset = 0,0


[State 31501, Reset Juggle Points]
type = ParentVarSet
trigger1 = NumHelper(31508)=1
trigger1 = Helper(31508),Movehit
var(18) = 0
ignorehitpause = 1
persistent = 0




[State 31501, Voice]	;Chiaotzu: "And...hold!" / "Stop right there!"
type = PlaySnd
trigger1 = AnimElemTime (1) = 0
value = 85,31500+random%13
volumescale = 100



[State 31501, Telekinesis - FX 2]
type = Helper
trigger1 = Animelem = 1
helpertype = normal
stateno = 31506
ID = 31506
name = "FX 2"
postype = p1
ownpal = 1
pos = 0,0		;0,0
persistent = 0


[State 31501, Telekinesis - FX 3]
type = Helper
trigger1 = Time = 6
helpertype = normal
stateno = 31507
ID = 31507
name = "FX 3"
postype = p1
ownpal = 1
pos = 3,-28		;3,-55
persistent = 0



[State 31501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s31500,1
persistent = 0





[State 31501, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0

[State 31501, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 31501, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1

[State 31501, beam helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = normal
stateno = 31508
ID = 31508
name = "Telekinesis"
postype = p1
ownpal = 1
pos = Cond(var(6)=0,90,Cond(var(6)=1,130,180)),-28		;y -55
persistent = 0















;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = root, MoveType = H
triggerall = RoundState = 2
trigger1 = enemy, AnimExist(5939)
trigger1 = enemy, NumExplod(991901)
trigger2 = !enemy, AnimExist(5939)
trigger2 = root, Var(43)=1
trigger2 = root, NumExplod(3502)
trigger2 = root,var(48)-root,var(49)>=30
trigger3 = !enemy, AnimExist(5939)
trigger3 = root, Var(43)=2
trigger3 = root, NumExplod(3502)
trigger3 = root,var(48)-root,var(49)>=60
trigger4 = !enemy, AnimExist(5939)
trigger4 = root, Var(43)=3
trigger4 = root, NumExplod(3502)
trigger4 = root,var(48)-root,var(49)>=90
trigger5 = !enemy, AnimExist(5939)
trigger5 = root, Var(43)=4
trigger5 = root, NumExplod(3502)
trigger5 = root,var(48)-root,var(49)>=120
trigger6 = !enemy, AnimExist(5939)
trigger6 = root, Var(43)=5
trigger6 = root, NumExplod(3502)
trigger6 = root,var(48)-root,var(49)>=150
trigger7 = !enemy, AnimExist(5939)
trigger7 = root, NumExplod(3502)
trigger7 = root, Var(43)=6
trigger7 = root,var(48)-root,var(49)>=180
value = 35210		;30005;3521
ctrl = 0
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = RoundState = 2
trigger1 = root, NumExplod(991901)
;trigger2 = root, StateNo = 3419
;trigger3 = root, StateNo = 3414
value = 35210		;30005;3521
ctrl = 0






















;ChangeStates
[State 31501, Telekinesis - return to idle]
type = Changestate
trigger1 = Time = 80
value = 31502
persistent = 0 
ctrl = 0


[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1

;------------------------------------------------------------------------------------
;Telekinesis - return to idle
[Statedef 31502]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 31502
velset = 0,0


[State 31502, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0

[State 31502, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 31502, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 35000		;change this for damage states
time = -1








;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = root, MoveType = H
triggerall = RoundState = 2
trigger1 = enemy, AnimExist(5939)
trigger1 = enemy, NumExplod(991901)
trigger2 = !enemy, AnimExist(5939)
trigger2 = root, Var(43)=1
trigger2 = root, NumExplod(3502)
trigger2 = root,var(48)-root,var(49)>=30
trigger3 = !enemy, AnimExist(5939)
trigger3 = root, Var(43)=2
trigger3 = root, NumExplod(3502)
trigger3 = root,var(48)-root,var(49)>=60
trigger4 = !enemy, AnimExist(5939)
trigger4 = root, Var(43)=3
trigger4 = root, NumExplod(3502)
trigger4 = root,var(48)-root,var(49)>=90
trigger5 = !enemy, AnimExist(5939)
trigger5 = root, Var(43)=4
trigger5 = root, NumExplod(3502)
trigger5 = root,var(48)-root,var(49)>=120
trigger6 = !enemy, AnimExist(5939)
trigger6 = root, Var(43)=5
trigger6 = root, NumExplod(3502)
trigger6 = root,var(48)-root,var(49)>=150
trigger7 = !enemy, AnimExist(5939)
trigger7 = root, NumExplod(3502)
trigger7 = root, Var(43)=6
trigger7 = root,var(48)-root,var(49)>=180
value = 35210		;30005;3521
ctrl = 0
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = RoundState = 2
trigger1 = root, NumExplod(991901)
;trigger2 = root, StateNo = 3419
;trigger3 = root, StateNo = 3414
value = 35210		;30005;3521
ctrl = 0

















;ChangeStates
[State 31502, Telekinesis - return to idle]
type = Changestate
trigger1 = AnimTime = 0
value = 30000
persistent = 0 
ctrl = 0




[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1



;---------------------------------------------------------------------------
;Paralyzed
[Statedef 31509]
type    = U;A
movetype= H
physics = N
VelSet = 0,0
sprpriority = 2

[State 31509, PosSet]
type = PosSet
trigger1 = Pos y >=0
y = 0
ignorehitpause = 1
;persistent = 



[State 810, ChangeAnim]
type = ChangeAnim2
Trigger1 = Time = 0
value = 31509

[State 810, 2]
type = SelfState
trigger1 = Time = 125
;value = IfElse(Alive,5050,5150)	;Alive = he gets up; dead = he lies down.
value = 5050




;---------------------------------------------------------------------------
; Shield
[Statedef 32000]
type    = A
physics = N
sprpriority = 0
ctrl = 0
anim = 32000
poweradd = -1500
velset = 0,0

[State 32000, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1


[State 32000, no more moves variable]
type = VarSet
trigger1 = !Time
var(10) = 1
ignorehitpause = 1


[State 32000, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0

[State 32000, PalFX]
type = PalFX
trigger1 = Time = 15
trigger2 = Time = 23
trigger3 = Time = 31
trigger4 = Time = 39
trigger5 = Time = 47
trigger6 = Time = 55
trigger7 = Time = 63
add = 40, 40, 40
time = 4
ignorehitpause = 0




[State 32000, NotHitBy]
type = NotHitBy
trigger1 = Time < 24
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1


[State 32000, beam helper]
type = Helper
trigger1 = AnimElem = 2
helpertype = normal
stateno = 32005
ID = 32005
name = "Shield"
postype = p1
ownpal = 1
pos = 0,0

[State 32000, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = S85,30205
volumescale = 100
channel = 1


[State 32000, push]
type = PlayerPush
trigger1 = 1
value = 0

[State 32000, turn]
type = Turn
trigger1 = p2dist X < -3

[State 32000, VelSet]
type = VelSet
trigger1 = NumHelper(32005)
trigger1 = Helper(32005), MoveContact
trigger1 = FrontEdgeDist < 80
x = -5;-2
ignorehitpause = 1






;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = root, MoveType = H
triggerall = RoundState = 2
trigger1 = enemy, AnimExist(5939)
trigger1 = enemy, NumExplod(991901)
trigger2 = !enemy, AnimExist(5939)
trigger2 = root, Var(43)=1
trigger2 = root, NumExplod(3502)
trigger2 = root,var(48)-root,var(49)>=30
trigger3 = !enemy, AnimExist(5939)
trigger3 = root, Var(43)=2
trigger3 = root, NumExplod(3502)
trigger3 = root,var(48)-root,var(49)>=60
trigger4 = !enemy, AnimExist(5939)
trigger4 = root, Var(43)=3
trigger4 = root, NumExplod(3502)
trigger4 = root,var(48)-root,var(49)>=90
trigger5 = !enemy, AnimExist(5939)
trigger5 = root, Var(43)=4
trigger5 = root, NumExplod(3502)
trigger5 = root,var(48)-root,var(49)>=120
trigger6 = !enemy, AnimExist(5939)
trigger6 = root, Var(43)=5
trigger6 = root, NumExplod(3502)
trigger6 = root,var(48)-root,var(49)>=150
trigger7 = !enemy, AnimExist(5939)
trigger7 = root, NumExplod(3502)
trigger7 = root, Var(43)=6
trigger7 = root,var(48)-root,var(49)>=180
value = 35210		;30005;3521
ctrl = 0
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = RoundState = 2
trigger1 = root, NumExplod(991901)
;trigger2 = root, StateNo = 3419
;trigger3 = root, StateNo = 3414
value = 35210		;30005;3521
ctrl = 0




















;ChangeStates
[State 32000, End]
type = ChangeState
trigger1 = NumHelper(32005) = 0
trigger1 = Time > 8
value = 32001
ctrl = 0


[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1




;---------------------------------------------------------------------------
;  Shield - to stand
[Statedef 32001]
type    = A
physics = N
sprpriority = 0
ctrl = 0
anim = 32001
velset = 0,0

[State 32001, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0

[State 32001, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 32001, Push]
type = PlayerPush
trigger1 = 1
value = 0

















;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;CODE FOR CINEMATIC 
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = root, MoveType = H
triggerall = RoundState = 2
trigger1 = enemy, AnimExist(5939)
trigger1 = enemy, NumExplod(991901)
trigger2 = !enemy, AnimExist(5939)
trigger2 = root, Var(43)=1
trigger2 = root, NumExplod(3502)
trigger2 = root,var(48)-root,var(49)>=30
trigger3 = !enemy, AnimExist(5939)
trigger3 = root, Var(43)=2
trigger3 = root, NumExplod(3502)
trigger3 = root,var(48)-root,var(49)>=60
trigger4 = !enemy, AnimExist(5939)
trigger4 = root, Var(43)=3
trigger4 = root, NumExplod(3502)
trigger4 = root,var(48)-root,var(49)>=90
trigger5 = !enemy, AnimExist(5939)
trigger5 = root, Var(43)=4
trigger5 = root, NumExplod(3502)
trigger5 = root,var(48)-root,var(49)>=120
trigger6 = !enemy, AnimExist(5939)
trigger6 = root, Var(43)=5
trigger6 = root, NumExplod(3502)
trigger6 = root,var(48)-root,var(49)>=150
trigger7 = !enemy, AnimExist(5939)
trigger7 = root, NumExplod(3502)
trigger7 = root, Var(43)=6
trigger7 = root,var(48)-root,var(49)>=180
value = 35210		;30005;3521
ctrl = 0
;----------------------------------------
;AAAAACinematic Super! Leave!
[State -1]
type = ChangeState
;triggerall = IsHelper(3501) || IsHelper(3502)
;triggerall = StateNo != [30005,30008];[3514,3523] ;State when Chiaotzu leaves
;triggerall = StateNo != 5150
triggerall = RoundState = 2
trigger1 = root, NumExplod(991901)
;trigger2 = root, StateNo = 3419
;trigger3 = root, StateNo = 3414
value = 35210		;30005;3521
ctrl = 0














;ChangeStates
[State 32001, to stand state]
type = ChangeState
trigger1 = AnimTime = 0
value = 30000
ctrl = 0




[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1








;------------------------------------------------------------------------------------
;Sacrifice 1 
[Statedef 32500]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= -2000
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
anim = 32500
sprpriority = 5

[State 32500, PosSet]
type = PosSet
trigger1 = !Time
x = enemy,pos x +IfElse(facing=1,250,-250)



[State 32500, Turn]
type = Turn
trigger1 = !Time
persistent = 0



[State 32500, VelSet]
type = VelSet
trigger1 = AnimElemTime(1)>0
x = 8	;8.6 -   10
ignorehitpause = 1


[State 32500, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 32500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause = 
;persistent = 

;tip of the day: if you put ParentVarAdd/Set under the ChangeState it won't work! So funny!
;[State 32500, ParentVarSet]
;type = ParentVarSet
;trigger1 = 1
;var(40) = 0
;ignorehitpause = 1
;persistent = 0

[State 32500, ParentVarSet]
type = ParentVarSet
trigger1 = 1
fvar(27) = 0
ignorehitpause = 1
persistent = 0



[State 805, 1]
type = HitDef
triggerall = P2moveType != H
Trigger1 = !Time
attr = S, HT          ;Attributes: Standing, Hyper (Super) Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
p1sprpriority = 5     ;Draw Chiaotzu's sprite in front of p2; p2's sprite priority is set to 0 by default
p2sprpriority = 0
p1facing = 1
p2facing = -1          ;Force p2 to face Chiaotzu
guard.dist = 0        ;This prevents p2 from going into a guard state if close
;fall = 1              ;Force p2 into falling down
numhits = 0
sparkno = -1;s7010
guard.sparkno = -1;s7000
sparkxy = -12,-45
hitsound = -1;s5, 3
guardsound = -1;S6,0
getpower = 0,0
givepower = 0,0

;TargetState first, ChangeState second, otherwise Mugen won't read the TargetState, resulting in more bugs.
;Instead of P2StateNo
[State 805, TargetState]
type = TargetState
trigger1 = MoveHit
trigger1 = NumTarget
trigger1 = !(Target, IsHelper)
value = 32505
ignorehitpause = 1

;Instead of P1StateNo
[State 805, ChangeState]
type = ChangeState
trigger1 = MoveHit
trigger1 = NumTarget
trigger1 = !(Target, IsHelper)
value = 32501
persistent = 1	;if omitted this still holds true.
ignorehitpause = 1


[State 32500, Walk forward] ;no grab
type = ChangeState
trigger1 = P2Dist X < 1
value = 30010
ctrl = 0




;------------------------------------------------------------------------------------
;Sacrifice 2 - grab
[Statedef 32501]
type    = A
movetype= A
physics = N
juggle  = 2
;poweradd= 30
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
anim = 32501
sprpriority = 2

;[State 2500, SuperPause]
;type = SuperPause
;trigger1 = !Time
;time = 50	;176
;p2defmul = 1
;unhittable = 1
;anim = -1
;;sound = s2000,10
;darken = 0
;movetime = 50	;176

;[State 2500, BG Pal FX - Dark]
;type = BGPalFX
;trigger1 = !time
;time = 50	;176
;color = 0
;mul = 0,0,0

[State 0, Turn]
type = Turn
trigger1 = !Time
;ignorehitpause = 
;persistent = 


[State 0, BindToTarget]
type = BindToTarget
trigger1 = !Time
time = 1
pos = 0,0,mid
;ignorehitpause = 
;persistent =

[State 0, Explod]
type = Explod
trigger1 = Time = 112
anim = 32502
ID = 32502
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1



[State 0, Explod]
type = Explod
trigger1 = Time = 112
anim = 32504
ID = 32504
pos = 0, 30
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1




[State 0, PlaySnd];Chiaotzu grab sound
type = PlaySnd
trigger1 = !Time
value = S5,10


[State 32501, Voice]
type = PlaySnd
trigger1 = Time = 50
value = S85, 32500 +random%4
volumescale = 200
channel = 1


[State 0, PlaySnd];Sound 1
type = PlaySnd
trigger1 = Time = 100
value = S32000,0

[State 0, PlaySnd];Sound 2
type = PlaySnd
trigger1 = Time = 112
value = S8,1



[State 32500, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 32500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause = 
;persistent = 




[State 32500, Walk forward]
type = ChangeState
trigger1 = Time = 150
value = 32502
ctrl = 0




;------------------------------------------------------------------------------------
;Sacrifice 3 - blowing up, falling down
[Statedef 32502]
type    = A
movetype= H
physics = N
juggle  = 2
;poweradd= 30
VelSet = -7,-7   ; -2,0;.3*vel x,.3*vel y
ctrl = 0
anim = 35005
sprpriority = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S32500,0
volumescale = 220

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S15000,10
volumescale = 130


[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
id = 32502

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
id = 32504

[State 806, Explosion (Chiaotzu)]
type = Explod
triggerall = P2MoveType = H
trigger1 = !Time
anim = 32503
pos = 0,0
postype = p1
removetime = -2
sprpriority = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 806, Explosion (attack effect)]
type = Explod
triggerall = P2MoveType = H
trigger1 = !Time
anim = 2270
pos = 0,0
postype = p1
removetime = -2
sprpriority = 5
ownpal = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 2503, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 5
freq = 120
ampl = 6



[State 32502, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = Time = 0
value = -1*Ceil(IfElse(Root, FVar(11) * 400 < 100, 100, Root, FVar(11) * 400))  ;-60
kill = 1
absolute = 0
;ignorehitpause = 1


[State 32502, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
;ignorehitpause = 
;persistent = 

[State 32502, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = Time = 0
value = 32506
ignorehitpause = 1
;persistent = 


[State 32502, Gravity]
type = Gravity
trigger1 = 1
;ignorehitpause = 
;persistent = 


[State 32502, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1



[State 32502, Bouncing on ground]
type = ChangeState
trigger1 = Pos y >= 0
value = 32503
ctrl = 0




;------------------------------------------------------------------------------------
;Sacrifice 4 - bouncing on ground
[Statedef 32503]
type    = A
movetype= H
physics = N
juggle  = 2
;poweradd= 30
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
anim = 35006
sprpriority = 5

[State 32505, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
;ignorehitpause = 
;persistent = 

[State 0, PosSet]
type = PosSet
trigger1 = !Time
y = 0
;ignorehitpause = 
;persistent = 


[State 32500, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1


[State 0, PlaySnd];Ground
type = PlaySnd
trigger1 = !Time
value = S15000,0



[State 32500, Getting up]
type = ChangeState
triggerall = !WinKO
trigger1 = Time = 150;100
value = 32504
ctrl = 0


;------------------------------------------------------------------------------------
;Sacrifice 5 - getting up
[Statedef 32504]
type    = A
movetype= H
physics = N
juggle  = 2
;poweradd= 30
VelSet = 0,0;.3*vel x,.3*vel y
ctrl = 0
anim = 35007
sprpriority = 5

[State 32501, Voice]
type = PlaySnd
trigger1 = !Time
value = S85, 32510 +random%4
volumescale = 200
channel = 1

[State 32505, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
;ignorehitpause = 
;persistent = 

;Y VelSet
[State 30030, VelSet 3]
type = VelSet
trigger1 = pos y >-30
y = -2

[State 30030, VelSet 3]
type = VelSet
trigger1 = pos y <=-30
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = pos y <=-30
y = -30
;ignorehitpause = 
;persistent = 



[State 32500, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1



[State 32500, Bouncing on ground]
type = ChangeState
trigger1 = AnimTime = 0
value = 30000
ctrl = 0




;---------------------------------------------------------------------------
;Custom state - grab
[Statedef 32505]
type    = A
movetype= H
physics = N
VelSet = 0,0
sprpriority = 0

[State 31509, PosSet]
type = PosSet
trigger1 = Pos y >=0
y = 0
ignorehitpause = 1
;persistent = 

[State 32505, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
;ignorehitpause = 
;persistent = 



[State 810, ChangeAnim]
type = ChangeAnim2
Trigger1 = Time = 0
value = 32505

[State 810, 2]	;just to be safe in case anything happens
type = SelfState
trigger1 = Time = 800
;value = IfElse(Alive,5050,5150)	;Alive = he gets up; dead = he lies down.
value = 5050



;---------------------------------------------------------------------------
;Custom state - flying
[Statedef 32506]
type    = A
movetype= H
physics = N
VelSet = -4,-9;-2,-8
sprpriority = 0



[State 32505, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
;ignorehitpause = 
;persistent = 

[State 0, Gravity]
type = Gravity
trigger1 = 1
;ignorehitpause = 
;persistent = 


[State 810, ChangeAnim]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5061

[State 810, 2]
type = SelfState
trigger1 = Time = 800
;value = IfElse(Alive,5050,5150)	;Alive = he gets up; dead = he lies down.
value = 5050



[State 2003, State End]
type = ChangeState
;triggerall = Enemy, Var(40) = 0
trigger1 = Time > 0 && Pos Y >= 0
value = 32507



;---------------------------------------------------------------------------
; Downed get-hit (hit ground from fall)
[Statedef 32507]
type    = L
movetype= H
physics = N

[State 32505, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
;ignorehitpause = 
;persistent = 

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;Downed get-hit (lying down)

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3


[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 32508 ;Downed get-hit (bounce off ground)

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; Downed get-hit (bounce off ground)
[Statedef 32508]
type    = L
movetype= H
physics = N

[State 32505, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
;ignorehitpause = 
;persistent = 

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = Const(movement.down.bounce.offset.y)

[State 5101, 5]
type = PosAdd
trigger1 = Time = 0
x = Const(movement.down.bounce.offset.x)

[State 5101, 6] ;Acceleration
type = VelAdd
trigger1 = 1
y = Const(movement.down.bounce.yaccel)

[State 5101, 7] ;Hit ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= Const(movement.down.bounce.groundlevel)
value = 32509


;---------------------------------------------------------------------------
; Downed get-hit (lying down)
[Statedef 32509]
type    = L
movetype= H
physics = N

[State 32505, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
;ignorehitpause = 
;persistent = 

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0


[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14] ;Friction
type = VelSet
trigger1 = abs(Vel x) < Const(movement.down.friction.threshold)
persistent = 0
x = 0


[State 2012, 12]
type = SelfState
trigger1 = Time >= 150;175	;150
value = IfElse(Alive,5120,5150)	;Alive = he gets up; dead = he lies down.




;---------------------------------------------------------------------------
;Get hit
[Statedef 35000]
type = A
physics = N
sprpriority = 0
ctrl = 0
anim = 35000
velset = 0,0

[State 35000, ScreenBound]
type = Null; ScreenBound
trigger1 = IsHelper
value = 1
movecamera = 1,0

[State 35000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1



[State 35000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = s85,35000+random%3
volumescale = 100
persistent = 0
channel = 1


;ChangeStates
[State 35000, Return to Stand]
type = ChangeState
trigger1 = AnimTime = 0
value = 30000
ctrl = 0



[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "RootDist X= %d, RootDist Y= %d"
params = RootDist X, RootDist Y
ignorehitpause = 1




;----------------------------------------
;Cinematic! Out!
[Statedef 35210]
type = S
physics = S
movetype = I
anim = 30008
ctrl = 0
velset = 0,0
sprpriority = 1
poweradd = 0

[state 31001, RemoveExplod - Dodonpa]
type = RemoveExplod
trigger1 = 1
id = 31000

[State 35210, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S2500,0
volumescale = 50 
persistent = 0


[State 35210, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 35220
ctrl = 0

;----------------------------------------
;Cinematic Super! Not here
[Statedef 35220]
type = S
physics = S
movetype = I
anim = 15999
ctrl = 0
velset = 0,0
sprpriority = 1
poweradd = 0



[State 35220, ChangeState]
type = ChangeState
trigger1 = !root, NumExplod(991901)
trigger1 = root, MoveType != H
trigger1 = enemy, AnimExist(5939)
trigger1 = !enemy, NumExplod(991901)
;trigger2 = root, MoveType != H
;trigger2 = !enemy, AnimExist(5939)
;trigger2 = root,var(48) <= root,var(49) +29
;trigger2 = root, Var(43)=[1,6] 
trigger2 = Lose;trigger3 = Lose
;;trigger4 = root, StateNo = 3417 || root, StateNo = 3413 || root, StateNo = 0
value = 35230
ctrl = 0




[State 35220, ChangeState]
type = ChangeState
trigger1 = root, MoveType != H
trigger1 = !enemy, AnimExist(5939)
trigger1 = enemy,movetype != H
;;trigger4 = root, StateNo = 3417 || root, StateNo = 3413 || root, StateNo = 0
value = 35230
ctrl = 0


;----------------------------------------
;Cinematic Super! Come Back!
[Statedef 35230]
type = S
physics = S
movetype = I
anim = 30008
ctrl = 0
velset = 0,0
sprpriority = 1
poweradd = 0

[State 35230, PosSet]
type = PosSet
trigger1 = !Time
x = Cond(root, Facing = 1,root,Pos X - 30,root,Pos X +30)
;y = 0
[State 35230, PosSet]
type = PosSet
trigger1 = !Time
x = Cond(root, Facing = 1,root,Pos X - 60,root,Pos X +60)
;y = 0

[State 35230, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S2500,0
volumescale = 50 
persistent = 0


[State 35230, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = IfElse(Root,Alive,30000,30171)
ctrl = 0


