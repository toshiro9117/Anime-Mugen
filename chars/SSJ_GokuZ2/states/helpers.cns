;==============================================================
; CNS File for SSJ Goku by Team Z2
; Helper States
;==============================================================

;======================================================================
; POWER CHARGE AURA
[Statedef 905]
type = A
movetype = I
physics = N
ctrl = 0
anim = 905
velset = 0,0
sprpriority = -1

[State 1902, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1902, AssertSpecial]
type = AngleDraw
trigger1 = root,anim=902
scale = 1.4,1.4

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

;[state 17100, front aura]
;type = explod
;trigger1 = anim=905 && animelemtime(7)=0
;anim = 907
;ID = 907
;pos = 0,0
;postype = P1
;sprpriority = 4
;ownpal = 1
;supermovetime = -1
;bindtime = -1
;removetime = -1
;persistent = 1

[State 1900, front aura helper]
type = Helper
trigger1 = animelemtime(7)=0
id = 907
stateno = 907
name = "Dust"
pos = 0,0
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1902, BindToParent]
type = BindToParent
trigger1 = anim = 905
pos = 0,0

;[State 1902, BindToParent SSJ3 winpose end]
;type = BindToParent
;triggerall = (root,stateno = 188) && (root,anim=902)
;trigger1 = anim = 905
;pos = 6,0

[State 1902, Anim]
type = ChangeAnim
triggerall = anim = 905
trigger1 = root,stateno = 901
;trigger2 = root,stateno = 193 && root,time=370
value = 906

;[State 1902, RemoveExplod]
;type = RemoveExplod
;trigger1 = root,stateno != 188
;trigger1 = root,stateno != [192,193]
;trigger1 = root,stateno != [900,901]
;trigger1 = root,stateno != 2300
;trigger1 = root,stateno != 2500
;trigger1 = root,stateno != 2700
;trigger1 = root,stateno != 2745
;trigger1 = root,stateno != 30010
;ID = 907

[State 1902, DestroySelf]
type = DestroySelf
;triggerall = !numexplod(907)
trigger1 = anim = 905 && (Root,StateNo != 188) && (Root,StateNo != 192) && (Root,StateNo != 193) 
trigger1 = (Root,StateNo != 900) && (Root,StateNo != 2300) && (Root,StateNo != 2500) && (Root,StateNo != 2700) && (Root,StateNo != 2745) && (Root,StateNo != 30010)
trigger2 = anim = 906 && animtime = 0
trigger3 = Root,stateno = [5000,5090]

;[State 1902, DestroySelf]
;type = DestroySelf
;trigger1 = anim = 905 && (Root,StateNo != 900)
;trigger2 = anim = 906 && animTime = 0
;trigger3 = Root,stateno = [5000,5090]


;======================================================================
; POWER CHARGE FRONT AURA
[Statedef 907]
type = A
movetype = I
physics = N
ctrl = 0
anim = 907
velset = 0,0
sprpriority = -1

[State 1902, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1902, AssertSpecial]
type = AngleDraw
trigger1 = root,anim=902
scale = 1.4,1.4

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 1902, BindToParent]
type = BindToParent
trigger1 = anim = 907
pos = 0,0

[State 1902, DestroySelf]
type = DestroySelf
trigger1 = anim = 905 && (Root,StateNo != 900)
trigger2 = anim = 906 && animTime = 0
trigger3 = numhelper(905) = 0
trigger4 = Root,stateno = [5000,5090]


;======================================================================
; DUST Helper (normal aura charge)
[Statedef 908]
type	= A
MoveType	= I
physics	= N
ctrl	= 0
anim	= 908+(Root, Var(2)=0)
velset	= 0,0
sprpriority = 4
[State 909, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 1
pos = -17,5

[State 908, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 908, NoShadow]
type	= Trans
trigger1	= Root, Var(2)=0
trans	= none
ignorehitpause = 1

[State 908, DestroySelf]
type	= DestroySelf
trigger1	= (Root,StateNo != 900)
trigger2	= Root,stateno = [5000,5090]




;======================================================================
; Light Ki blast : 1010
; Medium Ki blast : 1011
; Strong Ki blast : 1012
; Ki blast Vanishes : 1013
;======================================================================

;LIGHT KI BLAST HELPER
[Statedef 1010]
type    = S
movetype= A
physics = N
anim = 1010
sprpriority = 5
hitcountpersist = 1
movehitpersist = 1

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 1061, gethit gut ?]
type = VarSet
trigger1 = !time
var(14) = root,var(14)

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 1061, NoJuggle]
type = parentvarset
trigger1 = time = 0
v = 18
value = 1

[State 1061, Velocity]
type = VelSet
trigger1 = Time = 0
x = 4

[State 1061, Velocity]
type = VelSet
trigger1 = Movehit
x = 0

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 1013
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = MoveHit = 1
fvar(39) = 1
ignorehitpause = 1

[State 1061, Hitdef]
type = HitDef
trigger1 = var(14)=0
attr = S, SP
animtype  = hard
damage    = Ceil(IfElse(root,fvar(11) * 23 < 7, 7, root,fvar(11) * 23)), 3
;ceil(23*root,fvar(15)), ceil(3*root,fvar(15))
;23,3
priority  = 4,Hit
guardflag = MA
hitflag = MAF
pausetime = 0,10
sparkno = s7010
guard.sparkno = -1
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
ground.type = high
air.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -7.8,0
guard.velocity = -7.5
air.velocity = -5.8,-3
airguard.velocity = -5, -4
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
fall.envshake.time = 10
fall.envshake.ampl = 4
fall.envshake.freq = 176
yaccel = 0.5
fall = Cond(root,fVar(39)>=5,1,0)
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = ifelse(p2movetype=H,Ceil(40/root,Var(24)),Ceil(140/root,Var(24))), Ceil(10/root,Var(24))
givepower = 35,35

[State 1061, Hitdef]
type = HitDef
trigger1 = var(14)=1
attr = S, SP
animtype  = hard
damage    = Ceil(IfElse(root,fvar(11) * 23 < 7, 7, root,fvar(11) * 23)), 3
;ceil(23*root,fvar(15)), ceil(3*root,fvar(15))
priority  = 4,Hit
guardflag = MA
hitflag = MAF
pausetime = 0,10
sparkno = s7010
guard.sparkno = -1
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
ground.type = low
air.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -7.8,0
guard.velocity = -7.5
air.velocity = -5.8,-3
airguard.velocity = -5, -4
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
fall.envshake.time = 10
fall.envshake.ampl = 4
fall.envshake.freq = 176
yaccel = 0.5
fall = Cond(root,fVar(39)>=5,1,0)
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = ifelse(p2movetype=H,Ceil(40/root,Var(24)),Ceil(140/root,Var(24))), Ceil(10/root,Var(24))
givepower = 35,35

[State 3001, Guardshake]
type = envshake
trigger1 = moveguarded
time = 4
ampl = 6
freq = 176
ignorehitpause = 1

[State 1061, NoJuggle]
type = parentvarset
trigger1 = movecontact 
v = 18
value = 0

[State 1061, End]
type = destroyself
trigger1 = (pos x!=[-240,240])
trigger2 = time>180

[State 1061, Fade]
type = changestate
trigger1 = movecontact
value = 1013
ignorehitpause=1

;----------------------------------------------------
;MEDIUM KI BLAST HELPER
[Statedef 1011]
type    = S
movetype= A
physics = N
anim = 1010
sprpriority = 5
hitcountpersist = 1
movehitpersist = 1

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 1061, gethit gut ?]
type = VarSet
trigger1 = !time
var(14) = root,var(14)

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 1061, NoJuggle]
type = parentvarset
trigger1 = time = 0
v = 18
value = 1

[State 1061, Velocity]
type = VelSet
trigger1 = Time = 0
x = 5.5

[State 1061, Velocity]
type = VelSet
trigger1 = Movehit
x = 0

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = MoveHit = 1
fvar(39) = 1
ignorehitpause = 1

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 1013
;attr = SCA, NP, SP, HP
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State 1061, Hitdef]
type = HitDef
trigger1 = var(14)=0
attr = S, SP
animtype  = hard
damage    = Ceil(IfElse(root,fvar(11) * 26 < 7, 7, root,fvar(11) * 26)), 5
;ceil(26*root,fvar(15)), ceil(5*root,fvar(15))
priority  = 4, Hit
guardflag = MA
hitflag = MAF
pausetime = 0,10
sparkno = s7020
guard.sparkno = -1
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
ground.type = high
air.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -7.5,0
guard.velocity = -7.8
air.velocity = -5.8,-3
airguard.velocity = -5, -4
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
fall.envshake.time = 10
fall.envshake.ampl = 4
fall.envshake.freq = 176
yaccel = 0.5
fall = Cond(root,fVar(39)>=5,1,0)
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,Ceil(40/root,Var(24)),Ceil(140/root,Var(24))), Ceil(10/root,Var(24))
givepower = 35,35

[State 1061, Hitdef]
type = HitDef
trigger1 = var(14)=1
attr = S, SP
animtype  = hard
damage    = Ceil(IfElse(root,fvar(11) * 26 < 7, 7, root,fvar(11) * 26)), 5
;ceil(26*root,fvar(15)), ceil(5*root,fvar(15))
priority  = 4, Hit
guardflag = MA
hitflag = MAF
pausetime = 0,10
sparkno = s7020
guard.sparkno = -1
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
ground.type = low
air.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -7.5,0
guard.velocity = -7.8
air.velocity = -5.8,-3
airguard.velocity = -5, -4
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
fall.envshake.time = 10
fall.envshake.ampl = 4
fall.envshake.freq = 176
yaccel = 0.5
fall = Cond(root,fVar(39)>=5,1,0)
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,Ceil(40/root,Var(24)),Ceil(140/root,Var(24))), Ceil(10/root,Var(24))
givepower = 35,35

[State 3001, Guardshake]
type = envshake
trigger1 = moveguarded
time = 4
ampl = 6
freq = 176
ignorehitpause = 1

[State 1061, NoJuggle]
type = parentvarset
trigger1 = movecontact 
v = 18
value = 0

[State 1061, End]
type = destroyself
trigger1 = (pos x!=[-240,240])
trigger2 = time>180

[State 1061, Fade]
type = changestate
trigger1 = movecontact
value = 1013
ignorehitpause=1

;----------------------------------------------------
;STRONG KI BLAST HELPER
[Statedef 1012]
type    = S
movetype= A
physics = N
anim = 1010
sprpriority = 5
hitcountpersist = 1
movehitpersist = 1

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 1061, gethit gut ?]
type = VarSet
trigger1 = !time
var(14) = root,var(14)

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 1061, NoJuggle]
type = parentvarset
trigger1 = time = 0
v = 18
value = 1

[State 1061, Velocity]
type = VelSet
trigger1 = Time = 0
x = 7

[State 1061, Velocity]
type = VelSet
trigger1 = Movehit
x = 0

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = MoveHit = 1
fvar(39) = 1
ignorehitpause = 1

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 1013
;attr = SCA, NP, SP, HP
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State 1061, Hitdef]
type = HitDef
trigger1 = var(14)=0
attr = S, SP
animtype  = hard
damage    = Ceil(IfElse(root,fvar(11) * 31 < 7, 7, root,fvar(11) * 31)), 7
;ceil(31*root,fvar(15)), ceil(7*root,fvar(15))
priority  = 4, Hit
guardflag = MA
hitflag = MAF
pausetime = 0,10
sparkno = s7030
guard.sparkno = -1
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
ground.type = high
air.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -7.5,0
guard.velocity = -7.8
air.velocity = -5.8,-4.4
airguard.velocity = -5, -4
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
fall.envshake.time = 10
fall.envshake.ampl = 4
fall.envshake.freq = 176
yaccel = 0.5
fall = Cond(root,fVar(39)>=5,1,0)
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,Ceil(40/root,Var(24)),Ceil(140/root,Var(24))), Ceil(10/root,Var(24))
givepower = 35,35

[State 1061, Hitdef]
type = HitDef
trigger1 = var(14)=1
attr = S, SP
animtype  = hard
damage    = Ceil(IfElse(root,fvar(11) * 31 < 7, 7, root,fvar(11) * 31)), 7
;ceil(31*root,fvar(15)), ceil(7*root,fvar(15))
priority  = 4, Hit
guardflag = MA
hitflag = MAF
pausetime = 0,10
sparkno = s7030
guard.sparkno = -1
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
ground.type = low
air.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -7.5,0
guard.velocity = -7.8
air.velocity = -5.8,-4.4
airguard.velocity = -5, -4
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
fall.envshake.time = 10
fall.envshake.ampl = 4
fall.envshake.freq = 176
yaccel = 0.5
fall = Cond(root,fVar(39)>=5,1,0)
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,Ceil(40/root,Var(24)),Ceil(140/root,Var(24))), Ceil(10/root,Var(24))
givepower = 35,35

[State 3001, Guardshake]
type = envshake
trigger1 = moveguarded
time = 4
ampl = 6
freq = 176
ignorehitpause = 1

[State 1061, NoJuggle]
type = parentvarset
trigger1 = movecontact 
v = 18
value = 0

[State 1061, End]
type = destroyself
trigger1 = (pos x!=[-240,240])
trigger2 = time>180

[State 1061, Fade]
type = changestate
trigger1 = movecontact
value = 1013
ignorehitpause=1

;----------------------------------------------------
;KI BLAST HELPER VANISHES
[Statedef 1013]
type    = A
movetype= A
physics = N
anim = 1013
sprpriority = 5
velset = -2,0

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 1061, NoJuggle Safety]
type = parentvarset
trigger1 = !time
v = 18
value = 0

[State 1002, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1061, End]
type = destroyself
trigger1 = animtime = 0


;======================================================================
; EX KI BLAST HELPER (G-PRESSURE) : 1051
; G-Pressure vanishes : 1052
; P2 Custom State : 1055-1058
;======================================================================
;EX KI BLAST HELPER (G-PRESSURE)
[Statedef 1051]
type    = S
movetype= A
physics = N
anim = 1051
sprpriority = 5
hitcountpersist = 1
movehitpersist = 1
juggle = 15

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 1061, NoJuggle]
type = parentvarset
trigger1 = time = 0
v = 18
value = 1

[State 1061, Velocity]
type = VelSet
trigger1 = Time = 0
x = 12

[State 1061, Velocity]
type = VelSet
trigger1 = Movehit
x = 0

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 1052
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State 1061, Hitdef];bounce juggles
type = HitDef
trigger1 = root,var(12)=0
attr = S, SP
animtype  = hard
damage    = Ceil(IfElse(root,fvar(11) * 31 < 7, 7, root,fvar(11) * 31)), 7
;ceil(31*root,fvar(15)), ceil(7*root,fvar(15))
priority  = 4, Hit
guardflag = MA
hitflag = MAF
pausetime = 0,10
sparkno = s7030
guard.sparkno = -1
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
yaccel = 0.5
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower= 0,0
givepower = 35,35
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -8,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
;p2stateno = 1055    ;Make p2 go to state 1055 on hit
p2facing = 1        ;Force to face p1
id = 1051

[State 802, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1055
ID = 1051
ignorehitpause = 1
persistent = 0

[State 1061, Hitdef]
type = HitDef
trigger1 = root,var(12)>0
attr = S, SP
animtype  = hard
damage    = Ceil(IfElse(root,fvar(11) * 31 < 7, 7, root,fvar(11) * 31)), 7
;ceil(31*root,fvar(15)), ceil(7*root,fvar(15))
priority  = 4, Hit
guardflag = MA
hitflag = MAF
pausetime = 0,10
sparkno = s7030
guard.sparkno = -1
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
yaccel = 0.5
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower= 0,0
givepower = 35,35
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -8,-5
guard.velocity = -7
air.velocity = -8,-5
airguard.velocity = -5, -4
fall = 1
fall.recover = 0
p2facing = 1        ;Force to face p1
;p2stateno = 275     ;Make p2 go to state 275 on hit
id = 1052

[State 802, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 275
ID = 1052
ignorehitpause = 1
persistent = 0

[State 3001, Guardshake]
type = envshake
trigger1 = moveguarded
time = 4
ampl = 6
freq = 176
ignorehitpause = 1

[State 1061, No Multi-hit]
type = parentvarset
trigger1 = movehit
var(12) = 1

[State 1061, NoJuggle]
type = parentvarset
trigger1 = movecontact 
v = 18
value = 0

[State 1061, End]
type = destroyself
trigger1 = (pos x!=[-240,240])
trigger2 = time>180

[State 1061, Fade]
type = changestate
trigger1 = movecontact
value = 1052
ignorehitpause=1

;----------------------------------------------------
;EX KI BLAST HELPER VANISHES
[Statedef 1052]
type    = A
movetype= A
physics = N
anim = 15999
sprpriority = 5
velset = -2,0

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 1061, NoJuggle Safety]
type = parentvarset
trigger1 = !time
v = 18
value = 0

[State 1002, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1061, End]
type = destroyself
triggerall = numenemy
trigger1 = enemy,movetype != H

;------------------
; Hit by G-Pressure - shaking from the hit
[Statedef 1055]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1055, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = 1
value = 1055

[State 1055, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 1056

;------------------
; Hit by G-Pressure - flying through the air
[Statedef 1056]
type = A
movetype = H
physics = N

[State 1056, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1056, Gravity]
type = VelAdd
trigger1 = 1
y = .45

[State 1056, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1056, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1057

[State 1056, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; Hit by G-Pressure - hit wall
[Statedef 1057]
type    = A
movetype= H
physics = N

[State 1057, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1057, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1057, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1057, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1057, Anim]
type = ChangeAnim2
trigger1 = anim != 1057
value = 1057
ignorehitpause = 1

[State 1057, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 1057, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 1058

;------------------
; Hit by G-Pressure - bounce off wall
[Statedef 1058]
type    = A
movetype= H
physics = N

[State 1058, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1058, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1058, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1058, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100




;======================================================================
;LAND FX
[Statedef 17100]
type=A
movetype=I
physics=N
anim=15999
sprpriority=1
velset=0,0

[state 17100,bind]
type = bindtoparent
trigger1 = !time
pos = -11,0

[state 17100, Landing Effect]
type=explod
trigger1=!time
anim=17100
id=17100
pos=0,0
postype=P1
sprpriority=-3
ownpal=1
supermovetime=-1

[state 17100]
type=removeexplod
trigger1=time>10

[State 17100]
type=destroyself
trigger1=time>10


;======================================================================
; Repel helper : 1305
; Destroyed : 1306
; Reflect with random projectile : 1308
; Reflected projectile : 1315
; Reflected projectile explods : 1316
;======================================================================

; REPEL HELPER FOR SLASH CHOP
[Statedef 1305]
type = S
physics = N
movetype = A
ctrl = 0
sprpriority = 4

[State 1305, nothitby]
type = nothitby
trigger1 = 1
time = -1
value = SCA
ignorehitpause = 1

[State 1305, HB]
type = hitby
trigger1 = 1
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 1305, HitOverride]
type = hitoverride
trigger1 = 1
time = -1
attr = SCA, AA, AP, AT
stateno = 1306
ignorehitpause = 1

[State 1305, HitOverride]
type = hitoverride
trigger1 = 1
time = -1
attr = SCA, NP, SP,HP
stateno = 1308
ignorehitpause = 1

[State 1305, Anim]
type = changeanim
trigger1 = anim != 1305
value = 1305

[State 1305, timevar]
type = varadd
trigger1 = 1
var(4) = 1

[State 1305, Shadows]
type = afterimage
trigger1 = !time && !prevstateno
time = 999
timegap = 1
framegap = 4
length = 12
palcontrast = 30, 60, 120
trans = add

[State 1305, Type]
type = statetypeset
trigger1 = movecontact
movetype = I

[State 1305, End]
type = changestate
trigger1 = var(4) >= 13
value = 1306

;-----------------------------------------
; Destroyed
[Statedef 1306]
type = A
physics = N
movetype = I
velset = 0, 0
ctrl = 0
sprpriority = 1
anim = 15998

[State 3000, nhb]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 1306, End]
type = destroyself
trigger1 = !animtime

;-----------------------------------------
; Reflect with Goku Kameha projectile
[Statedef 1308]
type = A
physics = N
movetype = I
ctrl = 0
anim = 15998

[State 1308, nothitby]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 1308, reflected]
type = helper
trigger1 = !time
helpertype = normal
stateno = 1315
ID = 1315
name = "Reflected"
postype = p1
pos = 25, -20
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1308, End]
type = changestate
trigger1 = 1
value = 1306   ;1305


;-----------------------------------------
; Reflected projectile Kamehameha
[Statedef 1315]
type=S
physics=N
movetype=A
ctrl=0
velset=0,0
sprpriority=4
poweradd = 150

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 200, Ki goes SFX]
type = PlaySnd
trigger1 = !time
value = 10,0
channel = 1

[State -2, Explod];P1 Side.
type = Explod
trigger1 = !time && numexplod(13300)=0 && teamside = 1
anim = 13300
pos = 10,80
postype = left  ;p2,front,back,left,right
removetime = -2
supermove = 1
;scale = 0.5,0.5
sprpriority = 0
id = 13300
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State -2, Explod];P2 Side.
type = Explod
trigger1 = !time && numexplod(13300)=0 && teamside = 2
anim = 13301
pos = -169,80
postype = right
removetime = -2
supermove = 1
;scale = 0.5,0.5
sprpriority = 0
id = 13300
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 1315, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=1316
ignorehitpause=1

[State 1315, HB]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[state 1315]
type = varset
triggerall = numenemy
triggerall = enemy,authorname = "Team Z2"
trigger1 = enemy,name = "Goku Z2"
trigger2 = enemy,name = "SSJ Goku Z2"
trigger3 = enemy,name = "Vegeta Z2"
trigger4 = enemy,name = "Gohan Z2"
var(11) = 1

[State 1315, Anim];normal kamehameha FX (yellow/blue)
type=changeanim
trigger1= !time && !prevstateno && var(11)=0 && root,var(44)=0
value=1311
[State 1315, Anim];normal kamehameha FX (old purple)
type=changeanim
trigger1= !time && !prevstateno && var(11)=0 && root,var(44)>=1
value=1310
[State 1315, Anim];Goku kamehameha FX
type=changeanim
trigger1= !time && !prevstateno && var(11)=1
value=1010

[State 1315, Vel]
type=velset
trigger1= 1
x = 8

[State 1315, image]
type=afterimage
trigger1= !time && !prevstateno
time=999
timegap=1
framegap=2
length=5
palcontrast=50,50,200
trans=add

[State 1315, Hit]
type=hitdef
trigger1= 1
priority=4,Hit
attr = S,SP
damage    = Ceil(IfElse(root,fvar(11) * 61 < 7, 7, root,fvar(11) * 61)), 6
;ceil(61*root,fvar(15)), ceil(6*root,fvar(15))
animtype = Hard
hitflag = MAF
guardflag=MA
pausetime=0,10
sparkno = s7020
guard.sparkno = -1
sparkxy = 0,0
hitsound  = S1000,0
guardsound = S6,1
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=-10,0
ground.cornerpush.veloff=0
air.velocity=-4,-2
getpower= ifelse(p2movetype=H,40,140), 35
givepower = 35,35
envshake.time=14
envshake.freq=120
envshake.ampl=4
air.fall=1
fall.recover=1
fall.recovertime=16
yaccel=.5
airguard.ctrltime= 16
airguard.velocity= -8, -1.5
forcestand=1
p1sprpriority = 5

[State 1315, End]
type=changestate
trigger1= movecontact
value=1316
ignorehitpause=1

[State 1315, End]
type=destroyself
trigger1=pos x!=[-200,200]

;-----------------------------------------
; Kamehameha explod/vanish
[Statedef 1316]
type=A
physics=N
movetype=I
velset=0,0
ctrl=0
sprpriority=4

[State 1308, nothitby]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 3005, anim];VS Goku
type = changeanim
trigger1 = !time && var(11)=1
value = 1013
[State 3005, anim];Repel (purple)
type = changeanim
trigger1 = !time && var(11)=0 && prevstateno=1315 && root,var(44)>=1
value = 1316
[State 3005, anim];Repel (yellow/blue)
type = changeanim
trigger1 = !time && var(11)=0 && prevstateno=1315 && root,var(44)=0
value = 1311

[State 3005, anim];Chou Kmh
type = changeanim
trigger1 = !time && prevstateno=2402
trigger2 = !time && prevstateno=2462
trigger3 = !time && prevstateno=2602
value = 15998
[State 3005, anim];Genkidama
type = changeanim
trigger1 = !time && (prevstateno=2511 || prevstateno=2521 || prevstateno=2523 || prevstateno=2531 || prevstateno=2533)
value = 2511
[State 3005, anim];Genkidama
type = changeanim
trigger1 = prevstateno=2533
trigger1 = anim=2511 && !animtime
value = 2532

[State 1061, scale Genkidama]
type = AngleDraw
trigger1 = anim=2511
scale = 0.5-0.005*time,0.5-0.005*time
ignorehitpause = 1

[State 3005, anim];Movie 7 hitter
type = changeanim
trigger1 = !time && prevstateno=2961
value = 15997

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 1316, End]
type=destroyself
trigger1= !animtime
[State 1316, End with Zzyzzyxx fix]
type=null;destroyself
triggerall = !animtime
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target, time <= 1 && !(target, hitshakeover)

;==========================================================
; KAMEHAMEHA HELPER
[Statedef 2001]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 0.5
ignorehitpause = 1

[State 3005, anim]
type = changeanim
trigger1 = !time && !prevstateno
value = 1315

[State 1061, NoJuggle]
type = parentvarset
trigger1 = time = 0
v = 18
value = 1

[State 3005, hitvar]
type=varadd
trigger1= !time
var(2)=1

[State 1055, movehitvar]
type=varset
trigger1= movecontact && numtarget
trigger1= !(target,ishelper)
var(3)=1
ignorehitpause=1

[State 13100, goes SND]
type = playsnd
trigger1 = !time && !prevstateno
value = 2000,2

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = ifelse(var(2)<8,2001,2002)
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1061, Velocity]
type = VelSet
trigger1 = 1
x = ifelse((time<2 && var(2)>1),1,10)

[State 1315, image]
type = afterimage
trigger1 = !time
time = 999
timegap = 1
framegap = 2
length = 5
palcontrast = 50,50,200
trans = add

[State 3005, hit]
type = hitdef
trigger1 = 1
attr = S,HP
hitflag = MAF
guardflag = MA
priority = 7,Hit
damage    = Ceil(IfElse(root,fvar(11) * 19 < 7, 7, root,fvar(11) * 19)), 3
;11+ceil(8*root,fvar(15)), 3		;ceil(22*root,fvar(15)), 2
getpower = 0,0
givepower = 35,35
pausetime = 3*(var(2)<8),6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= ifelse(var(2)<8, 0, -6), ifelse(var(2)<8, 0, -4)
guard.velocity = -9
air.velocity = -5.5,-3.9
airguard.velocity = -5.5, -1.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=(var(2)>=8)
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s7020
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5

[State 1061, NoJuggle]
type = parentvarset
trigger1 = movecontact 
v = 18
value = 0


[State 3005, end]
type = changestate
trigger1 = movecontact
value = ifelse(var(2)<8,2001,2002)

[State 3001, Guardshake]
type = envshake
trigger1 = movecontact=1 && numtarget
time = 4
ampl = 6
freq = 176
ignorehitpause = 1

[State 1061, End]
type = destroyself
trigger1 = pos x!=[-240,240]

;-----------------------------------------
; Kamehameha explod/vanish
[Statedef 2002]
type=A
physics=N
movetype=I
velset=0,0
ctrl=0
sprpriority=4
MoveHitPersist=1

[State 1308, nothitby]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 3005, anim];Kmh horizontal
type = changeanim
trigger1 = !time
value = 1317

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 1316, End]
type=destroyself
trigger1= !animtime
[State 1316, End with Zzyzzyxx fix]
type= null;destroyself
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target, time <= 1 && !(target, hitshakeover)

;==========================================================
; KAMEHAMEHA HELPER - UPWARDS
[Statedef 2101]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 0.5
ignorehitpause = 1

[State 3005, trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 200, 128
ignorehitpause = 1

[State 1061, NoJuggle]
type = parentvarset
trigger1 = time = 0
v = 18
value = 1

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 3005, anim]
type = changeanim
trigger1 = !time && !prevstateno
value = 2101

[State 3005, hitvar]
type=varadd
trigger1= !time
var(2)=1

[State 13100, goes SND]
type = playsnd
trigger1 = !time && !prevstateno
value = 2000,2

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = ifelse(var(2)<8,2101,2102)
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1061, Velocity]
type = VelSet
trigger1 = 1
x = ifelse((time<2 && var(2)>1),1,8)
y = ifelse((time<2 && var(2)>1),-1,-6)

[State 1315, image]
type = afterimage
trigger1 = !time
time = 999
timegap = 1
framegap = 2
length = 5
palcontrast = 50,50,200
trans = add

[State 3005, hit]
type = hitdef
trigger1 = 1
attr = S,HP
hitflag = MAF
guardflag = MA
priority = 7,Hit
damage    = Ceil(IfElse(root,fvar(11) * 19 < 7, 7, root,fvar(11) * 19)), 3
;11+ceil(8*root,fvar(15)), 3		;ceil(22*root,fvar(15)), 2
getpower = 0,0
givepower = 35,35
pausetime = 3*(var(2)<8),6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= ifelse(var(2)<8, -1, -6), ifelse(var(2)<8, -3, -8)
guard.velocity = -8
air.velocity = -5.5,-6.9
airguard.velocity = -3.5, -3.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=(var(2)>=8)
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s7020
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5

[State 1061, NoJuggle]
type = parentvarset
trigger1 = movecontact 
v = 18
value = 0

[State 3005, end]
type = changestate
trigger1 = movecontact
value = ifelse(var(2)<8,2101,2102)

[State 3001, Guardshake]
type = envshake
trigger1 = movecontact=1 && numtarget
time = 4
ampl = 6
freq = 176
ignorehitpause = 1

[State 1061, End]
type = destroyself
trigger1 = pos x!=[-240,240]

;-----------------------------------------
; Kamehameha explod/vanish
[Statedef 2102]
type=A
physics=N
movetype=I
velset=0,0
ctrl=0
sprpriority=4
MoveHitPersist=1

[State 1308, nothitby]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 3005, anim];Kmh horizontal
type = changeanim
trigger1 = !time
value = 2102

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 1316, End]
type=destroyself
trigger1= !animtime
[State 1316, End with Zzyzzyxx fix]
type= null;destroyself
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target, time <= 1 && !(target, hitshakeover)

;==========================================================
; KAMEHAMEHA HELPER - DOWNWARDS
[Statedef 2201]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 0.5
ignorehitpause = 1

[State 3005, trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 200, 128
ignorehitpause = 1

[State 1061, NoJuggle]
type = parentvarset
trigger1 = time = 0
v = 18
value = 1

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 3005, anim]
type = changeanim
trigger1 = !time && !prevstateno
value = 2201

[State 3005, hitvar]
type=varadd
trigger1= !time
var(2)=1

[State 13100, goes SND]
type = playsnd
trigger1 =  !time && !prevstateno
value = 2000,2

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = ifelse(var(2)<8,2201,2202)
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 3055, vel]
type=velset
trigger1= 1
x = ifelse((time<2 && var(2)>1),1,8)
y = ifelse((time<2 && var(2)>1),1,6)

[State 1315, image]
type = afterimage
trigger1 = !time
time = 999
timegap = 1
framegap = 2
length = 5
palcontrast = 50,50,200
trans = add

[State 3005, hit]
type = hitdef
trigger1 = 1
attr = A,HP
hitflag = MAFD
guardflag = MA
priority = 7,Hit
damage    = Ceil(IfElse(root,fvar(11) * 19 < 7, 7, root,fvar(11) * 19)), 3
;11+ceil(8*root,fvar(15)), 3		;ceil(22*root,fvar(15)), 2
getpower = 0,0
givepower = 35,35
pausetime = 3*(var(2)<8),6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = Low
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= ifelse(var(2)<8, -1, -6), ifelse(var(2)<8, -3, -6)
guard.velocity = -8
air.velocity = -5,6
airguard.velocity = -4, 2.5 
down.velocity = 0,0
down.hittime = 20
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=(var(2)>=8)
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s7020
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5

[State 1061, NoJuggle]
type = parentvarset
trigger1 = movecontact 
v = 18
value = 0

[State 3005, end]
type = changestate
trigger1 = movecontact
value = ifelse(var(2)<8,2201,2202)

[State 3001, Guardshake]
type = envshake
trigger1 = movecontact=1 && numtarget
time = 4
ampl = 6
freq = 176
ignorehitpause = 1

[state 17100, Hit Ground Effect]
type=explod
trigger1=pos y>=-20
anim=17100
id=17100
pos=20,20
postype=P1
sprpriority=-3
ownpal=1
supermovetime=-1
removetime = -2
persistent = 0

[state 17100, Wave Effect]
type=explod
trigger1=pos y>=-20
anim=2205+(root,var(2)=1)
id=2205
pos=25,30
postype=P1
sprpriority=7
ownpal=1
supermovetime=-1
removetime = -2
persistent = 0

[State 3055, end]
type = PlaySnd
trigger1 = pos y>=-30
value = s1000,0
persistent = 0

[State 3055, end]
type = changestate
trigger1 = pos y>=-30 && !movecontact
value = 2211
ignorehitpause = 1

[State 1061, End]
type = destroyself
trigger1 = pos x!=[-240,240]

;-----------------------------------------
; Kamehameha explod/vanish
[Statedef 2202]
type=A
physics=N
movetype=I
velset=0,0
ctrl=0
sprpriority=4
MoveHitPersist=1

[State 1308, nothitby]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 3005, anim];Kmh horizontal
type = changeanim
trigger1 = !time
value = 2202

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 1316, End]
type=destroyself
trigger1= !animtime
[State 1316, End with Zzyzzyxx fix]
type= null;destroyself
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target, time <= 1 && !(target, hitshakeover)

;==========================================================
; KAMEHAMEHA HELPER - DOWNWARDS, Hitting ground
[Statedef 2211]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5
velset = 0,0

[State 3005, trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 200, 128
ignorehitpause = 1

[State 1061, NoJuggle]
type = parentvarset
trigger1 = time = 0
v = 18
value = 1

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 3005, anim]
type = changeanim
trigger1 = !time
value = 2211

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 1316
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1315, image]
type = afterimage
trigger1 = !time
time = 999
timegap = 1
framegap = 2
length = 5
palcontrast = 50,50,200
trans = add

[State 3005, hit]
type = hitdef
trigger1 = animelem=1 && !movehit
trigger2 = animelem=2 && !movehit
trigger3 = animelem=3 && !movehit
trigger4 = animelem=4 && !movehit
attr = A,HP
hitflag = MAFD
guardflag = HA
priority = 7,Hit
damage    = Ceil(IfElse(root,fvar(11) * 35 < 7, 7, root,fvar(11) * 35)), 4
;ceil(35*root,fvar(15)), 4
getpower = 0,0
givepower = 35,35
pausetime = 3,6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = Low
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= -6, -7
guard.velocity = -8
air.velocity = -4,-9
airguard.velocity = -4, -1.5 
down.velocity = 0,0
down.hittime = 20
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s7020
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5

[State 1061, NoJuggle]
type = parentvarset
trigger1 = movecontact 
v = 18
value = 0

[state 17100, Hit Ground Effect]
type=explod
trigger1 = time = 10
trigger2 = time = 20
anim=17100
id=17100
pos=10,30
postype=P1
sprpriority=-3
ownpal=1
supermovetime=-1
removetime = -2

[state 17100, Wave Effect]
type=explod
trigger1 = time = 10
trigger2 = time = 20
anim=2205+(root,var(2)=1)
id=2205
pos=15,40
postype=P1
sprpriority=7
ownpal=1
supermovetime=-1
removetime = -2

[State 3055, end]
type = PlaySnd
trigger1 = time = 5
trigger2 = time = 10
trigger3 = time = 15
trigger4 = time = 20
value = s1000,0

[State 3055, end]
type = changestate
trigger1 = !animtime
value = 1316
ignorehitpause = 1


;==========================================================
; SUPER BG - Street Fighter 3
[Statedef 19875]
type = S
velset = 0,0
sprpriority = 0
anim = 15999
ctrl = 0

[State 10500, snd]
type = playsnd
trigger1 = !time
value = 9,0

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = time <= 55
flag = noFG

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 10000, Explod]; White BG
type = Explod
trigger1 = time = 0
anim = 19877
id = 19875
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindtime = -1
ownpal = 1
removetime = 99999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
supermove = 1
scale = 1.20,1.20
ignorehitpause = 1
persistent = 0

[State 10000, Explod SF3]
type = Explod
trigger1 = time = 0
anim = 19875
id = 10000
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindtime = -1
ownpal = 1
removetime = 9999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
supermove = 1
scale = 1.20*0.9,1.20*1.05
ignorehitpause = 1
persistent = 0

[State 10000, pause]
type = Pause
trigger1 = Time = 0
time = 40
movetime = 40

[State 10000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 44
id = 10000

[State 10000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 55
id = 10500

[State 8020, End]
type = destroyself
trigger1 = !(roundstate>2)
trigger2 = time=1000

;==========================================================
; SUPER BG - Super DBZ (Physics)
[Statedef 19885]
type = S
velset = 0,0
sprpriority = 0
anim = 15999
ctrl = 0

[State 1000, shake]
type = EnvShake
trigger1 = !(time%4) && time<150
time=4
freq=80
ampl=7

[State 10500, snd]
type = playsnd
trigger1 = !time
value = 9,0

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noFG
flag2 = nokoslow
ignorehitpause = 1

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic
flag2 = nobardisplay
ignorehitpause = 1

[State 10000, Explod]; White BG
type = Explod
trigger1 = time = 0
anim = 19884
id = 19884
pos =  160,120
postype = left
sprpriority = -4
facing = 1
bindtime = -1
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
scale = 1.20,1.20
ignorehitpause = 1
persistent = 0
removetime = -2

[State 10000, Explod Krak]
type = Explod
trigger1 = time = 0
anim = 19885
id = 19885
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindtime = -1
ownpal = 1
removetime = 9999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
supermove = 1
scale = 1,1
ignorehitpause = 1
persistent = 0

[State 10000, Scale Explod]
type = ModifyExplod
trigger1 = time>6
scale = 1+.01*time, 1+.01*time
id = 19885

[State 10000, RemoveExplod Krak]
type = RemoveExplod
trigger1 = time = 44
id = 19885

[State 10000, Explod Space BG]
type = Explod
trigger1 = time = 23
anim = 19886
id = 19886
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindtime = -1
ownpal = 1
removetime = 9999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
scale = 1.3,1.3
ignorehitpause = 1
persistent = 0

[State 10000, Explod planet left]
type = Explod
trigger1 = time = 23
anim = 19887
id = 19886
pos =  0,240
postype = left
sprpriority = -6
facing = 1
ownpal = 1
removetime = 9999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
scale = 1.2,1.2
ignorehitpause = 1
persistent = 0
;vel = -.2,0
bindtime = -1

[State 10000, Explod planet right]
type = Explod
trigger1 = time = 23
anim = 19888
id = 19886
pos =  320,240
postype = left
sprpriority = -6
facing = 1
ownpal = 1
removetime = 9999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
scale = 1.2,1.2
ignorehitpause = 1
persistent = 0
;vel = .2,0
bindtime = -1

[State 1000, Helper]
type = Helper
trigger1 = time>=23 && time<70 && !(time%5) && numhelper(19890)<80 && numhelper(19891)<80
helpertype = Normal
name = "rocks"
id = 19890
pos = 160,20
postype = left
facing = 1
stateno = 19890
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 13300, black screen fade]
type = Explod
trigger1 = Time = 60
anim = 19883   ;2771
ID = 2771
postype = left
pos = 0,-50
bindtime = -1
removetime = 91
pausemovetime = 91
ontop = 1
scale = 2,3

[State 10000, RemoveExplod Krak]
type = RemoveExplod
trigger1 = time = 150
id = 19886

[State 8020, End]
type = destroyself
trigger1 = !(roundstate>2)
trigger2 = time=150  ;1000

;------------------------------------------------------
;Rocks going up
[Statedef 19890]
type = A
movetype = I
physics = N
anim = 15999

[State 1003, Helper]
type = Helper
trigger1 = !time
helpertype = Normal
name = "rocks"
id = 19891
pos = ((random%320)),10*(random%13)
postype = left
facing = 1
stateno = 19891
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
size.xscale = .5
size.yscale = .5

[State 1003, Helper]
type = Helper
trigger1 = !time
helpertype = Normal
name = "rocks"
id = 19891
pos = ((random%320)+320),10*(random%13)
postype = left
facing = 1
stateno = 19891
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
size.xscale = .5
size.yscale = .5

[State 1003, Helper]
type = Helper
trigger1 = !time
helpertype = Normal
name = "rocks"
id = 19891
pos = ((random%320)-320),10*(random%13)
postype = left
facing = 1
stateno = 19891
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
size.xscale = .5
size.yscale = .5

[State 1003, DestroySelf]
type = DestroySelf
trigger1 = time=2

;-----------------
[Statedef 19891]
type = A
movetype = I
physics = N
anim = 19890 + random%6
sprpriority = -5

[State 1004, assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1004, vel]
type = velset
trigger1 = !time
y = -3-random%7

[State 1004, vel]
type = varset
trigger1 = !time
var(10) = random%2

[State 1004, assert]
type = angledraw
trigger1 = 1
value = ifelse(var(10)=0,5*time,-5*time)

[State 1004, DestroySelf]
type = DestroySelf
trigger1 = time > 300
trigger2 = pos Y < -340
trigger3 = root,stateno = 180

;==========================================================
; SUPER BG - Super DBZ (Ki attacks)
[Statedef 19892]
type = S
velset = 0,0
sprpriority = 0
anim = 15999
ctrl = 0

[State 3001, screen]
type = PosSet
trigger1 = !time
x = 0
y = -ceil(screenpos Y)
ignorehitpause = 1

[State 3001, screen]
type = PosSet
trigger1 = 1
x = 0
ignorehitpause = 1

[State 1000, shake]
type = EnvShake
trigger1 = !(time%4) && time<150
time=4
freq=80
ampl=7

[State 10500, snd]
type = playsnd
trigger1 = !time
value = 9,0

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noFG
flag2 = nokoslow
ignorehitpause = 1

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic
flag2 = nobardisplay
ignorehitpause = 1

[State 10000, Explod]; White BG
type = Explod
trigger1 = !time
anim = 957
id = 11111
pos =  0,-30
postype = left
sprpriority = -7
facing = 1
bindtime = -1
ownpal = 1
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1
scale = 2,2

[State 10000, Explod Zwang]
type = Explod
trigger1 = time = 0
anim = 19896
id = 19896
pos =  160,120
postype = left
sprpriority = -5
facing = 1
bindtime = -1
ownpal = 1
removetime = 9999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
ignorehitpause = 1
scale = .9,1.2

[State 10000, Scale Explod]
type = ModifyExplod
trigger1 = time>50
scale = .9+.005*(time-50), 1.2+.005*(time-50)
id = 19896

[State 1003, Helper]
type = Helper
trigger1 = !time
helpertype = Normal
name = "yellow_BG"
id = 19897
pos = 0,0
postype = left
facing = 1
stateno = 19897
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
persistent = 0

[State 13300, white screen fade]
type = Explod
trigger1 = Time = 60
anim = 19883
ID = 2771
postype = left
pos = 0,-50
bindtime = -1
removetime = 91
pausemovetime = 91
ontop = 1
scale = 2,3
ignorehitpause = 1

[State 10000, RemoveExplod zwang]
type = RemoveExplod
trigger1 = time = 140
id = 19896
[State 10000, RemoveExplod yellow BG]
type = RemoveExplod
trigger1 = time = 140
id = 19897
[State 10000, RemoveExplod white BG]
type = RemoveExplod
trigger1 = time = 140
id = 11111

[State 10000, pause]
type = Pause
trigger1 = !time
time = 20
movetime = 20
ignorehitpause = 1

[State 10000, pause]
type = null;Pause
trigger1 = time>20 && time<100 && !(time%3)
time = 1
movetime = 1
ignorehitpause = 1

[State 8020, End]
type = destroyself
trigger1 = !(roundstate>2)
trigger2 = time=150

;--------------------------------------
;Yellow Super BG Helper
[Statedef 19897]
type = S
movetype = I
physics = N
anim = 19897
sprpriority = -6

[State 1004, assert]
type = bindtoparent
trigger1 = 1
pos = 0,120
ignorehitpause = 1

[State 1004, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
flag2 = noFG
ignorehitpause = 1

[State 1004, assert]
type = angledraw
trigger1 = time < 50
value = 10*time
scale = .7,.7
ignorehitpause = 1

[State 1004, assert]
type = angledraw
trigger1 = time >= 50
value = 10*time
scale = .7+.01*(time-50),.7+.01*(time-50)
ignorehitpause = 1

[State 1004, DestroySelf]
type = DestroySelf
trigger1 = time > 130

;==========================================================
; SUPER BG - Jojo's Bizarre Adventure
[Statedef 19900]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 15999
sprpriority = -21

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19910
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19911
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19912
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19913
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19900
id = 19900
pos = 0,0
postype = back
sprpriority = 5
bindtime = -1
scale = .84, 1.07
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1
persistent = 0
ontop = 1

[State 10500, snd]
type = playsnd
trigger1 = !time
value = 9,0

[state haha]
type = varset
trigger1 = time = 0
var(3) = 0

[state haha]
type = varadd
trigger1 = time >= 5
trigger1 = var(3) < 220
var(3) = 5

[State that starts the inverted effect]
type           = PalFX
trigger1       = time >= 5
add            = var(3),var(3),var(3)
time           = 1
ignorehitpause = 1

[State 2030, 0]
type = AssertSpecial
Trigger1 = Time < ifelse(matchover, 120, 50)
flag = nofg
flag2 = nobardisplay
ignorehitpause = 1

[State haha]
type = RemoveExplod
trigger1 = Time = ifelse(matchover, 120, 50)
id = 8001

[State ChangeState!]
type = DestroySelf
trigger1 = RoundState = 0

;===================================================
;DASH COLLISION NOTIFICATION
[Statedef 13200]
type=A
physics=N
movetype=I
anim = 15999
velset=0,0
sprpriority=6

[State 8000, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause = 1

;[State -2, Explod]; Notification
;type = Explod
;trigger1 = !time
;anim = 13200
;removetime = -2
;supermove = 1
;sprpriority = 1
;id = 13200
;bindtime = -1
;ontop = 1
;ownpal = 1
;ignorehitpause = 1
;pausemovetime = -1
;facing = facing
;scale = 0.5,0.5

;[state 17100,scale FX]
;type = modifyexplod
;trigger1 = numexplod(13200)
;trigger1 = time>=10
;scale = 0.5+0.02*(time-10),0.5+0.02*(time-10)
;id = 13200

[State 8000, End]
type=destroyself
trigger1= time>=40

;------------------------------------------------
[StateDef 2771] ; Fade in/out effects BLACK
type = A
movetype = I
physics = N
anim = 15999
velset = 0,0

[State 13300, Expl]
type = Explod
trigger1 = Time = 30
anim = 2771
ID = 2771
postype = left
pos = -30,-30
bindtime = -1
removetime = 71
pausemovetime = 71
ontop = 1
scale = 2,2

[State 13300, Fadeout]
type = PalFX
trigger1 = Time = [30,100]
time = 1
add = 4*(Time-30),4*(Time-30),4*(Time-30)

[State 13001, End]
type = DestroySelf
trigger1 = time=101

;===================================================
;BEAM COLLISION NOTIFICATION
[Statedef 13250]
type=A
physics=N
movetype=I
anim = 15999
velset=0,0
sprpriority=6

[State 8000, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause = 1

[State -2, Explod]; Notification
type = Explod
trigger1 = !time
anim = 13250
removetime = -2
supermove = 1
sprpriority = 1
id = 13250
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
pos = 160,120
postype = left
scale = 0.5,0.5

[state 17100,scale FX]
type = modifyexplod
trigger1 = numexplod(13250)
trigger1 = time>=10
scale = 0.5+0.02*(time-10),0.5+0.02*(time-10)
id = 13250

[State 8000, End]
type=destroyself
trigger1= time>=40








;===================================================
; CHOU KAMEHAMEHA HELPER
[Statedef 2402]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 1061, NoJuggle]
type = parentvarset
trigger1 = time = 0
v = 18
value = 1

;[State 2100, HitCount add (only for supermoves)] ;don't use this
;type		= ParentVarAdd
;trigger1		= MoveHit
;var(24)		= 1
;persistent	= 0
;ignorehitpause	= 1

[State -2, Explod];var for scaling CLSNs
type = VarSet
trigger1 = !prevstateno && !time
var(1) = 0
[State -2, Explod];var for scaling CLSNs
type = VarAdd
trigger1 = !prevstateno
var(1) = 1

[State -2, Explod];Tip of Kmh FX
type = Explod
trigger1 = !numexplod(2404) && !time
anim = 2404
removetime = -1
sprpriority = 5
id = 2404
ownpal = 1
pos = 10,0
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
bindtime = -1
scale = 1,1+.3*(root,stateno = 3015)

[State -2, Explod];On hands explod
type = ModifyExplod
trigger1 = WinKO && MatchOver
scale = 1.5,1.5
ID = 2404

[State -2, Explod];Tip of Kmh FX
type = RemoveExplod
trigger1 = root,stateno != 2401
id = 2404

[State 800, VarSet];Charging time
type = VarSet
trigger1 = !time
var(25) = root,var(25)

[State 8000, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause = 1

[State 3005, hitvar]
type=varadd
trigger1= !time
var(2)=1

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 3005, anim]
type = changeanim
trigger1 = !time && !prevstateno && !movecontact
value = 2405

[State 3005, anim]
type = changeanim
trigger1 = movecontact
value = 2405
elem = var(1)
ignorehitpause = 1

[State 1061, Velocity]
type = VelSet
trigger1 = 1
x = ifelse((time<2 && var(2)>1),1,16)

[State 2011, NotHitBy]
type		= NotHitBy
trigger1		= Time >= 0
Time		= 1
value		= SCA, NA, SA, HA, NT, ST, HT
ignorehitpause	= 1

[State 2011, HitBy]
type		= HitBy
trigger1		= Time >= 0
value		= SCA, NP, SP, HP
Time		= 1
ignorehitpause	= 1

[State 2011, HitOverride]
type		= HitOverride
trigger1		= Time >= 0
slot		= 1
Time		= 1
stateno		= 2402
attr		= SCA, NP, SP, HP
ignorehitpause	= 1

[State 3005, hit]
type = hitdef
triggerall = var(25)<20
trigger1 = facing=1 && (root,pos X - enemy,pos X)<0 
trigger2 = facing=-1 && (root,pos X - enemy,pos X)>0 
attr = S,HP
hitflag = MAF
guardflag = MA
priority = 7,Hit
damage    = ceil(ifElse(var(2)>=16,6,ifElse(root,fvar(11) * 20 < 11, 11, root,fvar(11) * 20))),2
;ceil(30*root,fvar(15)),2
;ifelse(var(2)>=20,ceil(30*root,fvar(15)),ceil(30*root,fvar(15))), 2
;ifelse(var(2)>=20,8,ceil(23*root,fvar(15))), 2
getpower = 0,0
givepower = 20,20
pausetime = 1*(var(2)<20+var(25)),6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= ifelse(var(2)<20+var(25), -2, -10), ifelse(var(2)<20+var(25), 0, -3)
guard.velocity = -9
air.velocity = -5.5,-3.9
airguard.velocity = -5.5, -1.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=(var(2)>=20+var(25))
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s7030
sparkxy = 20-(random%40),20-(random%40)
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5

[State 3005, hit]
type = hitdef
triggerall = var(25)>=20
trigger1 = facing=1 && (root,pos X - enemy,pos X)<0 
trigger2 = facing=-1 && (root,pos X - enemy,pos X)>0 
attr = S,HP
hitflag = MAF
guardflag = 
priority = 7,Hit
damage    = ceil(ifElse(var(2)>=16,6,ifElse(root,fvar(11) * 20 < 11, 11, root,fvar(11) * 20))),2
;ceil(30*root,fvar(15)),2
;ifelse(var(2)>=20,ceil(30*root,fvar(15)),ceil(30*root,fvar(15))), 2
;ifelse(var(2)>=20,8,ceil(23*root,fvar(15))), 2
getpower = 0,0
givepower = 20,20
pausetime = 1*(var(2)<20+var(25)),6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= ifelse(var(2)<20+var(25), -2, -10), ifelse(var(2)<20+var(25), 0, -3)
guard.velocity = -9
air.velocity = -5.5,-3.9
airguard.velocity = -5.5, -1.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=(var(2)>=20+var(25))
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s7030
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5

[State 1061, NoJuggle]
type = parentvarset
trigger1 = movecontact 
v = 18
value = 0


[State 3025, p2state - killed]
type = targetstate
triggerall = NumEnemy < 2
trigger1 = movehit && numtarget
trigger1 = MatchOver
trigger1 = WinKO
value = ifelse((target, SelfAnimExist(5941)), 5941, 5943)
ignorehitpause = 1

[State 3005, end]
type = changestate
trigger1 = movecontact = 1 ;this, remember this "= 1" part to make the hitsparks work.
value = ifelse(var(2)<20+var(25),2402,1316)

[State 1061, End]
type = destroyself
trigger1 = root,stateno != 2401






;===================================================
; CHOU KAMEHAMEHA HELPER UP
[Statedef 2462]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5

[State 1061, NoJuggle]
type = parentvarset
trigger1 = time = 0
v = 18
value = 1

[State 2100, HitCount add (only for supermoves)]
type		= ParentVarAdd
trigger1		= MoveHit
var(24)		= 1
persistent	= 0
ignorehitpause	= 1

[State -2, Explod];var for scaling CLSNs
type = VarSet
trigger1 = !prevstateno && !time
var(1) = 0
[State -2, Explod];var for scaling CLSNs
type = VarAdd
trigger1 = !prevstateno
var(1) = 1

[State 3000, Kamehameha FX beam]
type = helper
trigger1 = !numhelper(2465) && !time
helpertype = normal
stateno = 2465
ID = 2465
name = "tip-chouKmh"
postype = p1
pos = 0,0
ownpal = 1

[State -2, Explod];Tip of Kmh FX
type = RemoveExplod
trigger1 = root,stateno != 2461
id = 2404

[State 800, VarSet];Charging time
type = VarSet
trigger1 = !time
var(25) = root,var(25)

[State 8000, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause = 1

[State 3005, hitvar]
type=varadd
trigger1= !time
var(2)=1

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 3005, anim]
type = changeanim
trigger1 = !time && !prevstateno && !movecontact
value = 2465

[State 3005, anim]
type = changeanim
trigger1 = movecontact && animelemtime(30)<0
value = 2465
elem = var(1)
ignorehitpause = 1

[State 1061, Velocity]
type = VelSet
trigger1 = time<45
x = ifelse((time<2 && var(2)>1),1,10)
y = ifelse((time<2 && var(2)>1),-1,-7)

[State 1061, Velocity]
type = VelSet
trigger1 = time>=45
x = 0
y = 0

[State 2011, NotHitBy]
type		= NotHitBy
trigger1		= Time >= 0
Time		= 1
value		= SCA, NA, SA, HA, NT, ST, HT
ignorehitpause	= 1

[State 2011, HitBy]
type		= HitBy
trigger1		= Time >= 0
value		= SCA, NP, SP, HP
Time		= 1
ignorehitpause	= 1

[State 2011, HitOverride]
type		= HitOverride
trigger1		= Time >= 0
slot		= 1
Time		= 1
stateno		= 2462
attr		= SCA, NP, SP, HP
ignorehitpause	= 1

[State 3005, hit];Not MAX and not last hit
type = hitdef
triggerall = var(25)<20 && var(2)<20+var(25)
trigger1 = facing=1 && (root,pos X - enemy,pos X)<0 
trigger2 = facing=-1 && (root,pos X - enemy,pos X)>0 
attr = S,HP
hitflag = MAF
guardflag = MA
priority = 7,Hit
damage    = ceil(ifElse(var(2)>=16,6,ifElse(root,fvar(11) * 20 < 11, 11, root,fvar(11) * 20))),2
;ceil(30*root,fvar(15)),2
;ifelse(var(2)>=20,ceil(30*root,fvar(15)),ceil(30*root,fvar(15))), 2
;ifelse(var(2)>=20,8,ceil(23*root,fvar(15))), 2
getpower = 0,0
givepower = 20,20
pausetime = 1*(var(2)<20+var(25)),6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= -1,-1
guard.velocity = -8
air.velocity = -5.5,-7.9
airguard.velocity = -3.5, -3.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=0
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s7030
sparkxy = 20-(random%40),ceil(enemynear, const(size.mid.pos.y))+20
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5

[State 3005, hit];Not MAX and LAST hit
type = hitdef
triggerall = var(25)<20 && var(2)=20+var(25)
trigger1 = facing=1 && (root,pos X - enemy,pos X)<0 
trigger2 = facing=-1 && (root,pos X - enemy,pos X)>0 
attr = S,HP
hitflag = MAF
guardflag = MA
priority = 7,Hit
damage    = ceil(ifElse(var(2)>=16,6,ifElse(root,fvar(11) * 20 < 11, 11, root,fvar(11) * 20))),2
;ceil(30*root,fvar(15)),2
;ifelse(var(2)>=20,ceil(30*root,fvar(15)),ceil(30*root,fvar(15))), 2
;ifelse(var(2)>=20,8,ceil(23*root,fvar(15))), 2
getpower = 0,0
givepower = 20,20
pausetime = 1*(var(2)<20+var(25)),6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= -6,-8
guard.velocity = -8
air.velocity = -5.5,-7.9
airguard.velocity = -3.5, -3.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s7030
sparkxy = 20-(random%40),ceil(enemynear, const(size.mid.pos.y))+20
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5
;p2stateno = 2467
id = 2462

[State 802, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = movehit
trigger1 = !(target, ishelper)
value = 2467
ID = 2462
ignorehitpause = 1
persistent = 0

[State 3005, hit];MAX and not last hit
type = hitdef
triggerall = var(25)>=20 && var(2)<20+var(25)
trigger1 = facing=1 && (root,pos X - enemy,pos X)<0 
trigger2 = facing=-1 && (root,pos X - enemy,pos X)>0 
attr = S,HP
hitflag = MAF
guardflag = 
priority = 7,Hit
damage    = ceil(ifElse(var(2)>=16,6,ifElse(root,fvar(11) * 20 < 11, 11, root,fvar(11) * 20))),4
;ceil(30*root,fvar(15)),2
;ifelse(var(2)>=20,ceil(30*root,fvar(15)),ceil(30*root,fvar(15))), 2
;ifelse(var(2)>=20,8,ceil(23*root,fvar(15))), 2
getpower = 0,0
givepower = 20,20
pausetime = 1*(var(2)<20+var(25)),6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= -1,-1
guard.velocity = -8
air.velocity = -5.5,-7.9
airguard.velocity = -3.5, -3.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=0
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s7030
sparkxy = 20-(random%40),ceil(enemynear, const(size.mid.pos.y))+20
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5

[State 3005, hit];MAX and LAST hit
type = hitdef
triggerall = var(25)>=20 && var(2)=20+var(25)
trigger1 = facing=1 && (root,pos X - enemy,pos X)<0 
trigger2 = facing=-1 && (root,pos X - enemy,pos X)>0 
attr = S,HP
hitflag = MAF
guardflag = 
priority = 7,Hit
damage    = ceil(ifElse(var(2)>=16,6,ifElse(root,fvar(11) * 20 < 11, 11, root,fvar(11) * 20))),4
;ceil(30*root,fvar(15)),2
;ifelse(var(2)>=20,ceil(30*root,fvar(15)),ceil(30*root,fvar(15))), 2
;ifelse(var(2)>=20,8,ceil(23*root,fvar(15))), 2
getpower = 0,0
givepower = 20,20
pausetime = 1*(var(2)<20+var(25)),6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= -6,-8
guard.velocity = -8
air.velocity = -5.5,-7.9
airguard.velocity = -3.5, -3.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s7030
sparkxy = 20-(random%40),ceil(enemynear, const(size.mid.pos.y))+20
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5
;p2stateno = 2467
id = 2462
;(TargetState already coded, scroll up)

[State 1061, NoJuggle]
type = parentvarset
trigger1 = movecontact 
v = 18
value = 0

[State 3025, p2state - killed]
type = targetstate
triggerall = NumTarget
triggerall = !(target, ishelper)
triggerall = NumEnemy < 2
trigger1 = movehit && numtarget
trigger1 = MatchOver
trigger1 = WinKO
value = 5944
ignorehitpause = 1

[State 3005, end]
type = changestate
trigger1 = movecontact = 1 ;this, remember this "= 1" part to make the hitsparks work.
value = ifelse(var(2)<20+var(25),2462,1316)

[State 1061, End]
type = destroyself
trigger1 = root,stateno != 2461







;===================================================
; CHOU KAMEHAMEHA UP FX HELPER - ON HANDS
[Statedef 2463]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 4
anim = 2403

[State 1061, End]
type = VarAdd
trigger1 = root,stateno = 2461
trigger2 = root,stateno = 3015
var(0) = 1
ignorehitpause = 1

[State 8000, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause = 1

[State 1061, End]
type = bindtoroot
trigger1 = root,stateno = 2461
trigger2 = root,stateno = 3015
pos = 40,-81
ignorehitpause = 1

[State 1061, End]
type = AngleDraw
triggerall = !MatchOver
trigger1 = root,stateno = 2461
trigger2 = root,stateno = 3015
value = 35
scale = 1,1+.3*(root,stateno = 3015)
ignorehitpause = 1

[State 1061, End]
type = AngleDraw
triggerall = WinKO && MatchOver
trigger1 = root,stateno = 2461
trigger2 = root,stateno = 3015
value = 35
scale = 1,1.5+.1*(root,stateno = 3015)
ignorehitpause = 1

[State 1061, End]
type = AngleDraw
trigger1 = root,stateno = 2466
trigger2 = root,stateno = 3020
scale = 1 , ifelse(1-0.05*(time-var(0))<0,0 , 1-0.05*(time-var(0)))
value = 35
ignorehitpause = 1

[State 1061, End]
type = destroyself
trigger1 = root,stateno != 2461
trigger1 = root,stateno != 2466
trigger1 = root,stateno != 3015
trigger1 = root,stateno != 3020

;===================================================
; CHOU KAMEHAMEHA FX HELPER - SCALED BEAM
[Statedef 2464]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 3
anim = 2464

[State 1061, End]
type = VarAdd
trigger1 = root,stateno = 2401
trigger2 = root,stateno = 2461
trigger3 = root,stateno = 3005
trigger4 = root,stateno = 3015
var(0) = 1
ignorehitpause = 1

[State 8000, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause = 1

[State 1061, End]
type = bindtoroot
trigger1 = root,stateno = 2401
trigger2 = root,stateno = 2403
trigger3 = root,stateno = 3005
trigger4 = root,stateno = 3010
pos = 72,-58
ignorehitpause = 1
[State 1061, End]
type = bindtoroot
trigger1 = root,stateno = 2461
trigger2 = root,stateno = 3015
pos = 65,-98
ignorehitpause = 1

[State 1061, End]
type = AngleDraw
trigger1 = root,stateno = 2401
trigger1 = !MatchOver
scale = (50.0 + abs(pos X - (helper(2402),pos X)))/58.0 , 1    ;60+...
value = 0
ignorehitpause = 1
[State 1061, End]
type = AngleDraw
trigger1 = !MatchOver
trigger1 = root,stateno = 2461
scale = (40.0 + abs(pos X - (helper(2462),pos X)))/60.0 , 1
value = 35
ignorehitpause = 1
[State 1061, End]
type = AngleDraw
trigger1 = root,stateno = 3005
trigger1 = !MatchOver
scale = (50.0 + abs(pos X - (helper(3006),pos X)))/58.0 , 1    ;60+...
value = 0
ignorehitpause = 1
[State 1061, End]
type = AngleDraw
trigger1 = !MatchOver
trigger1 = root,stateno = 3015
scale = (40.0 + abs(pos X - (helper(3016),pos X)))/60.0 , 1.3
value = 35
ignorehitpause = 1

;Scale Up when Killing the Opponent
[State 1061, End]
type = AngleDraw
trigger1 = root,stateno = 2401
trigger1 = WinKO && MatchOver
scale = (70.0 + abs(pos X - (helper(2402),pos X)))/60.0 , 1.5
value = 0
ignorehitpause = 1
[State 1061, End]
type = AngleDraw
triggerall = WinKO && MatchOver
trigger1 = root,stateno = 2461
;scale = (55.0 + abs(pos X - (helper(2462),pos X)))/60.0 , 1.6
scale = 50,1.5
value = 35
ignorehitpause = 1
[State 1061, End]
type = AngleDraw
trigger1 = root,stateno = 3005
trigger1 = WinKO && MatchOver
scale = (70.0 + abs(pos X - (helper(3006),pos X)))/60.0 , 1.5
value = 0
ignorehitpause = 1
[State 1061, End]
type = AngleDraw
triggerall = WinKO && MatchOver
trigger1 = root,stateno = 3015
;scale = (55.0 + abs(pos X - (helper(3016),pos X)))/60.0 , 1.6
scale = 50,1.5
value = 35
ignorehitpause = 1

[State 1061, End]
type = AngleDraw
trigger1 = root,stateno = 2403 || root,stateno = 3010
scale = 10 , ifelse(1-0.05*(time-var(0))<0, 0, 1-0.05*(time-var(0)))
value = 0
ignorehitpause = 1
[State 1061, End]
type = AngleDraw
trigger1 = root,stateno = 2466 || root,stateno = 3020
scale = 10 , ifelse(1-0.05*(time-var(0))<0,0,1-0.05*(time-var(0)))
value = 35
ignorehitpause = 1

[State 1061, End]
type = destroyself
trigger1 = root,stateno != 2461
trigger1 = root,stateno != 2466
trigger1 = root,stateno != 2401
trigger1 = root,stateno != 2403
trigger1 = root,stateno != 3005
trigger1 = root,stateno != 3010
trigger1 = root,stateno != 3015
trigger1 = root,stateno != 3020

;===================================================
; CHOU KAMEHAMEHA UP FX HELPER - TIP OF BEAM
[Statedef 2465]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5
anim = 2404

[State 8000, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause = 1

[State 1061, End]
type = bindtoParent
trigger1 = root,stateno = 2461
trigger2 = root,stateno = 3015
pos = -32,-94
ignorehitpause = 1

[State 1061, End]
type = AngleDraw
triggerall = !MatchOver
trigger1 = root,stateno = 2461
trigger2 = root,stateno = 3015
value = 35
scale = 1,1+.3*(root,stateno = 3015)
ignorehitpause = 1

[State 1061, End]
type = AngleDraw
triggerall = WinKO && MatchOver
trigger1 = root,stateno = 2461
trigger2 = root,stateno = 3015
value = 35
scale = 1.5,1.5+.1*(root,stateno = 3015)
ignorehitpause = 1

[State 1061, End]
type = destroyself
trigger1 = root,stateno != 2461
trigger1 = root,stateno != 3015
trigger2 = MatchOver

;==========================================================
; GENKIDAMA HELPER - Dizzy FX
[Statedef 2534]
physics = N
velset = 0, 0
anim = 15999
sprpriority = 4

[State 3033, Assert]
type = assertspecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State 3033, Pos]
type = posadd
trigger1 = 1
x = ceil(p2dist x)
y = ceil(p2dist y)

[State 1315, Dizzy Stars]
type=explod
trigger1 = enemynear, stateno = 5300
trigger2 = enemynear, stateno = 2912
anim = 2534
ID = 2534
sprpriority = 7
postype = p2
pos = -2, (enemynear,const(size.head.pos.y))-20-40*(enemynear,name="Piccolo Z2")
removetime = -1
ownpal=1
ignorehitpause=1
persistent = 0
pausemovetime = 100
supermovetime = 100
scale = .8,.8

[State 3033, Snd]
type = playsnd
trigger1 = enemynear, stateno = 5300
trigger2 = enemynear, stateno = 2912
value = 2522, ifelse(random < 500, 0, 1)
persistent = 0

[State 3033, End]
type = removeexplod
trigger1 = enemynear, ctrl
trigger2 = (enemynear, movetype != H)
trigger3 = (enemynear, stateno != 5300) && (enemynear, stateno != 2912)
ID = 2534

[State 3033, End]
type = destroyself
trigger1 = enemynear, ctrl
trigger1 = (enemynear, movetype != H) && (enemynear, stateno != 5300) && (enemynear, stateno != 2912)


;------------------------------------------------
; Limit basics comboability
[Statedef 15999]
type    = S
movetype= A
physics = N
anim = 15999
sprpriority = -5

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, destroy]
type = DestroySelf
trigger1 = numenemy
trigger1 = enemynear, movetype != H || (enemynear, stateno = [120,155]) || enemynear, ctrl
trigger2 = time = 24
trigger3 = StateNo = [1400,1499]


;------------------------------------------------
;Pulse Effect during fall recovery (taken from Possessed Heita by The_None)
[Statedef 52100]
type    = S
movetype = I
physics = S
sprpriority = 4
anim = 15999
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
triggerall = root,var(55)=0		;Voice=Japan
trigger1 = time = 0
value = 3,3
channel = 0

[State 0, PlaySnd]
type = PlaySnd
triggerall = root,var(55)=1		;Voice=English
trigger1 = time = 0
value = 3,100
channel = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = ifelse(root,stateno=5201,ceil(parentdist x/3.0),parentdist x)
y = parentdist y

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = parent,anim

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(1) = parent,animelemno(0)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time
value = var(0)
elem = var(1)

[State 0, VarSet]
type = VarAdd
trigger1 = time
fvar(0) = 11.2

[State 0, VarSet]
type = VarAdd
trigger1 = time
fvar(1) = 0.015

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1+fvar(1),1+fvar(1)

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 1
add = floor(0-fvar(0)),floor(0-fvar(0)),floor(0-fvar(0))

[State 0, ]
type = DestroySelf
trigger1 = root,stateno != 5201
trigger1 = root,stateno != 5210


;------------------------------------------------
; Big Ball Beam Collision
[Statedef 2483]
type    = S
movetype= A
physics = N
anim = 15999
sprpriority = 7

[state 17100,move ball FX]
type = Posset
trigger1 = 1
X = floor(160.0*((root,fvar(20))-.5))*(root,facing)
Y = -47

[State -2, Explod];Big Ball at center
type = Explod
trigger1 = !numexplod(2483) && !time
anim = 2483
removetime = -1
sprpriority = 6
id = 2483
bindtime = -1
ownpal = 1
postype = p1
pos = 0,0
scale = .45,.45
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
facing = root,facing

[State 1305, timevar]
type = varadd
trigger1 = root,stateno != 2489
var(4) = 1

[State 1305, Scale Explod]
type = ModifyExplod
trigger1 = root,stateno = 2489
scale = 0.7+.1*(time-var(4)),0.7+.1*(time-var(4))
ID = 2483

[State 13100, explosion SND]
type = playsnd
trigger1 = root,stateno = 2489
trigger1 = time-var(4) = 0
value = 2483,0
volume = 255

[State 2260, destroy]
type = RemoveExplod
trigger1 = root,stateno != 2481
trigger1 = root,stateno != 2489

[State 2260, destroy]
type = DestroySelf
trigger1 = root,stateno != 2481
trigger1 = root,stateno != 2489

;------------------------------------
;CHICHI HELPER CATCHED
[Statedef 702]
type    = S
movetype= I
physics = N
anim = 702
sprpriority = 2

[State 1061, Velocity]
type = VelSet
trigger1 = Time = 20
y = 10

[State 1061, Catched]
type = ChangeAnim
trigger1 = Time = 48
value = 703

[State 1061, Velocity]
type = VelSet
trigger1 = Time = 48
y = 0

[State 1061, bind]
type = BindtoRoot
trigger1 = Time >= 48
pos = 0,0

;------------------------------------
;CHICHI HELPER THROWN
[Statedef 707]
type    = S
movetype= I
physics = N
anim = 707
sprpriority = 2

[State 1061, Velocity]
type = VelSet
trigger1 = AnimElemTime(4) = 0
y = -10

[State 1061, destroy]
type = Destroyself
trigger1 = AnimElemTime(4) = 40

;------------------------------------
;VALENTINE'S HEART HELPER
[Statedef 704]
type    = S
movetype= I
physics = N
anim = 704
sprpriority = -4

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1061, scale]
type = AngleDraw
trigger1 = 1
value = 0
scale = 2+sin(.05*Time),2+sin(.05*Time)

;---------------------------
;Detect life Helper (Coded by 2OS)
[Statedef 2]

[State 2OS]
type = statetypeset
trigger1 = 1
movetype = I
ignorehitpause = 1
persistent = 1

[State 2OS, Blank Animation]
type = changeanim
trigger1 = 1
value = 15999
ignorehitpause = 1
persistent = 1

[State 2OS]
type = bindtoroot
trigger1 = 1
pos = 0,0
ignorehitpause = 1
persistent = 1

[State 2OS, Damage Var Delay Reset]
type = varset
trigger1 = var(1)>1
var(1) = 0
ignorehitpause = 1
persistent = 1

[State 2OS, Damage Var Delay]
type = varadd
trigger1 = var(2) != root,life
var(1) = 1
ignorehitpause = 1
persistent = 1

[State 2OS, Damage Var]
type = varset
trigger1 = (var(1)!=[0,1])
var(2) = root,life
ignorehitpause = 1
persistent = 1

;------------------------------------------------
; Diagonal white foreground Chou Kamehameha fatality Up
[Statedef 5945]
type    = S
movetype= I
physics = N
anim = 5944
sprpriority = 8

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, rotate]
type = AngleDraw
trigger1 = 1
value = 150

[State 2260, destroy]
type = DestroySelf
trigger1 = !animtime

;------------------------------------------------
; Diagonal white foreground Chou Kamehameha fatality Down
[Statedef 5947]
type    = S
movetype= I
physics = N
anim = 5944
sprpriority = 8

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, rotate]
type = AngleDraw
trigger1 = 1
value = -150

[State 2260, destroy]
type = DestroySelf
trigger1 = !animtime

;====================================
; Broken Back - BG Arms + legs
[Statedef 245947]
type = S
movetype = H
physics = N
velset = 0,0
anim = 5947

[State 2260, bind]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, destroy]
type = DestroySelf
trigger1 = time = 126

;==========================================================
; Dragon Ball - Rolling from opponent
[Statedef 18045]
physics = N
velset = 0, 0
anim = 18045 + (random%7)
sprpriority = -5

[State 3033, Pos]
type = posadd
trigger1 = !time && numenemy
x = enemy, p2dist X - 20
y = -5

[State 3033, scale]
type = angledraw
trigger1 = 1
scale = 1,1

[State 4302, scale]
type = angleadd
trigger1 = vel x < 0
value = -5*(vel X)

[State 3033, Vel]
type = velset
trigger1 = time = [0,40]
x = -2

[State 3033, Vel]
type = veladd
trigger1 = time>40 && (vel x <0)
x = 0.3

[State 3033, Vel]
type = velset
trigger1 = time>40 && (vel x >0)
x = 0

;------------------------------------------------
; White FG, Genkidama fatality
[Statedef 2991]
type    = S
movetype= I
physics = N
anim = 2991
sprpriority = 8

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State -2, Explod];white tears
type = Explod
trigger1 = time=50
anim = 2992
ID = 2992
removetime = -1
sprpriority = 8
bindtime = -1
ownpal = 1
postype = p1
pos = 0,0
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999

[State -2, Explod];White wall
type = Explod
trigger1 = time=80
anim = 2993
ID = 2992
removetime = -1
sprpriority = 9
ownpal = 1
postype = p1
pos = 0,0
vel = 1,0
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999

[State -2, Explod];White wall
type = Explod
trigger1 = time=80
anim = 2994
ID = 2992
removetime = -1
sprpriority = 9
ownpal = 1
postype = p1
pos = 0,0
vel = 1,0
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999

[State 2260, destroy]
type = RemoveExplod
trigger1 = time = 150
ID = 2992

[State 2260, destroy]
type = DestroySelf
trigger1 = time >= 150

;======================================================================
;TELEPORT AFTERIMAGE HELPER
[Statedef 1486]
type = A
movetype = I
physics = N
sprpriority = 1
velset = 0,0

[State 3000, nhb]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 3033, save anim]
type = varset
trigger1 = !time
var(1) = root,var(33)

[state 17100,bind]
type = bindtoparent
trigger1 = !time
pos = 0,0

[State 1406, No Shadow]
type = null; AssertSpecial
trigger1 = 1
flag = noshadow

[State 4001, anim]
type = ChangeAnim
trigger1 = !time
value = var(1)
elem = root,var(34)

[State 4001, end anim]
type = ChangeAnim
trigger1 = animtime = -1
value = var(1)
elem = animelemno(0)

[State 1415, Hit Floor]
type = trans
trigger1 = time>20 && time<46
trans = addalpha
alpha = 256-10*(time-20), 10*(time-20)

[State -2, Explod];FX 1.1
type = Explod
trigger1 = !time
anim = 1410
removetime = 20
sprpriority = 2
bindtime = -1
ownpal = 1
postype = p1
pos = -26,-20
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
facing = -1

[State -2, Explod];FX 1.2
type = Explod
trigger1 = !time
anim = 1410
removetime = 20
sprpriority = 2
bindtime = -1
ownpal = 1
postype = p1
pos = 0,-50
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
facing = -1

[State -2, Explod];FX 1.3
type = Explod
trigger1 = !time
anim = 1410
removetime = 20
sprpriority = 2
bindtime = -1
ownpal = 1
postype = p1
pos = 20,-80
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
facing = -1

[State -2, Explod];FX 2.1
type = Explod
trigger1 = !time
anim = 1411
removetime = 20
sprpriority = 2
bindtime = -1
ownpal = 1
postype = p1
pos = 40,-65
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
facing = -1

[State -2, Explod];FX 2.2
type = Explod
trigger1 = !time
anim = 1411
removetime = 20
sprpriority = 2
bindtime = -1
ownpal = 1
postype = p1
pos = -30,-40
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
facing = -1

[State -2, Explod];FX 2.3
type = Explod
trigger1 = !time
anim = 1411
removetime = 20
sprpriority = 2
bindtime = -1
ownpal = 1
postype = p1
pos = 10,-25
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
facing = -1

[State 17100]
type = destroyself
trigger1 = time=46

;======================================================================
;SSJ TRANSFORM CUTSCENE
[Statedef 19300]
type = A
movetype = I
physics = N
sprpriority = 1
velset = 0,0
anim = 19300

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 19300]
type = posset
trigger1 = !time
X = ifelse((root,facing=1),-290,290)
Y = -60

[State 19300]
type = velset
trigger1 = root,animelemtime(20)=0
X = 20

[State 19300]
type = velmul
trigger1 = root,animelemtime(23)>=0 && root,animelemtime(40)<0
X = 0.7

[State -2, Explod];pupil
type = Explod
trigger1 = root,animelemtime(35)=0
anim = 19301
ID = 19301
removetime = -1
sprpriority = 4
bindtime = -1
ownpal = 1
postype = p1
pos = 0,0
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999

[State 17100, pupil Sound]
type = PlaySnd
trigger1 = root,animelemtime(35)=0
value = 193,2
volume = 500

[State 19300]
type = velset
trigger1 = root,animelemtime(50)=0
X = -15

[State 19300]
type = RemoveExplod
trigger1 = root,animelemtime(79)=0
ID = 19301

[State 19300]
type = Destroyself
trigger1 = root,animelemtime(80)=0
trigger2 = root,StateNo = 710

;------------------------------------------------
; SSJ3 Hair
[Statedef 18800]
type    = S
movetype= A
physics = N
anim = 903
sprpriority = 6

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 1
pos = 0,0
ignorehitpause =  1

[State 1000, flash]
type = PalFX
trigger1 = !(time%60)
add = 70,70,70
sinadd = 30,30,30,60
time = 60

[State 2260, destroy]
type = DestroySelf
trigger1 = time = 600


;===================================================
; AIR CHOU KAMEHAMEHA HELPER DOWN
[Statedef 2602]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 1061, NoJuggle]
type = parentvarset
trigger1 = time = 0
v = 18
value = 1

[State -2, Explod];var for scaling CLSNs
type = null ;VarSet
trigger1 = !prevstateno && !time
var(1) = 0
[State -2, Explod];var for scaling CLSNs
type = null ;VarAdd
trigger1 = !prevstateno
var(1) = 1

; NxL fix :
[State -2, Explod];var for scaling CLSNs
type = VarSet
trigger1 = !prevstateno && !time
var(1) = 1
[State -2, Explod];var for scaling CLSNs
type = VarAdd
trigger1=var(1)<12
trigger1=!prevstateno
trigger1=time=(0,45)
trigger1=pos y<-80
var(1) = 1



[State -2, Explod];Tip of Kmh FX
type = RemoveExplod
trigger1 = root,stateno != 2601
id = 2404

[State 800, VarSet];Charging time
type = VarSet
trigger1 = !time
var(25) = root,var(25)

[State 8000, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause = 1

[State 3005, hitvar]
type=varadd
trigger1= !time
var(2)=1

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 3005, anim]
type = null ;changeanim
trigger1 = !time && !prevstateno && !movecontact
value = 2602
[State 3005, anim]
type = null ;changeanim
trigger1 = movecontact && animelemtime(12)<0
value = 2602
elem = var(1)+1
ignorehitpause = 1

; NxL fix :
[State 3005, anim]
type = changeanim
trigger1=1
value=2602
elem=var(1)

[State 1061, Velocity]
type = VelSet
trigger1 = time<45 && pos Y < -80
x = ifelse((time<2 && var(2)>1),1,10)
y = ifelse((time<2 && var(2)>1),1,7)

[State 1061, Velocity]
type = VelSet
trigger1 = time >= 45
trigger2 = pos Y >= -80
x = 0
y = 0

[State 2011, NotHitBy]
type		= NotHitBy
trigger1		= Time >= 0
Time		= 1
value		= SCA, NA, SA, HA, NT, ST, HT
ignorehitpause	= 1

[State 2011, HitBy]
type		= HitBy
trigger1		= Time >= 0
value		= SCA, NP, SP, HP
Time		= 1
ignorehitpause	= 1

[State 2011, HitOverride]
type		= HitOverride
trigger1		= Time >= 0
slot		= 1
Time		= 1
stateno		= 2602
attr		= SCA, NP, SP, HP
ignorehitpause	= 1

[State 3005, hit]
type = hitdef
triggerall = var(25)<20
trigger1 = facing=1 && (root,pos X - enemy,pos X)<0 
trigger2 = facing=-1 && (root,pos X - enemy,pos X)>0 
attr = S,HP
hitflag = MAF
guardflag = MA
priority = 7,Hit
damage    = ceil(ifElse(var(2)>=16,6,ifElse(root,fvar(11) * 20 < 11, 11, root,fvar(11) * 20))),2
;ceil(23*root,fvar(15)),2
;ifelse(var(2)>=20,ceil(23*root,fvar(15)),ceil(23*root,fvar(15))), 2
;ifelse(var(2)>=20,8,ceil(23*root,fvar(15))), 2
getpower = 0,0
givepower = 20,20
pausetime = 1*(var(2)<20+var(25)),6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= ifelse(var(2)<20+var(25), -2, -10), ifelse(var(2)<20+var(25), 0, -3)
guard.velocity = -9
air.velocity = -5.5,-3.9
airguard.velocity = -5.5, -1.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=(var(2)>=20+var(25))
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s7030
sparkxy = 20-(random%40),ceil(enemynear, const(size.mid.pos.y))+100
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5

[State 3005, hit]
type = hitdef
triggerall = var(25)>=20
trigger1 = facing=1 && (root,pos X - enemy,pos X)<0 
trigger2 = facing=-1 && (root,pos X - enemy,pos X)>0 
attr = S,HP
hitflag = MAF
guardflag = 
priority = 7,Hit
damage    = ceil(ifElse(var(2)>=16,6,ifElse(root,fvar(11) * 20 < 11, 11, root,fvar(11) * 20))),2
;ceil(23*root,fvar(15)),2
;ifelse(var(2)>=20,ceil(23*root,fvar(15)),ceil(23*root,fvar(15))), 2
;ifelse(var(2)>=20,8,ceil(23*root,fvar(15))), 2
getpower = 0,0
givepower = 20,20
pausetime = 1*(var(2)<20+var(25)),6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= ifelse(var(2)<20+var(25), -2, -10), ifelse(var(2)<20+var(25), 0, -3)
guard.velocity = -9
air.velocity = -5.5,-3.9
airguard.velocity = -5.5, -1.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=(var(2)>=20+var(25))
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s7030
sparkxy = 20-(random%40),ceil(enemynear, const(size.mid.pos.y))+100
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5

[State 1061, NoJuggle]
type = parentvarset
trigger1 = movecontact 
v = 18
value = 0

[State 3025, p2state - killed]
type = targetstate
triggerall = NumEnemy < 2
trigger1 = movehit && numtarget
trigger1 = MatchOver
trigger1 = WinKO
value = 5946
ignorehitpause = 1

[State 3005, end]
type = changestate
trigger1 = movecontact
value = ifelse(var(2)<20+var(25),2602,1316)

[State 1000, hit ground]
type = Helper
helpertype = normal
triggerall = !numhelper(2615)
trigger1 = pos y>=-80 && !movecontact
name = "air_chou_kmh_hit_ground"
ownpal = 1
stateno = 2615
id = 2615

[State 3000, Kamehameha FX beam]
type = helper
trigger1 = !numhelper(2606) && !time
helpertype = normal
stateno = 2606
ID = 2606
name = "tip-chouKmh"
postype = p1
pos = 0,0
ownpal = 1

[State 1061, End]
type = destroyself
trigger1 = root,stateno != 2601
trigger1 = root,stateno != 2610

;===================================================
; AIR CHOU KAMEHAMEHA DOWN FX HELPER - ON HANDS
[Statedef 2603]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 4
anim = 2403

[State 1061, End]
type = VarAdd
trigger1 = root,stateno = 2601
var(0) = 1
ignorehitpause = 1

[State 8000, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause = 1

[State 1061, End]
type = bindtoroot
trigger1 = root,stateno = 2601
pos = 25,-51
ignorehitpause = 1

[State 1061, End]
type = AngleDraw
triggerall = !MatchOver
trigger1 = root,stateno = 2601
value = -35
ignorehitpause = 1

[State 1061, End]
type = AngleDraw
triggerall = WinKO && MatchOver
trigger1 = root,stateno = 2601
value = -35
scale = 1,1.5
ignorehitpause = 1

[State 1061, End]
type = AngleDraw
trigger1 = root,stateno = 2610
scale = 1 , 1-0.05*(time-var(0))
value = -35
ignorehitpause = 1

[State 1061, End]
type = destroyself
trigger1 = root,stateno != 2601
trigger1 = root,stateno != 2610

;===================================================
; AIR CHOU KAMEHAMEHA FX HELPER - SCALED BEAM
[Statedef 2604]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 3
anim = 2464

[State 1061, End]
type = VarAdd
trigger1 = root,stateno = 2601
var(0) = 1
ignorehitpause = 1

[State 8000, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause = 1

[State 1061, End]
type = bindtoroot
trigger1 = root,stateno = 2601
pos = 48,-36
ignorehitpause = 1
[State 1061, End]
type = bindtoroot
trigger1 = root,stateno = 2610
pos = 43,-25
ignorehitpause = 1

[State 1061, End]
type = AngleDraw
trigger1 = !MatchOver
trigger1 = root,stateno = 2601
scale = (40.0 + abs(pos X - (helper(2602),pos X)))/60.0 , 1
value = -35
ignorehitpause = 1

[State 1061, save var]
type = VarSet
trigger1 = numhelper(2602)
fvar(1) = helper(2602),pos X
ignorehitpause = 1

[State 1061, End]
type = AngleDraw
trigger1 = root,stateno = 2610
scale = (40.0 + abs(pos X - fvar(1)))/60.0, 1-0.05*(time-var(0))
value = -35
ignorehitpause = 1

[State 1061, End]
type = AngleDraw
triggerall = WinKO && MatchOver
trigger1 = root,stateno = 2601
scale = 50,1.5
value = -35
ignorehitpause = 1

[State 1061, End]
type = destroyself
trigger1 = root,stateno != 2601
trigger1 = root,stateno != 2610

;===================================================
; AIR CHOU KAMEHAMEHA DOWN FX HELPER - TIP OF BEAM
[Statedef 2606]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5
anim = 2404

[State 8000, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause = 1

[State 1061, End]
type = bindtoParent
trigger1 = root,stateno = 2601
pos = -34,76
ignorehitpause = 1

[State 1061, End]
type = AngleDraw
triggerall = !MatchOver
trigger1 = root,stateno = 2601
trigger2 = root,stateno = 2610
value = -35
scale = 1,1
ignorehitpause = 1

[State 1061, End]
type = AngleDraw
triggerall = WinKO && MatchOver
trigger1 = root,stateno = 2601
trigger2 = root,stateno = 2610
value = -35
scale = 1.5,1.5
ignorehitpause = 1

[State 1061, End]
type = destroyself
trigger1 = root,stateno != 2601
trigger1 = root,stateno != 2610
trigger2 = MatchOver

;==========================================================
; AIR CHOU KAMEHAMEHA HELPER - Hitting ground
[Statedef 2615]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 9
velset = 0,0

[State 1061, bind]
type = bindtoparent
trigger1 = !time
pos = 60,85

[State 3005, anim]
type = changeanim
trigger1 = !time
value = 2615

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 1316
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1315, image]
type = afterimage
trigger1 = !time
time = 999
timegap = 1
framegap = 2
length = 5
palcontrast = 50,50,200
trans = add

[State 3005, hit]
type = hitdef
trigger1 = animelem=1 && !movehit
trigger2 = animelem=2 && !movehit
trigger3 = animelem=3 && !movehit
trigger4 = animelem=4 && !movehit
attr = A,HP
hitflag = MAFD
guardflag = HA
priority = 7,Hit
damage    = ceil(ifElse(var(2)>=16,6,ifElse(root,fvar(11) * 20 < 11, 11, root,fvar(11) * 20))),4
;ceil(35*root,fvar(15)), 4
getpower = 0,0
givepower = 35,35
pausetime = 1,6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = Low
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= -6, -7
guard.velocity = -8
air.velocity = -4,-9
airguard.velocity = -4, -1.5 
down.velocity = 0,0
down.hittime = 20
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s7020
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5

[state 17100, Hit Ground Effect]
type=explod
trigger1 = time = 10
trigger2 = time = 20
anim=17100
id=17100
pos= -10,-5
postype=P1
sprpriority=8
ownpal=1
supermovetime=-1
removetime = -2
scale = 1.3,1.1

[state 17100, Wave Effect]
type=explod
trigger1 = time = 10
trigger2 = time = 20
anim=2205+(root,var(2)=1)
id=2205
pos= 0,0
postype=P1
sprpriority=9
ownpal=1
supermovetime=-1
removetime = -2
scale = 1.3,1.1

[State 3055, end]
type = PlaySnd
trigger1 = time = 5
trigger2 = time = 10
trigger3 = time = 15
trigger4 = time = 20
value = s1000,0

[State 3055, end]
type = destroyself
trigger1 = !animtime
trigger2 = enemy,stateno = 5946




;======================================================================
; Air Chou Kamehameha - No Push Dummy
[Statedef 2650]
ctrl	= 0

[State 2650, ChangeAnim]
type = ChangeAnim
trigger1	= 1
value	= Parent, Anim
elem	= Parent, AnimElemNo(0)

[State 2650, PlayerPush]
type	= PlayerPush
trigger1	= 1
value	= 1

[State 2650, BindToParent]
type	= BindToParent
trigger1	= !Time
time	= -1
facing	= 1

[State 2650, AssertSpecial]
type	= AssertSpecial
trigger1	= 1
flag	= NoShadow
flag2	= Invisible

[State 2650, NotHitBy]
type	= NotHitBy
trigger1	= !Time
value	= SCA
time	= -1

[State 2650, Remove]
type	= DestroySelf
trigger1	= Parent, StateNo != [2600,2610]


;===================================================
; HYPER RUSH DASH TRAINEE 
[StateDef 2702] ; AftImg
type = S
movetype = I
physics = N
ctrl = 0
anim = 2703

[State 13001, Anim]
type = ChangeAnim
trigger1 = anim!= (root,anim)
value = root, anim

[State 13001, Pos]
type = BindToRoot
trigger1 = time = 0
time = -1
facing = 1

[State 13001, Pos];No push
type = PlayerPush
trigger1 = 1
value = 0

[State 13001, NoVis]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 13001, NoHit]
type = NotHitBy
trigger1 = 1
value = SCA

[State 13001, Aftimg]
type = AfterImage
trigger1 = Time = 0
time = 900
palbright = 40,30,-40
palcontrast = 256,256,256
paladd = 30, 20, -30
;palcolor = 0
trans = add1
ignorehitpause = 1

[State -2, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 0
scale = ifelse(root,fvar(38)<0.01,1,root,fvar(38)) , ifelse(root,fvar(38)<0.01,1,root,fvar(38))
ignorehitpause = 1

[State 13001, EndImg]
type = AfterImageTime
trigger1 = Root, Stateno != [2703,2770]
time = 1

[State 13001, End]
type = DestroySelf
trigger1 = Root, Stateno != [2703,2770]

;------------------------------------------------
; Hyper Rush Vertical Lines BG
[Statedef 2718]
type = A
movetype = A
physics = N
anim = 2771
velset = 0,0

[State 2260, push]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, bg]
type = assertspecial
trigger1 = 1
flag = noFG
flag2 = noBG
flag3 = nobardisplay
ignorehitpause = 1

[State 2260, flash]
type = null;PalFX
trigger1 = TimeMod = 4,0
trigger1 = 1
time = 1
invertall = 1
ignorehitpause = 0

[state 3250, speedlines]
type = explod
trigger1 = time = 0
anim = 12773
ID = 2773
postype = back
pos = 10,0
bindtime = -1
supermove = 0
pausemovetime = -1
sprpriority = -6
ontop = 0
ownpal = 1
facing = 1
ignorehitpause = 1
;loop = 1
removetime = -1

[state 3250, speedlines2]
type = explod
trigger1 = time = 0
anim = 12773
ID = 2773
postype = back
pos = 240,0
bindtime = -1
supermove = 0
pausemovetime = -1
sprpriority = -3
ontop = 0
ownpal = 1
facing = 1
ignorehitpause = 1
;loop = 1
removetime = -1

[State 2260, destroy]
type = RemoveExplod
trigger1 = root,stateno != [2710,2725]
trigger2 = root,anim = 1202
trigger3 = numhelper(19875)
ID = 2773

[State 2260, destroy]
type = DestroySelf
trigger1 = root,stateno != [2710,2725]
trigger2 = root,anim = 1202
trigger3 = numhelper(19875)


;===================================================
; Superman
[Statedef 30101]
type    = S
movetype= A
physics = N
anim = 30100
sprpriority = 6
velset = 15,0

[State 1061, End]
type = posset
trigger1 = !time
X = -500*ifelse(root,facing=1,1,-1)
Y = -170

[State 1057, woosh]
type = PlaySnd
trigger1 = Time = 0
value = 30110,0

[State 1057, Superman voice]
type = PlaySnd
trigger1 = Time = 0
value = 30100,0
volume = 200

;===================================================
; Mario, Luigi, Bowser
[Statedef 30111]
type    = S
movetype= A
physics = N
anim = 30110
sprpriority = -3
velset = 8,0

[State 1061, End]
type = posset
trigger1 = !time
X = -1020*ifelse(root,facing=1,1,-1)
Y = -170

[state 1215, Luigi]
type = explod
trigger1 = !time
anim = 30111
id = 30111
pos = -100,0
postype = P1
sprpriority = -3
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

[state 1215, Bowser]
type = explod
trigger1 = !time
anim = 30112
id = 30112
pos = 540,0
postype = P1
sprpriority = -3
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

[State 1057, woosh bowser]
type = PlaySnd
trigger1 = Time = 30
value = 30110,5
volume = 300

[State 1057, Bowser roar]
type = PlaySnd
trigger1 = Time = 50
value = 30110,4

[State 1057, woosh mario]
type = PlaySnd
trigger1 = Time = 90
value = 30110,0
volume = 300

[State 1057, OH YEAH voice]
type = PlaySnd
trigger1 = Time = 110
value = 30110,1

;===================================================
; Koopas
[Statedef 30112]
type    = S
movetype= A
physics = N
anim = 30113 + numhelper(30112) - 1
sprpriority = -3
velset = 8,0

[State 1061, End]
type = posset
trigger1 = !time
X = -300*ifelse(root,facing=1,1,-1)
Y = -170

[State 1061, floats]
type = posadd
trigger1= (gametime%3)=0
Y = 3*sin(time*pi/16)
persistent = 1

;===================================================
; Arale
[Statedef 30121]
type    = S
movetype= A
physics = N
anim = 30120
sprpriority = 6
velset = 7,0

[State 1061, End]
type = posset
trigger1 = !time
X = -300*ifelse(root,facing=1,1,-1)
Y = -170

[State 1057, woosh]
type = PlaySnd
trigger1 = Time = 10
value = 30110,0

[State 1057, NCHA voice]
type = PlaySnd
trigger1 = Time = 20
value = 30120,0

;===================================================
; Megaman/Rockman
[Statedef 30131]
type    = S
movetype= A
physics = N
anim = 30130 + random%2
sprpriority = 6
velset = 15,0

[State 1061, End]
type = posset
trigger1 = !time
X = -500*ifelse(root,facing=1,1,-1)
Y = -170

[state 1215, flames 1]
type = explod
triggerall = anim=30130
trigger1 = !time
anim = 30132
id = 30132
pos = 0,0
postype = P1
sprpriority = 5
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

[state 1215, flames 2.1]
type = explod
triggerall = anim=30131
trigger1 = !time
anim = 30132
id = 30132
pos = 0,2
postype = P1
sprpriority = 5
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

[state 1215, flames 2.1]
type = explod
triggerall = anim=30131
trigger1 = time=4
anim = 30132
id = 30132
pos = 1,16
postype = P1
sprpriority = 5
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

[State 1057, woosh]
type = PlaySnd
trigger1 = Time = 0
value = 30150,0

;===================================================
; Genocyde, flying
;(Diepod's original character, from his story "White Eyes")
[Statedef 30141]
type    = S
movetype= A
physics = N
anim = 30140
sprpriority = 6
velset = 5,0

[State 1061, End]
type = posset
trigger1 = !time
X = -300*ifelse(root,facing=1,1,-1)
Y = -170

[State 1061, floats]
type = posadd
trigger1 = time%3=0 
Y = 3*sin((time/9)*pi/4)
persistent = 1

[State 1057, geno woosh]
type = PlaySnd
trigger1 = Time = 10
value = 30140,0

;===================================================
; Viewtiful Joe
[Statedef 30151]
type    = S
movetype= A
physics = N
anim = 30150
sprpriority = -1
velset = 15,0

[State 1061, End]
type = posset
trigger1 = !time
X = -500*ifelse(root,facing=1,1,-1)
Y = -145

[State 1057, Joe woosh]
type = PlaySnd
trigger1 = Time = 0
value = 30150,0

[State 1057, Joe voice]
type = PlaySnd
trigger1 = Time = 0
value = 30150,1

;===================================================
; Mew + Mewtwo
[Statedef 30161]
type    = S
movetype= A
physics = N
anim = 30160
sprpriority = 6
velset = 15,0

[State 1061, End]
type = posset
trigger1 = !time
X = -500*ifelse(root,facing=1,1,-1)
Y = -170

[state 1215, Mew]
type = explod
trigger1 = !time
anim = 30161
id = 30161
pos = -200,20
postype = P1
sprpriority = 5
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

[State 1057, Mew woosh]
type = PlaySnd
trigger1 = Time = 0
value = 30160,0

[State 1057, Mew voice]
type = PlaySnd
trigger1 = Time = 20
value = 30160,1

;===================================================
; Scott + Nega Scott
[Statedef 30171]
type    = S
movetype= A
physics = N
anim = 30171
sprpriority = 6
velset = 12,0

[State 1061, End]
type = posset
trigger1 = !time
X = -470*ifelse(root,facing=1,1,-1)
Y = -170

[state 1215, Scott]
type = explod
trigger1 = !time
anim = 30170
id = 30171
pos = -200,0
postype = P1
sprpriority = 5
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

[State 1057, Scott woosh]
type = PlaySnd
trigger1 = Time = 0
value = 30110,0

[State 1057, Scott voice]
type = PlaySnd
trigger1 = Time = 0
value = 30170,0
volume = 300

;===================================================
; Kirby
[Statedef 30181]
type    = S
movetype= A
physics = N
anim = 30180
sprpriority = 6
velset = 12,0

[State 1061, End]
type = posset
trigger1 = !time
X = -470*ifelse(root,facing=1,1,-1)
Y = -170

[State 8000, Train]
type = AfterImage
trigger1 = !time
time = 500
FrameGap = 1
length = 5
palbright = 50,20,-50
palcontrast = 206,206,206
trans = add1
TimeGap = 2
ignorehitpause = 1

[State 1900, Stars]
type = Helper
trigger1 = Time%5 = 0
id = 30182
stateno = 30182
name = "kirby_stars"
pos = 0,0
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1057, Kirby woosh]
type = PlaySnd
trigger1 = Time = 20
value = 30180,0

[State 1057, Kirby voice]
type = PlaySnd
trigger1 = Time = 30
value = 30180,1

;-------------------------------
;Kirby stars
[Statedef 30182]
type    = S
movetype= A
physics = N
anim = 30181
sprpriority = 6
velset = 0,0

[State 1061, End]
type = bindtoparent
trigger1 = !time
;pos = -70 + random%40 , 10*random%6 - 10
pos = 0 , 5*(random%6) - 10

[State 1415, Hit Floor]
type = trans
trigger1 = time>30 && time<56
trans = addalpha
alpha = 256-10*(time-30), 10*(time-30)

[State 1003, DestroySelf]
type = DestroySelf
trigger1 = time=56

;===================================================
; Janemba
[Statedef 30191]
type    = S
movetype= A
physics = N
anim = 30190
sprpriority = -1
velset = 17,0

[State 1061, End]
type = posset
trigger1 = !time
X = -500*ifelse(root,facing=1,1,-1)
Y = -160

[state 1215, Aura]
type = explod
trigger1 = !time
anim = 30191
id = 30191
pos = 0,0
postype = P1
sprpriority = -2
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

[State 1057, woosh]
type = PlaySnd
trigger1 = Time = 0
value = 2700,2

[State 1057, Janemba laugh]
type = PlaySnd
trigger1 = Time = 0
value = 30190, random%2
volume = 300

[State 1057, stop]
type = Velset
trigger1 = Time = 50
x = 0

[State 1057, scale aura]
type = ModifyExplod
trigger1 = Time = [50,80]
ID = 30191
scale = 1, 1-(time-50.0)/30.0+ifelse(time<75 && time%2=0,0.03,-0.07)

[State 1057, scale aura]
type = RemoveExplod
trigger1 = Time = 81
ID = 30191

;===================================================
; Robot Unicorn
[Statedef 30201]
type    = S
movetype= A
physics = N
anim = 30200
sprpriority = -1
velset = 12,0

[State 1061, End]
type = posset
trigger1 = !time
X = -610*ifelse(root,facing=1,1,-1)
Y = -170

[state 1215, Aura]
type = explod
trigger1 = !time
anim = 30201
id = 30201
pos = 0,0
postype = P1
sprpriority = -2
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

[State 1057, unicorn woosh]
type = PlaySnd
trigger1 = Time = 0
value = 30200,0

[State 1057, unicorn theme]
type = PlaySnd
trigger1 = Time = 0
value = 30200,1
volume = 300

[State 1057, stop]
type = Velset
trigger1 = Time = 85
x = 0

[State 1057, scale aura]
type = ModifyExplod
trigger1 = Time = [80,110]
ID = 30201
scale = 1.5, 1-(time-80.0)/30.0+ifelse(time<105 && time%2=0,0.03,-0.05)

[State 1057, scale aura]
type = RemoveExplod
trigger1 = Time = 111
ID = 30201

;===================================================
; Robot Unicorn full screen flying happily
[Statedef 30206]
type    = S
movetype= A
physics = N
anim = 30200
sprpriority = 10
velset = 0,0

[State 1061, End]
type = posset
trigger1 = !time
X = 100*ifelse(root,facing=1,1,-1)
Y = -150  ;-145

[State 1061, floats]
type = posadd
trigger1 = time%4=0 
Y = 3*sin(time*pi/16)
persistent = 1

[state 1215, Aura]
type = explod
trigger1 = !time
anim = 30201
id = 30201
pos = 0,0
postype = P1
sprpriority = 9
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1
scale = 0.5,0.5

;===================================================
[StateDef 30207] ; Fade out effects for Robot Unicorn
type = A
movetype = I
physics = N
anim = 15999
velset = 0,0

[State 13300, Expl]
type = Explod
trigger1 = !Time
anim = 2771
ID = 2771
postype = left
pos = -30,-30
bindtime = -1
removetime = 100
pausemovetime = 100
ontop = 1
scale = 2,2

[State 13300, Fadeout]
type = PalFX
trigger1 = Time = [0,100]
time = 1
add = floor(256-2.56*(Time)),floor(256-2.56*(Time)),floor(256-2.56*(Time))

[State 13001, End]
type = DestroySelf
trigger1 = time=100

;===================================================
; Doraemon
[Statedef 30211]
type    = S
movetype= A
physics = N
anim = 30210
sprpriority = -1
velset = 0,0

[State 1061, End]
type = posset
trigger1 = !time
X = 90*ifelse(root,facing=1,1,-1)
Y = -60

[State 1057, appears]
type = PlaySnd
trigger1 = Time = 0
value = 30210,0

[State 1057, hello]
type = PlaySnd
trigger1 = animelemtime(13)=0
value = 30210,1

[State 1057, vanishes]
type = PlaySnd
trigger1 = animelemtime(20)=0
value = 30210,2

[State 1003, DestroySelf]
type = DestroySelf
trigger1 = !animtime

;===================================================
; Super Sonic
[Statedef 30221]
type    = S
movetype= A
physics = N
anim = 30221
sprpriority = -1
velset = 0,0

[State 1061, End]
type = posset
trigger1 = !time
X = 80*ifelse(root,facing=1,1,-1)
Y = -80

[state 1215, Aura start]
type = explod
trigger1 = !time
anim = 30222
id = 30222
pos = 0,0
postype = P1
sprpriority = -2
ownpal = 0
removetime = 5
persistent = 0
ignorehitpause = 0
bindtime = -1

[State 1061, floats]
type = posadd
trigger1= (time=[12,72]) && time%3=0 
Y = 2*sin(time*pi/2)
persistent = 1

[State 1057, moves a little]
type = velset
trigger1 = animelemtime(9)=0
x = 0.3
y = -0.3

[State 1057, stops]
type = velset
trigger1 = animelemtime(10)=0
x = 0
y = -0

[state 1215, Aura charge]
type = explod
trigger1 = animelemtime(10)=0
anim = 30223
id = 30223
pos = 0,0
postype = P1
sprpriority = -2
ownpal = 0
removetime = 35
persistent = 0
ignorehitpause = 0
bindtime = -1

[State 1057, Aura SFX]
type = PlaySnd
trigger1 = animelemtime(10)=0
value = 8,1

[State 1057, go go go]
type = velset
trigger1 = animelemtime(11)>=0
x = 60

[state 1215, Aura dash]
type = explod
trigger1 = animelemtime(11)=0
anim = 30224
id = 30224
pos = 0,-50
postype = P1
sprpriority = -2
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

[State 1057, speed SFX]
type = PlaySnd
trigger1 = !time
trigger2 = animelemtime(11)=0
value = 2700,1

[State 1057, "haa" appears]
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = 30220,0

[State 1057, alright]
type = PlaySnd
trigger1 = animelemtime(9)=0
value = 30220,1

[State 1057, vanishes off screen]
type = PlaySnd
trigger1 = animelemtime(10)=0
value = 30220,2

[State 1003, DestroySelf]
type = DestroySelf
trigger1 = !animtime

;===================================================
; Axe Cop
[Statedef 30231]
type    = S
movetype= A
physics = N
anim = 30231
sprpriority = 2
velset = 5,0

[State 1061, End]
type = posset
trigger1 = !time
X = -300*ifelse(root,facing=1,1,-1)
Y = -70

[State 1000, shake]
type = EnvShake
trigger1 = !(time%4)
time = 4
freq = 90
ampl = ifelse(time<75,1+0.04*time,ifelse(time>150,4-0.04*(time-150),4))

[state 1215, Flash]
type = explod
trigger1 = !time
anim = 30232
id = 30232
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1
scale = 0.9,0.9

[state 1215, guns]
type = explod
trigger1 = !time
anim = 30233
id = 30233
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1
scale = 0.9,0.9

[state 1215, guns flash]
type = explod
trigger1 = !time
anim = 30234
id = 30234
pos = 0,0
postype = P1
sprpriority = 4
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1
scale = 0.9,0.9

[state 1215, tie]
type = explod
trigger1 = !time
anim = 30235
id = 30235
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1
scale = 0.9,0.9

[State 1000, Helper]
type = Helper
trigger1 = (time=[10,70]) && time%5=0 && numhelper(30237)<50
helpertype = Normal
name = "GlassEffect"
id = 30236
pos = ceil(140-random/11.0),20+ceil(random/50)
postype = p1
facing = 1
stateno = 30236
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 1000, Helper]
type = Helper
trigger1 = (time=[10,70]) && time%5=0 && numhelper(30237)<50
helpertype = Normal
name = "GlassEffect"
id = 30236
pos = ceil(160-random/11.0),20+ceil(random/50)
postype = p1
facing = 1
stateno = 30236
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 1057, var]
type = Varset
trigger1 = abs(rootdist X) < 200
var(1) = 1

[State 1057, hits floor snd]
type = PlaySnd
trigger1 = Time>=20 && time%3=0
value = 30230,1

[State 1057, rotate snd]
type = PlaySnd
trigger1 = Time = 0
value = 30230,0
loop = 1
volume = 200 ;ifelse(time<50,-200 + 4*time, 0)

[State 1057, shooting]
type = PlaySnd
trigger1 = Time%5=0
value = 30231,random%3
channel = 2

[State 1057, dino roar]
type = PlaySnd
trigger1 = !time
value = 30232,0

[State 1057, axe cope yeah]
type = PlaySnd
trigger1 = time = 30
value = 30233,0

;-------------------------------
; AC - Bullet Generator
[Statedef 30236]
type = A
movetype = I
physics = N
anim = 15999

[State 1003, Helper]
type = Helper
trigger1 = !time
helpertype = Normal
name = "BulletEffect"
id = 30237
pos = 0,0
postype = p1
facing = 1
stateno = 30237
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1

[State 1003, DestroySelf]
type = DestroySelf
trigger1 = time=2
;-----------
[Statedef 30237]
type = A
movetype = I
physics = N
anim = 30236
velset = 3-0.5*(random%13) , -4-0.5*(random%8)	;at various vels
sprpriority = 5

[State 1005, VarRandom]
type = VarSet
trigger1 = !time
fvar(20) = random%2

[State 1004, assert]
type = angledraw
trigger1 = 1
value = ifelse(fvar(20)=1,10*time,-10*time)

[State 1004, assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1405, No hits]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1416, Gravity]
type = Gravity
trigger1 = 1

[State 1415, Hit Floor]
type = ChangeState
trigger1 = Pos Y >= 0
value = 30238
;-----------
;Touches the floor
[Statedef 30238]
type = A
movetype = A
physics = N
velset = ifelse(vel X>0,1,-1),  -2-(random%4)
sprpriority = 5

[State 1011, Override]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1004, assert]
type = angledraw
trigger1 = 1
value = ifelse(vel X>0,10*time,-10*time)

[State 1416, Reset Pos]
type = PosSet
trigger1 = !Time
Y = 0

[State 1406, Gravity]
type = Gravity
trigger1 = 1

[State 1415, Hit Floor]
type = ChangeState
trigger1 = (Pos Y >= 0) && time>1
value = 30239
;-----------
;Touches the floor
[Statedef 30239]
type = A
movetype = A
physics = N
sprpriority = 3

[State 1057, hits floor snd]
type = null ;PlaySnd
trigger1 = Time = 0
value = 30230,1

[State 1011, loop var]
type = Varadd
trigger1 = !time
var(33) = 1

[State 1011, time var]
type = Varadd
trigger1 = var(33)<3
var(12) = 1

[State 1011, Override]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1011, vels]
type = Velset
trigger1 = !time && var(33)<3
Y = -3-(random%3)+var(33)

[State 1011, vels]
type = Velmul
trigger1 = 1
x = 0.98

[State 1004, assert]
type = angledraw
trigger1 = 1
value = ifelse(vel X>0,-5*var(12),5*var(12))

[State 1416, Reset Pos]
type = PosSet
trigger1 = !Time
Y = 0

[State 1406, Gravity]
type = Gravity
trigger1 = 1

[State 1406, Stop]
type = PosFreeze
trigger1 = Var(33)=3

[State 1415, Hit Floor]
type = ChangeState
trigger1 = (Pos Y >= 0) && time>1 && var(33)<3
value = 30239

[State 1415, Hit Floor]
type = null ;trans
trigger1 = time>50 && time<76
trans = addalpha
alpha = 256-10*(time-50), 10*(time-50)

[State 1003, DestroySelf]
type = null ;DestroySelf
trigger1 = time=76

;===================================================
; TaoPaiPai
[Statedef 30241]
type    = S
movetype= A
physics = N
anim = 30240
sprpriority = -2
velset = 12,0

[State 1061, End]
type = posset
trigger1 = !time
X = -470*ifelse(root,facing=1,1,-1)
Y = -150

[State 1057, woosh]
type = PlaySnd
trigger1 = Time = 0
value = 30110,0

[State 1057, Tao laugh]
type = PlaySnd
trigger1 = Time = 20
value = 30240,0

;===================================================
; Frog (Chrono Trigger)
[Statedef 30251]
type    = S
movetype= A
physics = N
anim = 30250
sprpriority = -2
velset = 12,0

[State 1061, End]
type = posset
trigger1 = !time
X = -470*ifelse(root,facing=1,1,-1)
Y = -150

[State 1057, woosh]
type = PlaySnd
trigger1 = Time = 0
value = 30110,0

[State 1057, frog croak]
type = PlaySnd
trigger1 = Time = 30
value = 30250,0

;===================================================
; Tetsuo (AKIRA)
[Statedef 30261]
type    = S
movetype= A
physics = N
anim = 30260
sprpriority = 6
velset = 15,0

[State 1061, End]
type = posset
trigger1 = !time
X = -500*ifelse(root,facing=1,1,-1)
Y = -170

[State 1057, woosh]
type = PlaySnd
trigger1 = Time = 0
value = 30110,0

[State 1057, Tetsuo laugh]
type = PlaySnd
trigger1 = Time = 0
value = 30260,0

;===================================================
; Suppaman
[Statedef 30271]
type    = S
movetype= A
physics = N
anim = 30271
sprpriority = 4
velset = 7,0

[State 1061, End]
type = posset
trigger1 = !time
X = -300*ifelse(root,facing=1,1,-1)
Y = 0

[State 1057, var]
type = Varset
trigger1 = abs(rootdist X) < 20
var(1) = 1

[State 1057, suppaman rolls]
type = PlaySnd
trigger1 = Time = 20
value = 30270,0

[State 1057, suppaman voice]
type = PlaySnd
trigger1 = Time = 10
value = 30270,1+random%2

;===================================================
; Zero on bike
[Statedef 30281]
type    = S
movetype= A
physics = N
anim = 30280
sprpriority = 6
velset = 15,0

[State 1061, End]
type = posset
trigger1 = !time
X = -500*ifelse(root,facing=1,1,-1)
Y = -70

[State 1057, woosh]
type = PlaySnd
trigger1 = Time = 0
value = 30280,0

[State 1057, var]
type = Varset
trigger1 = abs(rootdist X) < 15
var(1) = 1

[State 1057, voice]
type = PlaySnd
trigger1 = Time = 20
value = 30280, 1+random%2

;===================================================
; Super Cow
[Statedef 30291]
type    = S
movetype= A
physics = N
anim = 30290
sprpriority = -3
velset = 12,0

[State 1061, End]
type = posset
trigger1 = !time
X = -470*ifelse(root,facing=1,1,-1)
Y = -150

[State 1057, woosh]
type = PlaySnd
trigger1 = Time = 0
value = 30110,0

[State 1057, super cow moooo]
type = PlaySnd
trigger1 = Time = 0
value = 30290,0

;===================================================
; Luffy on Cloud
[Statedef 30301]
type    = S
movetype= A
physics = N
anim = 30300
sprpriority = -3
velset = 15,0

[State 1061, End]
type = posset
trigger1 = !time
X = -500*ifelse(root,facing=1,1,-1)
Y = -120

[State 1057, kinton woosh]
type = PlaySnd
trigger1 = Time = 0
value = 30300,0

[state 1215, kinton]
type = explod
trigger1 = !time
anim = 30301
id = 30301
pos = 0,0
postype = P1
sprpriority = -2
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

;===================================================
; Tony Tony Chopper
[Statedef 30302]
type    = S
movetype= A
physics = N
anim = 30302
sprpriority = -3
velset = 13,0

[State 1061, End]
type = posset
trigger1 = !time
X = -1000*ifelse(root,facing=1,1,-1)
Y = -160

[State 1057, tony chopper voice]
type = PlaySnd
trigger1 = Time = 30
value = 30302,0

;===================================================
; Powerpuff Girls
[Statedef 30311]
type    = S
movetype= A
physics = N
anim = 30310
sprpriority = -3
velset = 15,0

[State 1061, End]
type = posset
trigger1 = !time
X = -400*ifelse(root,facing=1,1,-1)
Y = -160

[state 1215, puff2]
type = explod
trigger1 = !time
anim = 30311
id = 30311
pos = -60,-33
postype = P1
sprpriority = -3
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

[state 1215, puff3]
type = explod
trigger1 = !time
anim = 30312
id = 30312
pos = -30,33
postype = P1
sprpriority = -3
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

[state 1215, tail puff1]
type = explod
trigger1 = !time
anim = 30313
id = 30313
pos = 0,0
postype = P1
sprpriority = -5
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

[state 1215, tail puff2]
type = explod
trigger1 = !time
anim = 30314
id = 30313
pos = -60,-33
postype = P1
sprpriority = -4
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

[state 1215, tail puff3]
type = explod
trigger1 = !time
anim = 30315
id = 30313
pos = -30,33
postype = P1
sprpriority = -4
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1

[State 1057, scale aura]
type = ModifyExplod
trigger1 = Time = [50,120]
ID = 30313
scale = 1, 1-(time-50.0)/30.0+ifelse(time<85 && time%2=0,0.03,-0.05)

[State 1057, puff woosh]
type = PlaySnd
trigger1 = Time = 10
value = 30310,0

;===================================================
; Bec Noir
[Statedef 30321]
type    = S
movetype= A
physics = N
anim = 30320
sprpriority = -2
velset = 9,0

[State 1061, End]
type = posset
trigger1 = !time
X = -400*ifelse(root,facing=1,1,-1)
Y = -150

[State 1057, woosh noir]
type = PlaySnd
trigger1 = Time = 0
value = 30320,0

;===================================================
; Broly
[Statedef 30332]
type    = S
movetype= A
physics = N
anim = 30332
sprpriority = 5
velset = 18,0

[State 1061, End]
type = posset
trigger1 = !time
X = -800*ifelse(root,facing=1,1,-1)
Y = -100

[state 1215, Smoke FX]
type = null ;explod
trigger1 = time%15 = 0
anim = 1206+(root,var(2)=0)  ;8060
id = 1206
pos = -160,95
bindtime = -1
sprpriority = 6
ownpal = 1
removetime = -2
persistent = 1
ignorehitpause = 1

[state 1215, Smoke FX]
type = null ;explod
trigger1 = time%15 = 7
anim = 1206+(root,var(2)=0)  ;8060
id = 1206
pos = -80,95
bindtime = -1
sprpriority = 6
ownpal = 1
removetime = -2
persistent = 1
ignorehitpause = 1

[State 1057, var]
type = Varset
trigger1 = abs(rootdist X) < 600
var(1) = 1

[State 1057, var]
type = Varset
trigger1 = abs(rootdist X) < 200
var(1) = 2

[State 1057, playsnd]
type = PlaySnd
trigger1 = var(1) = 1
value = 30330,1+(random%2)
persistent = 0

[state 1215, hand open front]
type = explod
trigger1 = !time
anim = 30333
id = 30333
pos = 0,0
postype = P1
sprpriority = 5
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1
shadow = -1,0,0

[state 1215, hand open back]
type = explod
trigger1 = !time
anim = 30334
id = 30333
pos = 0,0
postype = P1
sprpriority = -5
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1
shadow = -1,0,0

[State 1057, change speed]
type = Velset
trigger1 = var(1)=2
X = 2

[State 1057, bind]
type = bindtoroot
trigger1 = var(1)=2
pos = 140,-65

[State 1057, timer]
type = varadd
trigger1 = var(1)=2
var(2) = 1

[state 1215, remove hand open]
type = removeexplod
trigger1 = var(2) = 15
ID = 30333

[state 1215, hand closed]
type = explod
trigger1 = var(2) = 15
anim = 30335
pos = 0,0
postype = P1
sprpriority = 5
ownpal = 0
removetime = -1
persistent = 0
ignorehitpause = 0
bindtime = -1
shadow = -1,0,0

;===================================================
; Megaman X
[Statedef 30341]
type    = S
movetype= A
physics = N
anim = 15999
sprpriority = 5

[State 1061, pos]
type = posset
trigger1 = !time
X = 80*ifelse(root,facing=1,1,-1)
Y = -130

[State 1057, teleport]
type = PlaySnd
trigger1 = time=10
value = 30340,0

[State 13300, Teleport Beam]
type = Explod
trigger1 = time=10
anim = 30347
ID = 30347
postype = p1
pos = 10,-30
removetime = 10
pausemovetime = -1
sprpriority = 7
scale = 1,1
vel = 0,3

[State 13300, Teleport Beam scale]
type = ModifyExplod
trigger1= NumExplod(30347)
ID = 30347
scale = 1,1-0.1*(time-10)

[State 13300, Teleport Ball]
type = Explod
trigger1 = time=16
anim = 30346
ID = 30346
postype = p1
pos = 10,0
bindtime = -1
removetime = 4
pausemovetime = -1
sprpriority = 6
ownpal = 1

[State 1061, Anim normal]
type = ChangeAnim
trigger1 = time=20
Value = 30340

[State 1057, grunt]
type = PlaySnd
;trigger1 = anim = 30342 && animelemtime(1)=0
trigger1 = time=20
value = 30340,2

[State 13310, Fadeout black]
type = PalFX
trigger1 = Time = [20,35]
time = 1
add = -ceil(255-(Time-20)*17),-ceil(255-(Time-20)*17),-ceil(255-(Time-20)*17)

[State 13300, Appear FX]
type = Explod
trigger1 = time=20
anim = 30344
ID = 30344
postype = p1
pos = 10,0
bindtime = -1
removetime = -2
pausemovetime = -1
sprpriority = 7
ownpal = 1

[State 1061, Anim armor]
type = ChangeAnim
trigger1 = anim = 30340 && animelemtime(1)=30
Value = 30342

[State 1057, transform]
type = PlaySnd
trigger1 = anim = 30342 && animelemtime(1)=0
value = 30340,1

[State 13300, transforms FX]
type = Explod
trigger1 = anim = 30342 && animelemtime(1)=0
anim = 30345
ID = 30345
postype = p1
pos = 10,0
bindtime = -1
removetime = -2
pausemovetime = -1
sprpriority = 7

[State 13300, white flash]
type = Explod
trigger1 = anim = 30342 && animelemtime(1)=0
anim = 30343
ID = 30343
postype = p1
pos = 0,0
bindtime = -1
removetime = -2
pausemovetime = -1
sprpriority = 6

[State 1061, disapears]
type = ChangeAnim
trigger1 = anim = 30342 && animelemtime(1)=30
Value = 15999

[State 13300, Teleport Ball]
type = Explod
trigger1 = anim=15999 && time>40 && animelemtime(1)=0
anim = 30346
ID = 30346
postype = p1
pos = 10,0
bindtime = -1
removetime = 4
pausemovetime = -1
sprpriority = 6

[State 1057, fly away]
type = PlaySnd
trigger1 = anim=15999 && time>40 && animelemtime(1)=0
value = 30340,3

[State 13300, Teleport Beam scale timer]
type = Varset
trigger1 = anim=15999 && time>40 && animelemtime(1)=4
var(1) = time

[State 13300, Teleport Beam]
type = Explod
trigger1 = anim=15999 && time>40 && animelemtime(1)=4
anim = 30348
ID = 30348
postype = p1
pos = 10,0
removetime = 4
pausemovetime = -1
sprpriority = 7
scale = 0.2,1

[State 13300, Teleport Beam scale]
type = ModifyExplod
trigger1= NumExplod(30348)
ID = 30348
scale = 0.2+0.2*(time-var(1)),1
vel = 2,0



;==========================================================
; Justice GAUGE HELPER P1
[Statedef 2750]
physics = N
velset = 0, 0
sprpriority = 7
anim = 15999

[State 3033, Assert]
type = assertspecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

;2750 = frame
;2751 = full justice (orange)
;27510 = full buffer (blue)
;2752 = grey
;27520 = grey kanji
;2753 = yellow kanji
;2754 = orange kanji
;2755 = red kanji
;2756, 0-5 = flames
;2757,2758,2759 = fades

[State -2, Explod];Flames
type = Explod
trigger1 = !NumExplod(2756) && (root,var(49))>0
trigger1 = (root,var(50))>=2100
anim = 2756
pos = 76+(root,var(45)),228-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 4
id = 2756
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999


[State -2, Explod];full bar blue (buffer)
type = Explod
trigger1 = !NumExplod(27510) && (root,var(49))>0
anim = 27510
pos = 76+(root,var(45)),230-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 5
id = 27510
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Scale full blue bar (buffer)
type = ModifyExplod
trigger1 = NumExplod(27510) && (root,var(49))>0
scale = 0.5*(root,var(49))/1000.0,0.5
id = 27510

[State -2, Explod];Empty bar justice (orange)
type = Explod
trigger1 = !NumExplod(2751) && (root,var(49))>0
anim = 2751
pos = 76+(root,var(45)),230-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 5
id = 2751
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Scale full blue bar 
type = ModifyExplod
trigger1 = NumExplod(2751) && (root,var(49))>0
;scale = 0.5*(root,var(49))/1000.0,0.5
scale = 0.5*ifelse(root,var(50)<700, (root,var(50))/700.0, ifelse(root,var(50)>=1400, (root,var(50)-1400)/700.0, (root,var(50)-700)/700.0)),0.5
id = 2751
ignorehitpause = 1

[State -2, Explod];Frame
type = Explod
trigger1 = !NumExplod(2750) && (root,var(49))>0
anim = 2750
pos = 76+(root,var(45)),230-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 5
id = 2750
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Grey Kanji
type = Explod
trigger1 = !NumExplod(27520) && (root,var(49))>0
anim = 27520
pos = 76+(root,var(45)),228-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 10
id = 27520
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Yellow Kanji
type = Explod
trigger1 = !NumExplod(2753) && (root,var(49))>0
trigger1 = (root,var(50))>=700 && (root,var(50))<1400
anim = 2753
pos = 76+(root,var(45)),228-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 10
id = 2753
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Orange Kanji
type = Explod
trigger1 = !NumExplod(2754) && (root,var(49))>0
trigger1 = (root,var(50))>=1400 && (root,var(50))<2100
anim = 2754
pos = 76+(root,var(45)),228-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 10
id = 2754
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Red Kanji
type = Explod
trigger1 = !NumExplod(2755) && (root,var(49))>0
trigger1 = (root,var(50))>=2100
anim = 2755
pos = 76+(root,var(45)),228-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 10
id = 2755
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999


;Hope Gauge
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0
id = 2750
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0
id = 2751
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0
id = 27510
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0
id = 2752
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0 || (root,var(50))>=700
id = 27520
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0 || (root,var(50))<700 || (root,var(50))>=1400
id = 2753
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0 || (root,var(50))<1400 || (root,var(50))>=2100
id = 2754
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0 || (root,var(50))<2100
id = 2755
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0 || (root,var(50))<2100
id = 2756

[State -2, Explod];Grey bar fades
type = Null;Explod
trigger1 = !NumExplod(2758) && (root,var(49))<=0
anim = 2758
pos = 76+(root,var(45)),228-(root,var(46))
postype = left
removetime = 14
supermove = 1
scale = 0.5,0.5
sprpriority = 0
id = 2758
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State -2, Explod];Justice Gauge fades
type = Explod
trigger1 = !NumExplod(2759) && (root,var(49))<=0
anim = 2759
pos = 76+(root,var(45)),228-(root,var(46))
postype = left
removetime = 14
supermove = 1
scale = 0.5,0.5
sprpriority = 7
id = 2759
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State -2, Explod];Yellow Kanji fades
type = Explod
trigger1 = !NumExplod(2757) && (root,var(49))<=0
anim = 2757
pos = 76+(root,var(45)),228-(root,var(46))
postype = left
removetime = 14
supermove = 1
scale = 0.5,0.5
sprpriority = 8
id = 2757
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 3033, End]
type = destroyself
trigger1 = (root,var(49))<=0 && !numexplod(2759)

;==========================================================
; Justice GAUGE HELPER P2
[Statedef 2760]
physics = N
velset = 0, 0
sprpriority = 7
anim = 15999

[State 3033, Assert]
type = assertspecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

;2760 = frame
;2761 = full blue
;27610 = full orange
;2762 = grey
;27620 = black kanji
;2753 = yellow kanji
;2754 = orange kanji
;2755 = red kanji
;2756, 0-5 = flames
;2767,2768,2769 = fades

[State -2, Explod];Flames
type = Explod
trigger1 = !NumExplod(2756) && (root,var(49))>0
trigger1 = (root,var(50))>=2100
anim = 2756
pos = 221-(root,var(45)),228-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 4
id = 2756
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];full bar blue (buffer)
type = Explod
trigger1 = !NumExplod(27610) && (root,var(49))>0
anim = 27610
pos = 243-(root,var(45)),230-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 5
id = 27610
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Scale full bar
type = ModifyExplod
trigger1 = NumExplod(27610) && (root,var(49))>0
scale = 0.5*(root,var(49))/1000.0,0.5
id = 27610
ignorehitpause = 1

[State -2, Explod];Empty bar justice (orange)
type = Explod
trigger1 = !NumExplod(2761) && (root,var(49))>0
anim = 2761
pos = 243-(root,var(45)),230-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 5
id = 2761
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Scale full bar orange
type = ModifyExplod
trigger1 = NumExplod(2761) && (root,var(49))>0
scale = 0.5*ifelse(root,var(50)<700, (root,var(50))/700.0, ifelse(root,var(50)>=1400, (root,var(50)-1400)/700.0, (root,var(50)-700)/700.0)),0.5
id = 2761
ignorehitpause = 1

[State -2, Explod];Frame
type = Explod
trigger1 = !NumExplod(2760) && (root,var(49))>0
anim = 2760
pos = 242-(root,var(45)),230-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 5
id = 2760
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Grey Kanji
type = Explod
trigger1 = !NumExplod(27520) && (root,var(49))>0
anim = 27520
pos = 221-(root,var(45)),228-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 10
id = 27520
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Yellow Kanji
type = Explod
trigger1 = !NumExplod(2753) && (root,var(49))>0
trigger1 = (root,var(50))>=700 && (root,var(50))<1400
anim = 2753
pos = 221-(root,var(45)),228-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 10
id = 2753
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Orange Kanji
type = Explod
trigger1 = !NumExplod(2754) && (root,var(49))>0
trigger1 = (root,var(50))>=1400 && (root,var(50))<2100
anim = 2754
pos = 221-(root,var(45)),228-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 10
id = 2754
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Red Kanji
type = Explod
trigger1 = !NumExplod(2755) && (root,var(49))>0
trigger1 = (root,var(50))>=2100
anim = 2755
pos = 221-(root,var(45)),228-(root,var(46))
postype = left
removetime = -1
supermove = 1
scale = 0.5,0.5
sprpriority = 10
id = 2755
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

;Hope Gauge
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0
id = 2760
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0
id = 2761
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0
id = 27610
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0 || (root,var(50))>=700
id = 27520
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0
id = 2762
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0 || (root,var(50))<700 || (root,var(50))>=1400
id = 2753
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0 || (root,var(50))<1400 || (root,var(50))>=2100
id = 2754
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0 || (root,var(50))<2100
id = 2755
[state 17100,remove FX]
type = removeexplod
trigger1 = (root,var(49))<=0 || (root,var(50))<2100
id = 2756

[State -2, Explod];Grey bar fades
type = Explod
trigger1 = !NumExplod(2768) && (root,var(49))<=0
anim = 2768
pos = 242-(root,var(45)),228-(root,var(46))
postype = left
removetime = 14
supermove = 1
scale = 0.5,0.5
sprpriority = 0
id = 2768
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State -2, Explod];Justice Gauge fades
type = Explod
trigger1 = !NumExplod(2769) && (root,var(49))<=0
anim = 2769
pos = 242-(root,var(45)),228-(root,var(46))
postype = left
removetime = 14
supermove = 1
scale = 0.5,0.5
sprpriority = 7
id = 2769
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State -2, Explod];Yellow Kanji fades
type = Explod
trigger1 = !NumExplod(2767) && (root,var(49))<=0
anim = 2767
pos = 221-(root,var(45)),228-(root,var(46))
postype = left
removetime = 14
supermove = 1
scale = 0.5,0.5
sprpriority = 8
id = 2767
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 3033, End]
type = destroyself
trigger1 = (root,var(49))<=0 && !numexplod(2769)

;------------------------------------------------
; Horizontal Lines BG - Angry Kmh
[Statedef 2902]
type = A
movetype = A
physics = N
anim = 15999
velset = 0,0

[State 2260, push]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, bg]
type = assertspecial
trigger1 = 1
flag = noFG
flag2 = noBG
flag3 = nobardisplay
ignorehitpause = 1

[State 2260, flash]
type = PalFX
trigger1 = TimeMod = 4,0
trigger1 = 1
time = 1
invertall = 1
ignorehitpause = 0

[state 3250, speedlines]
type = explod
trigger1 = time = 0
anim = 2923
ID = 2923
postype = back
pos = 0,10
bindtime = -1
supermove = 0
pausemovetime = 390
sprpriority = 1
ontop = 0
ownpal = 1
ignorehitpause = 1
removetime = 390

[state 3250, speedlines2]
type = explod
trigger1 = time = 0
anim = 2923
ID = 2923
postype = back
pos = 0,240
bindtime = -1
supermove = 0
pausemovetime = 390
sprpriority = 1
ontop = 0
ownpal = 1
ignorehitpause = 1
removetime = 390

[State 2260, destroy]
type = DestroySelf
trigger1 = time = 390

;===================================================
; Ultimate Kamehameha Beam hits
[Statedef 2903]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5
anim = 2903

[State 1061, Bind]
type = bindtoroot
trigger1 = 1
pos = 30, -80
ignorehitpause = 1

[State 8000, Assert]
type=assertspecial
trigger1 = 1
flag=noshadow
ignorehitpause = 1

[State 1061, Transparency]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 3005, hit]
type = hitdef
trigger1 = !time
attr = S,HP
hitflag = MAF
guardflag = MA
priority = 7,Hit
damage = 0,0
getpower = 0,0
givepower = 20,20
pausetime = 2,6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = Low
sparkno = s7030
sparkxy = -30,-35
hitsound   = s1000,0
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= ifelse(var(2)<50, -2, -10), ifelse(var(2)<50, 0, -3)
guard.velocity = -9
air.velocity = -5.5,-3.9
airguard.velocity = -5.5, -1.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = -1
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5
;p1stateno = 2905
;p2stateno = 2906
id = 2903
kill = 0
getpower = 0,0

[State 0, TargetState]  
type = TargetState
trigger1 = Numtarget(2903)
trigger1 = movehit = 1
value = 2906
ID = 2903
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = MoveHit=1
value = 2905
ignorehitpause = 1
persistent = 0

[State 250, 1]
type = PlaySnd
trigger1 = movehit
value = 1000,0

;[State 1315, Sparks]
;type=explod
;trigger1= movehit && numtarget
;trigger1= (target,movetype=H) && !(target,time)
;anim=7030
;sprpriority=6
;postype=p2
;pos=(target,const(size.ground.front)-10)+(random%20), -floor(p2dist y)+(random%20)-10
;removetime=-2
;ownpal=1
;facing=-1
;ignorehitpause=1
;pausemovetime=100
;supermovetime=100

;===================================================
; Ultimate Kamehameha Beam moves
[Statedef 2905]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5

[State 1061, Bind]
type = bindtoroot
trigger1 = time < 180
pos = 30, -80
ignorehitpause = 1

[State 8000, Assert]
type=assertspecial
trigger1 = 1
flag=noshadow
ignorehitpause = 1

[State 0, out of screen]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1061, Transparency]
type = Trans
trigger1 = root,var(2)=0
trans = none
ignorehitpause = 1

[State 3005, anim]
type = changeanim
trigger1 = !time
value = 2903
elem = 2

[State 1315, beam tip]
type = explod
trigger1 = !time && !numexplod(2905)
anim = 2905
ID = 2905
sprpriority = 6
postype = p1
pos = 750,0
removetime = -1
ownpal = 1
ignorehitpause=1
pausemovetime=100
supermovetime=100
bindtime = -1

[State -2, AngleDraw]
type = ModifyExplod
trigger1 = time < 180
ID = 2905
scale = ifelse(time<100,1,root,fvar(38)), root,fvar(38)

[State -2, AngleDraw]
type = AngleDraw
trigger1 = time < 180
value = 0
scale = root,fvar(38), root,fvar(38)

[State -2, AngleDraw]
type = AngleDraw
trigger1 = time >= 180
value = 0
scale = root,fvar(38), 0.5

[State 800, grow sound]
type = PlaySnd
trigger1 = time=180
value = 2903,0
volume = 300

[State 1305, Scale Beam Explod]
type = ModifyExplod
trigger1 = time = [180,183]
scale = root,fvar(38)+0.3*(time-180), root,fvar(38)+0.3*(time-180)
ID = 2905

[State 1305, Scale Beam Explod]
type = ModifyExplod
trigger1 = time >= 183
scale = 3, 1.5+0.02*(time-183)
ID = 2905

[State 1305, P2 pushed sound]
type = PlaySnd
trigger1 = time = 65
value = 2905,0
volume = 300

[State 1305, move]
type = Velset
trigger1 = time = 180
X = 15
[State 1305, move]
type = Velset
trigger1 = time = 230
X = 0

[State 13300, white screen fade]
type = Explod
trigger1 = Time = 300
anim = 2907
ID = 2907
postype = left
pos = 0,-50
bindtime = -1
removetime = -2
ownpal = 1
ontop = 1
sprpriority = 9
scale = 2,3
ignorehitpause = 1
facing = 1

[State 1305, Remove Beam Explod]
type = RemoveExplod
trigger1 = (root,stateno=2911) || (root,stateno=2912)
ID = 2905

[State 1305, End]
type = DestroySelf
trigger1 = (root,stateno=2911) || (root,stateno=2912)

;===================================================
;GENKIDAMA CHARGE FX BALL
[Statedef 2931]
type = A
movetype = I
physics = N
anim = 15999

[State 1005, VarRandom]
type = VarSet
trigger1 = !time
fvar(20) = 0.01*(random%10)

[State 1003, Helper]
type = Helper
trigger1 = !time
helpertype = Normal
name = "PerseEffect"
id = 2932
;pos = ((random%240)-120),((random%240)-120)
pos = ceil(50-random/10),-ceil(random/10)
postype = p1
facing = 1
stateno = 2932
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
size.xscale = .1 - (.1*fvar(20))
size.yscale = .1 - (.1*fvar(20))

[State 1003, DestroySelf]
type = DestroySelf
trigger1 = time=2

;-----------------------------
[Statedef 2932]
type = A
movetype = I
physics = N
anim = 2932   ;2505
sprpriority = 4
velset = (random%9)-4,-1-(random%3)

[State 1004, assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1004, vel]
type = veladd
trigger1 = time>10
x = (rootdist x-14)/120.0
y = (rootdist y-190)/150.0

[State 41, Train]
type = AfterImage
trigger1 = !Time
time = 25
timegap = 1
framegap = 1
length = 8
palbright = 0,0,0
paladd = 0,0,50
palmul = .9,.9,.9
palcontrast = 120,120,120
palpostbright = 0,0,0
trans = add1

[state 1004, effect]
type = palfx
trigger1 = root,anim != 2935
trigger2 = (RootDist X <= 70) && (RootDist Y <= 70)
time = 1
add = ceil(100-(Time)*10),ceil(100-(Time)*10),ceil(100-(Time)*10)

[state 1004, effect]
type = palfx
trigger1 = (root,anim = 15999)
time = 1
add = -255,-255,-255

[State 1004, DestroySelf]
type = DestroySelf
trigger1 = rootdist y >= 180
trigger2 = time > 300

;------------------------------------------------
; GENKIDAMA HELPER
[Statedef 2941]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5
anim = 2936

[state 1215, Smoke FX]
type = explod
trigger1 = time = 40
anim = 8060
id = 8060
pos = -80,80
bindtime = -1
sprpriority = 6
ownpal = 1
removetime = -1
persistent = 0
ignorehitpause = 1

[state 1215, Smoke FX]
type = explod
trigger1 = time = 195
anim = 8061
id = 8060
pos = -80,80
bindtime = 1
sprpriority = 6
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1

[State 1061, Velocity]
type = VelSet
trigger1 = !time
x = 8  ;12
y = 3

[State 1061, Velocity]
type = VelSet
trigger1 = time=40
x = -5
y = 0

[State 1061, Velocity]
type = VelSet
trigger1 = pos X <= 0 && time>40 && facing=1
trigger2 = pos X >= 0 && time>40 && facing=-1
x = 0

[State 2260, save position]
type = parentvarset
trigger1 = vel X = 0
var(28) = ceil(pos X)

[State 2260, save position]
type = parentvarset
trigger1 = vel X = 0
var(29) = ceil(pos Y)

[State 2260, destroy]
type = RemoveExplod
trigger1 = root,stateno=2950
ID = 8060

[State 2260, destroy]
type = DestroySelf
trigger1 = root,stateno=2950

;------------------------------------------------
; Horizontal Lines BG Genkidama
[Statedef 2942]
type = A
movetype = A
physics = N
anim = 15999
velset = 0,0

[State 2260, push]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, bg]
type = assertspecial
trigger1 = 1
flag = noFG
flag2 = noBG
flag3 = nobardisplay
ignorehitpause = 1

[State 2260, flash]
type = PalFX
trigger1 = TimeMod = 4,0
trigger1 = 1
time = 1
invertall = 1
ignorehitpause = 0

[state 3250, speedlines]
type = explod
trigger1 = time = 0
anim = 2923
ID = 2923
postype = back
pos = 0,10
bindtime = -1
supermove = 0
sprpriority = 1
ontop = 0
ownpal = 1
ignorehitpause = 1
removetime = -1

[state 3250, speedlines2]
type = explod
trigger1 = time = 0
anim = 2923
ID = 2923
postype = back
pos = 0,240
bindtime = -1
supermove = 0
sprpriority = 1
ontop = 0
ownpal = 1
ignorehitpause = 1
removetime = -1

[State 2260, destroy]
type = RemoveExplod
trigger1 = root,stateno=2950
trigger2 = root,stateno=2911
ID = 2923

[State 2260, destroy]
type = DestroySelf
trigger1 = root,stateno=2950
trigger2 = root,stateno=2911

;------------------------------------------------
; GENKIDAMA HELPER ADVANCES
[Statedef 2981]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5
anim = 2936

[State 1061, pos]
type = PosSet
trigger1 = !time
x = root,var(28)
y = root,var(29)

[state 1215, Smoke FX]
type = explod
trigger1 = time = 0
anim = 8060
id = 8060
pos = -80,80
bindtime = -1
sprpriority = 6
ownpal = 1
removetime = -1
persistent = 0
ignorehitpause = 1

[State 1061, Velocity]
type = VelAdd
trigger1 = time>=40 && (vel X <= 4)
x = 0.3

[State 13300, Hits]
type = HitAdd
trigger1 = time>=10 && time<95 && time%5=0
value = 1

[State 13300, Hit sparks]
type = Explod
trigger1 = time>=10 && time<95 && time%5=0
anim = 7030
ID = 7030
postype = p2
pos = -10+3*(random%15), -30-3*(random%16)
bindtime = 1
removetime = -2
pausemovetime = -1
ontop = 1
sprpriority = 7

[State 640, hit sounds]
type = PlaySnd
trigger1 = time>=10 && time<95 && time%5=0
value = 1000,0

[State 1000, shake]
type = EnvShake
trigger1 = time>=10 && time<95 && time%4=0
time = 4
ampl = 5
freq = 176

[State 1061, scale]
type = AngleDraw
trigger1 = time >= 45
scale = ifelse(1+0.02*(time-45)>2,2,1+0.02*(time-45)), ifelse(1+0.02*(time-45)>2,2,1+0.02*(time-45))

[State 2260, remove smoke]
type = RemoveExplod
trigger1 = root,stateno=2911
ID = 8060

[State 2260, destroy]
type = DestroySelf
trigger1 = root,stateno=2911

;===================================================
; Kaio jumping in and doing his magic trick
[Statedef 18450]
type    = A
movetype= I
physics = A
anim = 18450
sprpriority = 1
velset = -5,0

[State 1061, turn]
type = turn
trigger1 = !time

[State 1061, End]
type = posset
trigger1 = !time
X = -200*ifelse(root,facing=-1,1,-1)
Y = -100

[State 3000, end]
type = changestate
trigger1 = pos Y > -5
value = 18451
ctrl = 0

;----------------------------------
; Kaio lands and stance
[Statedef 18451]
type    = S
movetype= I
physics = S
anim = 18451
sprpriority = 1
velset = 0,0

[State -3, Landing Sound]
type = PlaySnd
trigger1 = !time
value = 40, 0

[State 1061, End]
type = posset
trigger1 = !time
Y = 0

[State 3000, to stance]
type = changeanim
trigger1 = anim=18451 && !animtime
value = 18452

[State 3000, end]
type = changestate
trigger1 = anim=18452 && time=20
value = 18453

;----------------------------------
; Kaio magic trick
[Statedef 18453]
type    = S
movetype= I
physics = S
anim = 18453
sprpriority = 1
velset = 0,0

[State 13300, Magic sparks]
type = Explod
trigger1 = animelemtime(3)=10
anim = 18460
ID = 18460
postype = p1
pos = 50,-83
bindtime = 1
removetime = -2
sprpriority = 4

[State 200, Magic SFX]
type = PlaySnd
trigger1 = animelemtime(3) = 0
value = 184,1
volume = 500

;===================================================
; Kaio car
[Statedef 18500]
type    = S
movetype= A
physics = N
anim = 18500
sprpriority = 4
velset = 7,0

[State -3, engine Sound]
type = PlaySnd
trigger1 = !time
value = 185, 0

[State 1061, End]
type = posset
trigger1 = !time
X = -1000*ifelse(root,facing=1,1,-1)
Y = -7

[state 1215, wheels]
type = explod
trigger1 = !time
anim = 18502
id = 18502
pos = 0,0
bindtime = -1
sprpriority = 2
ownpal = 1
removetime = -1
ignorehitpause = 1
shadow = -1,0,0

[state 1215, black block]
type = explod
trigger1 = !time
anim = 18503
id = 18503
pos = 0,0
bindtime = -1
sprpriority = 1
ownpal = 1
removetime = -1
ignorehitpause = 1
shadow = -1,0,0

[state 1215, bubbles]
type = explod
trigger1 = !time
anim = 18507
id = 18507
pos = 0,0
bindtime = -1
sprpriority = 3
ownpal = 1
removetime = -1
ignorehitpause = 1
shadow = -1,0,0

[state 1215, kaio driving]
type = explod
trigger1 = !time
anim = 18504
id = 18504
pos = 0,0
bindtime = -1
sprpriority = 1
ownpal = 1
removetime = -1
ignorehitpause = 1
shadow = -1,0,0

[state 1215, kaio hands]
type = explod
trigger1 = !time
anim = 18505
id = 18505
pos = 0,0
bindtime = -1
sprpriority = 2
ownpal = 1
removetime = -1
ignorehitpause = 1
shadow = -1,0,0

[State -3, horn Sound]
type = PlaySnd
trigger1 = time=75
trigger2 = time=100
value = 185, 3

[State 1057, var]
type = Varset
trigger1 = abs(rootdist X) < 125
var(1) = 1

[State 1057, var timer]
type = VarAdd
trigger1 = var(1)=1
var(2) = 1

[State 1057, change speed]
type = Velset
trigger1 = var(1)=1
X = 0

[State -3, crash Sound]
type = PlaySnd
trigger1 = var(1)=1
value = 185, 1
persistent = 0

[State -3, pieces fall Sound]
type = null ;PlaySnd
trigger1 = var(2)=10
value = 185, 2

[State -3, Kaio screams Sound WTF]
type = Null;PlaySnd
triggerall = root,var(55)=0		;Voice=Japan
trigger1 = var(2)=20
value = 185, 4 ;this is not his voice for God's sake!
[State -3, Kaio screams Sound WTF]
type = PlaySnd
triggerall = root,var(55)=1		;Voice=English
trigger1 = var(2)=20
value = 185, 5

[State 13100, shake]
type = envshake
trigger1 = var(1)=1
time = 10
freq = 130
ampl = 4
persistent = 0

[State 1057, bind]
type = bindtoroot
trigger1 = var(1)=1
pos = -125,-7

[State 1057, broken car]
type = changeanim
trigger1 = var(1)=1 && anim!=18501
value = 18501

[State 1057, remove kaio driving]
type = removeexplod
trigger1 = var(1)=1 && numexplod(18504)
ID = 18504

[State 1057, remove wheels]
type = removeexplod
trigger1 = var(1)=1 && numexplod(18502)
ID = 18502

[state 1215, kaio not happy]
type = explod
trigger1 = var(1)=1 && !numexplod(18506)
anim = 18506
id = 18506
pos = 0,0
bindtime = -1
sprpriority = 1
ownpal = 1
removetime = -1
ignorehitpause = 1
shadow = -1,0,0

[state 1215, wheels static]
type = explod
trigger1 = var(1)=1
anim = 18508
id = 18508
pos = 0,0
bindtime = -1
sprpriority = 2
ownpal = 1
removetime = -1
ignorehitpause = 1
shadow = -1,0,0

[state 1215, mouth English]
type = explod
triggerall = root,var(55)=1		;Voice=English
trigger1 = var(1)=1
anim = 18509
id = 18509
pos = 0,0
bindtime = -1
sprpriority = 2
ownpal = 1
removetime = -1
ignorehitpause = 1
shadow = -1,0,0

[state 1215, mouth Japan]
type = explod
triggerall = root,var(55)=0		;Voice=Japan
trigger1 = var(1)=1
anim = 18510
id = 18510
pos = 0,0
bindtime = -1
sprpriority = 2
ownpal = 1
removetime = -1
ignorehitpause = 1
shadow = -1,0,0

;[State -3, horn Sound]
;type = PlaySnd
;trigger1 = var(2)>=30 && (time%25)=0
;value = 185, 3

;===================================================
; Kaio car nod (perfect pimp)
[Statedef 18901]
type    = S
movetype= A
physics = N
anim = 18500
sprpriority = 4
velset = 0,0

[State 1057, bind]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State -3, engine Sound]
type = PlaySnd
trigger1 = !time
value = 185, 0
volume = -100

[state 1215, wheels]
type = null ;explod
trigger1 = !time
anim = 18502
id = 18502
pos = 0,0
bindtime = -1
sprpriority = 2
ownpal = 1
removetime = -1
ignorehitpause = 1
shadow = -1,0,0

[state 1215, black block]
type = explod
trigger1 = !time
anim = 18503
id = 18503
pos = 0,0
bindtime = -1
sprpriority = 1
ownpal = 1
removetime = -1
ignorehitpause = 1
shadow = -1,0,0

[state 1215, bubbles]
type = explod
trigger1 = !time
anim = 18507
id = 18507
pos = 0,0
bindtime = -1
sprpriority = 3
ownpal = 1
removetime = -1
ignorehitpause = 1
shadow = -1,0,0

[state 1215, kaio driving]
type = explod
trigger1 = !time
anim = 18901
id = 18901
pos = 0,0
bindtime = -1
sprpriority = 1
ownpal = 1
removetime = -1
ignorehitpause = 1
shadow = -1,0,0

[state 1215, kaio hands]
type = explod
trigger1 = !time
anim = 18505
id = 18505
pos = 0,0
bindtime = -1
sprpriority = 2
ownpal = 1
removetime = -1
ignorehitpause = 1
shadow = -1,0,0

;===================================================
; Kaio wheels car nod (perfect pimp)
[Statedef 18902]
type    = S
movetype= A
physics = N
anim = 18502
sprpriority = 2
velset = 7,0

[State 1057, vel]
type = VelAdd
trigger1 = root,anim=18900 && (root,pos X = [-100,100]) && root,vel X > 1.5
X = -0.8

[State 1057, vel]
type = VelAdd
trigger1 = root,anim=18900 && (root,pos X != [-100,100]) && time > 100
X = 1


;===================================================
; Boulder
[Statedef 19401]
type = A
physics = N
movetype = I
ctrl = 0
sprpriority = 5
anim = 15999

[State 1900, boulder]
type = explod
triggerall = root,stateno = 194
trigger1 = !time
anim = 19401
id = 19401
pos = 0,0
sprpriority = 4
bindtime = -1
ownpal = 1
removeongethit = 1
ignorehitpause = 1
removetime = -1
shadow = -1,0,0

[State 1900, boulder]
type = removeexplod
trigger1 = root,stateno = 194
trigger1 = root,animelemtime(26)=0
trigger2 = root,stateno = 710
ID = 19401

[State 1900, boulder moving]
type = explod
triggerall = root,stateno = 194
trigger1 = root,animelemtime(26)=0
anim = 19401
pos = 0,-10
sprpriority = 4
ownpal = 1
removeongethit = 1
ignorehitpause = 1
removetime = 20
shadow = -1,0,0
vel = -15,-1

[State 1900, shake]
type = envshake
trigger1 = time = 200
time = 20
freq = 100
ampl = -6

[State 250, ground smash]
type = PlaySnd
trigger1 = time = 200
value = 194,0
channel = 11

[State 250, 1]
type = DestroySelf
trigger1 = time>= 200 ;=201


;=====================================
; Kinton Helper for taunt
[Statedef 19501]
type    = S
movetype= I
physics = N
anim = 30301
sprpriority = -2
velset = 15,0

[State 1061, End]
type = posadd
trigger1 = !time
X = -280
Y = -80

[State 1057, kinton woosh]
type = PlaySnd
trigger1 = Time = 0
value = 30300,0
volume = -100

[State 1061, stop]
type = velset
trigger1 = time=15
X = 0

[State 1057, bind]
type = bindtoroot
trigger1 = vel X = 0
pos = -57,-80

[State 1061, go again]
type = veladd
triggerall = vel X <= 15
trigger1 = time>=95
trigger2 = root,stateno != 195
X = 1

[State 1057, kinton woosh]
type = PlaySnd
trigger1 = Time=95 && root,stateno=195
value = 195,1


[State 1061, end]
type = destroyself
trigger1 = time>=200

;=====================================
; Kinton Helper for intro 5
[Statedef 19601]
type    = S
movetype= I
physics = N
anim = 30301
sprpriority = -2
velset = 0,0

[State 1057, bind]
type = bindtoroot
trigger1 = vel X = 0
pos = -57,-80

[State 1061, go again]
type = veladd
trigger1 = root,anim != 196
X = 1

;[State 1057, kinton woosh] ;I moved this playsnd in the system.cns, state 196
;type = PlaySnd
;trigger1 = root,anim != 196
;value = 195,1
;persistent = 0
;channel = 10

[State 1061, end]
type = destroyself
trigger1 = time>=200

[State 1061, end]
type = destroyself
trigger1 = RoundState != [0,1]
trigger2 = root,StateNo = 710