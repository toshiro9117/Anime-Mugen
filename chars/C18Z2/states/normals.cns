;==============================================================
; CNS File for C18 Z2 by Nico_18 & XGargoyle
; Normal states : standing, crouching & jumping basics, etc.
;==============================================================

; TAUNT
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S

[State 4900, Projectile] ;EMO Killer
type = Projectile
trigger1 = var(54)>0 ;EMO Exit active
ProjID = 4900
projanim = 9999
projremove = 3;4
projremovetime = 3;4
ignorehitpause = 1
;persistent =
;Reset Emo
[State -4, VarSet]
type = VarSet
trigger1 = !time
var(54)=0
ignorehitpause = 1
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Animelemtime(3)=0
value = 195,random%2
volumescale = 255
channel = 0


[State 195, Heart Helper]
type = Helper
trigger1 = Animelemtime(7)=0
helpertype = normal
name = "Heart"
ID = 195
stateno = 7902
pos = 32,-63
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 195, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

; S. LIGHT PUNCH
[Statedef 200]
type = S
movetype = A
physics = S
anim = 200
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
trigger1 = ishelper(667)
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, VarAdd] ;Magic series limiter
type = VarAdd
triggerall = var(54)=0 ;Limit non-EMO
trigger1 = !time
var(14) = 1
ignorehitpause = 1
;persistent =

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 0
persistent = 0

[State 200, 1]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
attr = S, NA
;damage = 20, 0
damage = ceil(ifElse(fvar(11) * 23 < 1, 1, fvar(11) * 23)), 0
animtype = light
guardflag = MA
hitflag = MAF
affectteam = E
priority = 2, Hit
pausetime = 10,14 ;10
guard.pausetime = 10,12 ;10
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-78
hitsound = s5, 0
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 7
ground.hittime  = 7
ground.velocity = -2.5 ;-3
guard.velocity = -4.5
airguard.velocity = -1.9,-.8
air.velocity = -2,-2
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),40,0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
;ID = 1098
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 200, 1]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
attr = S, NA
;damage = 20, 0
damage = ceil(ifElse(fvar(11) * 23 < 1, 1, fvar(11) * 23)), 0
animtype = light
guardflag = MA
hitflag = MAF
affectteam = B
priority = 2, Hit
pausetime = 10,14 ;10
guard.pausetime = 10,12 ;10
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-78
hitsound = s5, 0
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 7
ground.hittime  = 7
ground.velocity = -2.5 ;-3
guard.velocity = -4.5
airguard.velocity = -1.9,-.8
air.velocity = -2,-2
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),40,0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(10)>=0
value = 0
ignorehitpause = 1
;persistent =


[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 240, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

; S. LP COMBO
[Statedef 205]
type = S
movetype = A
physics = S
anim = 205
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<200
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 0
persistent = 0

[State 200, 1]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
attr = S, NA
;damage = 20, 0
damage = ceil(ifElse(fvar(11) * 20 < 1, 1, fvar(11) * 20)), 0
animtype = light
guardflag = MA
hitflag = MAF
affectteam = E
priority = 2, Hit
pausetime = 10,12 ;10
guard.pausetime = 10,12 ;10
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-58
hitsound = s5, 0
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 7
ground.hittime  = 7
ground.velocity = -2.5 ;-3
guard.velocity = -4.5
airguard.velocity = -1.9,-.8
air.velocity = -2,-2
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),40,0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = 1098
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 200, 1]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
attr = S, NA
;damage = 20, 0
damage = ceil(ifElse(fvar(11) * 20 < 1, 1, fvar(11) * 20)), 0
animtype = light
guardflag = MA
hitflag = MAF
affectteam = B
priority = 2, Hit
pausetime = 10,12 ;10
guard.pausetime = 10,12 ;10
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-58
hitsound = s5, 0
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 7
ground.hittime  = 7
ground.velocity = -2.5 ;-3
guard.velocity = -4.5
airguard.velocity = -1.9,-.8
air.velocity = -2,-2
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),40,0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(10)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 240, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

; S. MEDIUM PUNCH
[Statedef 210]
type = S
movetype = A
physics = S
anim = 210
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, VarAdd] ;Magic series limiter
type = VarAdd
trigger1 = !time
triggerall = var(54)=0 ;Limit non-EMO
var(14) = 1
ignorehitpause = 1
;persistent =

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 7
value = 0, 1
persistent = 0

[State 240, 2]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 8
trigger2 = animelem = 9
trigger3 = animelem = 10
trigger4 = animelem = 11
attr = S, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 32 < 1, 1, fvar(11) * 32)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 11, 12
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-65
hitsound   = s5,1
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 8
trigger2 = animelem = 9
trigger3 = animelem = 10
trigger4 = animelem = 11
attr = S, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 32 < 1, 1, fvar(11) * 32)), 0
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 11, 12
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-65
hitsound   = s5,1
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(12)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 240, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

; S. BACK MEDIUM PUNCH
[Statedef 215]
type = S
movetype = A
physics = S
anim = 215
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, VarAdd] ;Magic series limiter
type = VarAdd
trigger1 = !time
triggerall = var(54)=0 ;Limit non-EMO
var(14) = 1
ignorehitpause = 1
persistent = 0 ;count as 1 attack

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 10
trigger2 = animelem = 11
value = 0, 1
persistent = 0

[State 240, 2] ;1st hit
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 12
trigger2 = animelem = 13
trigger3 = animelem = 14
trigger4 = animelem = 15
attr = S, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 18 < 1, 1, fvar(11) * 18)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 9, 9
guard.pausetime = 9,9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-65
hitsound   = s5,1
guardsound = S6,0
ground.type = Low ;High
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -0.5
guard.velocity = -2
airguard.velocity = -1,-1.1
air.type = Low
air.velocity = -0.5,-1.5
air.hittime = 10
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2] ;1st hit
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 12
trigger2 = animelem = 13
trigger3 = animelem = 14
trigger4 = animelem = 15
attr = S, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 18 < 1, 1, fvar(11) * 18)), 0
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 9, 9
guard.pausetime = 9,9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-65
hitsound   = s5,1
guardsound = S6,0
ground.type = Low ;High
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -0.5
guard.velocity = -2
airguard.velocity = -1,-1.1
air.type = Low
air.velocity = -0.5,-1.5
air.hittime = 10
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
triggerall = movehit=1
trigger1 = animelem = 12
trigger2 = animelem = 13
trigger3 = animelem = 14
trigger4 = animelem = 15
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 19
trigger2 = animelem = 20
value = 0, 1
persistent = 0

[State 240, 2] ;2nd hit
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 21
trigger2 = animelem = 22
trigger3 = animelem = 23
trigger4 = animelem = 24
attr = S, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 18 < 1, 1, fvar(11) * 18)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 11, 11
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-65
hitsound   = s5,1
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2] ;2nd hit
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 21
trigger2 = animelem = 22
trigger3 = animelem = 23
trigger4 = animelem = 24
attr = S, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 18 < 1, 1, fvar(11) * 18)), 0
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 11, 11
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-65
hitsound   = s5,1
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
triggerall = movehit=1
trigger1 = animelem = 21
trigger2 = animelem = 22
trigger3 = animelem = 23
trigger4 = animelem = 24
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(25)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 240, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

; S. STRONG PUNCH
[Statedef 220]
type = S
movetype = A
physics = S
anim = ifelse(p2bodydist x<15,225,220)
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, VarAdd] ;Magic series limiter
type = VarAdd
triggerall = var(54)=0 ;Limit non-EMO
trigger1 = !time
var(14) = 1
ignorehitpause = 1
;persistent =

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 0, PosAdd] ;axis correction
type = PosAdd
triggerall = anim = 220
trigger1 = animelem = 11
trigger2 = animelem = 12
trigger3 = animelem = 13
x = 16
ignorehitpause = 1
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = anim = 220
trigger1 = animelem = 11
trigger2 = anim = 220
trigger2 = animelem = 12
trigger3 = anim = 225
trigger3 = animelem = 12
value = 0, 2
persistent = 0

[State 200, 1]  ;far
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
triggerall = anim = 220
trigger1 = animelem = 13
trigger2 = animelem = 14
trigger3 = animelem = 15
trigger4 = animelem = 16
attr = S, NA
damage = ceil(ifElse(fvar(11) * 45 < 1, 1, fvar(11) * 45)), 0
animtype = Hard
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 15,13 ;13,13
guard.pausetime = 15,13 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -15,-82
hitsound = s5, 2
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.velocity = -4,-4
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,210),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = 1098
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 200, 1]  ;far
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
triggerall = anim = 220
trigger1 = animelem = 13
trigger2 = animelem = 14
trigger3 = animelem = 15
trigger4 = animelem = 16
attr = S, NA
damage = ceil(ifElse(fvar(11) * 45 < 1, 1, fvar(11) * 45)), 0
animtype = Hard
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 15,13 ;13,13
guard.pausetime = 15,13 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -15,-82
hitsound = s5, 2
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.velocity = -4,-4
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,210),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 200, 1]  ;close
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
triggerall = anim = 225
trigger1 = animelem = 13
trigger2 = animelem = 14
trigger3 = animelem = 15
trigger4 = animelem = 16
attr = S, NA
damage = ceil(ifElse(fvar(11) * 40 < 1, 1, fvar(11) * 40)), 0
animtype = Hard
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 15,13 ;13,13
guard.pausetime = 15,13 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -15,-42
hitsound = s5, 2
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.velocity = -4,-4
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,210),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = 1098
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 200, 1]  ;close
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
triggerall = anim = 225
trigger1 = animelem = 13
trigger2 = animelem = 14
trigger3 = animelem = 15
trigger4 = animelem = 16
attr = S, NA
damage = ceil(ifElse(fvar(11) * 40 < 1, 1, fvar(11) * 40)), 0
animtype = Hard
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 15,13 ;13,13
guard.pausetime = 15,13 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -15,-42
hitsound = s5, 2
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.velocity = -4,-4
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,210),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = anim = 220
trigger1 = AnimElemTime(17)>=0
trigger2 = anim = 225
trigger2 = AnimElemTime(17)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 240, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

; S. LIGHT KICK
[Statedef 230]
type = S
movetype = A
physics = S
anim = 230
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, VarAdd] ;Magic series limiter
type = VarAdd
triggerall = var(54)=0 ;Limit non-EMO
trigger1 = !time
var(14) = 1
ignorehitpause = 1
;persistent =

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 230, 1]
type = PlaySnd
trigger1 = animelem = 5;3
value = 0, 3
persistent = 0

[State 230, 2]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 6;4
trigger2 = animelem = 7;4
trigger3 = animelem = 8;4
trigger4 = animelem = 9;4
attr = S, NA
animtype  = Light
;damage    = 25,0
damage = ceil(ifElse(fvar(11) * 25 < 1, 1, fvar(11) * 25)), 0
priority = 4, Hit
guardflag = LA
affectteam = E
pausetime = 10,11
guard.pausetime = 10,10
sparkno = s7010
guard.sparkno = s7000
sparkxy = -10,-20
hitsound   = s5,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -2.5
guard.velocity = -4.5
air.velocity = -2,-3
air.animtype = back
getpower= Cond(!NumHelper(4750),40,0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 230, 2]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 6;4
trigger2 = animelem = 7;4
trigger3 = animelem = 8;4
trigger4 = animelem = 9;4
attr = S, NA
animtype  = Light
;damage    = 25,0
damage = ceil(ifElse(fvar(11) * 25 < 1, 1, fvar(11) * 25)), 0
priority = 4, Hit
guardflag = MA
affectteam = B
pausetime = 10,11
guard.pausetime = 10,10
sparkno = s7010
guard.sparkno = s7000
sparkxy = -10,-20
hitsound   = s5,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -2.5
guard.velocity = -4.5
air.velocity = -2,-3
air.animtype = back
getpower= Cond(!NumHelper(4750),40,0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(10)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 230, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

; S. MEDIUM KICK
[Statedef 240]
type = S
movetype = A
physics = S
anim = ifelse(p2bodydist x<15,245,240)
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

[State -2, DisplayToClipboard]
type = null;DisplayToClipboard
trigger1 = ishelper
text = "Helper animtime=%d\n"
params = animtime
ignorehitpause = 1

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "Target=%d |T1030=%d | T1031=%d |TSTATE=%d"
params = numtarget, numtarget(1030),numtarget(1031), numtarget(stateno)
ignorehitpause = 1
;persistent =


;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, VarAdd] ;Magic series limiter
type = VarAdd
triggerall = var(54)=0 ;Limit non-EMO
trigger1 = !time
var(14) = 1
ignorehitpause = 1
;persistent =

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 7 ;4
value = 0, 4
persistent = 0

[State 240, 2]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 8;5
trigger2 = animelem = 9;5
trigger3 = animelem = 10;5
trigger4 = animelem = 11;5
attr = S, NA
animtype = Medium
;damage = 35,0
damage = ceil(ifElse(fvar(11) * (34+2*(Anim=245)) < 1, 1, fvar(11) * (34+2*(Anim=245)))), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 11, 15
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-60
hitsound   = s5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -2
guard.velocity = -6
air.velocity = -3,-3
airguard.velocity = -2,-1.1
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
;ID = 1030+numtarget
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 8;5
trigger2 = animelem = 9;5
trigger3 = animelem = 10;5
trigger4 = animelem = 11;5
attr = S, NA
animtype = Medium
;damage = 35,0
damage = ceil(ifElse(fvar(11) * (34+2*(Anim=245)) < 1, 1, fvar(11) * (34+2*(Anim=245)))), 0
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 11, 15
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-60
hitsound   = s5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -2
guard.velocity = -6
air.velocity = -3,-3
airguard.velocity = -2,-1.1
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(12)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 240, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

; S. FWD MK1
[Statedef 241]
type = S
movetype = A
physics = S
anim = 241
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7; 0 ;7
hitcountpersist = 1
;movehitpersist = 1

[State 0, RemoveExplod] ;prevent false combo
type = RemoveExplod
trigger1 = Time=0
id = 90000240
ignorehitpause =  1
;persistent =


;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, VarAdd] ;Magic series limiter
type = VarAdd
triggerall = var(54)=0 ;Limit non-EMO
trigger1 = !time
var(14) = 1
ignorehitpause = 1
;persistent =

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(7) = 0
ignorehitpause = 1
;persistent =

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(11) = 0
ignorehitpause = 1
;persistent =

[State 0, VarSet]
type = VarSet
triggerall = NumExplod(90000240) ||  command = "b"
triggerall = (!NumExplod(90000021) && !NumExplod(90000022) && !NumExplod(90000023))
trigger1 = time>0
trigger1 = movehit
var(11) = 1
ignorehitpause = 1

[State 241, 1]
type = PlaySnd
trigger1 = animelem = 7 ;4
value = 0, 4
persistent = 0

[State 240, 2]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 8 ;5
trigger2 = animelem = 9 ;5
trigger3 = animelem = 10 ;5
trigger4 = animelem = 11 ;5
attr = S, NA
animtype = Medium
;damage = 20,0
damage = ceil(ifElse(fvar(11) * 20 < 1, 1, fvar(11) * 20)), 0
guardflag = LA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 4, 8; 15
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -10,-20
hitsound   = s5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -1
guard.velocity = -3
air.velocity = -3,-3
airguard.velocity = -2,-1.1
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 8 ;5
trigger2 = animelem = 9 ;5
trigger3 = animelem = 10 ;5
trigger4 = animelem = 11 ;5
attr = S, NA
animtype = Medium
;damage = 20,0
damage = ceil(ifElse(fvar(11) * 20 < 1, 1, fvar(11) * 20)), 0
guardflag = LA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 4, 8 ;15
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -10,-20
hitsound   = s5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -1
guard.velocity = -3
air.velocity = -3,-3
airguard.velocity = -2,-1.1
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(12)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 3302, Helper Limiter]
type = Helper
triggerall = !NumHelper(241)
trigger1= movehit && numtarget
trigger1= (target,movetype=H) && !(target,time)
helpertype = normal
name = "Limiter"
ID = 241
stateno = 9999
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

; Stand Forward Medium Kick 2
[State -1, Stand Forward MK2]
type = ChangeState
;triggerall = AILevel<=0
triggerall = var(11)=1
trigger1 = numtarget
trigger1 = !(target, ishelper)
trigger1 = AnimElemTime(14)>=0;AnimElemTime(7)>=0
value = 242
ignorehitpause = 1

[State 240, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;S. FWD MK2
[Statedef 242]
type = S
movetype = A
physics = S
anim = 244 ;242
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 0 ;7
hitcountpersist = 1
;movehitpersist = 1

[State 0, RemoveExplod] ;prevent false combo
type = RemoveExplod
trigger1 = Time=0
id = 90000240
ignorehitpause =  1
;persistent =

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(11) = 0
ignorehitpause = 1
;persistent =

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, VarSet]
type = VarSet
triggerall = NumExplod(90000240) ||  command = "b"
triggerall = (!NumExplod(90000021) && !NumExplod(90000022) && !NumExplod(90000023))
trigger1 = time>0
trigger1 = movehit
var(11) = 2
ignorehitpause = 1

[State 242, 1]
type = PlaySnd
trigger1 = animelem = 7 ;4
value = 0, 3
persistent = 0

[State 242, 2]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 8 ;5
trigger2 = animelem = 9 ;5
trigger3 = animelem = 10 ;5
trigger4 = animelem = 11 ;5
attr = S, NA
animtype = Medium
;damage = 20,0
damage = ceil(ifElse(fvar(11) * 7 < 1, 1, fvar(11) * 7)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 4, 16
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-60
hitsound   = s5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -0.5 ;-1
guard.velocity = -3
air.velocity = -3,-3
airguard.velocity = -2,-1.1
air.animtype = back
ground.cornerpush.veloff = 0
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 242, 2]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 8 ;5
trigger2 = animelem = 9 ;5
trigger3 = animelem = 10 ;5
trigger4 = animelem = 11 ;5
attr = S, NA
animtype = Medium
;damage = 20,0
damage = ceil(ifElse(fvar(11) * 7 < 1, 1, fvar(11) * 7)), 0
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 4, 16
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-60
hitsound   = s5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -0.5 ;-1
guard.velocity = -3
air.velocity = -3,-3
airguard.velocity = -2,-1.1
air.animtype = back
ground.cornerpush.veloff = 0
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 242, 1]
type = PlaySnd
trigger1 = animelem = 18 ;4
value = 0, 4
persistent = 0

[State 242, 2]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 19 ;5
trigger2 = animelem = 20 ;5
trigger3 = animelem = 21 ;5
trigger4 = animelem = 22 ;5
attr = S, NA
animtype = Medium
;damage = 20,0
damage = ceil(ifElse(fvar(11) * 7 < 1, 1, fvar(11) * 7)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 4, 16
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-60
hitsound   = s5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -0.5 ;-1
guard.velocity = -3
air.velocity = -3,-3
airguard.velocity = -2,-1.1
air.animtype = back
ground.cornerpush.veloff = 0
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 242, 2]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 19 ;5
trigger2 = animelem = 20 ;5
trigger3 = animelem = 21 ;5
trigger4 = animelem = 22 ;5
attr = S, NA
animtype = Medium
;damage = 20,0
damage = ceil(ifElse(fvar(11) * 7 < 1, 1, fvar(11) * 7)), 0
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 4, 16
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-60
hitsound   = s5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -0.5 ;-1
guard.velocity = -3
air.velocity = -3,-3
airguard.velocity = -2,-1.1
air.animtype = back
ground.cornerpush.veloff = 0
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 242, 1]
type = PlaySnd
trigger1 = animelem = 33 ;4
value = 0, 5
persistent = 0

[State 242, 2]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 34 ;5
trigger2 = animelem = 35 ;5
trigger3 = animelem = 36 ;5
trigger4 = animelem = 37 ;5
attr = S, NA
animtype = Medium
;damage = 20,0
damage = ceil(ifElse(fvar(11) * 7 < 1, 1, fvar(11) * 7)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 5, 15-4*(NumExplod(9242))
guard.pausetime = 11,11-4*(NumExplod(9242))
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-60
hitsound   = s5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -0.5-6*(NumExplod(9242)) ;-1
guard.velocity = -3-3*(NumExplod(9242))
air.velocity = -3,-3
airguard.velocity = -2,-1.1
air.animtype = back
ground.cornerpush.veloff = 0
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 242, 2]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 34 ;5
trigger2 = animelem = 35 ;5
trigger3 = animelem = 36 ;5
trigger4 = animelem = 37 ;5
attr = S, NA
animtype = Medium
;damage = 20,0
damage = ceil(ifElse(fvar(11) * 7 < 1, 1, fvar(11) * 7)), 0
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 5, 15-4*(NumExplod(9242))
guard.pausetime = 11,11-4*(NumExplod(9242))
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-60
hitsound   = s5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -0.5-6*(NumExplod(9242)) ;-1
guard.velocity = -3-3*(NumExplod(9242))
air.velocity = -3,-3
airguard.velocity = -2,-1.1
air.animtype = back
ground.cornerpush.veloff = 0
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd x1]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, HitAdd x2]
type = HitAdd
trigger1 = Animelemtime(19)>=0 && Animelemtime(23)<0
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, HitAdd x3]
type = HitAdd
trigger1 = Animelemtime(34)>=0 && Animelemtime(38)<0
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
triggerall = !NumExplod(9242)
trigger1 = Animelemtime(34)>=0 && Animelemtime(38)<0
trigger1 = movehit=1
anim = 9999
ID = 9242
pos = 0,0
postype = p1  ;p2,front,back,left,right
bindtime = 1
removetime = -1
removeongethit = 0
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(38)>=0;AnimElemTime(12)>=0
value = 0
ignorehitpause = 1
;persistent =

; Stand Forward Medium Kick 3
[State -1, Stand Forward MK3]
type = null;ChangeState
;triggerall = AILevel<=0
triggerall = NumExplod(90000240) ||  command = "b"
triggerall = (!NumExplod(90000021) && !NumExplod(90000022) && !NumExplod(90000023))
trigger1 = numtarget
trigger1 = !(target, ishelper)
trigger1 = AnimElemTime(16)>=0;AnimElemTime(8)>=0
value = 243
ignorehitpause = 1

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

; Stand Forward Medium Kick 3
[State -1, Stand Forward MK3]
type = ChangeState
;triggerall = AILevel<=0
triggerall = var(11)=2
trigger1 = numtarget
trigger1 = !(target, ishelper)
trigger1 = AnimElemTime(40)>=0;AnimElemTime(16)>=0;AnimElemTime(8)>=0
value = 243
ignorehitpause = 1

[State 242, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

; S. FWD MK3
[Statedef 243]
type = S
movetype = A
physics = S
anim = 243
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 0 ;7
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(11) = 0
ignorehitpause = 1
;persistent =

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 243, 1]
type = PlaySnd
trigger1 = animelem = 9 ;5
value = 0, 4
persistent = 0

[State 243, 2]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 10 ;6
trigger2 = animelem = 11 ;6
trigger3 = animelem = 12 ;6
trigger4 = animelem = 13 ;6
attr = S, NA
animtype = Up
;damage = 20,0
damage = ceil(ifElse(fvar(11) * 20 < 1, 1, fvar(11) * 20)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 6, 15
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -30,-70
hitsound   = s5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -3,-8 ;-1,-6.5
guard.velocity = -3
air.velocity = -3,-5 ;-3
airguard.velocity = -2,-1.1
fall = 1
fall.recover = 0
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.45
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 243, 2]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 10 ;6
trigger2 = animelem = 11 ;6
trigger3 = animelem = 12 ;6
trigger4 = animelem = 13 ;6
attr = S, NA
animtype = Up
;damage = 20,0
damage = ceil(ifElse(fvar(11) * 20 < 1, 1, fvar(11) * 20)), 0
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 6, 15
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = -30,-70
hitsound   = s5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -3,-8 ;-1,-6.5
guard.velocity = -3
air.velocity = -3,-5 ;-3
airguard.velocity = -2,-1.1
fall = 1
fall.recover = 0
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.45
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 =  Animelemtime(16)>=0 && Animelemtime(20)<0
x = 2
ignorehitpause = 1
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(14)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 243, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

; S. STRONG KICK
[Statedef 250]
type = S
movetype = A
physics = S
;anim = ifelse(p2bodydist x<15,251,250)
anim = ifelse(ifElse(Facing = 1,NumExplod(90000004),NumExplod(90000006)),251,250)
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, VarAdd] ;Magic series limiter
type = VarAdd
triggerall = var(54)=0 ;Limit non-EMO
trigger1 = !time
var(14) = 1
ignorehitpause = 1
;persistent =

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 0, Width]
type = Width
triggerall = Anim=250
trigger1 = AnimElemTime(10)<0
value = 35,0
ignorehitpause = 1
;persistent =

[State 0, Width]
type = Width
triggerall = Anim=251
trigger1 = AnimElemTime(10)<0
value = 15,0
ignorehitpause = 1
;persistent =


[State 241, 1]
type = PlaySnd
trigger1 = Anim=250
trigger1 = animelem = 7
trigger2 = Anim=251
trigger2 = animelem = 10
value = 0, 5
persistent = 0

[State 255, hit]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
triggerall = Anim=250
trigger1 = AnimElem = 10
trigger2 = AnimElem = 11
trigger3 = AnimElem = 12
trigger4 = AnimElem = 13
attr = S, NA
animtype  = Hard
damage = ceil(ifElse(fvar(11) * 48 < 1, 1, fvar(11) * 48)), 0
priority = 4, Hit
hitflag = MAF
guardflag = MA
affectteam = E
pausetime = 13,12
guard.pausetime = 13,12
sparkno = s7030
guard.sparkno = s7000
sparkxy = 10,-85
hitsound   = s5,5
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 15
ground.hittime = 18 ;15
ground.velocity = -9
air.velocity = -4,-4
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,210),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = 0
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 255, hit]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
triggerall = Anim=250
trigger1 = AnimElem = 10
trigger2 = AnimElem = 11
trigger3 = AnimElem = 12
trigger4 = AnimElem = 13
attr = S, NA
animtype  = Hard
damage = ceil(ifElse(fvar(11) * 48 < 1, 1, fvar(11) * 48)), 0
priority = 4, Hit
hitflag = MAF
guardflag = MA
affectteam = B
pausetime = 13,12
guard.pausetime = 13,12
sparkno = s7030
guard.sparkno = s7000
sparkxy = 10,-85
hitsound   = s5,5
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 15
ground.hittime = 18 ;15
ground.velocity = -9
air.velocity = -4,-4
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,210),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = 0
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 255, hit] ;close
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
triggerall = Anim=251
trigger1 = AnimElem = 11
trigger2 = AnimElem = 12
trigger3 = AnimElem = 13
trigger4 = AnimElem = 14
attr = S, NA
animtype  = Hard
damage = ceil(ifElse(fvar(11) * 45 < 1, 1, fvar(11) * 45)), 0
priority = 4, Hit
hitflag = MA
guardflag = LA
affectteam = E
pausetime = 13,14
guard.pausetime = 13,14
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,5
guardsound = S6,1
ground.type = low ;high
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -5
air.velocity = -2,-2
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,210),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = 0
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 255, hit] ;close
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
triggerall = Anim=251
trigger1 = AnimElem = 11
trigger2 = AnimElem = 12
trigger3 = AnimElem = 13
trigger4 = AnimElem = 14
attr = S, NA
animtype  = Hard
damage = ceil(ifElse(fvar(11) * 45 < 1, 1, fvar(11) * 45)), 0
priority = 4, Hit
hitflag = MA
guardflag = LA
affectteam = B
pausetime = 13,14
guard.pausetime = 13,14
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,5
guardsound = S6,1
ground.type = low ;high
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -5
air.velocity = -2,-2
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,210),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = 0
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0


[State 0, AttackDist]
type = AttackDist
trigger1 = Anim=250
trigger1 = AnimElemTime(16)>=0
trigger2 = Anim=251
trigger2 = AnimElemTime(15)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 255, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

; S. FWD SK
[Statedef 255]
type = S
movetype = A
physics = S
anim = 255
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, StateTypeSet] ;prevent OTG infinite
type = StateTypeSet
trigger1 = NumExplod(9255)
movetype = I        ;I,A,H
ignorehitpause = 1
;persistent =

[State 0, VarAdd] ;Magic series limiter
type = VarAdd
triggerall = var(54)=0 ;Limit non-EMO
trigger1 = !time
var(14) = 1
ignorehitpause = 1
;persistent =

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,Cond(gametime%2,2,40)
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 241, 1]
type = PlaySnd
trigger1 = animelem = 11 ;6
value = 0, 5
persistent = 0

[State 255, hit no OTG]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
triggerall = enemy,statetype!=L
trigger1 = AnimElem = 12 ;7
trigger2 = AnimElem = 13 ;
trigger3 = AnimElem = 14 ;
trigger4 = AnimElem = 15 ;
attr = S, NA
animtype  = Hard
;damage    = 50,0
damage = ceil(ifElse(fvar(11) * 50 < 1, 1, fvar(11) * 50)), 0
priority = 4, Hit
hitflag = MA
guardflag = MA
affectteam = E
pausetime = 13,13
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-45
hitsound   = s5,5
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 15
ground.hittime = 18 ;15
ground.velocity = -9
air.velocity = -4,-4
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,210),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = 0
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 255, hit no OTG]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
triggerall = enemy,statetype!=L
trigger1 = AnimElem = 12 ;7
trigger2 = AnimElem = 13 ;
trigger3 = AnimElem = 14 ;
trigger4 = AnimElem = 15 ;
attr = S, NA
animtype  = Hard
;damage    = 50,0
damage = ceil(ifElse(fvar(11) * 50 < 1, 1, fvar(11) * 50)), 0
priority = 4, Hit
hitflag = MA
guardflag = MA
affectteam = B
pausetime = 13,13
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-45
hitsound   = s5,5
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 15
ground.hittime = 18 ;15
ground.velocity = -9
air.velocity = -4,-4
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,210),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = 0
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 255, hit OTG]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
triggerall = enemy,statetype=L
trigger1 = AnimElem = 12 ;7
trigger2 = AnimElem = 13 ;
trigger3 = AnimElem = 14 ;
trigger4 = AnimElem = 15 ;
attr = S, NA
animtype  = Hard
;damage    = 50,0
damage = ceil(ifElse(fvar(11) * 50 < 1, 1, fvar(11) * 50)), 0
priority = 4, Hit
hitflag = FD
;guardflag = MA
affectteam = E
pausetime = 13,13
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-25
hitsound   = s5,5
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 15
ground.hittime = 18 ;15
ground.velocity = -9,-11
air.velocity = -4,-4
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,210),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
ID = 888
fall = 0
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 255, hit OTG]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
triggerall = enemy,statetype=L
trigger1 = AnimElem = 12 ;7
trigger2 = AnimElem = 13 ;
trigger3 = AnimElem = 14 ;
trigger4 = AnimElem = 15 ;
attr = S, NA
animtype  = Hard
;damage    = 50,0
damage = ceil(ifElse(fvar(11) * 50 < 1, 1, fvar(11) * 50)), 0
priority = 4, Hit
hitflag = FD
;guardflag = MA
affectteam = B
pausetime = 13,13
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-25
hitsound   = s5,5
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 15
ground.hittime = 18 ;15
ground.velocity = -9,-11
air.velocity = -4,-4
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,210),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
ID = 888
fall = 0
numhits = 0
fall.envshake.ampl = id
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(16)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 0, TargetVelSet]
type = TargetVelSet
trigger1 = numtarget(888)
trigger1 = !(target(888), ishelper)
trigger1 = target(888),stateno!=[888,890]
trigger1 = movehit = 1
x = -9
y = -11
ID = 888
;ignorehitpause =
persistent = 0


[State 0, TargetState]
type = TargetState
trigger1 = numtarget(888)
trigger1 = !(target(888), ishelper)
trigger1 = movehit = 1
value = 888
ignorehitpause = 1
persistent = 0

[State -2, anti-fuzzy check]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(9255)
trigger1 = movecontact
trigger1 = numtarget(888)
anim = 9999
ID = 9255
pos = 0,0
postype = p1
removetime = -1
removeongethit = 0
ignorehitpause = 1

[State 255, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

; DASH KICK
[Statedef 350]
type = A
movetype = A
physics = N
ctrl = 0
poweradd = 0
juggle = 7
velset = const(velocity.run.fwd.x),0
hitcountpersist = 1
movehitpersist = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 651
ignorehitpause = 1
;persistent =

[State 0, PosAdd]
type = PosAdd
trigger1 = !time
y = -10
;ignorehitpause =
;persistent =

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,random%2
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 12
value = 0, 5
persistent = 0

[State 0, VelMul]
type = VelMul
trigger1 = AnimElemTime(13)>=0
type = VelMul
x = 0.6
;ignorehitpause = 1
;persistent =

[State 240, 2]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 13
trigger2 = animelem = 14
trigger3 = animelem = 15
trigger4 = animelem = 16
attr = A, NA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 47 < 1, 1, fvar(11) * 47)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 16, 16
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-5-55*(Anim=651)
hitsound   = s5,5
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 13
trigger2 = animelem = 14
trigger3 = animelem = 15
trigger4 = animelem = 16
attr = A, NA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 47 < 1, 1, fvar(11) * 47)), 0
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 16, 16
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-5-55*(Anim=651)
hitsound   = s5,5
guardsound = S6,2
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(17)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 0, PosSet]
type = PosSet
trigger1 = animelem = 22
y = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

; C. LIGHT PUNCH
[Statedef 400]
type = C
movetype = A
physics = C
anim = 400
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, VarAdd] ;Magic series limiter
type = VarAdd
triggerall = var(54)=0 ;Limit non-EMO
trigger1 = !time
var(14) = 1
ignorehitpause = 1
;persistent =

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 0, 0
persistent = 0

[State 240, 2]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 5
trigger2 = animelem = 6
trigger3 = animelem = 7
trigger4 = animelem = 8
attr = C, NA
animtype = Light
damage = ceil(ifElse(fvar(11) * 20 < 1, 1, fvar(11) * 20)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-42
hitsound   = s5,0
guardsound = S6,0
ground.type = low
ground.slidetime = 8;7
ground.hittime = 8;7
ground.velocity = -2.5  ;-3
guard.velocity = -4.5
airguard.velocity = -2,-1.1
air.velocity = -2,-2
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 5
trigger2 = animelem = 6
trigger3 = animelem = 7
trigger4 = animelem = 8
attr = C, NA
animtype = Light
damage = ceil(ifElse(fvar(11) * 20 < 1, 1, fvar(11) * 20)), 0
guardflag = LA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-42
hitsound   = s5,0
guardsound = S6,0
ground.type = low
ground.slidetime = 8;7
ground.hittime = 8;7
ground.velocity = -2.5  ;-3
guard.velocity = -4.5
airguard.velocity = -2,-1.1
air.velocity = -2,-2
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(9)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 400, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11+(command != "holddown")
ctrl = 1

; C. MEDIUM PUNCH
[Statedef 410]
type = C
movetype = A
physics = C
anim = 410
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, VarAdd] ;Magic series limiter
type = VarAdd
triggerall = var(54)=0 ;Limit non-EMO
trigger1 = !time
var(14) = 1
ignorehitpause = 1
;persistent =

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 7
value = 0, 1
persistent = 0

[State 240, 2]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 8
trigger2 = animelem = 9
trigger3 = animelem = 10
trigger4 = animelem = 11
attr = C, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 30 < 1, 1, fvar(11) * 30)), 0
guardflag = LA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 12, 12
guard.pausetime = 12,12
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-47
hitsound   = s5,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -2.2,-1
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 8
trigger2 = animelem = 9
trigger3 = animelem = 10
trigger4 = animelem = 11
attr = C, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 30 < 1, 1, fvar(11) * 30)), 0
guardflag = LA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 12, 12
guard.pausetime = 12,12
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-47
hitsound   = s5,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -2.2,-1
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(12)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 400, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11+(command != "holddown")
ctrl = 1

; C. STRONG PUNCH
[Statedef 420]
type = C
movetype = I
physics = C
anim = 420
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 0 ;7
hitcountpersist = 1
;movehitpersist = 1

[State 0, Width]
type = Width
trigger1 = 1
value = 20,20
ignorehitpause = 1

[State 0, VarAdd] ;charge
type = VarAdd
triggerall = var(12)<60
trigger1 = NumExplod(90000221)
var(12) = 1 + var(54)
ignorehitpause = 1
;persistent =

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,3+random%3
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 0, Explod]
type = Explod
triggerall = var(12)<60
triggerall = !NumExplod(17100)
triggerall = !IsHelper
trigger1 = AnimElemTime(3)>=0
trigger1 = time>9
anim = 17100
ID = 17100
pos = 0,0
postype = p1  ;p2,front,back,left,right
scale = 0.5,0.5
bindtime = -1
removetime = -2
ownpal = 1
removeongethit = 1
ignorehitpause = 1
;persistent = 0

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 400, End]
type = ChangeState
triggerall = time>9
trigger1 = !AILevel
trigger1 = !NumExplod(90000221) ;release button
trigger2 = AILevel && (inguarddist || enemynear,movetype=A || p2dist x<10  || enemynear,vel x>=1)
trigger3 = AILevel && time>(30+random%30)
value = 421
ctrl = 0

; C. SP (LAUNCH)
[Statedef 421]
type = A
movetype = A
physics = N
anim = 421
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 0;7
hitcountpersist = 1
movehitpersist = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 17100
ignorehitpause = 1
;persistent =

[State 0, Width]
type = null;Width
trigger1 = !time
value = 30,30
ignorehitpause = 1
persistent = 0


[State 0, PosAdd]
type = PosAdd
trigger1 = !time
x = 30
ignorehitpause = 1
persistent = 0

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = null;BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4] ;hack for handling jump states
type     = posset
triggerall = NumHelper(500) && NumHelper(501) && NumHelper(502)
trigger1 = ishelper(666)
trigger1 = root,statetype!=A
postype  = p1
x        = helper(500), pos x - helper(501), var((var(1))) ; + 160
y        = helper(500), pos y - helper(502), var((var(1)))
[State -4] ;hack for handling jump states
type     = posset
triggerall = NumHelper(550) && NumHelper(551) && NumHelper(552)
trigger1 = ishelper(667)
trigger1 = root,statetype!=A
postype  = p1
x        = helper(550), pos x - helper(551), var((var(1))) ; + 160
y        = helper(550), pos y - helper(552), var((var(1)))
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 242, 1] ;jump/woosh
type = PlaySnd
trigger1 = AnimElem=1
value = 420,0
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = !Time
x = 2 +var(12)/10.0
y = -4-var(12)/10.0
ignorehitpause = 1
persistent = 0

[State 40, 4]; gravity
type = Veladd
trigger1 = time>0
y = 0.9

[State 420, 3]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
attr = A, NA
;damage = 40,0
damage = ceil(ifElse(fvar(11) * (40+var(12)/10.0) < 1, 1, fvar(11) * (40+var(12)/10.0))), 0
hitflag = MAF
guardflag = MA
affectteam = E
priority = 4, Hit
pausetime = 15,15
guard.pausetime = 15,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = 10,-105
hitsound   = s420,1
guardsound = S6,1
animtype = DiagUp
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -1-(var(12)/10.0),-7.5-(var(12)/10.0);-9.5-(var(12)/10.0)
guard.velocity = -9
air.velocity = ifelse(p2movetype=H,-3,-1),ifelse(p2movetype=H,-5,-10)
fall = 1
fall.recover = 0
air.animtype = DiagUp
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,210),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.45
numhits = 0
ID = 1098
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 420, 3]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
attr = A, NA
;damage = 40,0
damage = ceil(ifElse(fvar(11) * (40+var(12)/10.0) < 1, 1, fvar(11) * (40+var(12)/10.0))), 0
hitflag = MAF
guardflag = MA
affectteam = B
priority = 4, Hit
pausetime = 15,15
guard.pausetime = 15,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = 10,-105
hitsound   = s5, 2
guardsound = S6,1
animtype = DiagUp
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -1-(var(12)/10.0),-7.5-(var(12)/10.0);-9.5-(var(12)/10.0)
guard.velocity = -9
air.velocity = ifelse(p2movetype=H,-3,-1),ifelse(p2movetype=H,-5,-10)
fall = 1
fall.recover = 0
air.animtype = DiagUp
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,210),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.45
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(6)>=0
value = 0
ignorehitpause = 1
persistent = 0

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 400, End]
type = ChangeState
trigger1 = time>9
trigger1 = pos y>=0
value = 422
ctrl = 0

; C. SP (LAND)
[Statedef 422]
type = C
movetype = I
physics = C
anim = 422
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 0;7
hitcountpersist = 1
;movehitpersist = 1

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 241, 1]  ;land sound
type = PlaySnd
trigger1 = !time
value = 40, 0
persistent = 0


;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone


[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 400, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11+(command != "holddown")
ctrl = 1

; C. LIGHT KICK
[Statedef 430]
type = C
movetype = A
physics = C
anim = 430
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, VarAdd] ;Magic series limiter
type = VarAdd
triggerall = var(54)=0 ;Limit non-EMO
trigger1 = !time
var(14) = 1
ignorehitpause = 1
;persistent =

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 3
persistent = 0

[State 240, 2]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
attr = C, NA
animtype = Light
damage = ceil(ifElse(fvar(11) * 26 < 1, 1, fvar(11) * 26)), 0
guardflag = LA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-18
hitsound   = s5,3
guardsound = S6,0
ground.type = low
ground.slidetime = 8;7
ground.hittime = 8;7
ground.velocity = -2.5  ;-3
guard.velocity = -4.5
airguard.velocity = -2,-1.1
air.velocity = -2,-2
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
attr = C, NA
animtype = Light
damage = ceil(ifElse(fvar(11) * 26 < 1, 1, fvar(11) * 26)), 0
guardflag = LA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-18
hitsound   = s5,3
guardsound = S6,0
ground.type = low
ground.slidetime = 8;7
ground.hittime = 8;7
ground.velocity = -2.5  ;-3
guard.velocity = -4.5
airguard.velocity = -2,-1.1
air.velocity = -2,-2
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(10)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 400, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11+(command != "holddown")
ctrl = 1

; C. MEDIUM KICK
[Statedef 440]
type = C
movetype = A
physics = C
anim = 440
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, VarAdd] ;Magic series limiter
type = VarAdd
triggerall = var(54)=0 ;Limit non-EMO
trigger1 = !time
var(14) = 1
ignorehitpause = 1
;persistent =

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 7
value = 0, 4
persistent = 0

[State 240, 2]
type = HitDef
triggerall = !NumTarget(440)
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 8
trigger2 = animelem = 9
trigger3 = animelem = 10
trigger4 = animelem = 11
attr = C, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 35 < 1, 1, fvar(11) * 35)), 0
hitflag = MAFD
guardflag = L
affectteam = E
pausetime = 12,12
guard.pausetime = 12,12
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-15
hitsound   = s5,4
guardsound = S6,0
ground.type = low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -6
air.velocity = -2,-1
down.velocity = -3,0
down.hittime = 20
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = Cond(P2StateType = L,440,1098) ;c.MK replant fix
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumTarget(440)
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 8
trigger2 = animelem = 9
trigger3 = animelem = 10
trigger4 = animelem = 11
attr = C, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 35 < 1, 1, fvar(11) * 35)), 0
hitflag = MAFD
guardflag = L
affectteam = B
pausetime = 12,12
guard.pausetime = 12,12
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-15
hitsound   = s5,4
guardsound = S6,0
ground.type = low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -6
air.velocity = -2,-1
down.velocity = -3,0
down.hittime = 20
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = Cond(P2StateType = L,440,stateno) ;c.MK replant fix edited
;ID = 1030
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(12)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 400, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11+(command != "holddown")
ctrl = 1

; C. STRONG KICK
[Statedef 450]
type = C
movetype = A
physics = C
anim = 450
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 0, VarAdd] ;Magic series limiter
type = VarAdd
triggerall = var(54)=0 ;Limit non-EMO
trigger1 = !time
var(14) = 1
ignorehitpause = 1
;persistent =

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 10
value = 0, 5
persistent = 0

[State 240, 2]
type = HitDef
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 11
trigger2 = animelem = 12
trigger3 = animelem = 13
trigger4 = animelem = 14
attr = C, NA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 45 < 1, 1, fvar(11) * 45)), 0
hitflag = MAF
guardflag = L
affectteam = E
pausetime = 13,13
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-50
hitsound   = s5,5
guardsound = s6,1
ground.type = Low ;Trip
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2,-3
guard.velocity = -9
air.velocity = -3,-1
guard.velocity = -3
down.velocity = -3,0
down.hittime = 20
fall = 1
fall.recover = 0
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 11
trigger2 = animelem = 12
trigger3 = animelem = 13
trigger4 = animelem = 14
attr = C, NA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 45 < 1, 1, fvar(11) * 45)), 0
hitflag = MAF
guardflag = L
affectteam = B
pausetime = 13,13
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-50
hitsound   = s5,5
guardsound = s6,1
ground.type = Low ;Trip
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2,-3
guard.velocity = -9
air.velocity = -3,-1
guard.velocity = -3
down.velocity = -3,0
down.hittime = 20
fall = 1
fall.recover = 0
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(15)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 400, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11+(command != "holddown")
ctrl = 1

; J. LIGHT PUNCH
[Statedef 600]
type = A
movetype = A
physics = A
anim = 600
ctrl = 0
poweradd = 0
juggle = 2
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 0, 0
persistent = 0

[State -2, anti-fuzzy check]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(stateno)
trigger1 = movecontact
trigger1 = numtarget
anim = 9999
ID = stateno
pos = 0,0
postype = p1
removetime = abs(animtime)
removeongethit = 0
ignorehitpause = 1

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y >=0
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 5
trigger2 = animelem = 6
trigger3 = animelem = 7
trigger4 = animelem = 8
attr = A, NA
animtype = Light
damage = ceil(ifElse(fvar(11) * 19 < 1, 1, fvar(11) * 19)), 0
guardflag = HA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 10, 13
guard.pausetime = 10,12
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-60
hitsound   = s5,0
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = -3
air.velocity = -2,-4
airguard.cornerpush.veloff= 0
getpower= Cond(!NumHelper(4750),40,0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || NumExplod(52)=3)
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y <0
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 5
trigger2 = animelem = 6
trigger3 = animelem = 7
trigger4 = animelem = 8
attr = A, NA
animtype = Light
damage = ceil(ifElse(fvar(11) * 19 < 1, 1, fvar(11) * 19)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 10, 13
guard.pausetime = 10,12
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-60
hitsound   = s5,0
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = -3
air.velocity = -2,-4
airguard.cornerpush.veloff= 0
getpower= Cond(!NumHelper(4750),40,0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || NumExplod(52)=3)
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y >=0
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 5
trigger2 = animelem = 6
trigger3 = animelem = 7
trigger4 = animelem = 8
attr = A, NA
animtype = Light
damage = ceil(ifElse(fvar(11) * 19 < 1, 1, fvar(11) * 19)), 0
guardflag = HA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 10, 13
guard.pausetime = 10,12
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-60
hitsound   = s5,0
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = -3
air.velocity = -2,-4
airguard.cornerpush.veloff= 0
getpower= Cond(!NumHelper(4750),40,0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || NumExplod(52)=3)
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y <0
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 5
trigger2 = animelem = 6
trigger3 = animelem = 7
trigger4 = animelem = 8
attr = A, NA
animtype = Light
damage = ceil(ifElse(fvar(11) * 19 < 1, 1, fvar(11) * 19)), 0
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 10, 13
guard.pausetime = 10,12
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-60
hitsound   = s5,0
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = -3
air.velocity = -2,-4
airguard.cornerpush.veloff= 0
getpower= Cond(!NumHelper(4750),40,0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || NumExplod(52)=3)
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(9)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 50
ctrl = 1

; J. MEDIUM PUNCH
[Statedef 610]
type = A
movetype = A
physics = A
anim = 610
ctrl = 0
poweradd = 0
juggle = 2
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 1
persistent = 0

[State -2, anti-fuzzy check]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(stateno)
trigger1 = movecontact
trigger1 = numtarget
anim = 9999
ID = stateno
pos = 0,0
postype = p1
removetime = abs(animtime)
removeongethit = 0
ignorehitpause = 1

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y >=0
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
attr = A, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 25 < 1, 1, fvar(11) * 25)), 0
guardflag = HA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 11, 16
guard.pausetime = 11,15
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,1
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y <0
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
attr = A, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 25 < 1, 1, fvar(11) * 25)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 11, 16
guard.pausetime = 11,15
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,1
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y >=0
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
attr = A, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 25 < 1, 1, fvar(11) * 25)), 0
guardflag = HA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 11, 16
guard.pausetime = 11,15
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,1
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y <0
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
attr = A, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 25 < 1, 1, fvar(11) * 25)), 0
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 11, 16
guard.pausetime = 11,15
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,1
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(10)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 50
ctrl = 1

; J. STRONG PUNCH
[Statedef 620]
type = A
movetype = A
physics = A
anim = 620
ctrl = 0
poweradd = 0
juggle = 2
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 10
value = 0, 2
persistent = 0

[State -2, anti-fuzzy check]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(stateno)
trigger1 = movecontact
trigger1 = numtarget
anim = 9999
ID = stateno
pos = 0,0
postype = p1
removetime = abs(animtime)
removeongethit = 0
ignorehitpause = 1

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y >=0
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 11
trigger2 = animelem = 12
trigger3 = animelem = 13
trigger4 = animelem = 14
attr = A, NA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 38 < 1, 1, fvar(11) * 38)), 0
guardflag = HA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 16, 20
guard.pausetime = 16,18
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,2
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -6;,2
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (p2statetype=A) ;(numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
fall.recover = 0
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y <0
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 11
trigger2 = animelem = 12
trigger3 = animelem = 13
trigger4 = animelem = 14
attr = A, NA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 38 < 1, 1, fvar(11) * 38)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 16, 20
guard.pausetime = 16,18
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,2
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -6;,2
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (p2statetype=A) ;(numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
fall.recover = 0
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y >=0
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 11
trigger2 = animelem = 12
trigger3 = animelem = 13
trigger4 = animelem = 14
attr = A, HA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 38 < 1, 1, fvar(11) * 38)), 0
guardflag = HA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 16, 20
guard.pausetime = 16,18
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,2
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -6;,2
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (p2statetype=A) ;(numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
fall.recover = 0
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y <0
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 11
trigger2 = animelem = 12
trigger3 = animelem = 13
trigger4 = animelem = 14
attr = A, HA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 38 < 1, 1, fvar(11) * 38)), 0
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 16, 20
guard.pausetime = 16,18
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,2
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -6;,2
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (p2statetype=A) ;(numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
fall.recover = 0
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(15)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 50
ctrl = 0

; STOMP PUNCH
[Statedef 625]
type = A
movetype = A
physics = N
anim = 625
ctrl = 0
poweradd = 0
juggle = 0
hitcountpersist = 1
;movehitpersist = 1

[State 0, ChangeState] ; prevent infinite loop
type = ChangeState
triggerall = !time
trigger1 = !IsHelper
trigger1 = NumHelper(625) ;J.SP Limiter
value = 620
ctrl = 0
;anim =
ignorehitpause = 1
persistent =0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck
ignorehitpause = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 3000, Gravity]
type = Gravity
trigger1 =1

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 3000, PosFreeze]
type = PosFreeze
trigger1 = time = [1,10]
value = 1

[State 3000, VelSet]
type = VelSet
trigger1 = time > 10
x = 3
y = 22 ;11

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 10
value = 625, 0
persistent = 0

[State 0, Infinity FX]
type = Explod
triggerall = !NumHelper(625) ;J.SP Limiter
triggerall = !IsHelper
triggerall = !NumExplod(627)
trigger1 = !time
anim = 627
id = 627
pos = 0,0
postype = p1
supermovetime = 0 ;9999
pausemovetime = 0 ;9999
supermove = 1
removetime = -1
sprpriority = 2
ownpal = 1
bindtime = -1
scale = 1,1
removeongethit = 1
persistent = 0

[State -2, anti-fuzzy check]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(stateno)
trigger1 = movecontact
trigger1 = numtarget
anim = 9999
ID = stateno
pos = 0,0
postype = p1
removetime = abs(animtime)
removeongethit = 0
ignorehitpause = 1

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y >=0
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 10
trigger2 = animelem = 11
trigger3 = animelem = 12
trigger4 = animelem = 13
attr = A, NA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 38 < 1, 1, fvar(11) * 38)), 0
guardflag = HA
hitflag = MAFLD
affectteam = E
priority = 4, Hit
pausetime = 16, 16
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s625,1
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -6;,2
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
p2facing = 1
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y <0
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 10
trigger2 = animelem = 11
trigger3 = animelem = 12
trigger4 = animelem = 13
attr = A, NA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 38 < 1, 1, fvar(11) * 38)), 0
guardflag = MA
hitflag = MAFLD
affectteam = E
priority = 4, Hit
pausetime = 16, 16
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s625,1
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -6;,2
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
p2facing = 1
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y >=0
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 10
trigger2 = animelem = 11
trigger3 = animelem = 12
trigger4 = animelem = 13
attr = A, NA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 38 < 1, 1, fvar(11) * 38)), 0
guardflag = HA
hitflag = MAFLD
affectteam = B
priority = 4, Hit
pausetime = 16, 16
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,2
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -6;,2
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
p2facing = 1
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y <0
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 10
trigger2 = animelem = 11
trigger3 = animelem = 12
trigger4 = animelem = 13
attr = A, NA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 38 < 1, 1, fvar(11) * 38)), 0
guardflag = MA
hitflag = MAFLD
affectteam = B
priority = 4, Hit
pausetime = 16, 16
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,2
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -6;,2
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
p2facing = 1
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 3302, Helper Limiter]
type = Helper
triggerall = !IsHelper
triggerall = !NumHelper(625)
trigger1= movehit && numtarget
trigger1= (target,movetype=H) && !(target,time)
helpertype = normal
name = "Limiter"
ID = 625
stateno = 9999
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, TargetState]
type = TargetState
triggerall = !IsHelper
trigger1 = movehit ;contact
value = 651
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(14)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 3000, ChangeState]
type = ChangeState
triggerall = !ishelper
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 626
ctrl = 0

; Land from Stomp Punch
[Statedef 626]
type = C
movetype = I
physics = C
anim = 626
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 0

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone


[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause = 1
;persistent =

[State 3002, EnvShake]
type = EnvShake
trigger1 = !time
time = 12
ignorehitpause = 1
;persistent = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 627
ignorehitpause = 1
;persistent =

[State 240, 1]
type = PlaySnd
trigger1 = !time
value = 625,2
persistent = 0

[State -2, P2 Hit Ground Spark (front)] ;throw bounce
type = Explod
trigger1 = !time
trigger1 = !NumExplod(8402)
ID = 8402
anim = 8400
postype	= p1
pos = -4, -3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
ignorehitpause = 1
persistent = 0
[State -2, P2 Hit Ground Spark (back)] ;throw bounce
type = Explod
trigger1 = !time
trigger1 = !NumExplod(8403)
ID = 8403
anim = 8401
postype = p1
pos = -4, -3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -3
ignorehitpause = 1
persistent = 0

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 400, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11+(command != "holddown")
ctrl = 1

; J. LIGHT KICK
[Statedef 630]
type = A
movetype = A
physics = A
anim = 630
ctrl = 0
poweradd = 0
juggle = 2
hitcountpersist = 1
;movehitpersist = 1

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
triggerall = anim=630
trigger1 = animelem = 4
value = 0, 3
persistent = 0

[State -2, anti-fuzzy check]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(stateno)
trigger1 = movecontact
trigger1 = numtarget
anim = 9999
ID = stateno
pos = 0,0
postype = p1
removetime = abs(animtime)
removeongethit = 0
ignorehitpause = 1

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y >=0
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
triggerall = anim=630
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = A, NA
animtype = Light
damage = ceil(ifElse(fvar(11) * 23 < 1, 1, fvar(11) * 23)), 0
guardflag = HA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 10, 10
guard.pausetime = 10,9
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-15
hitsound   = s5,3
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = -3
air.velocity = -2,-4
airguard.cornerpush.veloff= 0
getpower= Cond(!NumHelper(4750),40,0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || NumExplod(52)=3)
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y <0
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
triggerall = anim=630
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = A, NA
animtype = Light
damage = ceil(ifElse(fvar(11) * 23 < 1, 1, fvar(11) * 23)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 10, 10
guard.pausetime = 10,9
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-15
hitsound   = s5,3
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = -3
air.velocity = -2,-4
airguard.cornerpush.veloff= 0
getpower= Cond(!NumHelper(4750),40,0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || NumExplod(52)=3)
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y >=0
triggerall = NumHelper(1030) && !IsHelper ;blitz
triggerall = anim=630
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = A, NA
animtype = Light
damage = ceil(ifElse(fvar(11) * 23 < 1, 1, fvar(11) * 23)), 0
guardflag = HA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 10, 10
guard.pausetime = 10,9
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-15
hitsound   = s5,3
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = -3
air.velocity = -2,-4
airguard.cornerpush.veloff= 0
getpower= Cond(!NumHelper(4750),40,0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || NumExplod(52)=3)
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y <0
triggerall = NumHelper(1030) && !IsHelper ;blitz
triggerall = anim=630
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = A, NA
animtype = Light
damage = ceil(ifElse(fvar(11) * 23 < 1, 1, fvar(11) * 23)), 0
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 10, 10
guard.pausetime = 10,9
sparkno = s7010
guard.sparkno = s7000
sparkxy = -20,-15
hitsound   = s5,3
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = -3
air.velocity = -2,-4
airguard.cornerpush.veloff= 0
getpower= Cond(!NumHelper(4750),40,0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || NumExplod(52)=3)
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0


[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 1400, Hold to stay in LK]
type = ChangeAnim
trigger1 = anim=630 && time>=8 && command!="holda"
value = 631

[State 0, AttackDist]
type = AttackDist
trigger1 = anim=631
value = 0
ignorehitpause = 1
;persistent =

[State 1400, EndState]
type = ChangeState
trigger1 = anim=631 && !animtime
value = 50
ctrl = 1

; J. MEDIUM KICK
[Statedef 640]
type = A
movetype = A
physics = A
ctrl = 0
poweradd = 0
juggle = 2
hitcountpersist = 1
;movehitpersist = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = IfElse(vel X=0,641,640)
ignorehitpause = 1
;persistent =

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 7
value = 0, 4
persistent = 0

[State -2, anti-fuzzy check]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(stateno)
trigger1 = movecontact
trigger1 = numtarget
anim = 9999
ID = stateno
pos = 0,0
postype = p1
removetime = abs(animtime)
removeongethit = 0
ignorehitpause = 1

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y >=0
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 8
trigger2 = animelem = 9
trigger3 = animelem = 10
trigger4 = animelem = 11
attr = A, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 32 < 1, 1, fvar(11) * 32)), 0
guardflag = HA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 11, 14
guard.pausetime = 11,14
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 15
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y <0
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 8
trigger2 = animelem = 9
trigger3 = animelem = 10
trigger4 = animelem = 11
attr = A, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 32 < 1, 1, fvar(11) * 32)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 11, 14
guard.pausetime = 11,14
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 15
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y >=0
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 8
trigger2 = animelem = 9
trigger3 = animelem = 10
trigger4 = animelem = 11
attr = A, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 32 < 1, 1, fvar(11) * 32)), 0
guardflag = HA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 11, 14
guard.pausetime = 11,14
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,4
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 15
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y <0
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 8
trigger2 = animelem = 9
trigger3 = animelem = 10
trigger4 = animelem = 11
attr = A, NA
animtype = Medium
damage = ceil(ifElse(fvar(11) * 32 < 1, 1, fvar(11) * 32)), 0
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 11, 14
guard.pausetime = 11,14
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-35
hitsound   = s5,4
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 15
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(12)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 50
ctrl = 1

; J. STRONG KICK
[Statedef 650]
type = A
movetype = A
physics = A
ctrl = 0
poweradd = 0
juggle = 2
hitcountpersist = 1
;movehitpersist = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = IfElse(vel X=0,651,650)
ignorehitpause = 1
;persistent =

;BEGIN Shadow Clone
[State -4, SprPriority]
type = SprPriority
trigger1 = IsHelper
value = IfElse(IsHelper(666),-1,-2)
ignorehitpause = 1
;persistent =
[State -4] ;State
type     = changestate
triggerall = NumHelper(500) && NumHelper(504)
trigger1 = ishelper(666)
trigger1 = helper(666), stateno != helper(504), var(( helper(500), var(2) ))
;trigger1 = helper(504), var(( helper(500), var(2) )) != [0, 110)
value    = helper(504), var(( helper(500), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(500) && NumHelper(503) && NumHelper(505)
trigger1 = ishelper(666)
value    = helper(503), var(( helper(500), var(2) ))
elem = helper(505), var(( helper(500), var(2) ))
ignorehitpause = 1
[State -4] ;State
type     = changestate
triggerall = NumHelper(550) && NumHelper(554)
trigger1 = ishelper(667)
trigger1 = helper(667), stateno != helper(554), var(( helper(550), var(2) ))
;trigger1 = helper(554), var(( helper(550), var(2) )) != [0, 110)
value    = helper(554), var(( helper(550), var(2) ))
[State -4] ;Anim/AnimElemno
type     = ChangeAnim
triggerall = NumHelper(550) && NumHelper(553) && NumHelper(555)
trigger1 = ishelper(667)
value    = helper(553), var(( helper(550), var(2) ))
elem = helper(555), var(( helper(550), var(2) ))
ignorehitpause = 1
[State -4, BindToRoot]
type = BindToRoot
trigger1 = ishelper
time = 1
facing = 0 ;root,facing
pos = 0,0
ignorehitpause = 1
;persistent =
[State -4]
type     = assertspecial
trigger1 = ishelper
flag     = invisible
ignorehitpause = 1
[State -4] ;Shadow Late
type     = afterimage
trigger1 = ishelper(667)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 256
ignorehitpause = 1
[State -4] ;Shadow Soon
type     = afterimage
trigger1 = ishelper(666)
time     = 999999
length   = 2
timegap  = 1
framegap = 1
palcontrast = 96, 96, 128
ignorehitpause = 1
[State -4]
type     = nothitby
trigger1 = ishelper
time     = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;END Shadow Clone

[State 9000, snd] ;assorted voices
type = playsnd
triggerall = random<150
trigger1 = time=1
value = 9000,10+random%5
channel = 0
lowpriority = 1
volumescale = 300
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 12
value = 0, 5
persistent = 0

[State -2, anti-fuzzy check]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(stateno)
trigger1 = movecontact
trigger1 = numtarget
anim = 9999
ID = stateno
pos = 0,0
postype = p1
removetime = abs(animtime)
removeongethit = 0
ignorehitpause = 1

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y >=0
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 13
trigger2 = animelem = 14
trigger3 = animelem = 15
trigger4 = animelem = 16
attr = A, NA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 47 < 1, 1, fvar(11) * 47)), 0
guardflag = HA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 16, 20
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-5-55*(Anim=651)
hitsound   = s5,5
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3+2*(Anim=650),-3+8*(Anim=650)
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (p2statetype=A) ;(numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
fall.recover = 0
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y <0
triggerall = (!NumHelper(1030) || IsHelper) ;No blitz
trigger1 = animelem = 13
trigger2 = animelem = 14
trigger3 = animelem = 15
trigger4 = animelem = 16
attr = A, NA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 47 < 1, 1, fvar(11) * 47)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 16, 20
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-5-55*(Anim=651)
hitsound   = s5,5
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3+2*(Anim=650),-3+8*(Anim=650)
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (p2statetype=A) ;(numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
fall.recover = 0
numhits = 0
nochainID = stateno ;1030
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y >=0
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 13
trigger2 = animelem = 14
trigger3 = animelem = 15
trigger4 = animelem = 16
attr = A, NA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 47 < 1, 1, fvar(11) * 47)), 0
guardflag = HA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 16, 20
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-5-55*(Anim=651)
hitsound   = s5,5
guardsound = S6,2
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3+2*(Anim=650),-3+8*(Anim=650)
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (p2statetype=A) ;(numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
fall.recover = 0
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0
[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno)
triggerall = Vel Y <0
triggerall = NumHelper(1030) && !IsHelper ;blitz
trigger1 = animelem = 13
trigger2 = animelem = 14
trigger3 = animelem = 15
trigger4 = animelem = 16
attr = A, NA
animtype = Hard
damage = ceil(ifElse(fvar(11) * 47 < 1, 1, fvar(11) * 47)), 0
guardflag = MA
hitflag = MAF
affectteam = B
priority = 4, Hit
pausetime = 16, 20
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-5-55*(Anim=651)
hitsound   = s5,5
guardsound = S6,2
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3+2*(Anim=650),-3+8*(Anim=650)
air.hittime = 12
air.animtype = back
getpower= Cond(!NumHelper(4750),ifelse(p2movetype=H,40,140),0),Cond(!NumHelper(4750),35,0)
givepower = 35,35
yaccel = 0.5
fall = (p2statetype=A) ;(numhelper(15999) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
fall.recover = 0
numhits = 0
ID = stateno ;Cond(!numtarget,1030,1031)
fall.envshake.ampl = id
persistent = 0

[State 0, HitAdd]
type = null;HitAdd
trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget(1030),1,0)
;ignorehitpause = 1
;persistent = 0
[State 0, HitAdd]
type = HitAdd
;trigger1 = NumHelper(1030)
trigger1 = movehit=1
value = IfElse(numtarget,1,0)
ignorehitpause = 1
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(17)>=0
value = 0
ignorehitpause = 1
;persistent =

[State -4, X_X] ;Kill helper if root gets hit
type     = destroyself
triggerall = Ishelper
trigger1 = root,var(54)=0
trigger2 = root, movetype = H
trigger3 = root,stateno=[120,155]
ignorehitpause = 1

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 50
ctrl = 0

;FWD Throw Attempt
[Statedef 800]
type = S
movetype = A
physics = S
juggle = 15
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 1
facep2 = 1
poweradd = Cond(!NumHelper(4750),20,0)

[State 4900, Projectile] ;EMO Killer
type = Projectile
trigger1 = var(54)>0 ;EMO Exit active
ProjID = 4900
projanim = 9999
projremove = 3;4
projremovetime = 3;4
ignorehitpause = 1
;persistent =
;Reset Emo
[State -4, VarSet]
type = VarSet
trigger1 = !time
var(54)=0
ignorehitpause = 1
;persistent =

[State 800, Don't Guard]
type = attackdist
trigger1 = 1
value = 0

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 1

[State 800, hit]
type = hitdef
trigger1 = animelem=3 && !var(38)
trigger1 = Var(0)=0 || enemy, AuthorName != "Team Z2";NEW
attr = S,NT
hitflag = M-
priority = 1,Miss
sparkno = -1
p1facing = 1
p2facing = 1
;p1stateno = 801
guard.dist = 0
fall = 1
fall.recover = 0
hitsound = s800,1
numhits = 0
[State 800, hit]
type = hitdef
trigger1 = animelem=3 && !var(38)
trigger1 = Var(0)>0 ;NEW
attr = S,NT
hitflag = M-
priority = 1,Miss
sparkno = -1
p1facing = 1
p2facing = 1
;p1stateno = 801
guard.dist = 0
fall = 1
fall.recover = 0
hitsound = s800,1
numhits = 0
id = Cond((enemynear, NumExplod(98000000)),800,801);NEW

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = NumTarget;updated
trigger1 = !(target, ishelper);updated
trigger1 = MoveHit
value = Anim
elem = 4 ; change this to animelemno of grab you wish frozen
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = MoveHit = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 15

[State 0, TargetState]
type = TargetState
trigger1 = MoveHit =1
trigger1 = NumTarget(800)
trigger1 = target, StateNo != [800,899]
trigger1 = target, AuthorName = "Team Z2"
value = 899
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = Var(0)=2
trigger1 = NumTarget(800)
trigger1 = target, time<=5
trigger1 = target, StateNo = 5949
value = 5940
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Var(0)=1
trigger1 = enemynear, StateNo = 950
value = 950
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = NumTarget(800)
trigger1 = target, time>=6
trigger1 = target, StateNo = 899
trigger2 = !NumTarget(800) || (NumTarget(800) && enemy, AuthorName != "Team Z2") ;AlexSin fix
trigger2 = MoveHit=1
value = 801
ignorehitpause = 1
persistent = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
movetype = I
ignorehitpause = 1
;persistent =

[State 200, missed voice]
type = PlaySnd
trigger1 = animelem = 4
value = 5000,0
channel = 0

[State Idle]
type = statetypeset
trigger1 = animelemtime(4)>=0
movetype = I

[State 800, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;F.GRAB
[Statedef 801]
type = S
movetype = A
physics = S
anim = 801
ctrl = 0
sprpriority = 5

[State 801, PlayerPush]
type = PlayerPush
trigger1 =  1
value = 0
ignorehitpause = 1
;persistent =

[State 801, width]
type = width
trigger1 = anim = 801
value = 55,30

[State 801, bind]
type=targetbind
trigger1= Anim=801 ;animelemtime(1)>=0 && animelemtime(2)<0
pos = 35,0

[State 801, Throw]
type = targetstate
trigger1 = !time
value = 802

[State 801, 1]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[State 801, HitAdd Normal throw]
type = HitAdd
trigger1 = prevstateno = 800
trigger1 = time=19 ;12
value = 1
ignorehitpause = 1
;persistent =


[State 801, hurt]
type = poweradd
trigger1 = time = 19 ;12
value = 180

[State 801, Normal throw]
type = TargetLifeAdd
trigger1 = prevstateno = 800
trigger1 = time = 19 ;12
value = -10
kill = 0

[State 801, Dash Collision]
type = TargetLifeAdd
trigger1 = prevstateno = 951
trigger1 = time = 19 ;12
value = -30
kill = 0

[State 801, hit sound]
type = PlaySnd
trigger1 = time=19 ;12
value = 5,0

[State 801, elbow hit spark]
type = Explod
trigger1 = time=19 ;12
anim = 7010
id = 7010
pos = 25,-70
postype = p1
sprpriority = 10
bindtime = -1
scale = 1,1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1
persistent = 0

[State 801, Hitting wall/ground sound effect]
type = PlaySnd
trigger1 = time=22;15
value = 15000, 2

[State 801, Ground spark front]
type = Explod
trigger1 = time=22;15
anim = 8400
id = 8400
pos = -4, -3
postype = p2
sprpriority = 4
bindtime = -1
scale = 1,1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1
persistent = 0
[State 801, Ground spark back]
type = Explod
trigger1 = time=22;15
anim = 8401
id = 8401
pos = -4, -3
postype = p2
sprpriority = -4
bindtime = -1
scale = 1,1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1
persistent = 0

[State 801, EnvShake]
type = EnvShake
trigger1 = time=22;15
trigger2 = time=57;33
trigger3 = time=72;44
trigger4 = time=87;55
;trigger5 = time=66
;trigger6 = time=77
;trigger7 = time=88
time = 8
ampl = -4
freq = 120

[State 801, HitAdd]
type = HitAdd
trigger1 = time=57;33
trigger2 = time=72;44
trigger3 = time=87;55
trigger4 = time=130
;trigger4 = time=66
;trigger5 = time=77
;trigger6 = time=88
value = 1
ignorehitpause = 1
;persistent =


[State 801, Normal throw]
type = TargetLifeAdd
trigger1 = time=57;33
trigger2 = time=72;44
trigger3 = time=87;55
;trigger4 = time=66
;trigger5 = time=77
;trigger6 = time=88
value = -10
kill = 0

[State 801, hit sound]
type = PlaySnd
trigger1 = time=57;33
trigger2 = time=72;44
trigger3 = time=87;55
;trigger4 = time=66
;trigger5 = time=77
;trigger6 = time=88
value = 5,3+random%2

[State 801, ChangeAnim]
type = ChangeAnim
trigger1 = anim=801
trigger1 = !animtime
value = 802
;ignorehitpause =
;persistent =

[State 801, kick hit spark]
type = Explod
trigger1 = time=57;33
trigger2 = time=72;44
trigger3 = time=87;55
;trigger4 = time=66
;trigger5 = time=77
;trigger6 = time=88
anim = 7010+10*(random%3)
id = 7010
pos = 20,-12
postype = p1
sprpriority = 10
bindtime = -1
scale = 1,1
random = 10,10
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 801, ChangeAnim]
type = ChangeAnim
trigger1 = anim=802
;trigger1 = !animtime
trigger1 = time=95
value = 803
;ignorehitpause =
;persistent =

[State 801, Normal throw]
type = TargetLifeAdd
trigger1 = time = 130
value = -20

[State 801, hit sound]
type = PlaySnd
trigger1 = time=130
value = 5,5 ;5,7

[State 801, last kick hit spark]
type = Explod
trigger1 = time=130
anim = 7030
id = 7010
pos = 60,-30
postype = p1
sprpriority = 10
bindtime = -1
scale = 1,1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 801, Exclamation]
type = null;Explod
trigger1 = time=130
anim = 808
id = 808
pos = 65,-40
postype = p1
sprpriority = 4
bindtime = -1
scale = 0.8,0.8 ;1,1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1
persistent = 0

[State 801, TargetVelSet]
type = TargetVelSet
trigger1 = time=130
x = -9
y = -4
;ignorehitpause =
;persistent =

[State 801, Throw]
type = targetstate
trigger1 = time=130
value = 803

[State 0, PosAdd] ;axis correction
type = PosAdd
trigger1 = Anim = 803
trigger1 = AnimelemTime(10)=0
x = 7
;ignorehitpause =
;persistent =


[State 801, EndState]
type = ChangeState
trigger1 = anim=803
trigger1 = !animtime
value = 0
ctrl = 1

;F.Enemy Thrown State
[Statedef 802]
type = S
movetype = H
physics = N
velset = 0,0
sprpriority = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 =  1
value = 0
ignorehitpause = 1
;persistent =

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noautoturn
ignorehitpause = 1
;persistent =

[State 182, 1]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0


[State 802, anim]
type = changeanim2
trigger1 = !time
value = 805

[State 820, 2]
type = SelfState
triggerall = time<10
trigger1 = !gethitvar(isbound)
value = 5050

[State 0, Turn]
type = Turn
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
ignorehitpause = 1
;persistent =

[State 3002, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 12
ignorehitpause = 1
;persistent = 0

[State 802, anim] ;foot stomp
type = changeanim2
trigger1 = time=57;33
trigger2 = time=72;44
trigger3 = time=87;55
;trigger4 = time=66
;trigger5 = time=77
;trigger6 = time=88
value = 806

[State 821, 4] ;Hit ground
type = null;SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

[State 801, end]
type = selfstate
;trigger1 = !animtime
trigger1= Time=200
value = 5100
ctrl = 0

; P2 Hit by Small Wire Attack (custom state)
[Statedef 803]
type = A
movetype = H
physics = N ;A
ctrl = 0
velset = 0,0
poweradd = 0
sprpriority = 2

[State 888, ChangeAnim]
type = ChangeAnim
trigger1 = !time && SelfAnimExist(5052)
value = 5052

[State 888, ChangeAnim2]
type = ChangeAnim2
trigger1 = !time && !SelfAnimExist(5052)
value = 888

[State 888, Gravity]
type = Gravity
trigger1 = 1

[State 888, VelAdd]
type = VelSet
trigger1 = !Time
x = IfElse(P2Dist X>=0,-5,5) ;-10
y = -4

[State 888, NotHitBy]
type = null ;NotHitBy
trigger1 = 1
value = SCA

[State 888, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 888, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 889

[State 888, ChangeState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100

;BACK Throw Attempt
[Statedef 810]
type = S
movetype = A
physics = S
juggle = 15
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 1
facep2 = 1
poweradd = Cond(!NumHelper(4750),20,0)

[State 4900, Projectile] ;EMO Killer
type = Projectile
trigger1 = var(54)>0 ;EMO Exit active
ProjID = 4900
projanim = 9999
projremove = 3;4
projremovetime = 3;4
ignorehitpause = 1
;persistent =
;Reset Emo
[State -4, VarSet]
type = VarSet
trigger1 = !time
var(54)=0
ignorehitpause = 1
;persistent =

[State 800, Don't Guard]
type = attackdist
trigger1 = 1
value = 0

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 1

[State 800, hit]
type = hitdef
trigger1 = animelem=3 && !var(38)
trigger1 = Var(0)=0 || enemy, AuthorName != "Team Z2";NEW
attr = S,NT
hitflag = M-
priority = 1,Miss
sparkno = -1
p1facing = 1
p2facing = 1
;p1stateno = 801
guard.dist = 0
fall = 1
fall.recover = 0
hitsound = s800,1
numhits = 0
[State 800, hit]
type = hitdef
trigger1 = animelem=3 && !var(38)
trigger1 = Var(0)>0 ;NEW
attr = S,NT
hitflag = M-
priority = 1,Miss
sparkno = -1
p1facing = 1
p2facing = 1
;p1stateno = 801
guard.dist = 0
fall = 1
fall.recover = 0
hitsound = s800,1
numhits = 0
id = Cond((enemynear, NumExplod(98000000)),800,801);NEW

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = MoveHit
value = Anim
elem = 4 ; change this to animelemno of grab you wish frozen
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = MoveHit = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 15

[State 0, TargetState]
type = TargetState
trigger1 = MoveHit =1
trigger1 = NumTarget(800)
trigger1 = target, StateNo != [800,899]
trigger1 = target, AuthorName = "Team Z2"
value = 899
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = Var(0)=2
trigger1 = NumTarget(800)
trigger1 = target, time<=5
trigger1 = target, StateNo = 5949
value = 5940
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Var(0)=1
trigger1 = enemynear, StateNo = 950
value = 950
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = NumTarget(800)
trigger1 = target, time>=6
trigger1 = target, StateNo = 899
trigger2 = !NumTarget(800) || (NumTarget(800) && enemy, AuthorName != "Team Z2") ;AlexSin fix
trigger2 = MoveHit=1
value = 811
ignorehitpause = 1
persistent = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
movetype = I
ignorehitpause = 1
;persistent =

[State 200, missed voice]
type = PlaySnd
trigger1 = animelem = 4
value = 5000,0
channel = 0

[State Idle]
type = statetypeset
trigger1 = animelemtime(4)>=0
movetype = I

[State 800, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;B.GRAB
[Statedef 811]
type = S
movetype = A
physics = S
anim = 810
ctrl = 0
sprpriority = 5

[State 801, PlayerPush]
type = PlayerPush
trigger1 =  1
value = 0
ignorehitpause = 1
;persistent =

[State 801, 1]
type = screenbound
;trigger1 = 1
trigger1 = AnimelemTime(25)<=0
value = 0
movecamera = 0,0

[State 801, arm]
type = Explod
trigger1 = !time
anim = 811
id = 811
pos = 0,0
postype = p1
sprpriority = -10
bindtime = -1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
persistent = 0

[State 801, Throw]
type = targetstate
trigger1 = !time
value = 812

[State 801, width]
type = width
trigger1 = anim = 810
value = 55,10

[State 801, bind]
type=targetbind
trigger1= AnimElemTime(1)>=0 && AnimElemTime(2)<0
pos = 50,-92

[State 801, bind]
type=targetbind
trigger1= Anim=810
trigger1= AnimElemTime(2)>=0
trigger1 = AnimelemTime(22)<=0
pos = 37,-85

[State 801, hurt]
type = poweradd
trigger1 = AnimelemTime(4)=0
value = 180

[State 801, woosh sound]
type = PlaySnd
trigger1 = AnimelemTime(3)=0
trigger2 = AnimelemTime(8)=0
trigger3 = AnimelemTime(13)=0
value = 0,3+random%3

[State 801, Normal throw]
type = TargetLifeAdd
trigger1 = AnimelemTime(4)=0
trigger2 = AnimelemTime(9)=0
trigger3 = AnimelemTime(14)=0
value = -15
kill = 0

[State 801, HitAdd]
type = HitAdd
trigger1 = AnimelemTime(4)=0
trigger2 = AnimelemTime(9)=0
trigger3 = AnimelemTime(14)=0
trigger4 = AnimelemTime(26)=0
value = 1
ignorehitpause = 1
;persistent =

[State 801, elbow hit spark]
type = Explod
trigger1 = AnimelemTime(4)=0
trigger2 = AnimelemTime(9)=0
trigger3 = AnimelemTime(14)=0
anim = 7010
id = 7010
pos = 33,-65
postype = p1
sprpriority = 10
bindtime = -1
scale = 1,1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 801, hit sound]
type = PlaySnd
trigger1 = AnimelemTime(4)=0
trigger2 = AnimelemTime(9)=0
trigger3 = AnimelemTime(14)=0
value = 5,3+random%3

[State 801, EnvShake]
type = EnvShake
trigger1 = AnimelemTime(4)=0
trigger2 = AnimelemTime(9)=0
trigger3 = AnimelemTime(14)=0
trigger4 = AnimelemTime(26)=0
time = 8
ampl = -4
freq = 120

[State 801, teleport sound]
type = PlaySnd
trigger1 = AnimelemTime(22)=0
value = 810,0

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimelemTime(23)=0
x = 100
ignorehitpause = 1
;persistent =

[State 0, Turn]
type = Turn
trigger1 = AnimelemTime(24)=0
ignorehitpause = 1
;persistent =

[State 801, bind]
type=targetbind
trigger1 = AnimelemTime(24)>=0
trigger1 = AnimelemTime(26)<=0
pos = 63,-85

[State 801, woosh sound]
type = PlaySnd
trigger1 = AnimelemTime(25)=0
value = 0,2

[State 801, elbow hit spark]
type = Explod
trigger1 = AnimelemTime(26)=0
anim = 7020
id = 7020
pos = 65,-70
postype = p1
sprpriority = 10
bindtime = -1
scale = 1,1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 801, Normal throw]
type = TargetLifeAdd
trigger1 = AnimelemTime(26)=0
value = -20

[State 801, hit sound]
type = PlaySnd
trigger1 = AnimelemTime(26)=0
value = 5,6

[State 801, Throw]
type = targetstate
trigger1 = AnimelemTime(26)=0
value = 803

[State 801, bind]
type=targetbind
trigger1 = AnimelemTime(26)=0
pos = 63,-20 ;-85

[State 801, TargetVelSet]
type = TargetVelSet
trigger1 = AnimelemTime(26)=0
x = -9
y = -4
;ignorehitpause =
;persistent =

[State 801, EndState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;B.Enemy Thrown State
[Statedef 812]
type = S
movetype = H
physics = N
velset = 0,0
sprpriority = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 =  1
value = 0
ignorehitpause = 1
;persistent =

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noautoturn
ignorehitpause = 1
;persistent =

[State 182, 1]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0


[State 802, anim]
type = changeanim2
trigger1 = !time
value = 815

[State 820, 2]
type = SelfState
triggerall = time<10
trigger1 = !gethitvar(isbound)
value = 5050

[State 0, Turn]
type = Turn
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
ignorehitpause = 1
;persistent =

[State 3002, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 12
ignorehitpause = 1
;persistent = 0

[State 0, ChangeAnim2] ;freeze anim
type = ChangeAnim2
trigger1 = time>90
value = 815
elem = 4
ignorehitpause = 1
;persistent =

[State 801, end]
type = selfstate
;trigger1 = !animtime
trigger1= Time=200
value = 5100
ctrl = 0

;AIR Throw Attempt
[Statedef 850]
type = A
movetype = A
physics = N
juggle = 15
;velset = 0,0
ctrl = 0
anim = 850
sprpriority = 1
facep2 = 1
;poweradd = 20

[State 4900, Projectile] ;EMO Killer
type = Projectile
trigger1 = var(54)>0 ;EMO Exit active
ProjID = 4900
projanim = 9999
projremove = 3;4
projremovetime = 3;4
ignorehitpause = 1
;persistent =
;Reset Emo
[State -4, VarSet]
type = VarSet
trigger1 = !time
var(54)=0
ignorehitpause = 1
;persistent =

[State 800, Don't Guard]
type = attackdist
trigger1 = 1
value = 0

[State 0, VelSet] ;slow down
type = VelSet
trigger1 = !time
;trigger1 = Animelemtime(4)<0
x = ceil(Vel X/2.0)
y = ceil(Vel Y/2.0)
ignorehitpause = 1
;persistent =


[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 1

[State 800, hit]
type = hitdef
trigger1 = animelem=3
attr = A,NT
hitflag = A-
priority = 1,Miss
sparkno = -1
p1facing = 1
p2facing = 1
;p1stateno = 801
guard.dist = 0
fall = 1
fall.recover = 0
hitsound = s800,1
numhits = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = NumTarget;updated
trigger1 = !(target, ishelper);updated
trigger1 = MoveHit
value = Anim
elem = 4 ; change this to animelemno of grab you wish frozen
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = MoveHit = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 15

[State 0, ChangeState]
type = ChangeState
trigger1 = NumTarget
trigger1 = MoveHit=1
value = 851
ignorehitpause = 1
persistent = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
movetype = I
physics = A
ignorehitpause = 1
;persistent =

[State 200, missed voice]
type = PlaySnd
trigger1 = animelem = 4
value = 5000,0
channel = 0

[State Idle]
type = statetypeset
trigger1 = animelemtime(4)>=0
movetype = I

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 50
ctrl = 1

;A.GRAB
[Statedef 851]
type = A
movetype = A
physics = N
anim = 851
ctrl = 0
sprpriority = 5

[State 0, TargetState]
type = TargetState
trigger1 = !time
value = 855
ignorehitpause = 1
;persistent =

[State 0, VelSet] ;slow down
type = VelSet
trigger1 = !time
x = 0
y = 0
ignorehitpause = 1
;persistent =

[State 801, bind]
type=targetbind
trigger1= AnimElemTime(1)>=0 && AnimElemTime(2)<0
pos = 55,-82

[State 801, bind]
type=targetbind
trigger1= AnimElemTime(2)>=0 && AnimElemTime(3)<0
pos = 45,-110

[State 801, bind]
type=targetbind
trigger1= AnimElemTime(3)>=0 && AnimElemTime(4)<0
pos = 63,-57

[State 801, bind]
type=targetbind
trigger1= AnimElemTime(4)>=0 && AnimElemTime(5)<0
pos = 15,-20

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 0, 2
persistent = 0

[State 0, TargetVelSet]
type = TargetVelSet
trigger1 = AnimElemTime(5)=0
x = -0.5 ;0 ;0.2 ;0.6
y = 8
ignorehitpause = 1
;persistent =

[State 0, TargetState]
type = TargetState
triggerall = Anim=851
triggerall = Animelemtime(6)>=0
trigger1 = numtarget
trigger1 = target, pos Y>=-20
value = 857;1412 ;652
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = Animelemtime(12)=0
y = 16 ;13
ignorehitpause = 1
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 12
value = 1600,0
persistent = 0

[State 650, 3];Opponent in air sent to custom bounce state
type = HitDef
trigger1 = AnimElem = 12
attr = A, NT
;damage = 38,0
damage = 65, 0
hitflag = MAFD
;guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 3,3 ;12,12
sparkno = -1 ;s7030
guard.sparkno = s7000
sparkxy = -5,5 ;-30,-55
hitsound   = s5,2
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -6,8
;envshake.time = 12
;envshake.freq = 60
;envshake.ampl = 3
fall.recover = 0
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 180,0 ;ifelse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.35
;p2stateno = 651
fall = 1
kill = 0
id = 855

[State 1315, Sparks]
type=explod
trigger1= movehit && numtarget
trigger1= (target,movetype=H) && !(target,time)
anim=7030
sprpriority=8
postype=p1
pos=0,0
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100


[State 0, TargetState]
type = TargetState
;trigger1 = AnimElem = 12
trigger1 = movehit = 1
trigger1 = numtarget(855)
trigger1 = !(target, ishelper)
value = 856
ignorehitpause = 1
persistent = 0

[State 801, bind]
type=targetbind
trigger1 = Animelemtime(12)>=0
trigger1 = numtarget(855)
pos = 0,12
ignorehitpause = 1

[State 801, EnvShake]
type = EnvShake
trigger1 = pos Y>=-20
time = 12 ;8
ampl = -10
freq = 120
persistent = 0

[State -2, cracked ground buffer hack]
type = Explod
triggerall = numtarget(855)
trigger1 = pos Y>=-20
trigger1 = !NumExplod(859)
ID = 859
anim = 859
postype	= p2
pos = 0,-2
sprpriority = -10
removetime = -2
ignorehitpause = 1
persistent = 0

[State 240, 1]
type = PlaySnd
trigger1 = NumExplod(859)
value = 15000,0
persistent = 0

[State -2, P2 Hit Ground Spark (front)] ;throw bounce
type = Explod
triggerall = numtarget(855)
trigger1 = Target,StateNo = 652
trigger1 = !NumExplod(8402)
ID = 8402
anim = 8400
postype	= p2
pos = -4, -3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
ignorehitpause = 1
persistent = 0
[State -2, P2 Hit Ground Spark (back)] ;throw bounce
type = Explod
triggerall = numtarget(855)
trigger1 = Target,StateNo = 652
trigger1 = !NumExplod(8403)
ID = 8403
anim = 8401
postype = p2
pos = -4, -3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -3
ignorehitpause = 1
persistent = 0
[State -2, P2 Hit Ground Spark (front)] ;knee bounce
type = Explod
triggerall = numtarget(855)
trigger1 = pos Y>=-20
trigger1 = !NumExplod(8400)
ID = 8400
anim = 8400
postype	= p2
pos = -4, -3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
ignorehitpause = 1
persistent = 0
[State -2, P2 Hit Ground Spark (back)] ;knee bounce
type = Explod
triggerall = numtarget(855)
trigger1 = pos Y>=-20
trigger1 = !NumExplod(8401)
ID = 8401
anim = 8401
postype = p2
pos = -4, -3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -3
ignorehitpause = 1
persistent = 0

[State 801, Exclamation]
type = Explod
triggerall = numtarget(855)
trigger1 = pos Y>=-20
anim = 808
id = 808
pos = 5,0
postype = p1
sprpriority = -10
bindtime = -1
scale = 0.8,0.8 ;1,1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]  ;Broken Bone
type = PlaySnd
triggerall = numtarget(855)
trigger1 = pos Y>=-20
value = 800,4 ;3
channel = -1
volumescale = 300
ignorehitpause = 1
persistent =0

[State 1400, EndState]
type = ChangeState
triggerall = numtarget(855)
trigger1 = pos Y>=-20
value = 852

;A.GRAB LAND
[Statedef 852]
type = A
movetype = I
physics = N
anim = 852
velset = 0,0
ctrl = 0
sprpriority = 5

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = !time
value = -5
kill = 1
ignorehitpause = 1
;persistent =


[State 0, Offset]
type = Offset
trigger1 = AnimElemTime(3)>=0 && AnimElemTime(5)<0
y = random%4
ignorehitpause = 1
;persistent =


[State 0, Pause]
type = null;Pause
trigger1 = AnimElemTime(7)<0
trigger1 = gametime%3=0
time = 2
movetime = 0
;endcmdbuftime = 0
;pausebg = 1
ignorehitpause = 1
;persistent =


[State 0, VelSet]
type = VelSet
trigger1 = AnimElemTime(7)=0
x = -4
y = -4
ignorehitpause = 1
;persistent =

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 50
ctrl = 1

;A.Enemy Thrown State
[Statedef 855]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 =  1
value = 0
ignorehitpause = 1
;persistent =

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noautoturn
ignorehitpause = 1
;persistent =

[State 182, 1]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[State 802, anim]
type = changeanim2
trigger1 = !time
value = 855

[State 820, 2]
type = SelfState
trigger1 = time>30
;trigger1 = !gethitvar(isbound)
value = 5030

;P2 going to the ground from knee
[Statedef 856]
type = A
movetype = H
physics = N
ctrl = 0
sprpriority = -1
velset = 0,0

[State 3020, 2]
type = changeanim2
trigger1 = !time && anim !=856
value = 856

[State 3020, 2]
type = changeanim2
triggerall = time>10
trigger1 = Pos Y >=-10
trigger1 = anim !=857
value = 857


[State 3052, Land]
type = null;changestate
triggerall = time>30
trigger1 = Pos Y >=-10
value = 652

[State 820, 2]
type = SelfState
trigger1 = Anim=857
trigger1 = !animtime ;time>30 ;(30+20*(anim=857))
;trigger1 = !gethitvar(isbound)
value = 5110

; A.ET 1st Bounce
[Statedef 857]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim2
trigger1= !time
value = 1412

[State 0, PosAdd] ;knee drop
type = PosAdd
trigger1 = Time = 0
x = 40
ignorehitpause = 1
persistent = 0

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.5

[State 5100, 12]
type = SelfState
trigger1 = time=30 ;AnimTime = 0
value = 5050

;----------------------------
;Enemy Grabbed
[Statedef 899]
type    = S
movetype= H
physics = N

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 899

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, ChangeState]
type = SelfState ;ChangeState ;AlexSin fix
trigger1 = ((NumExplod(90000800))|| (command = "x" && command = "a")) && command != "up"
value = Cond(enemynear,Var(0)=1,950,5940)

[State 0, ChangeState]
type = Selfstate;ChangeState ;AlexSin fix
trigger1 = Time >= 6
value = 0
ctrl = 1
